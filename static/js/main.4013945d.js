/*! For license information please see main.4013945d.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function z(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function U(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function V(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case S:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function $(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,xe=null,Ie=null;function Se(e){if(e=_i(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),be(e.stateNode,e.type,t))}}function Ee(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,ze=!1,je=null,Ue={onError:function(e){Me=!0,Fe=e}};function Ve(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ue,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ht(u):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,bt,xt,It,St,Et=!1,Tt=[],Ct=null,Nt=null,At=null,Pt=new Map,Dt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ke=r,n.target.dispatchEvent(r),ke=null,t.shift()}return!0}function jt(e,t,n){zt(e)&&n.delete(t)}function Ut(){Et=!1,null!==Ct&&zt(Ct)&&(Ct=null),null!==Nt&&zt(Nt)&&(Nt=null),null!==At&&zt(At)&&(At=null),Pt.forEach(jt),Dt.forEach(jt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function qt(e){function t(t){return Vt(t,e)}if(0<Tt.length){Vt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==Nt&&Vt(Nt,e),null!==At&&Vt(At,e),Pt.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var Bt=k.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=_t,a=Bt.transition;Bt.transition=null;try{_t=1,Ht(e,t,n,r)}finally{_t=i,Bt.transition=a}}function Gt(e,t,n,r){var i=_t,a=Bt.transition;Bt.transition=null;try{_t=4,Ht(e,t,n,r)}finally{_t=i,Bt.transition=a}}function Ht(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=_i(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=F({},cn,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(gn),kn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return In}var En=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Pn),Rn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),zn=String.fromCharCode(32),jn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ee(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){zr(e,0)}function Yn(e){if(H(ki(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(l){var $n;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Kn(t,Hn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,_r=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Sr(e){if(xr[e])return xr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Er=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),s(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Or=Pr[Rr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Er,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,ze||(ze=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(ze)throw e=je,ze=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Jt(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Er:case Tr:case Cr:s=mn;break;case Nr:s=An;break;case"scroll":s=fn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=De(p,f))&&l.push(Kr(p,v,d)))),h)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===ke||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==s?u:ki(s),d=null==c?u:ki(c),(u=new l(v,p+"leave",s,n,i)).target=h,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,s&&c)e:{for(f=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=f;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)f=Hr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Hr(l),f=Hr(f)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(s=(u=r?ki(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Jn;else if(Wn(u))if(Xn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?ki(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,kr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":kr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else qn?Un(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==_?"onCompositionEnd"===_&&qn&&(g=en()):($t="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(m=Gr(r,_)).length&&(_=new kn(_,e,null,n,i),o.push({event:_,listeners:m}),g?_.data=g:null!==(g=Vn(n))&&(_.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(jn=!0,zn);case"textInput":return(e=t.data)===zn&&jn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!On&&Un(e,t)?(e=en(),Zt=$t=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new kn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}zr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=De(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var bi=[],xi=-1;function Ii(e){return{current:e}}function Si(e){0>xi||(e.current=bi[xi],bi[xi]=null,xi--)}function Ei(e,t){xi++,bi[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Si(Ni),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ei(Ci,e)):Si(Ni),Ei(Ni,n)}var zi=null,ji=!1,Ui=!1;function Vi(e){null===zi?zi=[e]:zi.push(e)}function qi(){if(!Ui&&null!==zi){Ui=!0;var e=0,t=_t;try{var n=zi;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zi=null,ji=!1}catch(i){throw null!==zi&&(zi=zi.slice(e+1)),He(Ze,qi),i}finally{_t=t,Ui=!1}}return null}var Bi=[],Wi=0,Ki=null,Gi=0,Hi=[],Qi=0,Yi=null,Ji=1,Xi="";function $i(e,t){Bi[Wi++]=Gi,Bi[Wi++]=Ki,Ki=e,Gi=t}function Zi(e,t,n){Hi[Qi++]=Ji,Hi[Qi++]=Xi,Hi[Qi++]=Yi,Yi=e;var r=Ji;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Ji=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=Bi[--Wi],Bi[Wi]=null,Gi=Bi[--Wi],Bi[Wi]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Xi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=k.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ii(null),ga=null,_a=null,ka=null;function wa(){ka=_a=ga=null}function ba(e){var t=ma.current;Si(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ka=_a=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ku=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},null===_a){if(null===ga)throw Error(a(308));_a=e,ga.dependencies={lanes:0,firstContext:e}}else _a=_a.next=e;return t}var Ea=null;function Ta(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var h=i.baseState;for(o=0,l=c=s=null,u=a;;){var f=u.lane,d=u.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[u]:f.push(u))}else d={eventTime:d,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=h):l=l.next=d,o|=f;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(f=u).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(s=h),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=h}}function za(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Ua(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Va={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function Ba(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Di(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Di(t)?Ai:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ua(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Va.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case b:return(t=jc(t,e.mode,n)).return=e,t;case D:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case b:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<u.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,u[v],s);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===u.length)return n(i,h),ia&&$i(i,v),c;if(null===h){for(;v<u.length;v++)null!==(h=f(i,u[v],s))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&$i(i,v),c}for(h=r(i,h);v<u.length;v++)null!==(y=p(h,i,v,u[v],s))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),ia&&$i(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var h=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var _=d(i,v,g.value,c);if(null===_){null===v&&(v=m);break}e&&v&&null===_.alternate&&t(i,v),u=o(_,u,y),null===h?l=_:h.sibling=_,h=_,v=m}if(g.done)return n(i,v),ia&&$i(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=f(i,g.value,c))&&(u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return ia&&$i(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&$i(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ga(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ga(r,a,o),s.return=r,r=s)}return u(r);case b:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=zc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ja=Ya(!0),Xa=Ya(!1),$a={},Za=Ii($a),eo=Ii($a),to=Ii($a);function no(e){if(e===$a)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,$a),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ei(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=k.ReactCurrentDispatcher,fo=k.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,_o=!1,ko=0,wo=0;function bo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),_o){o=0;do{if(_o=!1,ko=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,ho.current=cu,e=n(r,i)}while(_o)}if(ho.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==ko;return ko=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=f,u=r):c=c.next=f,vo.lanes|=h,Fs|=h}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(ku=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(ku=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Do(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,ku=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function zo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Uo(){return To().memoizedState}function Vo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function Bo(e,t){return Vo(8390656,8,e,t)}function Wo(e,t){return qo(2048,8,e,t)}function Ko(e,t){return qo(4,2,e,t)}function Go(e,t){return qo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ku=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{_t=n,fo.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){_o=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:zo,useDebugValue:Yo,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=zo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=As.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=ko++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:Jo,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Xo,useReducer:No,useRef:Uo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return $o(To(),yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:Jo,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Xo,useReducer:Ao,useRef:Uo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:$o(t,yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),fu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _u=k.ReactCurrentOwner,ku=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ja(t,e.child,n,r)}function bu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=So(),null===e||ku?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(ku=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(ku=!0)}}return Tu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Os,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Os,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Os,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Os,Rs),Rs|=r;return wu(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Di(n)?Ai:Ci.current;return a=Pi(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=So(),null===e||ku?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Wu(e,t),Ba(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Pi(t,c=Di(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Aa=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),s=t.memoizedState,u!==r||f!==s||Ni.current||Aa?("function"===typeof l&&(Ua(t,n,l,r),s=t.memoizedState),(u=Aa||qa(t,n,u,r,f,s,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Pi(t,s=Di(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==h||f!==s)&&Wa(t,o,r,s),Aa=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;u!==h||f!==p||Ni.current||Aa?("function"===typeof d&&(Ua(t,n,d,r),p=t.memoizedState),(c=Aa||qa(t,n,c,r,f,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,_u.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Pu(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Du,Ru,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function zu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):ju(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Uu(e,t,u,r=hu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Uu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Uu(e,t,u,r=hu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),ku||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return yc(),Uu(e,t,u,r=hu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=Ji,Hi[Qi++]=Xi,Hi[Qi++]=Yi,Ji=e.id,Xi=e.overflow,Yi=t),t=ju(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ju(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){return null!==r&&pa(r),Ja(t,e.child,null,n),(e=ju(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Di(t.type)&&Ri(),Hu(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ru(e,t),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":J(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fi]=t,e[di]=r,Du(e,t,!1,!1),t.stateNode=e;e:{switch(s=_e(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&_(e,o,l,s))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):yc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),Ru(e,t),null===e&&qr(t.stateNode.containerInfo),Hu(t),null;case 10:return ba(t.type._context),Hu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Bs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Xe()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ei(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return ba(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Du=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ju=!1,Xu=!1,$u="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var hs=null,fs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=hs,i=fs;hs=null,ds(e,t,n),fs=i,null!==(hs=r)&&(fs?(e=hs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hs.removeChild(n.stateNode));break;case 18:null!==hs&&(fs?(e=hs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(hs,n.stateNode));break;case 4:r=hs,i=fs,hs=n.stateNode.containerInfo,fs=!0,ds(e,t,n),hs=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $u),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:hs=s.stateNode,fs=!1;break e;case 3:case 4:hs=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===hs)throw Error(a(160));ps(o,u,i),hs=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){Sc(e,e.return,y)}try{rs(5,e,e.return)}catch(y){Sc(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(y){Sc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),_e(s,u);var l=_e(s,o);for(u=0;u<c.length;u+=2){var h=c[u],f=c[u+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):_(i,h,f,l)}switch(s){case"input":$(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Sc(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Sc(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(y){Sc(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=Xe())),4&r&&vs(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||h,ys(t,e),Xu=l):ys(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Zu=e,h=e.child;null!==h;){for(f=Zu=h;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Sc(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){bs(f);continue}}null!==p?(p.return=d,Zu=p):bs(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=f.stateNode,u=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Sc(e,e.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(y){Sc(e,e.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ys(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _s(e,t,n){Zu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ju;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=Ju;var c=Xu;if(Ju=o,(Xu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,ks(a,t,n),a=a.sibling;Zu=i,Ju=u,Xu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&za(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}za(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&qt(f)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function bs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{as(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Is,Ss=Math.ceil,Es=k.ReactCurrentDispatcher,Ts=k.ReactCurrentOwner,Cs=k.ReactCurrentBatchConfig,Ns=0,As=null,Ps=null,Ds=0,Rs=0,Os=Ii(0),Ls=0,Ms=null,Fs=0,zs=0,js=0,Us=null,Vs=null,qs=0,Bs=1/0,Ws=null,Ks=!1,Gs=null,Hs=null,Qs=!1,Ys=null,Js=0,Xs=0,$s=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ns)?Xe():-1!==Zs?Zs:Zs=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Ds?Ds&-Ds:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rc(e,t,n,r){if(50<Xs)throw Xs=0,$s=null,Error(a(185));mt(e,n,r),0!==(2&Ns)&&e===As||(e===As&&(0===(2&Ns)&&(zs|=n),4===Ls&&sc(e,Ds)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(Bs=Xe()+500,ji&&qi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ft(e,e===As?Ds:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Vi(e)}(cc.bind(null,e)):Vi(cc.bind(null,e)),oi((function(){0===(6&Ns)&&qi()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ft(e,e===As?Ds:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Ns;Ns|=2;var o=vc();for(As===e&&Ds===t||(Ws=null,Bs=Xe()+500,dc(e,t));;)try{_c();break}catch(s){pc(e,s)}wa(),Es.current=o,Ns=i,null!==Ps?t=0:(As=null,Ds=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,Vs,Ws);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=qs+500-Xe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Vs,Ws),t);break}bc(e,Vs,Ws);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Vs,Ws),r);break}bc(e,Vs,Ws);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Us;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Vs,Vs=n,null!==t&&uc(t)),e}function uc(e){null===Vs?Vs=e:Vs.push.apply(Vs,e)}function sc(e,t){for(t&=~js,t&=~zs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));xc();var t=ft(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Vs,Ws),ic(e,Xe()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(Bs=Xe()+500,ji&&qi())}}function hc(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&xc();var t=Ns;Ns|=1;var n=Cs.transition,r=_t;try{if(Cs.transition=null,_t=1,e)return e()}finally{_t=r,Cs.transition=n,0===(6&(Ns=t))&&qi()}}function fc(){Rs=Os.current,Si(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ps)for(n=Ps.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Si(Ni),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:ba(r.type._context);break;case 22:case 23:fc()}n=n.return}if(As=e,Ps=e=Oc(e.current,null),Ds=Rs=t,Ls=0,Ms=null,js=zs=Fs=0,Vs=Us=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function pc(e,t){for(;;){var n=Ps;try{if(wa(),ho.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,_o=!1,ko=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,Ps=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ds,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=s,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Us?Us=[o]:Us.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Hs||!Hs.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(k){t=k,Ps===n&&null!==n&&(Ps=n=n.return);continue}break}}function vc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function yc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===As||0===(268435455&Fs)&&0===(268435455&zs)||sc(As,Ds)}function mc(e,t){var n=Ns;Ns|=2;var r=vc();for(As===e&&Ds===t||(Ws=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Ns=n,Es.current=r,null!==Ps)throw Error(a(261));return As=null,Ds=0,Ls}function gc(){for(;null!==Ps;)kc(Ps)}function _c(){for(;null!==Ps&&!Ye();)kc(Ps)}function kc(e){var t=Is(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?wc(e):Ps=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Rs)))return void(Ps=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Ps=n);if(null===e)return Ls=6,void(Ps=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ps=t);Ps=t=e}while(null!==t);0===Ls&&(Ls=5)}function bc(e,t,n){var r=_t,i=Cs.transition;try{Cs.transition=null,_t=1,function(e,t,n,r){do{xc()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Ps=As=null,Ds=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=_t;_t=1;var s=Ns;Ns|=4,Ts.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(s=u+i),f!==o||0!==r&&3!==f.nodeType||(c=u+r),3===f.nodeType&&(u+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++h===r&&(c=u),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,_=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ms(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,_s(n,e,i),Je(),Ns=s,_t=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,Js=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&Js)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===$s?Xs++:(Xs=0,$s=e):Xs=0,qi()}(e,t,n,r)}finally{Cs.transition=i,_t=r}return null}function xc(){if(null!==Ys){var e=kt(Js),t=Cs.transition,n=_t;try{if(Cs.transition=null,_t=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,Js=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var h=Zu;switch(h.tag){case 0:case 11:case 15:rs(8,h,o)}var f=h.child;if(null!==f)f.return=h,Zu=f;else for(;null!==Zu;){var d=(h=Zu).sibling,p=h.return;if(os(h),h===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var _=e.current;for(Zu=_;null!==Zu;){var k=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==k)k.return=u,Zu=k;else e:for(u=_;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(b){Sc(s,s.return,b)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ns=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{_t=n,Cs.transition=t}}return!1}function Ic(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Ds&n)===n&&(4===Ls||3===Ls&&(130023424&Ds)===Ds&&500>Xe()-qs?dc(e,0):js|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(mt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return He(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Pc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case I:u=8,i|=8;break;case S:return(e=Dc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Dc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Dc(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case T:u=9;break e;case C:u=11;break e;case P:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function qc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=qc(null),n=e.current,(a=Ra(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Is=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ku=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ku=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zu(e,t,n):(Ei(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ei(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Ku(e,t,n)}(e,t,n);ku=0!==(131072&e.flags)}else ku=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wu(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=Va,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=bu(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Pu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return zu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Wu(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),Ba(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,qr(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&Ns)&&(Bs=Xe()+500,qi()))}break;case 13:hc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},bt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},It=function(){return _t},St=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},be=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),$(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=hc;var tl={usingClientEntryPoint:!1,Events:[_i,ki,wi,Ee,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(hc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function _(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var k=_.prototype=new g;k.constructor=_,v(k,m.prototype),k.isPureReactComponent=!0;var w=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)b.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,k(e),!v)if(null!==r(c))v=!0,R(b);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function b(e,n){v=!1,y&&(y=!1,g(E),E=-1),p=!0;var a=d;try{for(k(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var u=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?f.callback=u:f===r(c)&&i(c),k(n)}else i(c);f=r(c)}if(null!==f)var s=!0;else{var h=r(l);null!==h&&O(w,h.startTime-n),s=!1}return s}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,S=null,E=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(I=!1,S=null)}}else I=!1}if("function"===typeof _)x=function(){_(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,D=P.port2;P.port1.onmessage=A,x=function(){D.postMessage(null)}}else x=function(){m(A,0)};function R(e){S=e,I||(I=!0,x())}function O(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(E),E=-1):y=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(b))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/General_Page/",function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return ne},SDK_VERSION:function(){return xt},_DEFAULT_ENTRY_NAME:function(){return lt},_addComponent:function(){return pt},_addOrOverwriteComponent:function(){return vt},_apps:function(){return ft},_clearComponents:function(){return _t},_components:function(){return dt},_getProvider:function(){return mt},_registerComponent:function(){return yt},_removeServiceInstance:function(){return gt},deleteApp:function(){return Tt},getApp:function(){return St},getApps:function(){return Et},initializeApp:function(){return It},onLog:function(){return At},registerVersion:function(){return Nt},setLogLevel:function(){return Pt}});var t=n(791),r=n(250);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(A){l=function(e,t,n){return e[t]=n}}function h(e,t,n,i){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=h;var d={};function p(){}function v(){}function y(){}var m={};l(m,u,(function(){return this}));var g=Object.getPrototypeOf,_=g&&g(g(C([])));_&&_!==t&&n.call(_,u)&&(m=_);var k=y.prototype=p.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function a(r,o,u,s){var c=f(e[r],e,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==i(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){a("next",e,u,s)}),(function(e){a("throw",e,u,s)})):t.resolve(h).then((function(e){l.value=e,u(l)}),(function(e){return a("throw",e,u,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=I(o,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function I(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:N}}function N(){return{value:void 0,done:!0}}return v.prototype=y,r(k,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,s,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(h(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(k),l(k,c,"Generator"),l(k,u,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function o(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(wn){return void n(wn)}u.done?t(s):Promise.resolve(s).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function u(e){o(a,r,i,u,s,"next",e)}function s(e){o(a,r,i,u,s,"throw",e)}u(void 0)}))}}function s(e){if(Array.isArray(e))return e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){return s(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||l(e,t)||h()}var d={btnComponent:"main_btnComponent__SLHLC",container:"main_container__kF8xf",btnGame:"main_btnGame__W5Ri6",btnContainerGame:"main_btnContainerGame__8yKF8",zoomIn:"main_zoomIn__aNLr2",wrapper:"main_wrapper__lZRQD",btnImage:"main_btnImage__iILwI",NavigationBtn:"main_NavigationBtn__G+pHg",blockCard:"main_blockCard__NjU24",name:"main_name__SDEhx",btn:"main_btn__BQW+U",BackBtn:"main_BackBtn__jsyEk",fon:"main_fon__OmWGI",bgSvg:"main_bgSvg__xMml2",authContainer:"main_authContainer__AOCT5",auth:"main_auth__Slqw0",login:"main_login__iBX-y",password:"main_password__wCH2n",errorRegister:"main_errorRegister__-A56t"};function p(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function v(e){return function(e){if(Array.isArray(e))return c(e)}(e)||p(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function m(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}function g(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function w(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function I(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function E(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function T(e){var t=E();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,n)}}function C(e,t,n){return C=E()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&x(i,n.prototype),i},C.apply(null,arguments)}function N(e){var t="function"===typeof Map?new Map:void 0;return N=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return C(e,arguments,S(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),x(n,e)},N(e)}var A=!1,P=!1,D="${JSCORE_VERSION}",R=function(e,t){if(!e)throw O(t)},O=function(e){return new Error("Firebase Database ("+D+") INTERNAL ASSERT FAILED: "+e)},L=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},M={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,h=(3&a)<<4|u>>4,f=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(L(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new F;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var h=u<<6&192|s;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},F=function(e){I(n,e);var t=T(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return w(n)}(N(Error)),z=function(e){var t=L(e);return M.encodeByteArray(t,!0)},j=function(e){return z(e).replace(/\./g,"")},U=function(e){try{return M.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function V(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=V(e[n],t[n]));return e}var q=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},B=function(){try{return q()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/General_Page",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&U(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},W=function(e){var t=function(e){var t,n;return null===(n=null===(t=B())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},K=function(){var e;return null===(e=B())||void 0===e?void 0:e.config},G=function(){function e(){var t=this;_(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return w(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function H(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[j(JSON.stringify({alg:"none",type:"JWT"})),j(JSON.stringify(a)),""].join(".")}function Q(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Y(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Q())}function J(){var e,t=null===(e=B())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function X(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function $(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Z(){var e=Q();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ee(){return!0===A||!0===P}function te(){try{return"object"===typeof indexedDB}catch(e){return!1}}var ne=function(e){I(n,e);var t=T(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(b(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(b(a),re.prototype.create),a}return w(n)}(N(Error)),re=function(){function e(t,n,r){_(this,e),this.service=t,this.serviceName=n,this.errors=r}return w(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ie,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ne(n,a,t)}}]),e}();var ie=/\{\$([^}]+)}/g;function ae(e){return JSON.parse(e)}function oe(e){return JSON.stringify(e)}var ue=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ae(U(a[0])||""),n=ae(U(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function se(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ce(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function le(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function he(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function fe(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(de(u)&&de(s)){if(!fe(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function de(e){return null!==e&&"object"===typeof e}function pe(e){for(var t=[],n=function(){var e=f(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ve(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=f(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ye(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var me=function(){function e(){_(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return w(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=f^l&(h^f),s=1518500249):(u=l^h^f,s=1859775393):p<60?(u=l&h|f&(l|h),s=2400959708):(u=l^h^f,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function ge(e,t){var n=new _e(e,t);return n.subscribe.bind(n)}var _e=function(){function e(t,n){var r=this;_(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return w(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=y(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ke),void 0===r.error&&(r.error=ke),void 0===r.complete&&(r.complete=ke);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ke(){}var we=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function be(e,t){return"".concat(e," failed: ").concat(t," argument ")}function xe(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(be(e,t)+"must be a valid function.")}function Ie(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(be(e,t)+"must be a valid context object.")}var Se=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Ee(e){return e&&e._delegate?e._delegate:e}var Te=function(){function e(t,n,r){_(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return w(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ce="[DEFAULT]",Ne=function(){function e(t,n){_(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return w(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new G;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ce})}catch(s){}var t,n=y(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=f(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(v(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),v(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=y(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=f(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(mx){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ce?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(mx){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce;return this.component?this.component.multipleInstances?e:Ce:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ae,Pe,De=function(){function e(t){_(this,e),this.name=t,this.providers=new Map}return w(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ne(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Re=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Pe||(Pe={}));var Oe={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},Le=Pe.INFO,Me=(g(Ae={},Pe.DEBUG,"log"),g(Ae,Pe.VERBOSE,"log"),g(Ae,Pe.INFO,"info"),g(Ae,Pe.WARN,"warn"),g(Ae,Pe.ERROR,"error"),Ae),Fe=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Me[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ze=function(){function e(t){_(this,e),this.name=t,this._logLevel=Le,this._logHandler=Fe,this._userLogHandler=null,Re.push(this)}return w(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Pe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Oe[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Pe.DEBUG].concat(t)),this._logHandler.apply(this,[this,Pe.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Pe.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Pe.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Pe.INFO].concat(t)),this._logHandler.apply(this,[this,Pe.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Pe.WARN].concat(t)),this._logHandler.apply(this,[this,Pe.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Pe.ERROR].concat(t)),this._logHandler.apply(this,[this,Pe.ERROR].concat(t))}}]),e}();function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve,qe,Be=function(e,t){return t.some((function(t){return e instanceof t}))};var We=new WeakMap,Ke=new WeakMap,Ge=new WeakMap,He=new WeakMap,Qe=new WeakMap;var Ye={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ke.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ge.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $e(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Je(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(qe||(qe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ze(this),n),$e(We.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $e(e.apply(Ze(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ze(this),t].concat(r));return Ge.set(a,t.sort?t.sort():[t]),$e(a)}}function Xe(e){return"function"===typeof e?Je(e):(e instanceof IDBTransaction&&function(e){if(!Ke.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ke.set(e,t)}}(e),Be(e,Ve||(Ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ye):e)}function $e(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t($e(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&We.set(t,e)})).catch((function(){})),Qe.set(t,e),t}(e);if(He.has(e))return He.get(e);var t=Xe(e);return t!==e&&(He.set(e,t),Qe.set(t,e)),t}var Ze=function(e){return Qe.get(e)};var et,tt,nt=["get","getKey","getAll","getAllKeys","count"],rt=["put","add","delete","clear"],it=new Map;function at(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(it.get(t))return it.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=rt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||nt.includes(n))){var o=function(){var e=u(a().mark((function e(t){var o,u,s,c,l,h,f=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=this.transaction(t,i?"readwrite":"readonly"),s=u.store,c=f.length,l=new Array(c>1?c-1:0),h=1;h<c;h++)l[h-1]=f[h];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(o=s)[n].apply(o,l),i&&u.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return it.set(t,o),o}}}Ye=function(e){return Ue(Ue({},e),{},{get:function(t,n,r){return at(t,n)||e.get(t,n,r)},has:function(t,n){return!!at(t,n)||e.has(t,n)}})}(Ye);var ot=function(){function e(t){_(this,e),this.container=t}return w(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var ut="@firebase/app",st="0.9.12",ct=new ze("@firebase/app"),lt="[DEFAULT]",ht=(g(et={},ut,"fire-core"),g(et,"@firebase/app-compat","fire-core-compat"),g(et,"@firebase/analytics","fire-analytics"),g(et,"@firebase/analytics-compat","fire-analytics-compat"),g(et,"@firebase/app-check","fire-app-check"),g(et,"@firebase/app-check-compat","fire-app-check-compat"),g(et,"@firebase/auth","fire-auth"),g(et,"@firebase/auth-compat","fire-auth-compat"),g(et,"@firebase/database","fire-rtdb"),g(et,"@firebase/database-compat","fire-rtdb-compat"),g(et,"@firebase/functions","fire-fn"),g(et,"@firebase/functions-compat","fire-fn-compat"),g(et,"@firebase/installations","fire-iid"),g(et,"@firebase/installations-compat","fire-iid-compat"),g(et,"@firebase/messaging","fire-fcm"),g(et,"@firebase/messaging-compat","fire-fcm-compat"),g(et,"@firebase/performance","fire-perf"),g(et,"@firebase/performance-compat","fire-perf-compat"),g(et,"@firebase/remote-config","fire-rc"),g(et,"@firebase/remote-config-compat","fire-rc-compat"),g(et,"@firebase/storage","fire-gcs"),g(et,"@firebase/storage-compat","fire-gcs-compat"),g(et,"@firebase/firestore","fire-fst"),g(et,"@firebase/firestore-compat","fire-fst-compat"),g(et,"fire-js","fire-js"),g(et,"firebase","fire-js-all"),et),ft=new Map,dt=new Map;function pt(e,t){try{e.container.addComponent(t)}catch(n){ct.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function vt(e,t){e.container.addOrOverwriteComponent(t)}function yt(e){var t=e.name;if(dt.has(t))return ct.debug("There were multiple attempts to register component ".concat(t,".")),!1;dt.set(t,e);var n,r=y(ft.values());try{for(r.s();!(n=r.n()).done;){pt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function mt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function gt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lt;mt(e,t).clearInstance(n)}function _t(){dt.clear()}var kt=(g(tt={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),g(tt,"bad-app-name","Illegal App name: '{$appName}"),g(tt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),g(tt,"app-deleted","Firebase App named '{$appName}' already deleted"),g(tt,"no-options","Need to provide options, when not being deployed to hosting via source."),g(tt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),g(tt,"invalid-log-argument","First argument to `onLog` must be null or a function."),g(tt,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),g(tt,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),g(tt,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),g(tt,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),tt),wt=new re("app","Firebase",kt),bt=function(){function e(t,n,r){var i=this;_(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Te("app",(function(){return i}),"PUBLIC"))}return w(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw wt.create("app-deleted",{appName:this._name})}}]),e}(),xt="9.22.2";function It(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:lt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw wt.create("bad-app-name",{appName:String(i)});if(n||(n=K()),!n)throw wt.create("no-options");var a=ft.get(i);if(a){if(fe(n,a.options)&&fe(r,a.config))return a;throw wt.create("duplicate-app",{appName:i})}var o,u=new De(i),s=y(dt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(h){s.e(h)}finally{s.f()}var l=new bt(n,r,u);return ft.set(i,l),l}function St(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=ft.get(e);if(!t&&e===lt&&K())return It();if(!t)throw wt.create("no-app",{appName:e});return t}function Et(){return Array.from(ft.values())}function Tt(e){return Ct.apply(this,arguments)}function Ct(){return(Ct=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!ft.has(n)){e.next=6;break}return ft.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nt(e,t,n){var r,i=null!==(r=ht[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ct.warn(u.join(" "))}yt(new Te("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function At(e,t){if(null!==e&&"function"!==typeof e)throw wt.create("invalid-log-argument");!function(e,t){var n,r=y(Re);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Oe[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Pe[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Pt(e){var t;t=e,Re.forEach((function(e){e.setLogLevel(t)}))}var Dt="firebase-heartbeat-database",Rt=1,Ot="firebase-heartbeat-store",Lt=null;function Mt(){return Lt||(Lt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=$e(u);return i&&u.addEventListener("upgradeneeded",(function(e){i($e(u.result),e.oldVersion,e.newVersion,$e(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Dt,Rt,{upgrade:function(e,t){if(0===t)e.createObjectStore(Ot)}}).catch((function(e){throw wt.create("idb-open",{originalErrorMessage:e.message})}))),Lt}function Ft(e){return zt.apply(this,arguments)}function zt(){return zt=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mt();case 3:return n=e.sent,e.next=6,n.transaction(Ot).objectStore(Ot).get(Vt(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof ne?ct.warn(e.t0.message):(i=wt.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ct.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),zt.apply(this,arguments)}function jt(e,t){return Ut.apply(this,arguments)}function Ut(){return Ut=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mt();case 3:return r=e.sent,i=r.transaction(Ot,"readwrite"),o=i.objectStore(Ot),e.next=8,o.put(n,Vt(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof ne?ct.warn(e.t0.message):(u=wt.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ct.warn(u.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Ut.apply(this,arguments)}function Vt(e){return"".concat(e.name,"!").concat(e.options.appId)}var qt=function(){function e(t){var n=this;_(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Gt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return w(e,[{key:"triggerHeartbeat",value:function(){var e=u(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Bt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Bt(),n=Wt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,o=j(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Bt(){return(new Date).toISOString().substring(0,10)}function Wt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=y(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Ht(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Ht(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Kt,Gt=function(){function e(t){_(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return w(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(wn){t(wn)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ft(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",jt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",jt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(v(r.heartbeats),v(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ht(e){return j(JSON.stringify({version:2,heartbeats:e})).length}Kt="",yt(new Te("platform-logger",(function(e){return new ot(e)}),"PRIVATE")),yt(new Te("heartbeat",(function(e){return new qt(e)}),"PRIVATE")),Nt(ut,st,Kt),Nt(ut,st,"esm2017"),Nt("fire-js","");var Qt;Nt("firebase","9.22.2","app");var Yt=function(){function e(t,n){var r=this;_(this,e),this._delegate=t,this.firebase=n,pt(t,new Te("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return w(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Tt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){pt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){vt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Jt=(g(Qt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),g(Qt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Qt),Xt=new re("app-compat","Firebase",Jt);var $t=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=It(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(se(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Nt,setLogLevel:Pt,onLog:At,apps:null,SDK_VERSION:xt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(yt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Xt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&V(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!se(n,e=e||lt))throw Xt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Yt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){V(n,e)},createSubscribe:ge,ErrorFactory:re,deepExtend:V}),n}(),Zt=new ze("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Zt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var en=self.firebase.SDK_VERSION;en&&en.indexOf("LITE")>=0&&Zt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var tn=$t;!function(e){Nt("@firebase/app-compat","0.2.12",e)}();var nn="@firebase/database",rn="0.14.4",an="";function on(e){an=e}var un=function(){function e(t){_(this,e),this.domStorage_=t,this.prefix_="firebase:"}return w(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),oe(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ae(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),sn=function(){function e(){_(this,e),this.cache_={},this.isInMemoryStorage=!0}return w(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return se(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),cn=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new un(t)}}catch(n){}return new sn},ln=cn("localStorage"),hn=cn("sessionStorage"),fn=new ze("@firebase/database"),dn=function(){var e=1;return function(){return e++}}(),pn=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,R(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new me;n.update(t);var r=n.digest();return M.encodeByteArray(r)},vn=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?oe(r):r,t+=" "}return t},yn=null,mn=!0,gn=function(e,t){R(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(fn.logLevel=Pe.VERBOSE,yn=fn.log.bind(fn),t&&hn.set("logging_enabled",!0)):"function"===typeof e?yn=e:(yn=null,hn.remove("logging_enabled"))},_n=function(){if(!0===mn&&(mn=!1,null===yn&&!0===hn.get("logging_enabled")&&gn(!0)),yn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=vn.apply(null,t);yn(r)}},kn=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];_n.apply(void 0,[e].concat(n))}},wn=function(){var e="FIREBASE INTERNAL ERROR: "+vn.apply(void 0,arguments);fn.error(e)},bn=function(){var e="FIREBASE FATAL ERROR: ".concat(vn.apply(void 0,arguments));throw fn.error(e),new Error(e)},xn=function(){var e="FIREBASE WARNING: "+vn.apply(void 0,arguments);fn.warn(e)},In=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Sn="[MIN_NAME]",En="[MAX_NAME]",Tn=function(e,t){if(e===t)return 0;if(e===Sn||t===En)return-1;if(t===Sn||e===En)return 1;var n=Ln(e),r=Ln(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Cn=function(e,t){return e===t?0:e<t?-1:1},Nn=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+oe(t))},An=function e(t){if("object"!==typeof t||null===t)return oe(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=oe(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Pn=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Dn(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Rn=function(e){R(!In(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var On=new RegExp("^-?(0*)\\d{1,10}$"),Ln=function(e){if(On.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Mn=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw xn("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Fn=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},zn=function(){function e(t,n){var r=this;_(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return w(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){xn('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),jn=function(){function e(t,n,r){var i=this;_(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return w(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(_n("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xn(e)}}]),e}(),Un=function(){function e(t){_(this,e),this.accessToken=t}return w(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Un.OWNER="owner";var Vn="5",qn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Bn="ac",Wn="websocket",Kn="long_polling",Gn=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];_(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ln.get("host:"+t)||this._host}return w(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ln.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Hn(e,t,n){var r;if(R("string"===typeof t,"typeof type must == string"),R("object"===typeof n,"typeof params must == object"),t===Wn)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Kn)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Dn(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var Qn=function(){function e(){_(this,e),this.counters_={}}return w(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;se(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return V(void 0,this.counters_)}}]),e}(),Yn={},Jn={};function Xn(e){var t=e.toString();return Yn[t]||(Yn[t]=new Qn),Yn[t]}var $n=function(){function e(t){_(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return w(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Mn((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Zn="start",er=function(){function e(t,n,r,i,a,o,u){var s=this;_(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=kn(t),this.stats_=Xn(n),this.urlFn=function(e){return s.appCheckToken&&(e[Bn]=s.appCheckToken),Hn(n,Kn,e)}}return w(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new $n(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(ee()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new tr((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Zn)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[Zn]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=Vn,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[Bn]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&qn.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=oe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=z(t),r=Pn(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!ee()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=oe(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!ee()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),tr=function(){function e(t,n,r,i){if(_(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,ee())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=dn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){_n("frame writing exception"),u.stack&&_n(u.stack),_n(u)}}}return w(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;ee()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){_n("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||_n("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),nr=null;"undefined"!==typeof MozWebSocket?nr=MozWebSocket:"undefined"!==typeof WebSocket&&(nr=WebSocket);var rr=function(){function e(t,n,r,i,a,o,u){_(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=kn(this.connId),this.stats_=Xn(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return w(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ln.set("previous_websocket_failure",!0);try{var r;if(ee()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(Vn,"/").concat(an,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/General_Page",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new nr(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){ln.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ae(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(R(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=oe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Pn(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=Vn,!ee()&&"undefined"!==typeof location&&location.hostname&&qn.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[Bn]=r),i&&(a.p=i),Hn(e,Wn,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==nr&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return ln.isInMemoryStorage||!0===ln.get("previous_websocket_failure")}}]),e}();rr.responsesRequiredToBeHealthy=2,rr.healthyTimeout=3e4;var ir=function(){function e(t){_(this,e),this.initTransports_(t)}return w(e,[{key:"initTransports_",value:function(t){var n=rr&&rr.isAvailable(),r=n&&!rr.previouslyFailed();if(t.webSocketOnly&&(n||xn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[rr];else{var i,a=this.transports_=[],o=y(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[er,rr]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();ir.globalTransportInitialized_=!1;var ar=function(){function e(t,n,r,i,a,o,u,s,c,l){_(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=kn("c:"+this.id+":"),this.transportManager_=new ir(n),this.log_("Connection created"),this.start_()}return w(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Fn((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Nn("t",e),n=Nn("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Nn("t",e),n=Nn("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Nn("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?wn("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wn("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Vn!==n&&xn("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Fn((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fn((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ln.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),or=function(){function e(){_(this,e)}return w(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),ur=function(){function e(t){_(this,e),this.allowedEvents_=t,this.listeners_={},R(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return w(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=v(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){R(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),sr=function(e){I(n,e);var t=T(n);function n(){var e;return _(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Y()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return w(n,[{key:"getInitialEvent",value:function(e){return R("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(ur),cr=32,lr=768,hr=function(){function e(t,n){if(_(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return w(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function fr(){return new hr("")}function dr(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function pr(e){return e.pieces_.length-e.pieceNum_}function vr(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new hr(e.pieces_,t)}function yr(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function mr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function gr(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new hr(t,0)}function _r(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof hr)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new hr(n,0)}function kr(e){return e.pieceNum_>=e.pieces_.length}function wr(e,t){var n=dr(e),r=dr(t);if(null===n)return t;if(n===r)return wr(vr(e),vr(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function br(e,t){for(var n=mr(e,0),r=mr(t,0),i=0;i<n.length&&i<r.length;i++){var a=Tn(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function xr(e,t){if(pr(e)!==pr(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ir(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(pr(e)>pr(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Sr=w((function e(t,n){_(this,e),this.errorPrefix_=n,this.parts_=mr(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Se(this.parts_[r]);Er(this)}));function Er(e){if(e.byteLength_>lr)throw new Error(e.errorPrefix_+"has a key path longer than "+lr+" bytes ("+e.byteLength_+").");if(e.parts_.length>cr)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+cr+") or object contains a cycle "+Tr(e))}function Tr(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Cr=function(e){I(n,e);var t=T(n);function n(){var e,r,i;return _(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return w(n,[{key:"getInitialEvent",value:function(e){return R("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(ur),Nr=1e3,Ar=function(e){I(n,e);var t=T(n);function n(e,r,i,a,o,u,s,c){var l;if(_(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=kn("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Nr,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!ee())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Cr.getInstance().on("visible",l.onVisible_,b(l)),-1===e.host.indexOf("fblocal")&&sr.getInstance().on("online",l.onOnline_,b(l)),l}return w(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(oe(i)),R(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new G,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),R(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=ue(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=ue(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+oe(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):wn("Unrecognized action received from server: "+oe(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;R(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Nr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Nr),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=u(a().mark((function e(){var t,r,i,o,u,s,c,l,h,d,p,v,y,m,g=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,u=this.lastSessionId,s=!1,c=null,l=function(){c?c.close():(s=!0,i())},h=function(e){R(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:h},d=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);case 19:p=e.sent,v=f(p,2),y=v[0],m=v[1],s?_n("getToken() completed but was canceled"):(_n("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=m&&m.token,c=new ar(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){xn(e+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")}),u)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&xn(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){_n("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){_n("Resuming connection for reason: "+e),delete this.interruptReasons_[e],le(this.interruptReasons_)&&(this.reconnectDelay_=Nr,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return An(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new hr(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){_n("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){_n("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=y(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=y(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";ee()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+an.replace(/\./g,"-")]=1,Y()?e["framework.cordova"]=1:$()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=sr.getInstance().currentlyOnline();return le(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&se(e,"w")){var n=ce(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();xn("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(or);Ar.nextPersistentConnectionId_=0,Ar.nextConnectionId_=0;var Pr,Dr=function(){function e(t,n){_(this,e),this.name=t,this.node=n}return w(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Rr=function(){function e(){_(this,e)}return w(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Dr(Sn,e),r=new Dr(Sn,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Dr.MIN}}]),e}(),Or=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"compare",value:function(e,t){return Tn(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw O("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Dr.MIN}},{key:"maxPost",value:function(){return new Dr(En,Pr)}},{key:"makePost",value:function(e,t){return R("string"===typeof e,"KeyIndex indexValue must always be a string."),new Dr(e,Pr)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Pr},set:function(e){Pr=e}}]),n}(Rr),Lr=new Or,Mr=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;_(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return w(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Fr=function(){function e(t,n,r,i,a){_(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Ur.EMPTY_NODE,this.right=null!=a?a:Ur.EMPTY_NODE}return w(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Ur.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ur.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Fr.RED=!0,Fr.BLACK=!1;var zr,jr=function(){function e(){_(this,e)}return w(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Fr(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Ur=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;_(this,e),this.comparator_=t,this.root_=n}return w(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Fr.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Fr.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Mr(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Mr(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Mr(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Mr(this.root_,null,this.comparator_,!0,e)}}]),e}();function Vr(e,t){return Tn(e.name,t.name)}function qr(e,t){return Tn(e,t)}Ur.EMPTY_NODE=new jr;var Br,Wr,Kr,Gr=function(e){return"number"===typeof e?"number:"+Rn(e):"string:"+e},Hr=function(e){if(e.isLeafNode()){var t=e.val();R("string"===typeof t||"number"===typeof t||"object"===typeof t&&se(t,".sv"),"Priority must be a string or number.")}else R(e===zr||e.isEmpty(),"priority of unexpected type.");R(e===zr||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Qr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;_(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,R(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Hr(this.priorityNode_)}return w(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return kr(t)?this:".priority"===dr(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=dr(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(R(".priority"!==r||1===pr(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(vr(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Gr(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Rn(this.value_):this.value_,this.lazyHash_=pn(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(R(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return R(i>=0,"Unknown leaf type: "+n),R(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return Br},set:function(e){Br=e}}]),e}();Qr.VALUE_TYPE_ORDER=["object","boolean","number","string"];var Yr,Jr,Xr=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Tn(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Dr.MIN}},{key:"maxPost",value:function(){return new Dr(En,new Qr("[PRIORITY-POST]",Kr))}},{key:"makePost",value:function(e,t){var n=Wr(e);return new Dr(t,new Qr("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Rr),$r=new Xr,Zr=Math.log(2),ei=function(){function e(t){_(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Zr,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return w(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),ti=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new Fr(o,a.node,Fr.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new Fr(o,a.node,Fr.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],h=n?n(l):l;s(new Fr(h,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?u(h,Fr.BLACK):(u(h,Fr.BLACK),u(h,Fr.RED))}return a}(new ei(e.length));return new Ur(r||t,a)},ni={},ri=function(){function e(t,n){_(this,e),this.indexes_=t,this.indexSet_=n}return w(e,[{key:"get",value:function(e){var t=ce(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ur?t:null}},{key:"hasIndex",value:function(e){return se(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){R(t!==Lr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Dr.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?ti(i,t.getCompare()):ni;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(he(this.indexes_,(function(e,i){var a=ce(r.indexSet_,i);if(R(a,"Missing index implementation for "+i),e===ni){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(Dr.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),ti(o,a.getCompare())}return ni}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Dr(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(he(this.indexes_,(function(e){if(e===ni)return e;var r=n.get(t.name);return r?e.remove(new Dr(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return R(ni&&$r,"ChildrenNode.ts has not been loaded"),Yr=Yr||new e({".priority":ni},{".priority":$r})}}]),e}(),ii=function(){function e(t,n,r){_(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Hr(this.priorityNode_),this.children_.isEmpty()&&R(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return w(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||Jr}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Jr:t}},{key:"getChild",value:function(e){var t=dr(e);return null===t?this:this.getImmediateChild(t).getChild(vr(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(R(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Dr(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?Jr:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=dr(e);if(null===n)return t;R(".priority"!==dr(e)||1===pr(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(vr(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild($r,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Gr(this.getPriority().val())+":"),this.forEachChild($r,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":pn(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Dr(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Dr(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Dr(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Dr.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Dr.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ai?-1:0}},{key:"withIndex",value:function(t){if(t===Lr||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Lr||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator($r),r=t.getIterator($r),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Lr?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return Jr||(Jr=new e(new Ur(qr),null,ri.Default))}}]),e}();ii.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var ai=new(function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.call(this,new Ur(qr),ii.EMPTY_NODE,ri.Default)}return w(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return ii.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(ii));Object.defineProperties(Dr,{MIN:{value:new Dr(Sn,ii.EMPTY_NODE)},MAX:{value:new Dr(En,ai)}}),Or.__EMPTY_NODE=ii.EMPTY_NODE,Qr.__childrenNodeConstructor=ii,zr=ai,function(e){Kr=e}(ai);var oi=!0;function ui(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return ii.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),R(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new Qr(e,ui(t));if(e instanceof Array||!oi){var n=ii.EMPTY_NODE;return Dn(e,(function(t,r){if(se(e,t)&&"."!==t.substring(0,1)){var i=ui(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(ui(t))}var r=[],i=!1;if(Dn(e,(function(e,t){if("."!==e.substring(0,1)){var n=ui(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Dr(e,n)))}})),0===r.length)return ii.EMPTY_NODE;var a=ti(r,Vr,(function(e){return e.name}),qr);if(i){var o=ti(r,$r.getCompare());return new ii(a,ui(t),new ri({".priority":o},{".priority":$r}))}return new ii(a,ui(t),ri.Default)}!function(e){Wr=e}(ui);var si=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this)).indexPath_=e,R(!kr(e)&&".priority"!==dr(e),"Can't create PathIndex with empty path or .priority key"),r}return w(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Tn(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=ui(e),r=ii.EMPTY_NODE.updateChild(this.indexPath_,n);return new Dr(t,r)}},{key:"maxPost",value:function(){var e=ii.EMPTY_NODE.updateChild(this.indexPath_,ai);return new Dr(En,e)}},{key:"toString",value:function(){return mr(this.indexPath_,0).join("/")}}]),n}(Rr),ci=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Tn(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Dr.MIN}},{key:"maxPost",value:function(){return Dr.MAX}},{key:"makePost",value:function(e,t){var n=ui(e);return new Dr(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Rr),li=new ci;function hi(e){return{type:"value",snapshotNode:e}}function fi(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function di(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function pi(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var vi=function(){function e(t){_(this,e),this.index_=t}return w(e,[{key:"updateChild",value:function(e,t,n,r,i,a){R(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(di(t,o)):R(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(fi(t,n)):a.trackChildChange(pi(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild($r,(function(e,r){t.hasChild(e)||n.trackChildChange(di(e,r))})),t.isLeafNode()||t.forEachChild($r,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(pi(t,r,i))}else n.trackChildChange(fi(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?ii.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),yi=function(){function e(t){_(this,e),this.indexedFilter_=new vi(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return w(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new Dr(t,n))||(n=ii.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=ii.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(ii.EMPTY_NODE);var i=this;return t.forEachChild($r,(function(e,t){i.matches(new Dr(e,t))||(r=r.updateImmediateChild(e,ii.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),mi=function(){function e(t){var n=this;_(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new yi(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return w(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new Dr(t,n))||(n=ii.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=ii.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=ii.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var u;r=(r=t.withIndex(this.index_)).updatePriority(ii.EMPTY_NODE),u=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var s=0;u.hasNext();){var c=u.getNext();s<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?s++:r=r.updateImmediateChild(c.name,ii.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;R(u.numChildren()===this.limit_,"");var s=new Dr(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var h=u.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(pi(t,n,h)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(di(t,h));var p=u.updateImmediateChild(t,ii.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(fi(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(di(c.name,c.node)),i.trackChildChange(fi(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,ii.EMPTY_NODE)):e}}]),e}(),gi=function(){function e(){_(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$r}return w(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return R(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return R(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Sn}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return R(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return R(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:En}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return R(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===$r}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function _i(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function ki(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function wi(e,t){var n=e.copy();return n.index_=t,n}function bi(e){var t,n={};if(e.isDefault())return n;if(e.index_===$r?t="$priority":e.index_===li?t="$value":e.index_===Lr?t="$key":(R(e.index_ instanceof si,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=oe(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=oe(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+oe(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=oe(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+oe(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function xi(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==$r&&(t.i=e.index_.toString()),t}var Ii=function(e){I(n,e);var t=T(n);function n(e,r,i,a){var o;return _(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=kn("p:rest:"),o.listens_={},o}return w(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=bi(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),ce(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=bi(e._queryParams),r=e._path.toString(),i=new G;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=f(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+pe(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=ae(c.responseText)}catch(n){xn("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&xn("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(R(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(or),Si=function(){function e(){_(this,e),this.rootNode_=ii.EMPTY_NODE}return w(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Ei(){return{value:null,children:new Map}}function Ti(e,t,n){if(kr(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=dr(t);e.children.has(r)||e.children.set(r,Ei()),Ti(e.children.get(r),t=vr(t),n)}}function Ci(e,t){if(kr(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild($r,(function(t,n){Ti(e,new hr(t),n)})),Ci(e,t)}if(e.children.size>0){var r=dr(t);if(t=vr(t),e.children.has(r))Ci(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function Ni(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Ni(r,new hr(t.toString()+"/"+e),n)}))}var Ai,Pi=function(){function e(t){_(this,e),this.collection_=t,this.last_=null}return w(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Dn(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Di=function(){function e(t,n){_(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Pi(t);var r=1e4+2e4*Math.random();Fn(this.reportStats_.bind(this),Math.floor(r))}return w(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Dn(t,(function(t,i){i>0&&se(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Fn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Ri(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ai||(Ai={}));var Oi,Li=function(){function e(t,n,r){_(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Ai.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return w(e,[{key:"operationForChild",value:function(t){if(kr(this.path)){if(null!=this.affectedTree.value)return R(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new hr(t));return new e(fr(),n,this.revert)}return R(dr(this.path)===t,"operationForChild called for unrelated child."),new e(vr(this.path),this.affectedTree,this.revert)}}]),e}(),Mi=function(){function e(t,n){_(this,e),this.source=t,this.path=n,this.type=Ai.LISTEN_COMPLETE}return w(e,[{key:"operationForChild",value:function(t){return kr(this.path)?new e(this.source,fr()):new e(this.source,vr(this.path))}}]),e}(),Fi=function(){function e(t,n,r){_(this,e),this.source=t,this.path=n,this.snap=r,this.type=Ai.OVERWRITE}return w(e,[{key:"operationForChild",value:function(t){return kr(this.path)?new e(this.source,fr(),this.snap.getImmediateChild(t)):new e(this.source,vr(this.path),this.snap)}}]),e}(),zi=function(){function e(t,n,r){_(this,e),this.source=t,this.path=n,this.children=r,this.type=Ai.MERGE}return w(e,[{key:"operationForChild",value:function(t){if(kr(this.path)){var n=this.children.subtree(new hr(t));return n.isEmpty()?null:n.value?new Fi(this.source,fr(),n.value):new e(this.source,fr(),n)}return R(dr(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,vr(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),ji=function(){function e(t,n,r){_(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return w(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(kr(e))return this.isFullyInitialized()&&!this.filtered_;var t=dr(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),Ui=w((function e(t){_(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function Vi(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw O("Should only compare child_ events.");var r=new Dr(t.childName,t.snapshotNode),i=new Dr(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function qi(e,t){return{eventCache:e,serverCache:t}}function Bi(e,t,n,r){return qi(new ji(t,n,r),e.serverCache)}function Wi(e,t,n,r){return qi(e.eventCache,new ji(t,n,r))}function Ki(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Gi(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Hi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Oi||(Oi=new Ur(Cn)),Oi);_(this,e),this.value=t,this.children=n}return w(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:fr(),value:this.value};if(kr(e))return null;var n=dr(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(vr(e),t);return null!=i?{path:_r(new hr(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(kr(t))return this;var n=dr(t),r=this.children.get(n);return null!==r?r.subtree(vr(t)):new e(null)}},{key:"set",value:function(t,n){if(kr(t))return new e(n,this.children);var r=dr(t),i=(this.children.get(r)||new e(null)).set(vr(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(kr(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=dr(t),r=this.children.get(n);if(r){var i,a=r.remove(vr(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(kr(e))return this.value;var t=dr(e),n=this.children.get(t);return n?n.get(vr(e)):null}},{key:"setTree",value:function(t,n){if(kr(t))return n;var r,i=dr(t),a=(this.children.get(i)||new e(null)).setTree(vr(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(fr(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(_r(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,fr(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(kr(e))return null;var i=dr(e),a=this.children.get(i);return a?a.findOnPath_(vr(e),_r(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,fr(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(kr(t))return this;this.value&&r(n,this.value);var i=dr(t),a=this.children.get(i);return a?a.foreachOnPath_(vr(t),_r(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(fr(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(_r(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Dn(t,(function(e,t){n=n.set(new hr(e),t)})),n}}]),e}(),Qi=function(){function e(t){_(this,e),this.writeTree_=t}return w(e,null,[{key:"empty",value:function(){return new e(new Hi(null))}}]),e}();function Yi(e,t,n){if(kr(t))return new Qi(new Hi(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=wr(i,t);return a=a.updateChild(o,n),new Qi(e.writeTree_.set(i,a))}var u=new Hi(n),s=e.writeTree_.setTree(t,u);return new Qi(s)}function Ji(e,t,n){var r=e;return Dn(n,(function(e,n){r=Yi(r,_r(t,e),n)})),r}function Xi(e,t){if(kr(t))return Qi.empty();var n=e.writeTree_.setTree(t,new Hi(null));return new Qi(n)}function $i(e,t){return null!=Zi(e,t)}function Zi(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(wr(n.path,t)):null}function ea(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild($r,(function(e,n){t.push(new Dr(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Dr(e,n.value))})),t}function ta(e,t){if(kr(t))return e;var n=Zi(e,t);return new Qi(null!=n?new Hi(n):e.writeTree_.subtree(t))}function na(e){return e.writeTree_.isEmpty()}function ra(e,t){return ia(fr(),e.writeTree_,t)}function ia(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(R(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=ia(_r(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(_r(e,".priority"),r)),n}function aa(e,t){return ga(t,e)}function oa(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));R(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&ua(u,r.path)?i=!1:Ir(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=ca(e.allWrites,sa,fr()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Xi(e.visibleWrites,r.path):Dn(r.children,(function(t){e.visibleWrites=Xi(e.visibleWrites,_r(r.path,t))}));return!0}return!1}function ua(e,t){if(e.snap)return Ir(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Ir(_r(e.path,n),t))return!0;return!1}function sa(e){return e.visible}function ca(e,t,n){for(var r=Qi.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)Ir(n,o)?r=Yi(r,u=wr(n,o),a.snap):Ir(o,n)&&(u=wr(o,n),r=Yi(r,fr(),a.snap.getChild(u)));else{if(!a.children)throw O("WriteRecord should have .snap or .children");if(Ir(n,o))r=Ji(r,u=wr(n,o),a.children);else if(Ir(o,n))if(kr(u=wr(o,n)))r=Ji(r,fr(),a.children);else{var s=ce(a.children,dr(u));if(s){var c=s.getChild(vr(u));r=Yi(r,fr(),c)}}}}}return r}function la(e,t,n,r,i){if(r||i){var a=ta(e.visibleWrites,t);if(!i&&na(a))return n;if(i||null!=n||$i(a,fr())){return ra(ca(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Ir(e.path,t)||Ir(t,e.path))}),t),n||ii.EMPTY_NODE)}return null}var o=Zi(e.visibleWrites,t);if(null!=o)return o;var u=ta(e.visibleWrites,t);return na(u)?n:null!=n||$i(u,fr())?ra(u,n||ii.EMPTY_NODE):null}function ha(e,t,n,r){return la(e.writeTree,e.treePath,t,n,r)}function fa(e,t){return function(e,t,n){var r=ii.EMPTY_NODE,i=Zi(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild($r,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=ta(e.visibleWrites,t);return n.forEachChild($r,(function(e,t){var n=ra(ta(a,new hr(e)),t);r=r.updateImmediateChild(e,n)})),ea(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return ea(ta(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function da(e,t,n,r){return function(e,t,n,r,i){R(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=_r(t,n);if($i(e.visibleWrites,a))return null;var o=ta(e.visibleWrites,a);return na(o)?i.getChild(n):ra(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function pa(e,t){return function(e,t){return Zi(e.visibleWrites,t)}(e.writeTree,_r(e.treePath,t))}function va(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=ta(e.visibleWrites,t),c=Zi(s,fr());if(null!=c)u=c;else{if(null==n)return[];u=ra(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function ya(e,t,n){return function(e,t,n,r){var i=_r(t,n),a=Zi(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?ra(ta(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function ma(e,t){return ga(_r(e.treePath,t),e.writeTree)}function ga(e,t){return{treePath:e,writeTree:t}}var _a=function(){function e(){_(this,e),this.changeMap=new Map}return w(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;R("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),R(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,pi(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,di(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,fi(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw O("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,pi(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),ka=new(function(){function e(){_(this,e)}return w(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),wa=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return w(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new ji(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ya(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Gi(this.viewCache_),i=va(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function ba(e,t,n,r,i){var a,o,u=new _a;if(n.type===Ai.OVERWRITE){var s=n;s.source.fromUser?a=Sa(e,t,s.path,s.snap,r,i,u):(R(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!kr(s.path),a=Ia(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===Ai.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=_r(n,r);Ea(t,dr(c))&&(u=Sa(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=_r(n,r);Ea(t,dr(c))||(u=Sa(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(R(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Ca(e,t,c.path,c.children,r,i,o,u))}else if(n.type===Ai.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=pa(r,n))return t;var u,s=new wa(r,t,i),c=t.eventCache.getNode();if(kr(n)||".priority"===dr(n)){var l;if(t.serverCache.isFullyInitialized())l=ha(r,Gi(t));else{var h=t.serverCache.getNode();R(h instanceof ii,"serverChildren would be complete if leaf node"),l=fa(r,h)}u=e.filter.updateFullNode(c,l,a)}else{var f=dr(n),d=ya(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(u=null!=d?e.filter.updateChild(c,f,d,vr(n),s,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,ii.EMPTY_NODE,vr(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=ha(r,Gi(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=pa(r,fr()),Bi(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=pa(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(kr(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return Ia(e,t,n,s.getNode().getChild(n),i,a,u,o);if(kr(n)){var c=new Hi(null);return s.getNode().forEachChild(Lr,(function(e,t){c=c.set(new hr(e),t)})),Ca(e,t,n,c,i,a,u,o)}return t}var l=new Hi(null);return r.foreach((function(e,t){var r=_r(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),Ca(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==Ai.LISTEN_COMPLETE)throw O("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Wi(t,a.getNode(),a.isFullyInitialized()||kr(n),a.isFiltered());return xa(e,o,n,r,ka,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Ki(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(hi(Ki(t)))}}(t,a,h),{viewCache:a,changes:h}}function xa(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=pa(r,n))return t;if(kr(n))if(R(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Gi(t),l=fa(r,c instanceof ii?c:ii.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=ha(r,Gi(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=dr(n);if(".priority"===f){R(1===pr(n),"Can't have a priority with additional path components");var d=s.getNode(),p=da(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=vr(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var m=da(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(f).updateChild(y,m):s.getNode().getImmediateChild(f)}else v=ya(r,f,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),f,v,y,i,a):s.getNode()}}return Bi(t,o,s.isFullyInitialized()||kr(n),e.filter.filtersNodes())}function Ia(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(kr(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),h,null)}else{var f=dr(n);if(!c.isCompleteForPath(n)&&pr(n)>1)return t;var d=vr(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,ka,null)}var v=Wi(t,s,c.isFullyInitialized()||kr(n),l.filtersNodes());return xa(e,v,n,i,new wa(i,v,a),u)}function Sa(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new wa(i,t,a);if(kr(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=Bi(t,s,!0,e.filter.filtersNodes());else{var h=dr(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=Bi(t,s,c.isFullyInitialized(),c.isFiltered());else{var f,d=vr(n),p=c.getNode().getImmediateChild(h);if(kr(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===yr(d)&&v.getChild(gr(d)).isEmpty()?v:v.updateChild(d,r):ii.EMPTY_NODE}if(p.equals(f))u=t;else u=Bi(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function Ea(e,t){return e.eventCache.isCompleteForChild(t)}function Ta(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Ca(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=kr(n)?r:new Hi(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=Ta(0,t.serverCache.getNode().getImmediateChild(n),r);c=Ia(e,c,new hr(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var h=Ta(0,t.serverCache.getNode().getImmediateChild(n),r);c=Ia(e,c,new hr(n),h,i,a,o,u)}})),c}var Na,Aa=function(){function e(t,n){_(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new vi(i.getIndex()),o=(r=i).loadsAllData()?new vi(r.getIndex()):r.hasLimit()?new mi(r):new yi(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(ii.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(ii.EMPTY_NODE,s.getNode(),null),h=new ji(c,u.isFullyInitialized(),a.filtersNodes()),f=new ji(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=qi(f,h),this.eventGenerator_=new Ui(this.query_)}return w(e,[{key:"query",get:function(){return this.query_}}]),e}();function Pa(e,t){var n=Gi(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!kr(t)&&!n.getImmediateChild(dr(t)).isEmpty())?n.getChild(t):null}function Da(e){return 0===e.eventRegistrations_.length}function Ra(e,t,n){var r=[];if(n){R(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Oa(e,t,n,r){t.type===Ai.MERGE&&null!==t.source.queryId&&(R(Gi(e.viewCache_),"We should always have a full cache before handling merges"),R(Ki(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=ba(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,R(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),R(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),R(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,La(e,u.changes,u.viewCache.eventCache.getNode(),null)}function La(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Vi(e,i,"child_removed",t,r,n),Vi(e,i,"child_added",t,r,n),Vi(e,i,"child_moved",a,r,n),Vi(e,i,"child_changed",t,r,n),Vi(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Ma,Fa=w((function e(){_(this,e),this.views=new Map}));function za(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return R(null!=a,"SyncTree gave us an op for an invalid query."),Oa(a,t,n,r)}var o,u=[],s=y(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(Oa(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function ja(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=ha(n,i?r:null),s=!1;u?s=!0:r instanceof ii?(u=fa(n,r),s=!1):(u=ii.EMPTY_NODE,s=!1);var c=qi(new ji(u,s,!1),new ji(r,i,!1));return new Aa(t,c)}return o}function Ua(e,t,n,r,i,a){var o=ja(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild($r,(function(e,t){r.push(fi(e,t))})),n.isFullyInitialized()&&r.push(hi(n.getNode())),La(e,r,n.getNode(),t)}(o,n)}function Va(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=Ga(e);if("default"===i){var s,c=y(e.views.entries());try{for(c.s();!(s=c.n()).done;){var l=f(s.value,2),h=l[0],d=l[1];o=o.concat(Ra(d,n,r)),Da(d)&&(e.views.delete(h),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(Ra(p,n,r)),Da(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!Ga(e)&&a.push(new(R(Na,"Reference.ts has not been loaded"),Na)(t._repo,t._path)),{removed:a,events:o}}function qa(e){var t,n=[],r=y(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function Ba(e,t){var n,r=null,i=y(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Pa(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function Wa(e,t){if(t._queryParams.loadsAllData())return Ha(e);var n=t._queryIdentifier;return e.views.get(n)}function Ka(e,t){return null!=Wa(e,t)}function Ga(e){return null!=Ha(e)}function Ha(e){var t,n=y(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var Qa=1,Ya=w((function e(t){_(this,e),this.listenProvider_=t,this.syncPointTree_=new Hi(null),this.pendingWriteTree_={visibleWrites:Qi.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Ja(e,t,n,r,i){return function(e,t,n,r,i){R(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Yi(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?ao(e,new Fi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Xa(e,t,n,r){!function(e,t,n,r){R(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Ji(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=Hi.fromObject(n);return ao(e,new zi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function $a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(oa(e.pendingWriteTree_,t)){var i=new Hi(null);return null!=r.snap?i=i.set(fr(),!0):Dn(r.children,(function(e){i=i.set(new hr(e),!0)})),ao(e,new Li(r.path,i,n))}return[]}function Za(e,t,n){return ao(e,new Fi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function eo(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||Ka(o,t))){var s=Va(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return Ga(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=function(e){return e.fold((function(e,t,n){if(t&&Ga(t))return[Ha(t)];var r=[];return t&&(r=qa(t)),Dn(n,(function(e,t){r=r.concat(t)})),r}))}(f),p=0;p<d.length;++p){var v=d[p],y=v.query,m=so(e,v);e.listenProvider_.startListening(vo(y),co(e,y),m.hashFn,m.onComplete)}}if(!h&&c.length>0&&!r)if(l){e.listenProvider_.stopListening(vo(t),null)}else c.forEach((function(t){var n=e.queryToTagMap.get(lo(t));e.listenProvider_.stopListening(vo(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=lo(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,c)}return u}function to(e,t,n,r){var i=ho(e,r);if(null!=i){var a=fo(i),o=a.path,u=a.queryId,s=wr(o,t);return po(e,o,new Fi(Ri(u),s,n))}return[]}function no(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=wr(e,i);a=a||Ba(t,n),o=o||Ga(t)}));var u,s=e.syncPointTree_.get(i);(s?(o=o||Ga(s),a=a||Ba(s,fr())):(s=new Fa,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)?u=!0:(u=!1,a=ii.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=Ba(t,fr());n&&(a=a.updateImmediateChild(e,n))})));var c=Ka(s,t);if(!c&&!t._queryParams.loadsAllData()){var l=lo(t);R(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Qa++;e.queryToTagMap.set(l,h),e.tagToQueryMap.set(h,l)}var f=Ua(s,t,n,aa(e.pendingWriteTree_,i),a,u);if(!c&&!o&&!r){var d=Wa(s,t);f=f.concat(function(e,t,n){var r=t._path,i=co(e,t),a=so(e,n),o=e.listenProvider_.startListening(vo(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)R(!Ga(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!kr(e)&&t&&Ga(t))return[Ha(t).query];var r=[];return t&&(r=r.concat(qa(t).map((function(e){return e.query})))),Dn(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(vo(l),co(e,l))}return o}(e,t,d))}return f}function ro(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Ba(n,wr(e,t));if(r)return r}));return la(r,t,i,n,!0)}function io(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=wr(e,n);r=r||Ba(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Ba(i,fr()):(i=new Fa,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new ji(r,!0,!1):null;return function(e){return Ki(e.viewCache_)}(ja(i,t,aa(e.pendingWriteTree_,t._path),a?o.getNode():ii.EMPTY_NODE,a))}function ao(e,t){return oo(t,e.syncPointTree_,null,aa(e.pendingWriteTree_,fr()))}function oo(e,t,n,r){if(kr(e.path))return uo(e,t,n,r);var i=t.get(fr());null==n&&null!=i&&(n=Ba(i,fr()));var a=[],o=dr(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=ma(r,o);a=a.concat(oo(u,s,c,l))}return i&&(a=a.concat(za(i,e,r,n))),a}function uo(e,t,n,r){var i=t.get(fr());null==n&&null!=i&&(n=Ba(i,fr()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=ma(r,t),s=e.operationForChild(t);s&&(a=a.concat(uo(s,i,o,u)))})),i&&(a=a.concat(za(i,e,r,n))),a}function so(e,t){var n=t.query,r=co(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||ii.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=ho(e,n);if(r){var i=fo(r),a=i.path,o=i.queryId,u=wr(a,t);return po(e,a,new Mi(Ri(o),u))}return[]}(e,n._path,r):function(e,t){return ao(e,new Mi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return eo(e,n,null,i)}}}function co(e,t){var n=lo(t);return e.queryToTagMap.get(n)}function lo(e){return e._path.toString()+"$"+e._queryIdentifier}function ho(e,t){return e.tagToQueryMap.get(t)}function fo(e){var t=e.indexOf("$");return R(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new hr(e.substr(0,t))}}function po(e,t,n){var r=e.syncPointTree_.get(t);return R(r,"Missing sync point for query tag that we're tracking"),za(r,n,aa(e.pendingWriteTree_,t),null)}function vo(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(R(Ma,"Reference.ts has not been loaded"),Ma)(e._repo,e._path):e}var yo=function(){function e(t){_(this,e),this.node_=t}return w(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),mo=function(){function e(t,n){_(this,e),this.syncTree_=t,this.path_=n}return w(e,[{key:"getImmediateChild",value:function(t){var n=_r(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return ro(this.syncTree_,this.path_)}}]),e}(),go=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},_o=function(e,t,n){return e&&"object"===typeof e?(R(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?ko(e[".sv"],t,n):"object"===typeof e[".sv"]?wo(e[".sv"],t):void R(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ko=function(e,t,n){if("timestamp"===e)return n.timestamp;R(!1,"Unexpected server value: "+e)},wo=function(e,t,n){e.hasOwnProperty("increment")||R(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&R(!1,"Unexpected increment value: "+r);var i=t.node();if(R(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},bo=function(e,t,n,r){return Io(t,new mo(n,e),r)},xo=function(e,t,n){return Io(e,new yo(t),n)};function Io(e,t,n){var r,i=e.getPriority().val(),a=_o(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=_o(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new Qr(u,ui(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new Qr(a))),s.forEachChild($r,(function(e,i){var a=Io(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var So=w((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};_(this,e),this.name=t,this.parent=n,this.node=r}));function Eo(e,t){for(var n=t instanceof hr?t:new hr(t),r=e,i=dr(n);null!==i;){var a=ce(r.node.children,i)||{children:{},childCount:0};r=new So(i,r,a),i=dr(n=vr(n))}return r}function To(e){return e.node.value}function Co(e,t){e.node.value=t,Ro(e)}function No(e){return e.node.childCount>0}function Ao(e,t){Dn(e.node.children,(function(n,r){t(new So(n,e,r))}))}function Po(e,t,n,r){n&&!r&&t(e),Ao(e,(function(e){Po(e,t,!0,r)})),n&&r&&t(e)}function Do(e){return new hr(null===e.parent?e.name:Do(e.parent)+"/"+e.name)}function Ro(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===To(e)&&!No(e)}(n),i=se(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Ro(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Ro(e))}(e.parent,e.name,e)}var Oo=/[\[\].#$\/\u0000-\u001F\u007F]/,Lo=/[\[\].#$\u0000-\u001F\u007F]/,Mo=10485760,Fo=function(e){return"string"===typeof e&&0!==e.length&&!Oo.test(e)},zo=function(e){return"string"===typeof e&&0!==e.length&&!Lo.test(e)},jo=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!In(e)||e&&"object"===typeof e&&se(e,".sv")},Uo=function(e,t,n,r){r&&void 0===t||Vo(be(e,"value"),t,n)},Vo=function e(t,n,r){var i=r instanceof hr?new Sr(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Tr(i));if("function"===typeof n)throw new Error(t+"contains a function "+Tr(i)+" with contents = "+n.toString());if(In(n))throw new Error(t+"contains "+n.toString()+" "+Tr(i));if("string"===typeof n&&n.length>Mo/3&&Se(n)>Mo)throw new Error(t+"contains a string greater than "+Mo+" utf8 bytes "+Tr(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Dn(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Fo(n)))throw new Error(t+" contains an invalid key ("+n+") "+Tr(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=Se(s),Er(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Se(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Tr(i)+" in addition to actual children.")}},qo=function(e,t,n,r){if(!r||void 0!==t){var i=be(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];Dn(t,(function(e,t){var r=new hr(e);if(Vo(i,t,_r(n,r)),".priority"===yr(r)&&!jo(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=mr(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!Fo(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(br);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&Ir(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},Bo=function(e,t,n){if(!n||void 0!==t){if(In(t))throw new Error(be(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!jo(t))throw new Error(be(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Wo=function(e,t,n,r){if((!r||void 0!==n)&&!Fo(n))throw new Error(be(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ko=function(e,t,n,r){if((!r||void 0!==n)&&!zo(n))throw new Error(be(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Go=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ko(e,t,n,r)},Ho=function(e,t){if(".info"===dr(t))throw new Error(e+" failed = Can't modify data under /.info/")},Qo=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Fo(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),zo(e)}(n))throw new Error(be(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Yo=w((function e(){_(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Jo(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||xr(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Xo(e,t,n){Jo(e,n),Zo(e,(function(e){return xr(e,t)}))}function $o(e,t,n){Jo(e,n),Zo(e,(function(e){return Ir(e,t)||Ir(t,e)}))}function Zo(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(eu(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function eu(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();yn&&_n("event: "+n.toString()),Mn(r)}}}var tu="repo_interrupt",nu=25,ru=function(){function e(t,n,r,i){_(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Yo,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ei(),this.transactionQueueTree_=new So,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return w(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function iu(e,t,n){if(e.stats_=Xn(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ii(e.repoInfo_,(function(t,n,r,i){uu(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return su(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{oe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Ar(e.repoInfo_,t,(function(t,n,r,i){uu(e,t,n,r,i)}),(function(t){su(e,t)}),(function(t){!function(e,t){Dn(t,(function(t,n){cu(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return Jn[n]||(Jn[n]=t()),Jn[n]}(e.repoInfo_,(function(){return new Di(e.stats_,e.server_)})),e.infoData_=new Si,e.infoSyncTree_=new Ya({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Za(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),cu(e,"connected",!1),e.serverSyncTree_=new Ya({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);$o(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function au(e){var t=e.infoData_.getNode(new hr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ou(e){return go({timestamp:au(e)})}function uu(e,t,n,r,i){e.dataUpdateCount++;var a=new hr(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=he(n,(function(e){return ui(e)}));o=function(e,t,n,r){var i=ho(e,r);if(i){var a=fo(i),o=a.path,u=a.queryId,s=wr(o,t),c=Hi.fromObject(n);return po(e,o,new zi(Ri(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=ui(n);o=to(e.serverSyncTree_,a,s,i)}else if(r){var c=he(n,(function(e){return ui(e)}));o=function(e,t,n){var r=Hi.fromObject(n);return ao(e,new zi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=ui(n);o=Za(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=ku(e,a)),$o(e.eventQueue_,h,o)}function su(e,t){cu(e,"connected",t),!1===t&&function(e){yu(e,"onDisconnectEvents");var t=ou(e),n=Ei();Ni(e.onDisconnect_,fr(),(function(r,i){var a=bo(r,i,e.serverSyncTree_,t);Ti(n,r,a)}));var r=[];Ni(n,fr(),(function(t,n){r=r.concat(Za(e.serverSyncTree_,t,n));var i=Su(e,t);ku(e,i)})),e.onDisconnect_=Ei(),$o(e.eventQueue_,fr(),r)}(e)}function cu(e,t,n){var r=new hr("/.info/"+t),i=ui(n);e.infoData_.updateSnapshot(r,i);var a=Za(e.infoSyncTree_,r,i);$o(e.eventQueue_,r,a)}function lu(e){return e.nextWriteId_++}function hu(e,t,n,r,i){yu(e,"set",{path:t.toString(),value:n,priority:r});var a=ou(e),o=ui(n,r),u=ro(e.serverSyncTree_,t),s=xo(o,u,a),c=lu(e),l=Ja(e.serverSyncTree_,t,s,c,!0);Jo(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||xn("set at "+t+" failed: "+n);var o=$a(e.serverSyncTree_,c,!a);$o(e.eventQueue_,t,o),mu(e,i,n,r)}));var h=Su(e,t);ku(e,h),$o(e.eventQueue_,h,[])}function fu(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&Ci(e.onDisconnect_,t),mu(e,n,r,i)}))}function du(e,t,n,r){var i=ui(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&Ti(e.onDisconnect_,t,i),mu(e,r,n,a)}))}function pu(e,t,n){var r;r=".info"===dr(t._path)?eo(e.infoSyncTree_,t,n):eo(e.serverSyncTree_,t,n),Xo(e.eventQueue_,t._path,r)}function vu(e){e.persistentConnection_&&e.persistentConnection_.interrupt(tu)}function yu(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];_n.apply(void 0,[t].concat(r))}function mu(e,t,n,r){t&&Mn((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function gu(e,t,n){return ro(e.serverSyncTree_,t,n)||ii.EMPTY_NODE}function _u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Iu(e,t),To(t)){var n=bu(e,t);R(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=gu(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];R(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=wr(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){yu(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat($a(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);Iu(e,Eo(e.transactionQueueTree_,t)),_u(e,e.transactionQueueTree_),$o(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)Mn(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{xn("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}ku(e,t)}}),o)}(e,Do(t),n)}else No(t)&&Ao(t,(function(t){_u(e,t)}))}function ku(e,t){var n=wu(e,t),r=Do(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s,c=t[a],l=wr(n,c.path),h=!1;if(R(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat($a(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=nu)h=!0,u="maxretry",i=i.concat($a(e.serverSyncTree_,c.currentWriteId,!0));else{var f=gu(e,c.path,o);c.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Vo("transaction failed: Data returned ",d,c.path);var p=ui(d);"object"===typeof d&&null!=d&&se(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=c.currentWriteId,y=ou(e),m=xo(p,f,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=lu(e),o.splice(o.indexOf(v),1),i=(i=i.concat(Ja(e.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat($a(e.serverSyncTree_,v,!0))}else h=!0,u="nodata",i=i.concat($a(e.serverSyncTree_,c.currentWriteId,!0))}$o(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===u?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(u),!1,null)}))))},s=0;s<t.length;s++)u(s);Iu(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)Mn(r[c]);_u(e,e.transactionQueueTree_)}(e,bu(e,n),r),r}function wu(e,t){var n,r=e.transactionQueueTree_;for(n=dr(t);null!==n&&void 0===To(r);)r=Eo(r,n),n=dr(t=vr(t));return r}function bu(e,t){var n=[];return xu(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function xu(e,t,n){var r=To(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Ao(t,(function(t){xu(e,t,n)}))}function Iu(e,t){var n=To(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Co(t,n.length>0?n:void 0)}Ao(t,(function(t){Iu(e,t)}))}function Su(e,t){var n=Do(wu(e,t)),r=Eo(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Eu(e,t)})),Eu(e,r),Po(r,(function(t){Eu(e,t)})),n}function Eu(e,t){var n=To(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(R(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(R(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat($a(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Co(t,void 0):n.length=a+1,$o(e.eventQueue_,Do(t),i);for(var u=0;u<r.length;u++)Mn(r[u])}}var Tu=function(e,t){var n=Cu(e),r=n.namespace;"firebase.com"===n.domain&&bn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||bn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&xn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Gn(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new hr(n.pathString)}},Cu=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=y(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):xn("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},Nu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Au=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Nu.charAt(n%64),n=Math.floor(n/64);R(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Nu.charAt(t[r]);return R(20===o.length,"nextPushId: Length should be 20."),o}}(),Pu=function(){function e(t,n,r,i){_(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return w(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+oe(this.snapshot.exportVal())}}]),e}(),Du=function(){function e(t,n,r){_(this,e),this.eventRegistration=t,this.error=n,this.path=r}return w(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),Ru=function(){function e(t,n){_(this,e),this.snapshotCallback=t,this.cancelCallback=n}return w(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return R(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),Ou=function(){function e(t,n){_(this,e),this._repo=t,this._path=n}return w(e,[{key:"cancel",value:function(){var e=new G;return fu(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){Ho("OnDisconnect.remove",this._path);var e=new G;return du(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){Ho("OnDisconnect.set",this._path),Uo("OnDisconnect.set",e,this._path,!1);var t=new G;return du(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){Ho("OnDisconnect.setWithPriority",this._path),Uo("OnDisconnect.setWithPriority",e,this._path,!1),Bo("OnDisconnect.setWithPriority",t,!1);var n=new G;return function(e,t,n,r,i){var a=ui(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&Ti(e.onDisconnect_,t,a),mu(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){Ho("OnDisconnect.update",this._path),qo("OnDisconnect.update",e,this._path,!1);var t=new G;return function(e,t,n,r){if(le(n))return _n("onDisconnect().update() called with empty data.  Don't do anything."),void mu(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&Dn(n,(function(n,r){var i=ui(r);Ti(e.onDisconnect_,_r(t,n),i)})),mu(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),Lu=function(){function e(t,n,r,i){_(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return w(e,[{key:"key",get:function(){return kr(this._path)?null:yr(this._path)}},{key:"ref",get:function(){return new ju(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=xi(this._queryParams),t=An(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return xi(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Ee(t))instanceof e))return!1;var n=this._repo===t._repo,r=xr(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function Mu(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Fu(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Lr){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Sn)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==En)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===$r){if(null!=t&&!jo(t)||null!=n&&!jo(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(R(e.getIndex()instanceof si||e.getIndex()===li,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function zu(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var ju=function(e){I(n,e);var t=T(n);function n(e,r){return _(this,n),t.call(this,e,r,new gi,!1)}return w(n,[{key:"parent",get:function(){var e=gr(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Lu),Uu=function(){function e(t,n,r){_(this,e),this._node=t,this.ref=n,this._index=r}return w(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new hr(t),r=Bu(this.ref,t);return new e(this._node.getChild(n),r,$r)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Bu(n.ref,r),$r))}))}},{key:"hasChild",value:function(e){var t=new hr(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function Vu(e,t){return(e=Ee(e))._checkNotDeleted("ref"),void 0!==t?Bu(e._root,t):e._root}function qu(e,t){(e=Ee(e))._checkNotDeleted("refFromURL");var n=Tu(t,e._repo.repoInfo_.nodeAdmin);Qo("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||bn("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Vu(e,n.path.toString())}function Bu(e,t){return null===dr((e=Ee(e))._path)?Go("child","path",t,!1):Ko("child","path",t,!1),new ju(e._repo,_r(e._path,t))}function Wu(e,t){e=Ee(e),Ho("set",e._path),Uo("set",t,e._path,!1);var n=new G;return hu(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Ku(e,t){qo("update",t,e._path,!1);var n=new G;return function(e,t,n,r){yu(e,"update",{path:t.toString(),value:n});var i=!0,a=ou(e),o={};if(Dn(n,(function(n,r){i=!1,o[n]=bo(_r(t,n),ui(r),e.serverSyncTree_,a)})),i)_n("update() called with empty data.  Don't do anything."),mu(0,r,"ok",void 0);else{var u=lu(e),s=Xa(e.serverSyncTree_,t,o,u);Jo(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||xn("update at "+t+" failed: "+n);var o=$a(e.serverSyncTree_,u,!a),s=o.length>0?ku(e,t):t;$o(e.eventQueue_,s,o),mu(0,r,n,i)})),Dn(n,(function(n){var r=Su(e,_r(t,n));ku(e,r)})),$o(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function Gu(e){e=Ee(e);var t=new Ru((function(){})),n=new Hu(t);return function(e,t,n){var r=io(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=ui(r).withIndex(t._queryParams.getIndex());if(no(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=Za(e.serverSyncTree_,t._path,a);else{var o=co(e.serverSyncTree_,t);i=to(e.serverSyncTree_,t._path,a,o)}return $o(e.eventQueue_,t._path,i),eo(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return yu(e,"get for query "+oe(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new Uu(t,new ju(e._repo,e._path),e._queryParams.getIndex())}))}var Hu=function(){function e(t){_(this,e),this.callbackContext=t}return w(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new Pu("value",this,new Uu(e.snapshotNode,new ju(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Du(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),Qu=function(){function e(t,n){_(this,e),this.eventType=t,this.callbackContext=n}return w(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Du(this,e,t):null}},{key:"createEvent",value:function(e,t){R(null!=e.childName,"Child events should have a childName.");var n=Bu(new ju(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Pu(e.type,this,new Uu(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function Yu(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){pu(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new Ru(n,a||void 0),c="value"===t?new Hu(s):new Qu(t,s);return function(e,t,n){var r;r=".info"===dr(t._path)?no(e.infoSyncTree_,t,n):no(e.serverSyncTree_,t,n),Xo(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return pu(e._repo,e,c)}}function Ju(e,t,n,r){return Yu(e,"value",t,n,r)}function Xu(e,t,n,r){return Yu(e,"child_added",t,n,r)}function $u(e,t,n,r){return Yu(e,"child_changed",t,n,r)}function Zu(e,t,n,r){return Yu(e,"child_moved",t,n,r)}function es(e,t,n,r){return Yu(e,"child_removed",t,n,r)}function ts(e,t,n){var r=null,i=n?new Ru(n):null;"value"===t?r=new Hu(i):t&&(r=new Qu(t,i)),pu(e._repo,e,r)}var ns=w((function e(){_(this,e)})),rs=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this))._value=e,i._key=r,i}return w(n,[{key:"_apply",value:function(e){Uo("endAt",this._value,e._path,!0);var t=ki(e._queryParams,this._value,this._key);if(zu(t),Fu(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Lu(e._repo,e._path,t,e._orderByCalled)}}]),n}(ns);var is=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this))._value=e,i._key=r,i}return w(n,[{key:"_apply",value:function(e){Uo("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===Lr||n?ki(e,t,n):ki(e,t,Sn)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(zu(t),Fu(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Lu(e._repo,e._path,t,e._orderByCalled)}}]),n}(ns);var as=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this))._value=e,i._key=r,i}return w(n,[{key:"_apply",value:function(e){Uo("startAt",this._value,e._path,!0);var t=_i(e._queryParams,this._value,this._key);if(zu(t),Fu(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Lu(e._repo,e._path,t,e._orderByCalled)}}]),n}(ns);var os=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this))._value=e,i._key=r,i}return w(n,[{key:"_apply",value:function(e){Uo("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===Lr||n?_i(e,t,n):_i(e,t,En)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(zu(t),Fu(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Lu(e._repo,e._path,t,e._orderByCalled)}}]),n}(ns);var us=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this))._limit=e,r}return w(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Lu(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(ns);var ss=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this))._limit=e,r}return w(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Lu(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(ns);var cs=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this))._path=e,r}return w(n,[{key:"_apply",value:function(e){Mu(e,"orderByChild");var t=new hr(this._path);if(kr(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new si(t),r=wi(e._queryParams,n);return Fu(r),new Lu(e._repo,e._path,r,!0)}}]),n}(ns);var ls=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"_apply",value:function(e){Mu(e,"orderByKey");var t=wi(e._queryParams,Lr);return Fu(t),new Lu(e._repo,e._path,t,!0)}}]),n}(ns);var hs=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"_apply",value:function(e){Mu(e,"orderByPriority");var t=wi(e._queryParams,$r);return Fu(t),new Lu(e._repo,e._path,t,!0)}}]),n}(ns);var fs=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"_apply",value:function(e){Mu(e,"orderByValue");var t=wi(e._queryParams,li);return Fu(t),new Lu(e._repo,e._path,t,!0)}}]),n}(ns);var ds=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this))._value=e,i._key=r,i}return w(n,[{key:"_apply",value:function(e){if(Uo("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new rs(this._value,this._key)._apply(new as(this._value,this._key)._apply(e))}}]),n}(ns);function ps(e){for(var t=Ee(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){t=o[a]._apply(t)}return t}!function(e){R(!Na,"__referenceConstructor has already been defined"),Na=e}(ju),function(e){R(!Ma,"__referenceConstructor has already been defined"),Ma=e}(ju);var vs="FIREBASE_DATABASE_EMULATOR_HOST",ys={},ms=!1;function gs(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||bn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_n("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=Tu(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/General_Page",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[vs]),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=Tu(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new Un(Un.OWNER):new jn(e.name,e.options,t);Qo("Invalid Firebase Database URL",u),kr(u.path)||bn("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=ys[t.name];i||(i={},ys[t.name]=i);var a=i[e.toURLString()];a&&bn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new ru(e,ms,n,r),i[e.toURLString()]=a,a}(s,e,l,new zn(e.name,n));return new _s(h,e)}var _s=function(){function e(t,n){_(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return w(e,[{key:"_repo",get:function(){return this._instanceStarted||(iu(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new ju(this._repo,fr())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=ys[t];n&&n[e.key]===e||bn("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),vu(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&bn("Cannot call "+e+" on a deleted database.")}}]),e}();function ks(){ir.IS_TRANSPORT_INITIALIZED&&xn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function ws(){ks(),er.forceDisallow()}function bs(){ks(),rr.forceDisallow(),er.forceAllow()}function xs(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Ee(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&bn("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&bn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Un(Un.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:H(r.mockUserToken,e.app.options.projectId);a=new Un(o)}!function(e,t,n,r){e.repoInfo_=new Gn("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}function Is(e){var t;(e=Ee(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(tu)}function Ss(e,t){gn(e,t)}var Es={".sv":"timestamp"};var Ts=function(){function e(t,n){_(this,e),this.committed=t,this.snapshot=n}return w(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function Cs(e,t,n){var r;if(e=Ee(e),Ho("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new G,o=Ju(e,(function(){}));return function(e,t,n,r,i,a){yu(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:dn(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=gu(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Vo("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=Eo(e.transactionQueueTree_,t),h=To(l)||[];h.push(o),Co(l,h),"object"===typeof s&&null!==s&&se(s,".priority")?(c=ce(s,".priority"),R(jo(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(ro(e.serverSyncTree_,t)||ii.EMPTY_NODE).getPriority().val();var f=ou(e),d=ui(s,c),p=xo(d,u,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=lu(e);var v=Ja(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);$o(e.eventQueue_,t,v),_u(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new Uu(r,new ju(e._repo,e._path),$r),a.resolve(new Ts(n,i)))}),o,i),a.promise}Ar.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ar.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){on(xt),yt(new Te("database",(function(e,t){var n=t.instanceIdentifier;return gs(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Nt(nn,rn,e),Nt(nn,rn,"esm2017")}();var Ns=new ze("@firebase/database-compat"),As=function(e){var t="FIREBASE WARNING: "+e;Ns.warn(t)},Ps=function(){function e(t){_(this,e),this._delegate=t}return w(e,[{key:"cancel",value:function(e){we("OnDisconnect.cancel",0,1,arguments.length),xe("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){we("OnDisconnect.remove",0,1,arguments.length),xe("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){we("OnDisconnect.set",1,2,arguments.length),xe("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){we("OnDisconnect.setWithPriority",2,3,arguments.length),xe("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(we("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,As("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xe("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),Ds=function(){function e(t,n){_(this,e),this.committed=t,this.snapshot=n}return w(e,[{key:"toJSON",value:function(){return we("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),Rs=function(){function e(t,n){_(this,e),this._database=t,this._delegate=n}return w(e,[{key:"val",value:function(){return we("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return we("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return we("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return we("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return we("DataSnapshot.child",0,1,arguments.length),t=String(t),Ko("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return we("DataSnapshot.hasChild",1,1,arguments.length),Ko("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return we("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return we("DataSnapshot.forEach",1,1,arguments.length),xe("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return we("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return we("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return we("DataSnapshot.ref",0,0,arguments.length),new Ls(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),Os=function(){function e(t,n){_(this,e),this.database=t,this._delegate=n}return w(e,[{key:"on",value:function(t,n,r,i){var a,o=this;we("Query.on",2,4,arguments.length),xe("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new Rs(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return Ju(this._delegate,s,c),n;case"child_added":return Xu(this._delegate,s,c),n;case"child_removed":return es(this._delegate,s,c),n;case"child_changed":return $u(this._delegate,s,c),n;case"child_moved":return Zu(this._delegate,s,c),n;default:throw new Error(be("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(we("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(be(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),xe("Query.off","callback",t,!0),Ie("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,ts(this._delegate,e,r)}else ts(this._delegate,e)}},{key:"get",value:function(){var e=this;return Gu(this._delegate).then((function(t){return new Rs(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;we("Query.once",1,4,arguments.length),xe("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new G,s=function(e,t){var r=new Rs(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":Ju(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":Xu(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":es(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":$u(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":Zu(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(be("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return we("Query.limitToFirst",1,1,arguments.length),new e(this.database,ps(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new us(e)}(t)))}},{key:"limitToLast",value:function(t){return we("Query.limitToLast",1,1,arguments.length),new e(this.database,ps(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ss(e)}(t)))}},{key:"orderByChild",value:function(t){return we("Query.orderByChild",1,1,arguments.length),new e(this.database,ps(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ko("orderByChild","path",e,!1),new cs(e)}(t)))}},{key:"orderByKey",value:function(){return we("Query.orderByKey",0,0,arguments.length),new e(this.database,ps(this._delegate,new ls))}},{key:"orderByPriority",value:function(){return we("Query.orderByPriority",0,0,arguments.length),new e(this.database,ps(this._delegate,new hs))}},{key:"orderByValue",value:function(){return we("Query.orderByValue",0,0,arguments.length),new e(this.database,ps(this._delegate,new fs))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return we("Query.startAt",0,2,arguments.length),new e(this.database,ps(this._delegate,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Wo("startAt","key",t,!0),new as(e,t)}(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return we("Query.startAfter",0,2,arguments.length),new e(this.database,ps(this._delegate,function(e,t){return Wo("startAfter","key",t,!0),new os(e,t)}(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return we("Query.endAt",0,2,arguments.length),new e(this.database,ps(this._delegate,function(e,t){return Wo("endAt","key",t,!0),new rs(e,t)}(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return we("Query.endBefore",0,2,arguments.length),new e(this.database,ps(this._delegate,function(e,t){return Wo("endBefore","key",t,!0),new is(e,t)}(t,n)))}},{key:"equalTo",value:function(t,n){return we("Query.equalTo",1,2,arguments.length),new e(this.database,ps(this._delegate,function(e,t){return Wo("equalTo","key",t,!0),new ds(e,t)}(t,n)))}},{key:"toString",value:function(){return we("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return we("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(we("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new Ls(this.database,new ju(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,xe(e,"cancel",r.cancel,!0),r.context=n,Ie(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(be(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),Ls=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,new Lu(r._repo,r._path,new gi,!1))).database=e,i._delegate=r,i}return w(n,[{key:"getKey",value:function(){return we("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return we("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,Bu(this._delegate,e))}},{key:"getParent",value:function(){we("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return we("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){we("Reference.set",1,2,arguments.length),xe("Reference.set","onComplete",t,!0);var n=Wu(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(we("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,As("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ho("Reference.update",this._delegate._path),xe("Reference.update","onComplete",t,!0);var i=Ku(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){we("Reference.setWithPriority",2,3,arguments.length),xe("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(Ho("setWithPriority",e._path),Uo("setWithPriority",t,e._path,!1),Bo("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new G;return hu(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){we("Reference.remove",0,1,arguments.length),xe("Reference.remove","onComplete",e,!0);var t,n=(t=this._delegate,Ho("remove",t._path),Wu(t,null));return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n}},{key:"transaction",value:function(e,t,n){var r=this;we("Reference.transaction",1,3,arguments.length),xe("Reference.transaction","transactionUpdate",e,!1),xe("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(be(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);var i=Cs(this._delegate,e,{applyLocally:n}).then((function(e){return new Ds(e.committed,new Rs(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){we("Reference.setPriority",1,2,arguments.length),xe("Reference.setPriority","onComplete",t,!0);var n=function(e,t){e=Ee(e),Ho("setPriority",e._path),Bo("setPriority",t,!1);var n=new G;return hu(e._repo,_r(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;we("Reference.push",0,2,arguments.length),xe("Reference.push","onComplete",t,!0);var i=function(e,t){e=Ee(e),Ho("push",e._path),Uo("push",t,e._path,!0);var n,r=au(e._repo),i=Au(r),a=Bu(e,i),o=Bu(e,i);return n=null!=t?Wu(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return Ho("Reference.onDisconnect",this._delegate._path),new Ps(new Ou(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(Os),Ms=function(){function e(t,n){var r=this;_(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:ws,forceLongPolling:bs}}return w(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};xs(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(we("database.ref",0,1,arguments.length),e instanceof Ls){var t=qu(this._delegate,e.toString());return new Ls(this,t)}var n=Vu(this._delegate,e);return new Ls(this,n)}},{key:"refFromURL",value:function(e){we("database.refFromURL",1,1,arguments.length);var t=qu(this._delegate,e);return new Ls(this,t)}},{key:"goOffline",value:function(){return we("database.goOffline",0,0,arguments.length),function(e){(e=Ee(e))._checkNotDeleted("goOffline"),vu(e._repo)}(this._delegate)}},{key:"goOnline",value:function(){return we("database.goOnline",0,0,arguments.length),Is(this._delegate)}}]),e}();Ms.ServerValue={TIMESTAMP:Es,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var Fs,zs=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;on(r);var s=new Ne("auth-internal",new De("database-standalone"));return s.setComponent(new Te("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Ms(gs(t,s,void 0,n,u),t),namespace:a}}}),js=Ms.ServerValue;function Us(){return Us="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Us.apply(this,arguments)}(Fs=tn).INTERNAL.registerComponent(new Te("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Ms(i,r)}),"PUBLIC").setServiceProps({Reference:Ls,Query:Os,Database:Ms,DataSnapshot:Rs,enableLogging:Ss,INTERNAL:zs,ServerValue:js}).setMultipleInstances(!0)),Fs.registerVersion("@firebase/database-compat","0.3.4");var Vs,qs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Bs={},Ws=Ws||{},Ks=qs||self;function Gs(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Hs(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Qs="closure_uid_"+(1e9*Math.random()>>>0),Ys=0;function Js(e,t,n){return e.call.apply(e.bind,arguments)}function Xs(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function $s(e,t,n){return($s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Js:Xs).apply(null,arguments)}function Zs(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ec(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function tc(){this.s=this.s,this.o=this.o}tc.prototype.s=!1,tc.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Qs)&&e[Qs]||(e[Qs]=++Ys))},tc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var nc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function rc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ic(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Gs(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function ac(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ac.prototype.h=function(){this.defaultPrevented=!0};var oc=function(){if(!Ks.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ks.addEventListener("test",(function(){}),t),Ks.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function uc(e){return/^[\s\xa0]*$/.test(e)}function sc(){var e=Ks.navigator;return e&&(e=e.userAgent)?e:""}function cc(e){return-1!=sc().indexOf(e)}function lc(e){return lc[" "](e),e}lc[" "]=function(){};var hc,fc,dc=cc("Opera"),pc=cc("Trident")||cc("MSIE"),vc=cc("Edge"),yc=vc||pc,mc=cc("Gecko")&&!(-1!=sc().toLowerCase().indexOf("webkit")&&!cc("Edge"))&&!(cc("Trident")||cc("MSIE"))&&!cc("Edge"),gc=-1!=sc().toLowerCase().indexOf("webkit")&&!cc("Edge");function _c(){var e=Ks.document;return e?e.documentMode:void 0}e:{var kc="",wc=function(){var e=sc();return mc?/rv:([^\);]+)(\)|;)/.exec(e):vc?/Edge\/([\d\.]+)/.exec(e):pc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):gc?/WebKit\/(\S+)/.exec(e):dc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(wc&&(kc=wc?wc[1]:""),pc){var bc=_c();if(null!=bc&&bc>parseFloat(kc)){hc=String(bc);break e}}hc=kc}if(Ks.document&&pc){var xc=_c();fc=xc||(parseInt(hc,10)||void 0)}else fc=void 0;var Ic=fc;function Sc(e,t){if(ac.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(mc){e:{try{lc(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ec[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Sc.$.h.call(this)}}ec(Sc,ac);var Ec={2:"touch",3:"pen",4:"mouse"};Sc.prototype.h=function(){Sc.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Tc="closure_listenable_"+(1e6*Math.random()|0),Cc=0;function Nc(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Cc,this.fa=this.ia=!1}function Ac(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Pc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Dc(e){var t={};for(var n in e)t[n]=e[n];return t}var Rc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Oc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Rc.length;a++)n=Rc[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Lc(e){this.src=e,this.g={},this.h=0}function Mc(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=nc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Ac(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Fc(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Lc.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Fc(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Nc(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var zc="closure_lm_"+(1e6*Math.random()|0),jc={};function Uc(e,t,n,r,i){if(r&&r.once)return qc(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Uc(e,t[a],n,r,i);return null}return n=Yc(n),e&&e[Tc]?e.O(t,n,Hs(r)?!!r.capture:!!r,i):Vc(e,t,n,!1,r,i)}function Vc(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Hs(i)?!!i.capture:!!i,u=Hc(e);if(u||(e[zc]=u=new Lc(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Gc;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)oc||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Kc(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function qc(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)qc(e,t[a],n,r,i);return null}return n=Yc(n),e&&e[Tc]?e.P(t,n,Hs(r)?!!r.capture:!!r,i):Vc(e,t,n,!0,r,i)}function Bc(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Bc(e,t[a],n,r,i);else r=Hs(r)?!!r.capture:!!r,n=Yc(n),e&&e[Tc]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Fc(a=e.g[t],n,r,i))&&(Ac(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Hc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Fc(t,n,r,i)),(n=-1<e?t[e]:null)&&Wc(n))}function Wc(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Tc])Mc(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Kc(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Hc(t))?(Mc(n,e),0==n.h&&(n.src=null,t[zc]=null)):Ac(e)}}}function Kc(e){return e in jc?jc[e]:jc[e]="on"+e}function Gc(e,t){if(e.fa)e=!0;else{t=new Sc(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Wc(e),e=n.call(r,t)}return e}function Hc(e){return(e=e[zc])instanceof Lc?e:null}var Qc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yc(e){return"function"===typeof e?e:(e[Qc]||(e[Qc]=function(t){return e.handleEvent(t)}),e[Qc])}function Jc(){tc.call(this),this.i=new Lc(this),this.S=this,this.J=null}function Xc(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new ac(t,e);else if(t instanceof ac)t.target=t.target||e;else{var i=t;Oc(t=new ac(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=$c(o,r,!0,t)&&i}if(i=$c(o=t.g=e,r,!0,t)&&i,i=$c(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=$c(o=t.g=n[a],r,!1,t)&&i}function $c(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&Mc(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ec(Jc,tc),Jc.prototype[Tc]=!0,Jc.prototype.removeEventListener=function(e,t,n,r){Bc(this,e,t,n,r)},Jc.prototype.N=function(){if(Jc.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ac(n[r]);delete t.g[e],t.h--}}this.J=null},Jc.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Jc.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Zc=Ks.JSON.stringify,el=function(){function e(t,n){_(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return w(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function tl(){var e=cl,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var nl=function(){function e(){_(this,e),this.h=this.g=null}return w(e,[{key:"add",value:function(e,t){var n=rl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),rl=new el((function(){return new il}),(function(e){return e.reset()})),il=function(){function e(){_(this,e),this.next=this.g=this.h=null}return w(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function al(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ol(e){Ks.setTimeout((function(){throw e}),0)}var ul,sl=!1,cl=new nl,ll=function(){var e=Ks.Promise.resolve(void 0);ul=function(){e.then(hl)}},hl=function(){for(var e;e=tl();){try{e.h.call(e.g)}catch(n){ol(n)}var t=rl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}sl=!1};function fl(e,t){Jc.call(this),this.h=e||1,this.g=t||Ks,this.j=$s(this.qb,this),this.l=Date.now()}function dl(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function pl(e,t,n){if("function"===typeof e)n&&(e=$s(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=$s(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ks.setTimeout(e,t||0)}function vl(e){e.g=pl((function(){e.g=null,e.i&&(e.i=!1,vl(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ec(fl,Jc),(Vs=fl.prototype).ga=!1,Vs.T=null,Vs.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Xc(this,"tick"),this.ga&&(dl(this),this.start()))}},Vs.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Vs.N=function(){fl.$.N.call(this),dl(this),delete this.g};var yl=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return w(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:vl(this)}},{key:"N",value:function(){Us(S(n.prototype),"N",this).call(this),this.g&&(Ks.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(tc);function ml(e){tc.call(this),this.h=e,this.g={}}ec(ml,tc);var gl=[];function _l(e,t,n,r){Array.isArray(n)||(n&&(gl[0]=n.toString()),n=gl);for(var i=0;i<n.length;i++){var a=Uc(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function kl(e){Pc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Wc(e)}),e),e.g={}}function wl(){this.g=!0}function bl(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Zc(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}ml.prototype.N=function(){ml.$.N.call(this),kl(this)},ml.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wl.prototype.Ea=function(){this.g=!1},wl.prototype.info=function(){};var xl={},Il=null;function Sl(){return Il=Il||new Jc}function El(e){ac.call(this,xl.Ta,e)}function Tl(e){var t=Sl();Xc(t,new El(t))}function Cl(e,t){ac.call(this,xl.STAT_EVENT,e),this.stat=t}function Nl(e){var t=Sl();Xc(t,new Cl(t,e))}function Al(e,t){ac.call(this,xl.Ua,e),this.size=t}function Pl(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ks.setTimeout((function(){e()}),t)}xl.Ta="serverreachability",ec(El,ac),xl.STAT_EVENT="statevent",ec(Cl,ac),xl.Ua="timingevent",ec(Al,ac);var Dl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Rl={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ol(){}function Ll(e){return e.h||(e.h=e.i())}function Ml(){}Ol.prototype.h=null;var Fl,zl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function jl(){ac.call(this,"d")}function Ul(){ac.call(this,"c")}function Vl(){}function ql(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ml(this),this.P=Wl,e=yc?125:void 0,this.V=new fl(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Bl}function Bl(){this.i=null,this.g="",this.h=!1}ec(jl,ac),ec(Ul,ac),ec(Vl,Ol),Vl.prototype.g=function(){return new XMLHttpRequest},Vl.prototype.i=function(){return{}},Fl=new Vl;var Wl=45e3,Kl={},Gl={};function Hl(e,t,n){e.L=1,e.v=fh(uh(t)),e.s=n,e.S=!0,Ql(e,null)}function Ql(e,t){e.G=Date.now(),$l(e),e.A=uh(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Sh(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Bl,e.g=Tf(e.l,n?t:null,!e.s),0<e.O&&(e.M=new yl($s(e.Pa,e,e.g),e.O)),_l(e.U,e.g,"readystatechange",e.nb),t=e.I?Dc(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Tl(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Yl(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Jl(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Xl(e,n))==Gl){4==t&&(e.o=4,Nl(14),i=!1),bl(e.j,e.m,null,"[Incomplete Response]");break}if(r==Kl){e.o=4,Nl(15),bl(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}bl(e.j,e.m,r,null),rh(e,r)}Yl(e)&&r!=Gl&&r!=Kl&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Nl(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),_f(t),t.M=!0,Nl(11))):(bl(e.j,e.m,n,"[Invalid Chunked Response]"),nh(e),th(e))}function Xl(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Gl:(n=Number(t.substring(n,r)),isNaN(n)?Kl:(r+=1)+n>t.length?Gl:(t=t.slice(r,r+n),e.C=r+n,t))}function $l(e){e.Y=Date.now()+e.P,Zl(e,e.P)}function Zl(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Pl($s(e.lb,e),t)}function eh(e){e.B&&(Ks.clearTimeout(e.B),e.B=null)}function th(e){0==e.l.H||e.J||bf(e.l,e)}function nh(e){eh(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,dl(e.V),kl(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function rh(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Dh(n.i,e)))if(!e.K&&Dh(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;wf(n),hf(n)}gf(n),Nl(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Pl($s(n.ib,n),6e3));if(1>=Ph(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else If(n,11)}else if((e.K||n.g==e)&&wf(n),!uc(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Rh(h,h.h),h.h=null))}if(r.F){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.Da=f,hh(r.I,r.F,f))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Ef(r,r.J?r.pa:null,r.Y),d.K){Oh(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(eh(p),$l(p)),r.g=d}else mf(r);0<n.j.length&&df(n)}else"stop"!=a[0]&&"close"!=a[0]||If(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?If(n,7):lf(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Tl()}catch(a){}}function ih(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Gs(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Gs(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Gs(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Vs=ql.prototype).setTimeout=function(e){this.P=e},Vs.nb=function(e){e=e.target;var t=this.M;t&&3==rf(e)?t.l():this.Pa(e)},Vs.Pa=function(e){try{if(e==this.g)e:{var t=rf(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||yc||this.g&&(this.h.h||this.g.ja()||af(this.g)))){this.J||4!=t||7==n||Tl(),eh(this);var r=this.g.da();this.ca=r;t:if(Yl(this)){var i=af(this.g);e="";var a=i.length,o=4==rf(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){nh(this),th(this);var u="";break t}this.h.i=new Ks.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!uc(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Nl(12),nh(this),th(this);break e}bl(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rh(this,r)}this.S?(Jl(this,t,u),yc&&this.i&&3==t&&(_l(this.U,this.V,"tick",this.mb),this.V.start())):(bl(this.j,this.m,u,null),rh(this,u)),4==t&&nh(this),this.i&&!this.J&&(4==t?bf(this.l,this):(this.i=!1,$l(this)))}else(function(e){var t={};e=(e.g&&2<=rf(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!uc(e[n])){var r=al(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Nl(12)):(this.o=0,Nl(13)),nh(this),th(this)}}}catch(t){}},Vs.mb=function(){if(this.g){var e=rf(this.g),t=this.g.ja();this.C<t.length&&(eh(this),Jl(this,e,t),this.i&&4!=e&&$l(this))}},Vs.cancel=function(){this.J=!0,nh(this)},Vs.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Tl(),Nl(17)),nh(this),this.o=2,th(this)):Zl(this,this.Y-e)};var ah=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oh(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof oh){this.h=e.h,sh(this,e.j),this.s=e.s,this.g=e.g,ch(this,e.m),this.l=e.l;var t=e.i,n=new wh;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),lh(this,n),this.o=e.o}else e&&(t=String(e).match(ah))?(this.h=!1,sh(this,t[1]||"",!0),this.s=dh(t[2]||""),this.g=dh(t[3]||"",!0),ch(this,t[4]),this.l=dh(t[5]||"",!0),lh(this,t[6]||"",!0),this.o=dh(t[7]||"")):(this.h=!1,this.i=new wh(null,this.h))}function uh(e){return new oh(e)}function sh(e,t,n){e.j=n?dh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ch(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function lh(e,t,n){t instanceof wh?(e.i=t,function(e,t){t&&!e.j&&(bh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(xh(this,t),Sh(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ph(t,_h)),e.i=new wh(t,e.h))}function hh(e,t,n){e.i.set(t,n)}function fh(e){return hh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ph(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,vh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function vh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}oh.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ph(t,yh,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ph(t,yh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ph(n,"/"==n.charAt(0)?gh:mh,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ph(n,kh)),e.join("")};var yh=/[#\/\?@]/g,mh=/[#\?:]/g,gh=/[#\?]/g,_h=/[#\?@]/g,kh=/#/g;function wh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bh(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function xh(e,t){bh(e),t=Eh(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ih(e,t){return bh(e),t=Eh(e,t),e.g.has(t)}function Sh(e,t,n){xh(e,t),0<n.length&&(e.i=null,e.g.set(Eh(e,t),rc(n)),e.h+=n.length)}function Eh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Vs=wh.prototype).add=function(e,t){bh(this),this.i=null,e=Eh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Vs.forEach=function(e,t){bh(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Vs.ta=function(){bh(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Vs.Z=function(e){bh(this);var t=[];if("string"===typeof e)Ih(this,e)&&(t=t.concat(this.g.get(Eh(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Vs.set=function(e,t){return bh(this),this.i=null,Ih(this,e=Eh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Vs.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Vs.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Th=w((function e(t,n){_(this,e),this.g=t,this.map=n}));function Ch(e){this.l=e||Nh,Ks.PerformanceNavigationTiming?e=0<(e=Ks.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ks.g&&Ks.g.Ka&&Ks.g.Ka()&&Ks.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Nh=10;function Ah(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ph(e){return e.h?1:e.g?e.g.size:0}function Dh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Rh(e,t){e.g?e.g.add(t):e.h=t}function Oh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Lh(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=y(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return rc(e.i)}Ch.prototype.cancel=function(){if(this.i=Lh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=y(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Mh,Fh=function(){function e(){_(this,e)}return w(e,[{key:"stringify",value:function(e){return Ks.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Ks.JSON.parse(e,void 0)}}]),e}();function zh(){this.g=new Fh}function jh(e,t,n){var r=n||"";try{ih(e,(function(e,n){var i=e;Hs(e)&&(i=Zc(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Uh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Vh(e){this.l=e.fc||null,this.j=e.ob||!1}function qh(e,t){Jc.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Bh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ec(Vh,Ol),Vh.prototype.g=function(){return new qh(this.l,this.j)},Vh.prototype.i=(Mh={},function(){return Mh}),ec(qh,Jc);var Bh=0;function Wh(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Kh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Gh(e)}function Gh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Vs=qh.prototype).open=function(e,t){if(this.readyState!=Bh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Gh(this)},Vs.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Ks).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Vs.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kh(this)),this.readyState=Bh},Vs.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Gh(this)),this.g&&(this.readyState=3,Gh(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Ks.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wh(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Vs.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Kh(this):Gh(this),3==this.readyState&&Wh(this)}},Vs.Za=function(e){this.g&&(this.response=this.responseText=e,Kh(this))},Vs.Ya=function(e){this.g&&(this.response=e,Kh(this))},Vs.ka=function(){this.g&&Kh(this)},Vs.setRequestHeader=function(e,t){this.v.append(e,t)},Vs.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Vs.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(qh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Hh=Ks.JSON.parse;function Qh(e){Jc.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Yh,this.L=this.M=!1}ec(Qh,Jc);var Yh="",Jh=/^https?$/i,Xh=["POST","PUT"];function $h(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Zh(e),tf(e)}function Zh(e){e.F||(e.F=!0,Xc(e,"complete"),Xc(e,"error"))}function ef(e){if(e.h&&"undefined"!=typeof Ws&&(!e.C[1]||4!=rf(e)||2!=e.da()))if(e.v&&4==rf(e))pl(e.La,0,e);else if(Xc(e,"readystatechange"),4==rf(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(ah)[1]||null;!a&&Ks.self&&Ks.self.location&&(a=Ks.self.location.protocol.slice(0,-1)),i=!Jh.test(a?a.toLowerCase():"")}t=i}if(t)Xc(e,"complete"),Xc(e,"success");else{e.m=6;try{var o=2<rf(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",Zh(e)}}finally{tf(e)}}}function tf(e,t){if(e.g){nf(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Xc(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function nf(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Ks.clearTimeout(e.A),e.A=null)}function rf(e){return e.g?e.g.readyState:0}function af(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Yh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ld){return null}}function of(e){var t="";return Pc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function uf(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=of(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):hh(e,t,n))}function sf(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function cf(e){this.Ga=0,this.j=[],this.l=new wl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=sf("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=sf("baseRetryDelayMs",5e3,e),this.hb=sf("retryDelaySeedMs",1e4,e),this.eb=sf("forwardChannelMaxRetries",2,e),this.xa=sf("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Ch(e&&e.concurrentRequestLimit),this.Ja=new zh,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function lf(e){if(ff(e),3==e.H){var t=e.W++,n=uh(e.I);if(hh(n,"SID",e.K),hh(n,"RID",t),hh(n,"TYPE","terminate"),vf(e,n),(t=new ql(e,e.l,t)).L=2,t.v=fh(uh(n)),n=!1,Ks.navigator&&Ks.navigator.sendBeacon)try{n=Ks.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Ks.Image&&((new Image).src=t.v,n=!0),n||(t.g=Tf(t.l,null),t.g.ha(t.v)),t.G=Date.now(),$l(t)}Sf(e)}function hf(e){e.g&&(_f(e),e.g.cancel(),e.g=null)}function ff(e){hf(e),e.u&&(Ks.clearTimeout(e.u),e.u=null),wf(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ks.clearTimeout(e.m),e.m=null)}function df(e){if(!Ah(e.i)&&!e.m){e.m=!0;var t=e.Na;ul||ll(),sl||(ul(),sl=!0),cl.add(t,e),e.C=0}}function pf(e,t){var n;n=t?t.m:e.W++;var r=uh(e.I);hh(r,"SID",e.K),hh(r,"RID",n),hh(r,"AID",e.V),vf(e,r),e.o&&e.s&&uf(r,e.o,e.s),n=new ql(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=yf(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Rh(e.i,n),Hl(n,r,t)}function vf(e,t){e.na&&Pc(e.na,(function(e,n){hh(t,n,e)})),e.h&&ih({},(function(e,n){hh(t,n,e)}))}function yf(e,t,n){n=Math.min(e.j.length,n);var r=e.h?$s(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{jh(l,o,"req"+c+"_")}catch(wd){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function mf(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ul||ll(),sl||(ul(),sl=!0),cl.add(t,e),e.A=0}}function gf(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Pl($s(e.Ma,e),xf(e,e.A)),e.A++,!0)}function _f(e){null!=e.B&&(Ks.clearTimeout(e.B),e.B=null)}function kf(e){e.g=new ql(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=uh(e.wa);hh(t,"RID","rpc"),hh(t,"SID",e.K),hh(t,"AID",e.V),hh(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&hh(t,"TO",e.qa),hh(t,"TYPE","xmlhttp"),vf(e,t),e.o&&e.s&&uf(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=fh(uh(t)),n.s=null,n.S=!0,Ql(n,e)}function wf(e){null!=e.v&&(Ks.clearTimeout(e.v),e.v=null)}function bf(e,t){var n=null;if(e.g==t){wf(e),_f(e),e.g=null;var r=2}else{if(!Dh(e.i,t))return;n=t.F,Oh(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Xc(r=Sl(),new Al(r,n)),df(e)}else mf(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ph(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Pl($s(e.Na,e,t),xf(e,e.C)),e.C++,!0))}(e,t)||2==r&&gf(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:If(e,5);break;case 4:If(e,10);break;case 3:If(e,6);break;default:If(e,2)}}function xf(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function If(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=$s(e.pb,e);n||(n=new oh("//www.google.com/images/cleardot.gif"),Ks.location&&"http"==Ks.location.protocol||sh(n,"https"),fh(n)),function(e,t){var n=new wl;if(Ks.Image){var r=new Image;r.onload=Zs(Uh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Zs(Uh,n,r,"TestLoadImage: error",!1,t),r.onabort=Zs(Uh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Zs(Uh,n,r,"TestLoadImage: timeout",!1,t),Ks.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Nl(2);e.H=0,e.h&&e.h.za(t),Sf(e),ff(e)}function Sf(e){if(e.H=0,e.ma=[],e.h){var t=Lh(e.i);0==t.length&&0==e.j.length||(ic(e.ma,t),ic(e.ma,e.j),e.i.i.length=0,rc(e.j),e.j.length=0),e.h.ya()}}function Ef(e,t,n){var r=n instanceof oh?uh(n):new oh(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ch(r,r.m);else{var i=Ks.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new oh(null);r&&sh(a,r),t&&(a.g=t),i&&ch(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&hh(r,n,t),hh(r,"VER",e.ra),vf(e,r),r}function Tf(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Qh(new Vh({ob:!0})):new Qh(e.va)).Oa(e.J),t}function Cf(){}function Nf(){if(pc&&!(10<=Number(Ic)))throw Error("Environmental error: no available transport.")}function Af(e,t){Jc.call(this),this.g=new cf(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!uc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!uc(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Rf(this)}function Pf(e){jl.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Df(){Ul.call(this),this.status=1}function Rf(e){this.g=e}function Of(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Lf(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Mf(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Vs=Qh.prototype).Oa=function(e){this.M=e},Vs.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Fl.g(),this.C=this.u?Ll(this.u):Ll(Fl),this.g.onreadystatechange=$s(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void $h(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=y(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Ks.FormData&&e instanceof Ks.FormData,!(0<=nc(Xh,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=y(n);try{for(c.s();!(s=c.n()).done;){var l=f(s.value,2),h=l[0],d=l[1];this.g.setRequestHeader(h,d)}}catch(p){c.e(p)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{nf(this),0<this.B&&((this.L=function(e){return pc&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$s(this.ua,this)):this.A=pl(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){$h(this,u)}},Vs.ua=function(){"undefined"!=typeof Ws&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xc(this,"timeout"),this.abort(8))},Vs.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Xc(this,"complete"),Xc(this,"abort"),tf(this))},Vs.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tf(this,!0)),Qh.$.N.call(this)},Vs.La=function(){this.s||(this.G||this.v||this.l?ef(this):this.kb())},Vs.kb=function(){ef(this)},Vs.isActive=function(){return!!this.g},Vs.da=function(){try{return 2<rf(this)?this.g.status:-1}catch(Mh){return-1}},Vs.ja=function(){try{return this.g?this.g.responseText:""}catch(Mh){return""}},Vs.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Hh(t)}},Vs.Ia=function(){return this.m},Vs.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Vs=cf.prototype).ra=8,Vs.H=1,Vs.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new ql(this,this.l,e),n=this.s;if(this.U&&(n?Oc(n=Dc(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=yf(this,t,r),hh(i=uh(this.I),"RID",e),hh(i,"CVER",22),this.F&&hh(i,"X-HTTP-Session-Id",this.F),vf(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(of(n)))+"&"+r:this.o&&uf(i,this.o,n)),Rh(this.i,t),this.bb&&hh(i,"TYPE","init"),this.P?(hh(i,"$req",r),hh(i,"SID","null"),t.aa=!0,Hl(t,i,null)):Hl(t,i,r),this.H=2}}else 3==this.H&&(e?pf(this,e):0==this.j.length||Ah(this.i)||pf(this))},Vs.Ma=function(){if(this.u=null,kf(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Pl($s(this.jb,this),e)}},Vs.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Nl(10),hf(this),kf(this))},Vs.ib=function(){null!=this.v&&(this.v=null,hf(this),gf(this),Nl(19))},Vs.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Nl(2)):(this.l.info("Failed to ping google.com"),Nl(1))},Vs.isActive=function(){return!!this.h&&this.h.isActive(this)},(Vs=Cf.prototype).Ba=function(){},Vs.Aa=function(){},Vs.za=function(){},Vs.ya=function(){},Vs.isActive=function(){return!0},Vs.Va=function(){},Nf.prototype.g=function(e,t){return new Af(e,t)},ec(Af,Jc),Af.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Nl(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ef(e,null,e.Y),df(e)},Af.prototype.close=function(){lf(this.g)},Af.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Zc(e),e=n);t.j.push(new Th(t.fb++,e)),3==t.H&&df(t)},Af.prototype.N=function(){this.g.h=null,delete this.j,lf(this.g),delete this.g,Af.$.N.call(this)},ec(Pf,jl),ec(Df,Ul),ec(Rf,Cf),Rf.prototype.Ba=function(){Xc(this.g,"a")},Rf.prototype.Aa=function(e){Xc(this.g,new Pf(e))},Rf.prototype.za=function(e){Xc(this.g,new Df)},Rf.prototype.ya=function(){Xc(this.g,"b")},ec(Of,(function(){this.blockSize=-1})),Of.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Of.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Lf(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Lf(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Lf(this,r),i=0;break}}this.h=i,this.i+=t},Of.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Ff={};function zf(e){return-128<=e&&128>e?function(e,t){var n=Ff;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Mf([0|e],0>e?-1:0)})):new Mf([0|e],0>e?-1:0)}function jf(e){if(isNaN(e)||!isFinite(e))return Vf;if(0>e)return Gf(jf(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Uf;return new Mf(t,0)}var Uf=4294967296,Vf=zf(0),qf=zf(1),Bf=zf(16777216);function Wf(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Kf(e){return-1==e.h}function Gf(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Mf(n,~e.h).add(qf)}function Hf(e,t){return e.add(Gf(t))}function Qf(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Yf(e,t){this.g=e,this.h=t}function Jf(e,t){if(Wf(t))throw Error("division by zero");if(Wf(e))return new Yf(Vf,Vf);if(Kf(e))return t=Jf(Gf(e),t),new Yf(Gf(t.g),Gf(t.h));if(Kf(t))return t=Jf(e,Gf(t)),new Yf(Gf(t.g),t.h);if(30<e.g.length){if(Kf(e)||Kf(t))throw Error("slowDivide_ only works with positive integers.");for(var n=qf,r=t;0>=r.X(e);)n=Xf(n),r=Xf(r);var i=$f(n,1),a=$f(r,1);for(r=$f(r,2),n=$f(n,2);!Wf(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=$f(r,1),n=$f(n,1)}return t=Hf(e,i.R(t)),new Yf(i,t)}for(i=Vf;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=jf(n)).R(t);Kf(o)||0<o.X(e);)o=(a=jf(n-=r)).R(t);Wf(a)&&(a=qf),i=i.add(a),e=Hf(e,o)}return new Yf(i,e)}function Xf(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Mf(n,e.h)}function $f(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Mf(i,e.h)}(Vs=Mf.prototype).ea=function(){if(Kf(this))return-Gf(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Uf+r)*t,t*=Uf}return e},Vs.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Wf(this))return"0";if(Kf(this))return"-"+Gf(this).toString(e);for(var t=jf(Math.pow(e,6)),n=this,r="";;){var i=Jf(n,t).g,a=((0<(n=Hf(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Wf(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Vs.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Vs.X=function(e){return Kf(e=Hf(this,e))?-1:Wf(e)?0:1},Vs.abs=function(){return Kf(this)?Gf(this):this},Vs.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Mf(n,-2147483648&n[n.length-1]?-1:0)},Vs.R=function(e){if(Wf(this)||Wf(e))return Vf;if(Kf(this))return Kf(e)?Gf(this).R(Gf(e)):Gf(Gf(this).R(e));if(Kf(e))return Gf(this.R(Gf(e)));if(0>this.X(Bf)&&0>e.X(Bf))return jf(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Qf(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Qf(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Qf(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Qf(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Mf(n,0)},Vs.gb=function(e){return Jf(this,e).h},Vs.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Mf(n,this.h&e.h)},Vs.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Mf(n,this.h|e.h)},Vs.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Mf(n,this.h^e.h)},Nf.prototype.createWebChannel=Nf.prototype.g,Af.prototype.send=Af.prototype.u,Af.prototype.open=Af.prototype.m,Af.prototype.close=Af.prototype.close,Dl.NO_ERROR=0,Dl.TIMEOUT=8,Dl.HTTP_ERROR=6,Rl.COMPLETE="complete",Ml.EventType=zl,zl.OPEN="a",zl.CLOSE="b",zl.ERROR="c",zl.MESSAGE="d",Jc.prototype.listen=Jc.prototype.O,Qh.prototype.listenOnce=Qh.prototype.P,Qh.prototype.getLastError=Qh.prototype.Sa,Qh.prototype.getLastErrorCode=Qh.prototype.Ia,Qh.prototype.getStatus=Qh.prototype.da,Qh.prototype.getResponseJson=Qh.prototype.Wa,Qh.prototype.getResponseText=Qh.prototype.ja,Qh.prototype.send=Qh.prototype.ha,Qh.prototype.setWithCredentials=Qh.prototype.Oa,Of.prototype.digest=Of.prototype.l,Of.prototype.reset=Of.prototype.reset,Of.prototype.update=Of.prototype.j,Mf.prototype.add=Mf.prototype.add,Mf.prototype.multiply=Mf.prototype.R,Mf.prototype.modulo=Mf.prototype.gb,Mf.prototype.compare=Mf.prototype.X,Mf.prototype.toNumber=Mf.prototype.ea,Mf.prototype.toString=Mf.prototype.toString,Mf.prototype.getBits=Mf.prototype.D,Mf.fromNumber=jf,Mf.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Gf(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=jf(Math.pow(n,8)),i=Vf,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=jf(Math.pow(n,o)),i=i.R(o).add(jf(u))):i=(i=i.R(r)).add(jf(u))}return i};var Zf=Bs.createWebChannelTransport=function(){return new Nf},ed=Bs.getStatEventTarget=function(){return Sl()},td=Bs.ErrorCode=Dl,nd=Bs.EventType=Rl,rd=Bs.Event=xl,id=Bs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ad=Bs.FetchXmlHttpFactory=Vh,od=Bs.WebChannel=Ml,ud=Bs.XhrIo=Qh,sd=Bs.Md5=Of,cd=Bs.Integer=Mf,ld="@firebase/firestore",hd=function(){function e(t){_(this,e),this.uid=t}return w(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();hd.UNAUTHENTICATED=new hd(null),hd.GOOGLE_CREDENTIALS=new hd("google-credentials-uid"),hd.FIRST_PARTY=new hd("first-party-uid"),hd.MOCK_USER=new hd("mock-user");var fd="9.22.2",dd=new ze("@firebase/firestore");function pd(){return dd.logLevel}function vd(e){if(dd.logLevel<=Pe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gd);dd.debug.apply(dd,["Firestore (".concat(fd,"): ").concat(e)].concat(v(i)))}}function yd(e){if(dd.logLevel<=Pe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gd);dd.error.apply(dd,["Firestore (".concat(fd,"): ").concat(e)].concat(v(i)))}}function md(e){if(dd.logLevel<=Pe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gd);dd.warn.apply(dd,["Firestore (".concat(fd,"): ").concat(e)].concat(v(i)))}}function gd(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function _d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(fd,") INTERNAL ASSERTION FAILED: ")+e;throw yd(t),new Error(t)}function kd(e,t){e||_d()}function wd(e,t){return e}var bd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xd=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return w(n)}(ne),Id=w((function e(){var t=this;_(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Sd=w((function e(t,n){_(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Ed=function(){function e(){_(this,e)}return w(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(hd.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Td=function(){function e(t){_(this,e),this.token=t,this.changeListener=null}return w(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Cd=function(){function e(t){_(this,e),this.t=t,this.currentUser=hd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return w(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},o=new Id;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new Id,e.enqueueRetryable((function(){return i(n.currentUser)}))};var s=function(){var t=o;e.enqueueRetryable(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},c=function(e){vd("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),s()};this.t.onInit((function(e){return c(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?c(e):(vd("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Id)}}),0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(vd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(kd("string"==typeof n.accessToken),new Sd(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return kd(null===e||"string"==typeof e),new hd(e)}}]),e}(),Nd=function(){function e(t,n,r){_(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=hd.FIRST_PARTY,this.g=new Map}return w(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Ad=function(){function e(t,n,r){_(this,e),this.h=t,this.l=n,this.m=r}return w(e,[{key:"getToken",value:function(){return Promise.resolve(new Nd(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(hd.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Pd=w((function e(t){_(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Dd=function(){function e(t){_(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return w(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&vd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,vd("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){vd("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):vd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(kd("string"==typeof t.token),e.T=t.token,new Pd(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Rd(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Od=function(){function e(){_(this,e)}return w(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Rd(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Ld(e,t){return e<t?-1:e>t?1:0}function Md(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Fd(e){return e+"\0"}var zd=function(){function e(t,n){if(_(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new xd(bd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xd(bd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new xd(bd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new xd(bd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return w(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ld(this.nanoseconds,e.nanoseconds):Ld(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),jd=function(){function e(t){_(this,e),this.timestamp=t}return w(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new zd(0,0))}},{key:"max",value:function(){return new e(new zd(253402300799,999999999))}}]),e}(),Ud=function(){function e(t,n,r){_(this,e),void 0===n?n=0:n>t.length&&_d(),void 0===r?r=t.length-n:r>t.length-n&&_d(),this.segments=t,this.offset=n,this.len=r}return w(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Vd=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new xd(bd.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,v(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ud),qd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bd=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return qd.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new xd(bd.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new xd(bd.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new xd(bd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new xd(bd.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ud),Wd=function(){function e(t){_(this,e),this.path=t}return w(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Vd.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Vd.fromString(t))}},{key:"fromName",value:function(t){return new e(Vd.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Vd.emptyPath())}},{key:"comparator",value:function(e,t){return Vd.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Vd(t.slice()))}}]),e}(),Kd=w((function e(t,n,r,i){_(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Gd(e){return e.fields.find((function(e){return 2===e.kind}))}function Hd(e){return e.fields.filter((function(e){return 2!==e.kind}))}Kd.UNKNOWN_ID=-1;var Qd=w((function e(t,n){_(this,e),this.fieldPath=t,this.kind=n}));var Yd=function(){function e(t,n){_(this,e),this.sequenceNumber=t,this.offset=n}return w(e,null,[{key:"empty",value:function(){return new e(0,$d.min())}}]),e}();function Jd(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=jd.fromTimestamp(1e9===r?new zd(n+1,0):new zd(n,r));return new $d(i,Wd.empty(),t)}function Xd(e){return new $d(e.readTime,e.key,-1)}var $d=function(){function e(t,n,r){_(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return w(e,null,[{key:"min",value:function(){return new e(jd.min(),Wd.empty(),-1)}},{key:"max",value:function(){return new e(jd.max(),Wd.empty(),-1)}}]),e}();function Zd(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Wd.comparator(e.documentKey,t.documentKey))?n:Ld(e.largestBatchId,t.largestBatchId)}var ep="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tp=function(){function e(){_(this,e),this.onCommittedListeners=[]}return w(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function np(e){return rp.apply(this,arguments)}function rp(){return(rp=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===bd.FAILED_PRECONDITION&&t.message===ep){e.next=2;break}throw t;case 2:vd("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ip=function(){function e(t){var n=this;_(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return w(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&_d(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=y(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),ap=function(){function e(t,n){var r=this;_(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new Id,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new sp(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=dp(e.target.error);r.v.reject(new sp(t,n))}}return w(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(vd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new lp(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new sp(n,t)}}}]),e}(),op=function(){function e(t,n,r){_(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(Q())&&yd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return w(e,[{key:"$",value:function(){var e=u(a().mark((function e(t){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return vd("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new sp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new xd(bd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new xd(bd.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new sp(t,n))},i.onupgradeneeded=function(e){vd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){vd("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=u(a().mark((function e(t,n,r,i){var o,u,s,c,l=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o="readonly"===n,u=0,s=a().mark((function e(){var n,s,c,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++u,e.prev=1,e.next=4,l.$(t);case 4:return l.db=e.sent,n=ap.open(l.db,t,o?"readonly":"readwrite",r),s=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),ip.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.R;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),c=e.t1,h="FirebaseError"!==c.name&&u<3,vd("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),l.close(),h){e.next=18;break}return e.abrupt("return",{v:Promise.reject(c)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if("object"!==typeof(c=e.t0)){e.next=7;break}return e.abrupt("return",c.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return vd("SimpleDb","Removing database:",e),hp(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!te())return!1;if(e.C())return!0;var t=Q(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/General_Page",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),up=function(){function e(t){_(this,e),this.L=t,this.q=!1,this.U=null}return w(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return hp(this.L.delete())}}]),e}(),sp=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this,bd.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return w(n)}(xd);function cp(e){return"IndexedDbTransactionError"===e.name}var lp=function(){function e(t){_(this,e),this.store=t}return w(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(vd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(vd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),hp(n)}},{key:"add",value:function(e){return vd("SimpleDb","ADD",this.store.name,e,e),hp(this.store.add(e))}},{key:"get",value:function(e){var t=this;return hp(this.store.get(e)).next((function(n){return void 0===n&&(n=null),vd("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return vd("SimpleDb","DELETE",this.store.name,e),hp(this.store.delete(e))}},{key:"count",value:function(){return vd("SimpleDb","COUNT",this.store.name),hp(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new ip((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new ip((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){vd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new ip((function(n,r){t.onerror=function(e){var t=dp(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new ip((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new up(i),o=t(i.primaryKey,i.value,a);if(o instanceof ip){var u=o.catch((function(e){return a.done(),ip.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return ip.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function hp(e){return new ip((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=dp(e.target.error);n(t)}}))}var fp=!1;function dp(e){var t=op.S(Q());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new xd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return fp||(fp=!0,setTimeout((function(){throw r}),0)),r}}return e}var pp=function(){function e(t,n){_(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return w(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;vd("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=vd,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!cp(e.t4)){e.next=17;break}vd("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,np(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),vp=function(){function e(t,n){_(this,e),this.localStore=t,this.persistence=n}return w(e,[{key:"nt",value:function(){var e=u(a().mark((function e(){var t,n=this,r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return ip.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return vd("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return vd("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Xd(t);Zd(r,n)>0&&(n=r)})),new $d(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),yp=function(){function e(t,n){var r=this;_(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return w(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function mp(e){return null==e}function gp(e){return 0===e&&1/e==-1/0}function _p(e){return"number"==typeof e&&Number.isInteger(e)&&!gp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function kp(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=bp(t)),t=wp(e.get(n),t);return bp(t)}function wp(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function bp(e){return e+"\x01\x01"}function xp(e){var t=e.length;if(kd(t>=2),2===t)return kd("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Vd.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&_d(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:_d()}a=o+2}return new Vd(r)}yp.ct=-1;var Ip=["userId","batchId"];function Sp(e,t){return[e,kp(t)]}function Ep(e,t,n){return[e,kp(t),n]}var Tp={},Cp=["prefixPath","collectionGroup","readTime","documentId"],Np=["prefixPath","collectionGroup","documentId"],Ap=["collectionGroup","readTime","prefixPath","documentId"],Pp=["canonicalId","targetId"],Dp=["targetId","path"],Rp=["path","targetId"],Op=["collectionId","parent"],Lp=["indexId","uid"],Mp=["uid","sequenceNumber"],Fp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],zp=["indexId","uid","orderedDocumentKey"],jp=["userId","collectionPath","documentId"],Up=["userId","collectionPath","largestBatchId"],Vp=["userId","collectionGroup","largestBatchId"],qp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Bp=[].concat(v(qp),["documentOverlays"]),Wp=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Kp=Wp,Gp=[].concat(Kp,["indexConfiguration","indexState","indexEntries"]),Hp=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return w(n)}(tp);function Qp(e,t){var n=wd(e);return op.M(n.ht,t)}function Yp(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Jp(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Xp(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var $p=function(){function e(t,n){_(this,e),this.comparator=t,this.root=n||ev.EMPTY}return w(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ev.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ev.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Zp(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Zp(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Zp(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Zp(this.root,e,this.comparator,!0)}}]),e}(),Zp=function(){function e(t,n,r,i){_(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return w(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),ev=function(){function e(t,n,r,i,a){_(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return w(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw _d();if(this.right.isRed())throw _d();var e=this.left.check();if(e!==this.right.check())throw _d();return e+(this.isRed()?0:1)}}]),e}();ev.EMPTY=null,ev.RED=!0,ev.BLACK=!1,ev.EMPTY=new(function(){function e(){_(this,e),this.size=0}return w(e,[{key:"key",get:function(){throw _d()}},{key:"value",get:function(){throw _d()}},{key:"color",get:function(){throw _d()}},{key:"left",get:function(){throw _d()}},{key:"right",get:function(){throw _d()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ev(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var tv=function(){function e(t){_(this,e),this.comparator=t,this.data=new $p(this.comparator)}return w(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new nv(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new nv(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),nv=function(){function e(t){_(this,e),this.iter=t}return w(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function rv(e){return e.hasNext()?e.getNext():void 0}var iv=function(){function e(t){_(this,e),this.fields=t,t.sort(Bd.comparator)}return w(e,[{key:"unionWith",value:function(t){var n,r=new tv(Bd.comparator),i=y(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=y(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=y(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Md(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),av=function(e){I(n,e);var t=T(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return w(n)}(N(Error));var ov=function(e){function t(e){_(this,t),this.binaryString=e}return w(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ld(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new av("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();ov.EMPTY_BYTE_STRING=new ov("");var uv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sv(e){if(kd(!!e),"string"==typeof e){var t=0,n=uv.exec(e);if(kd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:cv(e.seconds),nanos:cv(e.nanos)}}function cv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function lv(e){return"string"==typeof e?ov.fromBase64String(e):ov.fromUint8Array(e)}function hv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fv(e){var t=e.mapValue.fields.__previous_value__;return hv(t)?fv(t):t}function dv(e){var t=sv(e.mapValue.fields.__local_write_time__.timestampValue);return new zd(t.seconds,t.nanos)}var pv=w((function e(t,n,r,i,a,o,u,s,c){_(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),vv=function(){function e(t,n){_(this,e),this.projectId=t,this.database=n||"(default)"}return w(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),yv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mv={nullValue:"NULL_VALUE"};function gv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hv(e)?4:Dv(e)?9007199254740991:10:_d()}function _v(e,t){if(e===t)return!0;var n=gv(e);if(n!==gv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return dv(e).isEqual(dv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=sv(e.timestampValue),r=sv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return lv(e.bytesValue).isEqual(lv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return cv(e.geoPointValue.latitude)===cv(t.geoPointValue.latitude)&&cv(e.geoPointValue.longitude)===cv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return cv(e.integerValue)===cv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=cv(e.doubleValue),r=cv(t.doubleValue);return n===r?gp(n)===gp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Md(e.arrayValue.values||[],t.arrayValue.values||[],_v);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Yp(n)!==Yp(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!_v(n[i],r[i])))return!1;return!0}(e,t);default:return _d()}}function kv(e,t){return void 0!==(e.values||[]).find((function(e){return _v(e,t)}))}function wv(e,t){if(e===t)return 0;var n=gv(e),r=gv(t);if(n!==r)return Ld(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ld(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=cv(e.integerValue||e.doubleValue),r=cv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return bv(e.timestampValue,t.timestampValue);case 4:return bv(dv(e),dv(t));case 5:return Ld(e.stringValue,t.stringValue);case 6:return function(e,t){var n=lv(e),r=lv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ld(n[i],r[i]);if(0!==a)return a}return Ld(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ld(cv(e.latitude),cv(t.latitude));return 0!==n?n:Ld(cv(e.longitude),cv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=wv(n[i],r[i]);if(a)return a}return Ld(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===yv.mapValue&&t===yv.mapValue)return 0;if(e===yv.mapValue)return 1;if(t===yv.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Ld(r[o],a[o]);if(0!==u)return u;var s=wv(n[r[o]],i[a[o]]);if(0!==s)return s}return Ld(r.length,a.length)}(e.mapValue,t.mapValue);default:throw _d()}}function bv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ld(e,t);var n=sv(e),r=sv(t),i=Ld(n.seconds,r.seconds);return 0!==i?i:Ld(n.nanos,r.nanos)}function xv(e){return Iv(e)}function Iv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=sv(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?lv(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Wd.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=y(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Iv(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=y(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Iv(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):_d();var t,n}function Sv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ev(e){return!!e&&"integerValue"in e}function Tv(e){return!!e&&"arrayValue"in e}function Cv(e){return!!e&&"nullValue"in e}function Nv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Av(e){return!!e&&"mapValue"in e}function Pv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Jp(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Pv(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Pv(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Dv(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Rv(e){return"nullValue"in e?mv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Sv(vv.empty(),Wd.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:_d()}function Ov(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Sv(vv.empty(),Wd.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?yv:_d()}function Lv(e,t){var n=wv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Mv(e,t){var n=wv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Fv=function(){function e(t){_(this,e),this.value=t}return w(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Av(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pv(t)}},{key:"setAll",value:function(e){var t=this,n=Bd.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Pv(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Av(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return _v(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Av(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Jp(t,(function(t,n){return e[t]=n}));var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Pv(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function zv(e){var t=[];return Jp(e.fields,(function(e,n){var r=new Bd([e]);if(Av(n)){var i=zv(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=y(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new iv(t)}var jv=function(){function e(t,n,r,i,a,o,u){_(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return w(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(jd.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Fv.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Fv.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=jd.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,jd.min(),jd.min(),jd.min(),Fv.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,jd.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,jd.min(),jd.min(),Fv.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,jd.min(),jd.min(),Fv.empty(),2)}}]),e}(),Uv=w((function e(t,n){_(this,e),this.position=t,this.inclusive=n}));function Vv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Wd.comparator(Wd.fromName(o.referenceValue),n.key):wv(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function qv(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!_v(e.position[n],t.position[n]))return!1;return!0}var Bv=w((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";_(this,e),this.field=t,this.dir=n}));function Wv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Kv=w((function e(){_(this,e)})),Gv=function(e){I(n,e);var t=T(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return w(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(wv(t,this.value)):null!==t&&gv(this.value)===gv(t)&&this.matchesComparison(wv(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _d()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new ny(e,t,r):"array-contains"===t?new oy(e,r):"in"===t?new uy(e,r):"not-in"===t?new sy(e,r):"array-contains-any"===t?new cy(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new ry(e,n):new iy(e,n)}}]),n}(Kv),Hv=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return w(n,[{key:"matches",value:function(e){return Qv(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=y(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Kv);function Qv(e){return"and"===e.op}function Yv(e){return"or"===e.op}function Jv(e){return Xv(e)&&Qv(e)}function Xv(e){var t,n=y(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Hv)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function $v(e){if(e instanceof Gv)return e.field.canonicalString()+e.op.toString()+xv(e.value);if(Jv(e))return e.filters.map((function(e){return $v(e)})).join(",");var t=e.filters.map((function(e){return $v(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Zv(e,t){return e instanceof Gv?function(e,t){return t instanceof Gv&&e.op===t.op&&e.field.isEqual(t.field)&&_v(e.value,t.value)}(e,t):e instanceof Hv?function(e,t){return t instanceof Hv&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Zv(n,t.filters[r])}),!0)}(e,t):void _d()}function ey(e,t){var n=e.filters.concat(t);return Hv.create(n,e.op)}function ty(e){return e instanceof Gv?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(xv(e.value))}(e):e instanceof Hv?function(e){return e.op.toString()+" {"+e.getFilters().map(ty).join(" ,")+"}"}(e):"Filter"}var ny=function(e){I(n,e);var t=T(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,e,r,i)).key=Wd.fromName(i.referenceValue),a}return w(n,[{key:"matches",value:function(e){var t=Wd.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Gv),ry=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,"in",r)).keys=ay("in",r),i}return w(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Gv),iy=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,"not-in",r)).keys=ay("not-in",r),i}return w(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Gv);function ay(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Wd.fromName(e.referenceValue)}))}var oy=function(e){I(n,e);var t=T(n);function n(e,r){return _(this,n),t.call(this,e,"array-contains",r)}return w(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Tv(t)&&kv(t.arrayValue,this.value)}}]),n}(Gv),uy=function(e){I(n,e);var t=T(n);function n(e,r){return _(this,n),t.call(this,e,"in",r)}return w(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&kv(this.value.arrayValue,t)}}]),n}(Gv),sy=function(e){I(n,e);var t=T(n);function n(e,r){return _(this,n),t.call(this,e,"not-in",r)}return w(n,[{key:"matches",value:function(e){if(kv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!kv(this.value.arrayValue,t)}}]),n}(Gv),cy=function(e){I(n,e);var t=T(n);function n(e,r){return _(this,n),t.call(this,e,"array-contains-any",r)}return w(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Tv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return kv(t.value.arrayValue,e)}))}}]),n}(Gv),ly=w((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;_(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.dt=null}));function hy(e){return new ly(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function fy(e){var t=wd(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return $v(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),mp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return xv(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return xv(e)})).join(",")),t.dt=n}return t.dt}function dy(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Wv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Zv(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qv(e.startAt,t.startAt)&&qv(e.endAt,t.endAt)}function py(e){return Wd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function vy(e,t){return e.filters.filter((function(e){return e instanceof Gv&&e.field.isEqual(t)}))}function yy(e,t,n){var r,i=mv,a=!0,o=y(vy(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=mv,c=!0;switch(u.op){case"<":case"<=":s=Rv(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=mv}Lv({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Lv({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function my(e,t,n){var r,i=yv,a=!0,o=y(vy(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=yv,c=!0;switch(u.op){case">=":case">":s=Ov(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=yv}Mv({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Mv({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var gy=w((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;_(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.wt=null,this._t=null,this.startAt,this.endAt}));function _y(e,t,n,r,i,a,o,u){return new gy(e,t,n,r,i,a,o,u)}function ky(e){return new gy(e)}function wy(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function by(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function xy(e){var t,n=y(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Iy(e){return null!==e.collectionGroup}function Sy(e){var t=wd(e);if(null===t.wt){t.wt=[];var n=xy(t),r=by(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new Bv(n)),t.wt.push(new Bv(Bd.keyField(),"asc"));else{var i,a=!1,o=y(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Bv(Bd.keyField(),s))}}}return t.wt}function Ey(e){var t=wd(e);if(!t._t)if("F"===t.limitType)t._t=hy(t.path,t.collectionGroup,Sy(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=y(Sy(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Bv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Uv(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Uv(t.startAt.position,t.startAt.inclusive):null;t._t=hy(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function Ty(e,t){t.getFirstInequalityField(),xy(e);var n=e.filters.concat([t]);return new gy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Cy(e,t,n){return new gy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ny(e,t){return dy(Ey(e),Ey(t))&&e.limitType===t.limitType}function Ay(e){return"".concat(fy(Ey(e)),"|lt:").concat(e.limitType)}function Py(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return ty(e)})).join(", "),"]")),mp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return xv(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return xv(e)})).join(",")),"Target(".concat(t,")")}(Ey(e)),"; limitType=").concat(e.limitType,")")}function Dy(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Wd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=y(Sy(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=y(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Vv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Sy(e),t))&&!(e.endAt&&!function(e,t,n){var r=Vv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Sy(e),t))}(e,t)}function Ry(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Oy(e){return function(t,n){var r,i=!1,a=y(Sy(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Ly(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Ly(e,t,n){var r=e.field.isKeyField()?Wd.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?wv(r,i):_d()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return _d()}}var My=function(){function e(t,n){_(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return w(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Jp(this.inner,(function(t,n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Xp(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Fy=new $p(Wd.comparator);function zy(){return Fy}var jy=new $p(Wd.comparator);function Uy(){for(var e=jy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Vy(e){var t=jy;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function qy(){return Wy()}function By(){return Wy()}function Wy(){return new My((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Ky=new $p(Wd.comparator),Gy=new tv(Wd.comparator);function Hy(){for(var e=Gy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Qy=new tv(Ld);function Yy(){return Qy}function Jy(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gp(t)?"-0":t}}function Xy(e){return{integerValue:""+e}}function $y(e,t){return _p(t)?Xy(t):Jy(e,t)}var Zy=w((function e(){_(this,e),this._=void 0}));function em(e,t,n){return e instanceof rm?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&hv(t)&&(t=fv(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof im?am(e,t):e instanceof om?um(e,t):function(e,t){var n=nm(e,t),r=cm(n)+cm(e.gt);return Ev(n)&&Ev(e.gt)?Xy(r):Jy(e.serializer,r)}(e,t)}function tm(e,t,n){return e instanceof im?am(e,t):e instanceof om?um(e,t):n}function nm(e,t){return e instanceof sm?Ev(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var rm=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n)}(Zy),im=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this)).elements=e,r}return w(n)}(Zy);function am(e,t){var n,r=lm(t),i=y(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return _v(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var om=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this)).elements=e,r}return w(n)}(Zy);function um(e,t){var n,r=lm(t),i=y(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!_v(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var sm=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return w(n)}(Zy);function cm(e){return cv(e.integerValue||e.doubleValue)}function lm(e){return Tv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var hm=w((function e(t,n){_(this,e),this.field=t,this.transform=n}));var fm=w((function e(t,n){_(this,e),this.version=t,this.transformResults=n})),dm=function(){function e(t,n){_(this,e),this.updateTime=t,this.exists=n}return w(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function pm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var vm=w((function e(){_(this,e)}));function ym(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Cm(e.key,dm.none()):new wm(e.key,e.data,dm.none());var n,r=e.data,i=Fv.empty(),a=new tv(Bd.comparator),o=y(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new bm(e.key,i,new iv(a.toArray()),dm.none())}function mm(e,t,n){e instanceof wm?function(e,t,n){var r=e.value.clone(),i=Im(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof bm?function(e,t,n){if(pm(e.precondition,t)){var r=Im(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(xm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function gm(e,t,n,r){return e instanceof wm?function(e,t,n,r){if(!pm(e.precondition,t))return n;var i=e.value.clone(),a=Sm(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof bm?function(e,t,n,r){if(!pm(e.precondition,t))return n;var i=Sm(e.fieldTransforms,r,t),a=t.data;return a.setAll(xm(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return pm(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function _m(e,t){var n,r=null,i=y(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=nm(a.transform,o||null);null!=u&&(null===r&&(r=Fv.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function km(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Md(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof im&&t instanceof im||e instanceof om&&t instanceof om?Md(e.elements,t.elements,_v):e instanceof sm&&t instanceof sm?_v(e.gt,t.gt):e instanceof rm&&t instanceof rm}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var wm=function(e){I(n,e);var t=T(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return _(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return w(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vm),bm=function(e){I(n,e);var t=T(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return _(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return w(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(vm);function xm(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Im(e,t,n){var r=new Map;kd(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,tm(o,u,n[i]))}return r}function Sm(e,t,n){var r,i=new Map,a=y(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,em(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Em,Tm,Cm=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return w(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vm),Nm=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return w(n,[{key:"getFieldMask",value:function(){return null}}]),n}(vm),Am=function(){function e(t,n,r,i){_(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return w(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&mm(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=y(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=gm(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=y(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=gm(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=By();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=ym(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(jd.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Hy())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Md(this.mutations,e.mutations,(function(e,t){return km(e,t)}))&&Md(this.baseMutations,e.baseMutations,(function(e,t){return km(e,t)}))}}]),e}(),Pm=function(){function e(t,n,r,i){_(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return w(e,null,[{key:"from",value:function(t,n,r){kd(t.mutations.length===r.length);for(var i=Ky,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Dm=function(){function e(t,n){_(this,e),this.largestBatchId=t,this.mutation=n}return w(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Rm=w((function e(t,n){_(this,e),this.count=t,this.unchangedNames=n}));function Om(e){switch(e){default:return _d();case bd.CANCELLED:case bd.UNKNOWN:case bd.DEADLINE_EXCEEDED:case bd.RESOURCE_EXHAUSTED:case bd.INTERNAL:case bd.UNAVAILABLE:case bd.UNAUTHENTICATED:return!1;case bd.INVALID_ARGUMENT:case bd.NOT_FOUND:case bd.ALREADY_EXISTS:case bd.PERMISSION_DENIED:case bd.FAILED_PRECONDITION:case bd.ABORTED:case bd.OUT_OF_RANGE:case bd.UNIMPLEMENTED:case bd.DATA_LOSS:return!0}}function Lm(e){if(void 0===e)return yd("GRPC error has no .code"),bd.UNKNOWN;switch(e){case Em.OK:return bd.OK;case Em.CANCELLED:return bd.CANCELLED;case Em.UNKNOWN:return bd.UNKNOWN;case Em.DEADLINE_EXCEEDED:return bd.DEADLINE_EXCEEDED;case Em.RESOURCE_EXHAUSTED:return bd.RESOURCE_EXHAUSTED;case Em.INTERNAL:return bd.INTERNAL;case Em.UNAVAILABLE:return bd.UNAVAILABLE;case Em.UNAUTHENTICATED:return bd.UNAUTHENTICATED;case Em.INVALID_ARGUMENT:return bd.INVALID_ARGUMENT;case Em.NOT_FOUND:return bd.NOT_FOUND;case Em.ALREADY_EXISTS:return bd.ALREADY_EXISTS;case Em.PERMISSION_DENIED:return bd.PERMISSION_DENIED;case Em.FAILED_PRECONDITION:return bd.FAILED_PRECONDITION;case Em.ABORTED:return bd.ABORTED;case Em.OUT_OF_RANGE:return bd.OUT_OF_RANGE;case Em.UNIMPLEMENTED:return bd.UNIMPLEMENTED;case Em.DATA_LOSS:return bd.DATA_LOSS;default:return _d()}}(Tm=Em||(Em={}))[Tm.OK=0]="OK",Tm[Tm.CANCELLED=1]="CANCELLED",Tm[Tm.UNKNOWN=2]="UNKNOWN",Tm[Tm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tm[Tm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tm[Tm.NOT_FOUND=5]="NOT_FOUND",Tm[Tm.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tm[Tm.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tm[Tm.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tm[Tm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tm[Tm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tm[Tm.ABORTED=10]="ABORTED",Tm[Tm.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tm[Tm.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tm[Tm.INTERNAL=13]="INTERNAL",Tm[Tm.UNAVAILABLE=14]="UNAVAILABLE",Tm[Tm.DATA_LOSS=15]="DATA_LOSS";var Mm=function(){function e(){_(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return w(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return Fm}},{key:"getOrCreateInstance",value:function(){return null===Fm&&(Fm=new e),Fm}}]),e}(),Fm=null;function zm(){return new TextEncoder}var jm=new cd([4294967295,4294967295],0);function Um(e){var t=zm().encode(e),n=new sd;return n.update(t),new Uint8Array(n.digest())}function Vm(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new cd([n,r],0),new cd([i,a],0)]}var qm=function(){function e(t,n,r){if(_(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bm("Invalid padding: ".concat(n));if(r<0)throw new Bm("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Bm("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Bm("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=cd.fromNumber(this.It)}return w(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(cd.fromNumber(n)));return 1===r.compare(jm)&&(r=new cd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=f(Vm(Um(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=f(Vm(Um(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Bm=function(e){I(n,e);var t=T(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return w(n)}(N(Error)),Wm=function(){function e(t,n,r,i,a){_(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return w(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Km.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(jd.min(),i,new $p(Ld),zy(),Hy())}}]),e}(),Km=function(){function e(t,n,r,i,a){_(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return w(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Hy(),Hy(),Hy())}}]),e}(),Gm=w((function e(t,n,r,i){_(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),Hm=w((function e(t,n){_(this,e),this.targetId=t,this.Vt=n})),Qm=w((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ov.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Ym=function(){function e(){_(this,e),this.St=0,this.Dt=$m(),this.Ct=ov.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return w(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=Hy(),t=Hy(),n=Hy();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:_d()}})),new Km(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=$m()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),Jm=function(){function e(t){_(this,e),this.Gt=t,this.Qt=new Map,this.jt=zy(),this.zt=Xm(),this.Wt=new $p(Ld)}return w(e,[{key:"Ht",value:function(e){var t,n=y(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(u){n.e(u)}finally{n.f()}var i,a=y(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:_d()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(py(a))if(0===r){var o=new Wd(a.path);this.Yt(n,o,jv.newNoDocument(o,jd.min()))}else kd(1===r);else{var u=this.ie(n);if(u!==r){var s=this.re(e,u);if(0!==s){this.ee(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=Mm.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,h=void 0===l?0:l,f=r.hashCount,d=void 0===f?0:f;try{a=lv(c).toUint8Array()}catch(e){if(e instanceof av)return md("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new qm(a,h,d)}catch(e){return md(e instanceof Bm?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&py(a.target)){var o=new Wd(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,jv.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=Hy();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Wm(e,n,this.Wt,this.jt,r);return this.jt=zy(),this.zt=Xm(),this.Wt=new $p(Ld),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new Ym,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new tv(Ld),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||vd("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new Ym),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Xm(){return new $p(Wd.comparator)}function $m(){return new $p(Wd.comparator)}var Zm={asc:"ASCENDING",desc:"DESCENDING"},eg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tg={and:"AND",or:"OR"},ng=w((function e(t,n){_(this,e),this.databaseId=t,this.useProto3Json=n}));function rg(e,t){return e.useProto3Json||mp(t)?t:{value:t}}function ig(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ag(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function og(e,t){return ig(e,t.toTimestamp())}function ug(e){return kd(!!e),jd.fromTimestamp(function(e){var t=sv(e);return new zd(t.seconds,t.nanos)}(e))}function sg(e,t){return function(e){return new Vd(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function cg(e){var t=Vd.fromString(e);return kd(Dg(t)),t}function lg(e,t){return sg(e.databaseId,t.path)}function hg(e,t){var n=cg(t);if(n.get(1)!==e.databaseId.projectId)throw new xd(bd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new xd(bd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Wd(vg(n))}function fg(e,t){return sg(e.databaseId,t)}function dg(e){var t=cg(e);return 4===t.length?Vd.emptyPath():vg(t)}function pg(e){return new Vd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function vg(e){return kd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function yg(e,t,n){return{name:lg(e,t),fields:n.value.mapValue.fields}}function mg(e,t,n){var r=hg(e,t.name),i=ug(t.updateTime),a=t.createTime?ug(t.createTime):jd.min(),o=new Fv({mapValue:{fields:t.fields}}),u=jv.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function gg(e,t){return"found"in t?function(e,t){kd(!!t.found),t.found.name,t.found.updateTime;var n=hg(e,t.found.name),r=ug(t.found.updateTime),i=t.found.createTime?ug(t.found.createTime):jd.min(),a=new Fv({mapValue:{fields:t.found.fields}});return jv.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){kd(!!t.missing),kd(!!t.readTime);var n=hg(e,t.missing),r=ug(t.readTime);return jv.newNoDocument(n,r)}(e,t):_d()}function _g(e,t){var n;if(t instanceof wm)n={update:yg(e,t.key,t.value)};else if(t instanceof Cm)n={delete:lg(e,t.key)};else if(t instanceof bm)n={update:yg(e,t.key,t.data),updateMask:Pg(t.fieldMask)};else{if(!(t instanceof Nm))return _d();n={verify:lg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof rm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof im)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof om)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof sm)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw _d()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:og(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:_d()}(e,t.precondition)),n}function kg(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?dm.updateTime(ug(e.updateTime)):void 0!==e.exists?dm.exists(e.exists):dm.none()}(t.currentDocument):dm.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)kd("REQUEST_TIME"===t.setToServerValue),n=new rm;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new im(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new om(i)}else"increment"in t?n=new sm(e,t.increment):_d();var a=Bd.fromServerFormat(t.fieldPath);return new hm(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=hg(e,t.update.name),a=new Fv({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new iv(t.map((function(e){return Bd.fromServerFormat(e)})))}(t.updateMask);return new bm(i,a,o,n,r)}return new wm(i,a,n,r)}if(t.delete){var u=hg(e,t.delete);return new Cm(u,n)}if(t.verify){var s=hg(e,t.verify);return new Nm(s,n)}return _d()}function wg(e,t){return{documents:[fg(e,t.path)]}}function bg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=fg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=fg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Ag(Hv.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Cg(e.field),direction:Sg(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=rg(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function xg(e){var t=dg(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){kd(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Ig(e);return t instanceof Hv&&Jv(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Bv(Ng(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return mp(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Uv(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Uv(n,t)}(n.endAt)),_y(t,i,u,o,s,"F",c,l)}function Ig(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ng(e.unaryFilter.field);return Gv.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ng(e.unaryFilter.field);return Gv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ng(e.unaryFilter.field);return Gv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ng(e.unaryFilter.field);return Gv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return _d()}}(e):void 0!==e.fieldFilter?function(e){return Gv.create(Ng(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _d()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Hv.create(e.compositeFilter.filters.map((function(e){return Ig(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return _d()}}(e.compositeFilter.op))}(e):_d()}function Sg(e){return Zm[e]}function Eg(e){return eg[e]}function Tg(e){return tg[e]}function Cg(e){return{fieldPath:e.canonicalString()}}function Ng(e){return Bd.fromServerFormat(e.fieldPath)}function Ag(e){return e instanceof Gv?function(e){if("=="===e.op){if(Nv(e.value))return{unaryFilter:{field:Cg(e.field),op:"IS_NAN"}};if(Cv(e.value))return{unaryFilter:{field:Cg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Nv(e.value))return{unaryFilter:{field:Cg(e.field),op:"IS_NOT_NAN"}};if(Cv(e.value))return{unaryFilter:{field:Cg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cg(e.field),op:Eg(e.op),value:e.value}}}(e):e instanceof Hv?function(e){var t=e.getFilters().map((function(e){return Ag(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Tg(e.op),filters:t}}}(e):_d()}function Pg(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Dg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Rg=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:jd.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:jd.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ov.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;_(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return w(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Og=w((function e(t){_(this,e),this.fe=t}));function Lg(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Mg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:lg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ig(e,t.version.toTimestamp()),createTime:ig(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fg(t.version)};else{if(!t.isUnknownDocument())return _d();r.unknownDocument={path:n.path.toArray(),version:Fg(t.version)}}return r}function Mg(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Fg(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function zg(e){var t=new zd(e.seconds,e.nanoseconds);return jd.fromTimestamp(t)}function jg(e,t){for(var n=(t.baseMutations||[]).map((function(t){return kg(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return kg(e.fe,t)})),u=zd.fromMillis(t.localWriteTimeMs);return new Am(t.batchId,u,n,o)}function Ug(e){var t,n,r=zg(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?zg(e.lastLimboFreeSnapshotVersion):jd.min();return void 0!==e.query.documents?(kd(1===(n=e.query).documents.length),t=Ey(ky(dg(n.documents[0])))):t=function(e){return Ey(xg(e))}(e.query),new Rg(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,ov.fromBase64String(e.resumeToken))}function Vg(e,t){var n,r=Fg(t.snapshotVersion),i=Fg(t.lastLimboFreeSnapshotVersion);n=py(t.target)?wg(e.fe,t.target):bg(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:fy(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function qg(e){var t=xg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Cy(t,t.limit,"L"):t}function Bg(e,t){return new Dm(t.largestBatchId,kg(e.fe,t.overlayMutation))}function Wg(e,t){var n=t.path.lastSegment();return[e,kp(t.path.popLast()),n]}function Kg(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Fg(r.readTime),documentKey:kp(r.documentKey.path),largestBatchId:r.largestBatchId}}var Gg=function(){function e(){_(this,e)}return w(e,[{key:"getBundleMetadata",value:function(e,t){return Hg(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:zg(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Hg(e).put({bundleId:(n=t).id,createTime:Fg(ug(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Qg(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:qg(t.bundledQuery),readTime:zg(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Qg(e).put(function(e){return{name:e.name,readTime:Fg(ug(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Hg(e){return Qp(e,"bundles")}function Qg(e){return Qp(e,"namedQueries")}var Yg=function(){function e(t,n){_(this,e),this.serializer=t,this.userId=n}return w(e,[{key:"getOverlay",value:function(e,t){var n=this;return Jg(e).get(Wg(this.userId,t)).next((function(e){return e?Bg(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=qy();return ip.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Dm(t,a);i.push(r.we(e,o))})),ip.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(kp(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Jg(e).J("collectionPathOverlayIndex",i))})),ip.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=qy(),a=kp(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Jg(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Bg(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=qy(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jg(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Bg(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return Jg(e).put(function(e,t,n){var r=f(Wg(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:_g(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Jg(e){return Qp(e,"documentOverlays")}var Xg=function(){function e(){_(this,e)}return w(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(cv(e.integerValue));else if("doubleValue"in e){var n=cv(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),gp(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(lv(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?Dv(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):_d()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),Wd.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function $g(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Zg(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=$g(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Xg.Ve=new Xg;var e_=function(){function e(){_(this,e),this.buffer=new Uint8Array(1024),this.position=0}return w(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=Zg(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=Zg(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),t_=function(){function e(t){_(this,e),this.je=t}return w(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),n_=function(){function e(t){_(this,e),this.je=t}return w(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),r_=function(){function e(){_(this,e),this.je=new e_,this.ze=new t_(this.je),this.We=new n_(this.je)}return w(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),i_=function(){function e(t,n,r,i){_(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return w(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function a_(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=o_(e.arrayValue,t.arrayValue))?n:0!==(n=o_(e.directionalValue,t.directionalValue))?n:Wd.comparator(e.documentKey,t.documentKey)}function o_(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var u_=function(){function e(t){_(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=y(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return w(e,[{key:"tn",value:function(e){kd(e.collectionGroup===this.collectionId);var t=Gd(e);if(void 0!==t&&!this.en(t))return!1;for(var n=Hd(e),r=new Set,i=0,a=0;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){var o=n[i];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Ye.length||!this.sn(this.Ye[a++],u))return!1}return!0}},{key:"en",value:function(e){var t,n=y(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function s_(e){var t,n;if(kd(e instanceof Gv||e instanceof Hv),e instanceof Gv){if(e instanceof uy){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Gv.create(e.field,"==",t)})))||[];return Hv.create(r,"or")}return e}var i=e.filters.map((function(e){return s_(e)}));return Hv.create(i,e.op)}function c_(e){if(0===e.getFilters().length)return[];var t=d_(s_(e));return kd(f_(t)),l_(t)||h_(t)?[t]:t.getFilters()}function l_(e){return e instanceof Gv}function h_(e){return e instanceof Hv&&Jv(e)}function f_(e){return l_(e)||h_(e)||function(e){if(e instanceof Hv&&Yv(e)){var t,n=y(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!l_(r)&&!h_(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function d_(e){if(kd(e instanceof Gv||e instanceof Hv),e instanceof Gv)return e;if(1===e.filters.length)return d_(e.filters[0]);var t=e.filters.map((function(e){return d_(e)})),n=Hv.create(t,e.op);return f_(n=y_(n))?n:(kd(n instanceof Hv),kd(Qv(n)),kd(n.filters.length>1),n.filters.reduce((function(e,t){return p_(e,t)})))}function p_(e,t){var n;return kd(e instanceof Gv||e instanceof Hv),kd(t instanceof Gv||t instanceof Hv),n=e instanceof Gv?t instanceof Gv?function(e,t){return Hv.create([e,t],"and")}(e,t):v_(e,t):t instanceof Gv?v_(t,e):function(e,t){if(kd(e.filters.length>0&&t.filters.length>0),Qv(e)&&Qv(t))return ey(e,t.getFilters());var n=Yv(e)?e:t,r=Yv(e)?t:e,i=n.filters.map((function(e){return p_(e,r)}));return Hv.create(i,"or")}(e,t),y_(n)}function v_(e,t){if(Qv(t))return ey(t,e.getFilters());var n=t.filters.map((function(t){return p_(e,t)}));return Hv.create(n,"or")}function y_(e){if(kd(e instanceof Gv||e instanceof Hv),e instanceof Gv)return e;var t=e.getFilters();if(1===t.length)return y_(t[0]);if(Xv(e))return e;var n=t.map((function(e){return y_(e)})),r=[];return n.forEach((function(t){t instanceof Gv?r.push(t):t instanceof Hv&&(t.op===e.op?r.push.apply(r,v(t.filters)):r.push(t))})),1===r.length?r[0]:Hv.create(r,e.op)}var m_=function(){function e(){_(this,e),this.rn=new g_}return w(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),ip.resolve()}},{key:"getCollectionParents",value:function(e,t){return ip.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return ip.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return ip.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return ip.resolve(null)}},{key:"getIndexType",value:function(e,t){return ip.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return ip.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return ip.resolve(null)}},{key:"getMinOffset",value:function(e,t){return ip.resolve($d.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return ip.resolve($d.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return ip.resolve()}},{key:"updateIndexEntries",value:function(e,t){return ip.resolve()}}]),e}(),g_=function(){function e(){_(this,e),this.index={}}return w(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new tv(Vd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new tv(Vd.comparator)).toArray()}}]),e}(),__=new Uint8Array(0),k_=function(){function e(t,n){_(this,e),this.user=t,this.databaseId=n,this.on=new g_,this.un=new My((function(e){return fy(e)}),(function(e,t){return dy(e,t)})),this.uid=t.uid||""}return w(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:kp(i)};return w_(e).put(a)}return ip.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Fd(t),""],!1,!0);return w_(e).j(r).next((function(e){var r,i=y(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(xp(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=x_(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=I_(e);return a.next((function(e){o.put(Kg(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=x_(e),r=I_(e),i=b_(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=b_(e),i=!0,a=new Map;return ip.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Hy(),o=[];return ip.forEach(a,(function(i,a){var u;vd("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(fy(t)));var s=function(e,t){var n=Gd(t);if(void 0===n)return null;var r,i=y(vy(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=y(Hd(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=y(vy(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=y(Hd(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?yy(e,o.fieldPath,e.startAt):my(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Uv(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=y(Hd(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?my(e,o.fieldPath,e.endAt):yy(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Uv(r,i)}(a,i),f=n.hn(i,a,l),d=n.hn(i,a,h),p=n.ln(i,a,c),v=n.fn(i.indexId,s,f,l.inclusive,d,h.inclusive,p);return ip.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Wd.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return ip.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:c_(Hv.create(e.filters,"and")).map((function(t){return hy(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],h=function(){var s=t?u.dn(t[f/c]):__,h=u.wn(e,s,n[f%c],r),d=u._n(e,s,i[f%c],a),p=o.map((function(t){return u.wn(e,s,t,!0)}));l.push.apply(l,v(u.createRange(h,d,p)))},f=0;f<s;++f)h();return l}},{key:"wn",value:function(e,t,n,r){var i=new i_(e,Wd.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new i_(e,Wd.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new u_(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=y(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return ip.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new tv(Bd.comparator),r=!1,i=y(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=y(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){i.e(h)}finally{i.f()}var s,c=y(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(h){c.e(h)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new r_,i=y(Hd(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.He(a.kind);Xg.Ve._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new r_;return Xg.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new r_;return Xg.Ve._e(Sv(this.databaseId,t),n.He(function(e){var t=Hd(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new r_);var i,a=0,o=y(Hd(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=y(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(this.yn(t,s.fieldPath)&&Tv(c))r=this.pn(r,s,c);else{var f=h.He(s.kind);Xg.Ve._e(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=v(e),a=[],o=y(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=y(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=new r_;h.seed(l.Qe()),Xg.Ve._e(s,h.He(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Gv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=x_(e),i=I_(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return ip.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Yd(t.sequenceNumber,new $d(zg(t.readTime),new Wd(xp(t.documentKey)),t.largestBatchId)):Yd.empty(),r=e.fields.map((function(e){var t=f(e,2),n=t[0],r=t[1];return new Qd(Bd.fromServerFormat(n),r)}));return new Kd(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ld(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=x_(e),a=I_(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return ip.forEach(t,(function(t){return a.put(Kg(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return ip.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?ip.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),ip.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?ip.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return b_(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return b_(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=b_(e),i=new tv(a_);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new i_(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new tv(a_),r=this.mn(t,e);if(null==r)return n;var i=Gd(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Tv(a)){var o,u=y(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new i_(t.indexId,e.key,this.dn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new i_(t.indexId,e.key,__,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;vd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=rv(a),s=rv(o);u||s;){var c=!1,l=!1;if(u&&s){var h=n(u,s);h<0?l=!0:h>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=rv(o)):l?(i(u),u=rv(a)):(u=rv(a),s=rv(o))}}(r,i,a_,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),ip.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return I_(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return a_(e,t)})).filter((function(e,t,n){return!t||0!==a_(e,n[t-1])}));var r=[];r.push(e);var i,a=y(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=a_(o,e),s=a_(o,t);if(0===u)r[0]=e.Je();else if(u>0&&s<0)r.push(o),r.push(o.Je());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var h=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,__,[]],f=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,__,[]];c.push(IDBKeyRange.bound(h,f))}return c}},{key:"bn",value:function(e,t){return a_(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(S_)}},{key:"getMinOffset",value:function(e,t){var n=this;return ip.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||_d()}))})).next(S_)}}]),e}();function w_(e){return Qp(e,"collectionParents")}function b_(e){return Qp(e,"indexEntries")}function x_(e){return Qp(e,"indexConfiguration")}function I_(e){return Qp(e,"indexState")}function S_(e){kd(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Zd(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new $d(t.readTime,t.documentKey,n)}var E_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T_=function(){function e(t,n,r){_(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return w(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function C_(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){kd(1===u)})));var c,l=[],h=y(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=Ep(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return ip.waitFor(a).next((function(){return l}))}function N_(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw _d();t=e.noDocument}return JSON.stringify(t).length}T_.DEFAULT_COLLECTION_PERCENTILE=10,T_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,T_.DEFAULT=new T_(41943040,T_.DEFAULT_COLLECTION_PERCENTILE,T_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),T_.DISABLED=new T_(-1,0,0);var A_=function(){function e(t,n,r,i){_(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return w(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return D_(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=R_(e),o=D_(e);return o.add({}).next((function(u){kd("number"==typeof u);var s,c=new Am(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return _g(e.fe,t)})),i=n.mutations.map((function(t){return _g(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),h=[],f=new tv((function(e,t){return Ld(e.canonicalString(),t.canonicalString())})),d=y(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Ep(i.userId,p.key.path,u);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,Tp))}}catch(m){d.e(m)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[u]=c.keys()})),ip.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return D_(e).get(t).next((function(e){return e?(kd(e.userId===n.userId),jg(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?ip.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return D_(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(kd(t.batchId>=r),a=jg(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return D_(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return D_(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return jg(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Sp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return R_(e).X({range:i},(function(r,i,o){var u=f(r,3),s=u[0],c=u[1],l=u[2],h=xp(c);if(s===n.userId&&t.path.isEqual(h))return D_(e).get(l).next((function(e){if(!e)throw _d();kd(e.userId===n.userId),a.push(jg(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new tv(Ld),i=[];return t.forEach((function(t){var a=Sp(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=R_(e).X({range:o},(function(e,i,a){var o=f(e,3),u=o[0],s=o[1],c=o[2],l=xp(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),ip.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Sp(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new tv(Ld);return R_(e).X({range:o},(function(e,t,a){var o=f(e,3),s=o[0],c=o[1],l=o[2],h=xp(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Dn(e,u)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(D_(e).get(t).next((function(e){if(null===e)throw _d();kd(e.userId===n.userId),r.push(jg(n.serializer,e))})))})),ip.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return C_(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),ip.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return ip.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return R_(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=xp(e[1]);i.push(a)}else r.done()})).next((function(){kd(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return P_(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return O_(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return kd(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function P_(e,t,n){var r=Sp(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return R_(e).X({range:a,Y:!0},(function(e,n,r){var a=f(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function D_(e){return Qp(e,"mutations")}function R_(e){return Qp(e,"documentMutations")}function O_(e){return Qp(e,"mutationQueues")}var L_=function(){function e(t){_(this,e),this.Nn=t}return w(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),M_=function(){function e(t,n){_(this,e),this.referenceDelegate=t,this.serializer=n}return w(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new L_(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return jd.fromTimestamp(new zd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return F_(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return kd(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return F_(e).X((function(o,u){var s=Ug(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return ip.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return F_(e).X((function(e,n){var r=Ug(n);t(r)}))}},{key:"$n",value:function(e){return z_(e).get("targetGlobalKey").next((function(e){return kd(null!==e),e}))}},{key:"On",value:function(e,t){return z_(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return F_(e).put(Vg(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=fy(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return F_(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Ug(n);dy(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=j_(e);return t.forEach((function(t){var o=kp(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),ip.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=j_(e);return ip.forEach(t,(function(t){var a=kp(t.path);return ip.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=j_(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=j_(e),i=Hy();return r.X({range:n,Y:!0},(function(e,t,n){var r=xp(e[1]),a=new Wd(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=kp(t.path),r=IDBKeyRange.bound([n],[Fd(n)],!1,!0),i=0;return j_(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=f(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return F_(e).get(t).next((function(e){return e?Ug(e):null}))}}]),e}();function F_(e){return Qp(e,"targets")}function z_(e){return Qp(e,"targetGlobal")}function j_(e){return Qp(e,"targetDocuments")}function U_(e,t){var n=f(e,2),r=n[0],i=n[1],a=f(t,2),o=a[0],u=a[1],s=Ld(r,o);return 0===s?Ld(i,u):s}var V_=function(){function e(t){_(this,e),this.Ln=t,this.buffer=new tv(U_),this.qn=0}return w(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();U_(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),q_=function(){function e(t,n,r){_(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return w(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;vd("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!cp(e.t0)){e.next=12;break}vd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,np(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),B_=function(){function e(t,n){_(this,e),this.jn=t,this.params=n}return w(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return ip.resolve(yp.ct);var r=new V_(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(vd("LruGarbageCollector","Garbage collection skipped; disabled"),ip.resolve(E_)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(vd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),E_):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(vd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),pd()<=Pe.DEBUG&&vd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),ip.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function W_(e,t){return new B_(e,t)}var K_=function(){function e(t,n){_(this,e),this.db=t,this.garbageCollector=W_(this,n)}return w(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return G_(e,n)}},{key:"removeReference",value:function(e,t,n){return G_(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return G_(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return O_(e).Z((function(r){return P_(e,r,t).next((function(e){return e&&(n=!0),ip.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,jd.min()),j_(e).delete([0,kp(o.path)])}))}));i.push(s)}})).next((function(){return ip.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return G_(e,t)}},{key:"Yn",value:function(e,t){var n,r=j_(e),i=yp.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=f(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==yp.ct&&t(new Wd(xp(n)),i),i=s,n=u):i=yp.ct})).next((function(){i!==yp.ct&&t(new Wd(xp(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function G_(e,t){return j_(e).put(function(e,t){return{targetId:0,path:kp(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var H_=function(){function e(){_(this,e),this.changes=new My((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return w(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,jv.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?ip.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Q_=function(){function e(t){_(this,e),this.serializer=t}return w(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return $_(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return $_(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Mg(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=jv.newInvalidDocument(t);return $_(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Z_(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:jv.newInvalidDocument(t)};return $_(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Z_(t))},(function(e,i){r={document:n.ts(t,i),size:N_(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=zy();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=zy(),i=new $p(Wd.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,N_(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return ip.resolve();var r=new tv(tk);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Z_(r.first()),Z_(r.last())),a=r.getIterator(),o=a.getNext();return $_(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Wd.fromSegments([].concat(v(t.prefixPath),[t.collectionGroup,t.documentId]));o&&tk(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(Z_(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Mg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $_(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=zy(),o=y(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.ts(Wd.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Dy(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=zy(),o=ek(t,n),u=ek(t,$d.max());return $_(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.ts(Wd.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new J_(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return X_(e).get("remoteDocumentGlobalKey").next((function(e){return kd(!!e),e}))}},{key:"Zn",value:function(e,t){return X_(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=mg(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Wd.fromSegments(t.noDocument.path),i=zg(t.noDocument.readTime);n=jv.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return _d();var a=Wd.fromSegments(t.unknownDocument.path),o=zg(t.unknownDocument.version);n=jv.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new zd(e[0],e[1]);return jd.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(jd.min()))return n}return jv.newInvalidDocument(e)}}]),e}();function Y_(e){return new Q_(e)}var J_=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new My((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return w(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new tv((function(e,t){return Ld(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.us.get(a);if(n.push(t.os.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Lg(t.os.serializer,o);i=i.add(a.path.popLast());var c=N_(s);r+=c-u.size,n.push(t.os.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Lg(t.os.serializer,o.convertToNoDocument(jd.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),ip.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(H_);function X_(e){return Qp(e,"remoteDocumentGlobal")}function $_(e){return Qp(e,"remoteDocumentsV14")}function Z_(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function ek(e,t){var n=t.documentKey.path.toArray();return[e,Mg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function tk(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Ld(n[a],r[a]))return i;return(i=Ld(n.length,r.length))||((i=Ld(n[n.length-2],r[r.length-2]))||Ld(n[n.length-1],r[r.length-1]))}var nk=w((function e(t,n){_(this,e),this.overlayedDocument=t,this.mutatedFields=n})),rk=function(){function e(t,n,r,i){_(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return w(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&gm(r.mutation,e,iv.empty(),zd.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Hy()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hy(),i=qy();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Uy();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=qy();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Hy())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=zy(),a=Wy(),o=Wy();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof bm)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),gm(o.mutation,t,o.mutation.getFieldMask(),zd.now())):a.set(t.key,iv.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new nk(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Wy(),i=new $p((function(e,t){return e-t})),a=Hy();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=y(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||iv.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Hy()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=By();c.forEach((function(e){if(!a.has(e)){var n=ym(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return ip.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Wd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Iy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):ip.resolve(qy()),u=-1,s=a;return o.next((function(t){return ip.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?ip.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Hy())})).next((function(e){return{batchId:u,changes:Vy(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Wd(t)).next((function(e){var t=Uy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Uy();return this.indexManager.getCollectionParents(e,i).next((function(o){return ip.forEach(o,(function(o){var u=function(e,t){return new gy(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,jv.newInvalidDocument(r)))}));var n=Uy();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&gm(a.mutation,i,iv.empty(),zd.now()),Dy(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),ik=function(){function e(t){_(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return w(e,[{key:"getBundleMetadata",value:function(e,t){return ip.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:ug(n.createTime)}),ip.resolve()}},{key:"getNamedQuery",value:function(e,t){return ip.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:qg(e.bundledQuery),readTime:ug(e.readTime)}}(t)),ip.resolve()}}]),e}(),ak=function(){function e(){_(this,e),this.overlays=new $p(Wd.comparator),this.ls=new Map}return w(e,[{key:"getOverlay",value:function(e,t){return ip.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=qy();return ip.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),ip.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),ip.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=qy(),i=t.length+1,a=new Wd(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return ip.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new $p((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=qy(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=qy(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return ip.resolve(s)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Dm(t,n));var a=this.ls.get(t);void 0===a&&(a=Hy(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),ok=function(){function e(){_(this,e),this.fs=new tv(uk.ds),this.ws=new tv(uk._s)}return w(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new uk(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new uk(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new Wd(new Vd([])),r=new uk(n,e),i=new uk(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new Wd(new Vd([])),n=new uk(t,e),r=new uk(t,e+1),i=Hy();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new uk(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),uk=function(){function e(t,n){_(this,e),this.key=t,this.As=n}return w(e,null,[{key:"ds",value:function(e,t){return Wd.comparator(e.key,t.key)||Ld(e.As,t.As)}},{key:"_s",value:function(e,t){return Ld(e.As,t.As)||Wd.comparator(e.key,t.key)}}]),e}(),sk=function(){function e(t,n){_(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new tv(uk.ds)}return w(e,[{key:"checkEmpty",value:function(e){return ip.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Am(i,t,n,r);this.mutationQueue.push(a);var o,u=y(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new uk(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return ip.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return ip.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return ip.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return ip.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return ip.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new uk(t,0),i=new uk(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),ip.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new tv(Ld);return t.forEach((function(e){var t=new uk(e,0),i=new uk(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),ip.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Wd.isDocumentKey(i)||(i=i.child(""));var a=new uk(new Wd(i),0),o=new tv(Ld);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),ip.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;kd(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return ip.forEach(t.mutations,(function(i){var a=new uk(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new uk(t,0),r=this.Rs.firstAfterOrEqual(n);return ip.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,ip.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),ck=function(){function e(t){_(this,e),this.Ds=t,this.docs=new $p(Wd.comparator),this.size=0}return w(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return ip.resolve(n?n.document.mutableCopy():jv.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=zy();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():jv.newInvalidDocument(e))})),ip.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=zy(),a=t.path,o=new Wd(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Zd(Xd(l),n)<=0||(r.has(l.key)||Dy(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return ip.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){_d()}},{key:"Cs",value:function(e,t){return ip.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new lk(this)}},{key:"getSize",value:function(e){return ip.resolve(this.size)}}]),e}(),lk=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this)).os=e,r}return w(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),ip.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(H_),hk=function(){function e(t){_(this,e),this.persistence=t,this.xs=new My((function(e){return fy(e)}),dy),this.lastRemoteSnapshotVersion=jd.min(),this.highestTargetId=0,this.Ns=0,this.ks=new ok,this.targetCount=0,this.Ms=L_.kn()}return w(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),ip.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return ip.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return ip.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),ip.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),ip.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new L_(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,ip.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),ip.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ip.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),ip.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return ip.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return ip.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),ip.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),ip.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),ip.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return ip.resolve(n)}},{key:"containsKey",value:function(e,t){return ip.resolve(this.ks.containsKey(t))}}]),e}(),fk=function(){function e(t,n){var r=this;_(this,e),this.$s={},this.overlays={},this.Os=new yp(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new hk(this),this.indexManager=new m_,this.remoteDocumentCache=new ck((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new Og(n),this.qs=new ik(this.serializer)}return w(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new ak,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new sk(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;vd("MemoryPersistence","Starting transaction:",e);var i=new dk(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return ip.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),dk=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return w(n)}(tp),pk=function(){function e(t){_(this,e),this.persistence=t,this.Qs=new ok,this.js=null}return w(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw _d()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),ip.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),ip.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),ip.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ip.forEach(this.Ws,(function(r){var i=Wd.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,jd.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return ip.or([function(){return ip.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),vk=function(){function e(t){_(this,e),this.serializer=t}return w(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new ap("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ip,{unique:!0}),e.createObjectStore("documentMutations")}(e),yk(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=ip.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),yk(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:jd.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ip,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return ip.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:jp});t.createIndex("collectionPathOverlayIndex",Up,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Vp,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Cp});t.createIndex("documentKeyIndex",Np),t.createIndex("collectionGroupIndex",Ap)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Lp}).createIndex("sequenceNumberIndex",Mp,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Fp}).createIndex("documentKeyIndex",zp,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=N_(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return ip.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return ip.forEach(r,(function(r){kd(r.userId===n.userId);var i=jg(t.serializer,r);return C_(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new Vd(n),o=function(e){return[0,kp(e)]}(a);r.push(t.get(o).next((function(n){return n?ip.resolve():function(n){return t.put({targetId:0,path:kp(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return ip.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Op});var n=t.store("collectionParents"),r=new g_,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:kp(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new Vd(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=f(e,3),r=(n[0],n[1]),a=(n[2],xp(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=Ug(r),a=Vg(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Wd(Vd.fromString(i.document.name).popFirst(5)):i.noDocument?Wd.fromSegments(i.noDocument.path):i.unknownDocument?Wd.fromSegments(i.unknownDocument.path):_d()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return ip.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=Y_(this.serializer),a=new fk(pk.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Hy();jg(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),ip.forEach(r,(function(e,r){var o=new hd(r),u=Yg.de(n.serializer,o),s=a.getIndexManager(o),c=A_.de(o,n.serializer,s,a.referenceDelegate);return new rk(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Hp(t,yp.ct),e).next()}))}))}}]),e}();function yk(e){e.createObjectStore("targetDocuments",{keyPath:Dp}).createIndex("documentTargetsIndex",Rp,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Pp,{unique:!0}),e.createObjectStore("targetGlobal")}var mk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",gk=function(){function e(t,n,r,i,a,o,u,s,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(_(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=u,this.ri=c,this.oi=l,this.ui=h,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new xd(bd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new K_(this,i),this.di=n+"main",this.serializer=new Og(s),this.wi=new op(this.di,this.ui,new vk(this.serializer)),this.Bs=new M_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Y_(this.serializer),this.qs=new Gg,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&yd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return w(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new xd(bd.FAILED_PRECONDITION,mk);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new yp(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=u(a().mark((function n(r){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=u(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return kk(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(cp(t))return vd("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return vd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return _k(e).get("owner").next((function(e){return ip.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return kk(e).delete(this.clientId)}},{key:"bi",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Qp(e,"clientMetadata");return t.j().next((function(e){var n=o.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return ip.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=y(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(a){n.e(a)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?ip.resolve(!0):_k(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new xd(bd.FAILED_PRECONDITION,mk);return!1}}return!(!t.networkEnabled||!t.inForeground)||kk(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&vd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=u(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Hp(e,yp.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return kk(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return A_.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new k_(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Yg.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;vd("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ui)?Gp:14===i?Kp:13===i?Wp:12===i?Bp:11===i?qp:void _d();return this.wi.runTransaction(e,o,u,(function(i){return a=new Hp(i,r.Os?r.Os.next():yp.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw yd("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new xd(bd.FAILED_PRECONDITION,ep);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return _k(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new xd(bd.FAILED_PRECONDITION,mk)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _k(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=_k(e);return n.get("owner").next((function(e){return t.Ri(e)?(vd("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):ip.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(yd("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!J()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return vd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return yd("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){yd("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return op.D()}}]),e}();function _k(e){return Qp(e,"owner")}function kk(e){return Qp(e,"clientMetadata")}function wk(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var bk=function(){function e(t,n,r,i){_(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return w(e,null,[{key:"Li",value:function(t,n){var r,i=Hy(),a=Hy(),o=y(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),xk=function(){function e(){_(this,e),this.qi=!1}return w(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(wy(t))return ip.resolve(null);var r=Ey(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Cy(t,null,"F"),r=Ey(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Hy.apply(void 0,v(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,Cy(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return wy(t)||r.isEqual(jd.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(pd()<=Pe.DEBUG&&vd("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Py(t)),i.Wi(e,o,t,Jd(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new tv(Oy(e));return t.forEach((function(t,r){Dy(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return pd()<=Pe.DEBUG&&vd("QueryEngine","Using full collection scan to execute query:",Py(t)),this.Ui.getDocumentsMatchingQuery(e,t,$d.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Ik=function(){function e(t,n,r,i){_(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new $p(Ld),this.Yi=new My((function(e){return fy(e)}),dy),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return w(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rk(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function Sk(e,t,n,r){return new Ik(e,t,n,r)}function Ek(e,t){return Tk.apply(this,arguments)}function Tk(){return Tk=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Hy(),s=y(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,h=y(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;u=u.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=y(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,g=y(v.mutations);try{for(g.s();!(m=g.n()).done;){var _=m.value;u=u.add(_.key)}}catch(k){g.e(k)}finally{g.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Tk.apply(this,arguments)}function Ck(e,t){var n=wd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=ip.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);kd(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Hy(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Nk(e){var t=wd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function Ak(e,t){var n=wd(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(ov.EMPTY_BYTE_STRING,jd.min()).withLastLimboFreeSnapshotVersion(jd.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var u=zy(),s=Hy();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Pk(e,a,t.documentUpdates).next((function(e){u=e.nr,s=e.sr}))),!r.isEqual(jd.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return ip.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function Pk(e,t,n){var r=Hy(),i=Hy();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=zy();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(jd.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):vd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function Dk(e,t){var n=wd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Rk(e,t){var n=wd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,ip.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new Rg(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function Ok(e,t,n){return Lk.apply(this,arguments)}function Lk(){return Lk=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wd(t),o=i.Ji.get(n),u=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",u,(function(e){return i.persistence.referenceDelegate.removeTarget(e,o)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),cp(e.t1)){e.next=12;break}throw e.t1;case 12:vd("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(o.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Lk.apply(this,arguments)}function Mk(e,t,n){var r=wd(e),i=jd.min(),a=Hy();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=wd(e),i=r.Yi.get(n);return void 0!==i?ip.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Ey(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:jd.min(),n?a:Hy())})).next((function(e){return jk(r,Ry(t),e),{documents:e,ir:a}}))}))}function Fk(e,t){var n=wd(e),r=wd(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function zk(e,t){var n=wd(e),r=n.Xi.get(t)||jd.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,Jd(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return jk(n,t,e),e}))}function jk(e,t,n){var r=e.Xi.get(t)||jd.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function Uk(e,t,n,r){return Vk.apply(this,arguments)}function Vk(){return Vk=u(a().mark((function e(t,n,r,i){var o,u,s,c,l,h,f,d,p,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=wd(t),u=Hy(),s=zy(),c=y(r);try{for(c.s();!(l=c.n()).done;)h=l.value,f=n.rr(h.metadata.name),h.document&&(u=u.add(f)),(d=n.ur(h)).setReadTime(n.cr(h.metadata.readTime)),s=s.insert(f,d)}catch(a){c.e(a)}finally{c.f()}return p=o.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,Rk(o,function(e){return Ey(ky(Vd.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",o.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Pk(e,p,s).next((function(t){return p.apply(e),t})).next((function(t){return o.Bs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return o.Bs.addMatchingKeys(e,u,v.targetId)})).next((function(){return o.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),Vk.apply(this,arguments)}function qk(e,t){return Bk.apply(this,arguments)}function Bk(){return Bk=u(a().mark((function e(t,n){var r,i,o,u=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:Hy(),e.next=3,Rk(t,Ey(qg(n.bundledQuery)));case 3:return i=e.sent,o=wd(t),e.abrupt("return",o.persistence.runTransaction("Save named query","readwrite",(function(e){var t=ug(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return o.qs.saveNamedQuery(e,n);var a=i.withResumeToken(ov.EMPTY_BYTE_STRING,t);return o.Ji=o.Ji.insert(a.targetId,a),o.Bs.updateTargetData(e,a).next((function(){return o.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return o.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return o.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Bk.apply(this,arguments)}function Wk(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Kk(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Gk(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Hk=function(){function e(t,n,r,i){_(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return w(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new xd(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(yd("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Qk=function(){function e(t,n,r){_(this,e),this.targetId=t,this.state=n,this.error=r}return w(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new xd(i.error.code,i.error.message))),a?new e(t,i.state,r):(yd("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Yk=function(){function e(t,n){_(this,e),this.clientId=t,this.activeTargetIds=n}return w(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Yy(),o=0;i&&o<r.activeTargetIds.length;++o)i=_p(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(yd("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Jk=function(){function e(t,n){_(this,e),this.clientId=t,this.onlineState=n}return w(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(yd("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Xk=function(){function e(){_(this,e),this.activeTargetIds=Yy()}return w(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),$k=function(){function e(t,n,r,i,a){_(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new $p(Ld),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=Wk(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new Xk),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return w(e,[{key:"start",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o,u,s,c,l,h,f,d=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=y(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(o=this.getItem(Wk(this.persistenceKey,i)))&&(u=Yk.ar(i,o))&&(this.gr=this.gr.insert(u.clientId,u));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(s=this.storage.getItem(this.vr))&&(c=this.br(s))&&this.Vr(c),l=y(this.yr);try{for(l.s();!(h=l.n()).done;)f=h.value,this.mr(f)}catch(a){l.e(a)}finally{l.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Gk(this.persistenceKey,e));if(n){var r=Qk.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Gk(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return vd("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){vd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){vd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(vd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void yd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(u(a().mark((function e(){var r,i,o,u,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(o=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(o));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(u=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(u));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(s));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}c=function(e){var t=yp.ct;if(null!=e)try{var n=JSON.parse(e);kd("number"==typeof n),t=n}catch(e){yd("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),c!==yp.ct&&t.sequenceNumberHandler(c),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return l=t.Gr(n.newValue),e.next=41,Promise.all(l.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new Hk(this.currentUser,e,t,n),i=Kk(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=Kk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=Gk(this.persistenceKey,e),i=new Qk(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return Yk.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Hk.ar(new hd(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return Qk.ar(r,t)}},{key:"br",value:function(e){return Jk.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:vd("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Wr(o,u).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=Yy();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Zk=function(){function e(){_(this,e),this.Hr=new Xk,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return w(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new Xk,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),ew=function(){function e(){_(this,e)}return w(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),tw=function(){function e(){var t=this;_(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return w(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){vd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=y(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){vd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=y(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),nw=null;function rw(){return null===nw?nw=268435456+Math.round(2147483648*Math.random()):nw++,"0x"+nw.toString(16)}var iw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},aw=function(){function e(t){_(this,e),this.ro=t.ro,this.oo=t.oo}return w(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),ow="WebChannelConnection",uw=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return w(n,[{key:"Ao",value:function(e,t,n,r){var i=rw();return new Promise((function(a,o){var u=new ud;u.setWithCredentials(!0),u.listenOnce(nd.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case td.NO_ERROR:var t=u.getResponseJson();vd(ow,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case td.TIMEOUT:vd(ow,"RPC '".concat(e,"' ").concat(i," timed out")),o(new xd(bd.DEADLINE_EXCEEDED,"Request time out"));break;case td.HTTP_ERROR:var n=u.getStatus();if(vd(ow,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(bd).indexOf(t)>=0?t:bd.UNKNOWN}(s.status);o(new xd(c,s.message))}else o(new xd(bd.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new xd(bd.UNAVAILABLE,"Connection failed."));break;default:_d()}}finally{vd(ow,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);vd(ow,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=rw(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Zf(),o=ed(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new ad({})),this.Eo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");vd(ow,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),h=!1,f=!1,d=new aw({ro:function(t){f?vd(ow,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(vd(ow,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),h=!0),vd(ow,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,od.EventType.OPEN,(function(){f||vd(ow,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,od.EventType.CLOSE,(function(){f||(f=!0,vd(ow,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,od.EventType.ERROR,(function(t){f||(f=!0,md(ow,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new xd(bd.UNAVAILABLE,"The operation could not be completed")))})),p(l,od.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];kd(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){vd(ow,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Em[e];if(void 0!==t)return Lm(t)}(u),c=o.message;void 0===s&&(s=bd.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),f=!0,d.wo(new xd(s,c)),l.close()}else vd(ow,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,rd.STAT_EVENT,(function(t){t.stat===id.PROXY?vd(ow,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===id.NOPROXY&&vd(ow,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){_(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return w(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=rw(),o=this.To(e,t);vd("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.Eo(u,r,i),this.Ao(e,o,u,n).then((function(t){return vd("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw md("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+fd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=iw[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function sw(){return"undefined"!=typeof window?window:null}function cw(){return"undefined"!=typeof document?document:null}function lw(e){return new ng(e,!0)}var hw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;_(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return w(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&vd("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),fw=function(){function e(t,n,r,i,a,o,u,s){_(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new hw(t,n)}return w(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===bd.RESOURCE_EXHAUSTED?(yd(n.toString()),yd("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===bd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=f(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new xd(bd.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return vd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(vd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),dw=function(e){I(n,e);var t=T(n);function n(e,r,i,a,o,u){var s;return _(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return w(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:_d()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(kd(void 0===t||"string"==typeof t),ov.fromBase64String(t||"")):(kd(void 0===t||t instanceof Uint8Array),ov.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?bd.UNKNOWN:Lm(e.code);return new xd(t,e.message||"")}(o);n=new Qm(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=hg(e,s.document.name),l=ug(s.document.updateTime),h=s.document.createTime?ug(s.document.createTime):jd.min(),f=new Fv({mapValue:{fields:s.document.fields}}),d=jv.newFoundDocument(c,l,h,f),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Gm(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=hg(e,y.document),g=y.readTime?ug(y.readTime):jd.min(),_=jv.newNoDocument(m,g),k=y.removedTargetIds||[];n=new Gm([],k,_.key,_)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=hg(e,w.document),x=w.removedTargetIds||[];n=new Gm([],x,b,null)}else{if(!("filter"in t))return _d();t.filter;var I=t.filter;I.targetId;var S=I.count,E=void 0===S?0:S,T=I.unchangedNames,C=new Rm(E,T),N=I.targetId;n=new Hm(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return jd.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?jd.min():t.readTime?ug(t.readTime):jd.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=pg(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=py(r)?{documents:wg(e,r)}:{query:bg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ag(e,t.resumeToken);var i=rg(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(jd.min())>0){n.readTime=ig(e,t.snapshotVersion.toTimestamp());var a=rg(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _d()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=pg(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(fw),pw=function(e){I(n,e);var t=T(n);function n(e,r,i,a,o,u){var s;return _(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.ru=!1,s}return w(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,Us(S(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(kd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(kd(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ug(e.updateTime):ug(t);return n.isEqual(jd.min())&&(n=ug(t)),new fm(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ug(e.commitTime);return this.listener.cu(n,t)}return kd(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=pg(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return _g(t.serializer,e)}))};this.Wo(n)}}]),n}(fw),vw=function(e){I(n,e);var t=T(n);function n(e,r,i,a){var o;return _(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return w(n,[{key:"fu",value:function(){if(this.lu)throw new xd(bd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=f(i,2),o=a[0],u=a[1];return r.connection.Io(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new xd(bd.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=f(a,2),u=o[0],s=o[1];return i.connection.vo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bd.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new xd(bd.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return w((function e(){_(this,e)}))}());var yw=function(){function e(t,n){_(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return w(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(yd(t),this.mu=!1):vd("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),mw=w((function e(t,n,r,i,o){var s=this;_(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr((function(e){r.enqueueAndForget(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Cw(s),!e.t0){e.next=5;break}return vd("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wd(t)).vu.add(4),e.next=4,kw(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,gw(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(s);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new yw(r,i)}));function gw(e){return _w.apply(this,arguments)}function _w(){return(_w=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Cw(t)){e.next=18;break}n=y(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function kw(e){return ww.apply(this,arguments)}function ww(){return(ww=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=y(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function bw(e,t){var n=wd(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Tw(n)?Ew(n):rb(n).Ko()&&Iw(n,t))}function xw(e,t){var n=wd(e),r=rb(n);n.Au.delete(t),r.Ko()&&Sw(n,t),0===n.Au.size&&(r.Ko()?r.jo():Cw(n)&&n.bu.set("Unknown"))}function Iw(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(jd.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rb(e).su(t)}function Sw(e,t){e.Vu.qt(t),rb(e).iu(t)}function Ew(e){e.Vu=new Jm({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),rb(e).start(),e.bu.gu()}function Tw(e){return Cw(e)&&!rb(e).Uo()&&e.Au.size>0}function Cw(e){return 0===wd(e).vu.size}function Nw(e){e.Vu=void 0}function Aw(e){return Pw.apply(this,arguments)}function Pw(){return(Pw=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){Iw(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dw(e,t){return Rw.apply(this,arguments)}function Rw(){return(Rw=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Nw(t),Tw(t)?(t.bu.Iu(n),Ew(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ow(e,t,n){return Lw.apply(this,arguments)}function Lw(){return Lw=u(a().mark((function e(t,n,r){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof Qm&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=y(n.targetIds),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=14;break}if(u=o.value,e.t0=t.Au.has(u),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(u,r);case 10:t.Au.delete(u),t.Vu.removeTarget(u);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),vd("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Mw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Gm?t.Vu.Ht(n):n instanceof Hm?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(jd.min())){e.next=29;break}return e.prev=14,e.next=17,Nk(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(ov.EMPTY_BYTE_STRING,r.snapshotVersion)),Sw(e,t);var i=new Rg(r.target,t,n,r.sequenceNumber);Iw(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),vd("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Mw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Lw.apply(this,arguments)}function Mw(e,t,n){return Fw.apply(this,arguments)}function Fw(){return(Fw=u(a().mark((function e(t,n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(cp(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,kw(t);case 5:t.bu.set("Offline"),r||(r=function(){return Nk(t.localStore)}),t.asyncQueue.enqueueRetryable(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vd("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,gw(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zw(e,t){return t().catch((function(n){return Mw(e,n,t)}))}function jw(e){return Uw.apply(this,arguments)}function Uw(){return(Uw=u(a().mark((function e(t){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=wd(t),r=ib(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!Vw(n)){e.next=19;break}return e.prev=3,e.next=6,Dk(n.localStore,i);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=o.batchId,qw(n,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Mw(n,e.t0);case 17:e.next=2;break;case 19:Bw(n)&&Ww(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function Vw(e){return Cw(e)&&e.Eu.length<10}function qw(e,t){e.Eu.push(t);var n=ib(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Bw(e){return Cw(e)&&!ib(e).Uo()&&e.Eu.length>0}function Ww(e){ib(e).start()}function Kw(e){return Gw.apply(this,arguments)}function Gw(){return(Gw=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ib(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hw(e){return Qw.apply(this,arguments)}function Qw(){return(Qw=u(a().mark((function e(t){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ib(t),r=y(t.Eu);try{for(r.s();!(i=r.n()).done;)o=i.value,n.uu(o.mutations)}catch(a){r.e(a)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yw(e,t,n){return Jw.apply(this,arguments)}function Jw(){return(Jw=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),o=Pm.from(i,n,r),e.next=3,zw(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,jw(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xw(e,t){return $w.apply(this,arguments)}function $w(){return $w=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&ib(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Om(i=n.code)||i===bd.ABORTED){e.next=7;break}return r=t.Eu.shift(),ib(t).Qo(),e.next=5,zw(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,jw(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Bw(t)&&Ww(t);case 5:case"end":return e.stop()}}),e)}))),$w.apply(this,arguments)}function Zw(e,t){return eb.apply(this,arguments)}function eb(){return(eb=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=wd(t)).asyncQueue.verifyOperationInProgress(),vd("RemoteStore","RemoteStore received new credentials"),i=Cw(r),r.vu.add(3),e.next=6,kw(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,gw(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tb(e,t){return nb.apply(this,arguments)}function nb(){return(nb=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wd(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,gw(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,kw(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rb(e){return e.Su||(e.Su=function(e,t,n){var r=wd(e);return r.fu(),new dw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Aw.bind(null,e),ao:Dw.bind(null,e),nu:Ow.bind(null,e)}),e.Ru.push(function(){var t=u(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),Tw(e)?Ew(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:Nw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function ib(e){return e.Du||(e.Du=function(e,t,n){var r=wd(e);return r.fu(),new pw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Kw.bind(null,e),ao:Xw.bind(null,e),au:Hw.bind(null,e),cu:Yw.bind(null,e)}),e.Ru.push(function(){var t=u(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,jw(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(vd("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var ab=function(){function e(t,n,r,i,a){_(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Id,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return w(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xd(bd.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ob(e,t){if(yd("AsyncQueue","".concat(t,": ").concat(e)),cp(e))return new xd(bd.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var ub=function(){function e(t){_(this,e),this.comparator=t?function(e,n){return t(e,n)||Wd.comparator(e.key,n.key)}:function(e,t){return Wd.comparator(e.key,t.key)},this.keyedMap=Uy(),this.sortedSet=new $p(this.comparator)}return w(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),sb=function(){function e(){_(this,e),this.Cu=new $p(Wd.comparator)}return w(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):_d():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),cb=function(){function e(t,n,r,i,a,o,u,s,c){_(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return w(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ny(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,ub.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),lb=w((function e(){_(this,e),this.Nu=void 0,this.listeners=[]})),hb=w((function e(){_(this,e),this.queries=new My((function(e){return Ay(e)}),Ny),this.onlineState="Unknown",this.ku=new Set}));function fb(e,t){return db.apply(this,arguments)}function db(){return db=u(a().mark((function e(t,n){var r,i,o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wd(t),i=n.query,o=!1,(u=r.queries.get(i))||(o=!0,u=new lb),!o){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:u.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=ob(e.t0,"Initialization of query '".concat(Py(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,u),u.listeners.push(n),n.Mu(r.onlineState),u.Nu&&n.$u(u.Nu)&&gb(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),db.apply(this,arguments)}function pb(e,t){return vb.apply(this,arguments)}function vb(){return vb=u(a().mark((function e(t,n){var r,i,o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wd(t),i=n.query,o=!1,(u=r.queries.get(i))&&(s=u.listeners.indexOf(n))>=0&&(u.listeners.splice(s,1),o=0===u.listeners.length),!o){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),vb.apply(this,arguments)}function yb(e,t){var n,r=wd(e),i=!1,a=y(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=y(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}s.Nu=o}}}catch(h){a.e(h)}finally{a.f()}i&&gb(r)}function mb(e,t,n){var r=wd(e),i=r.queries.get(t);if(i){var a,o=y(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function gb(e){e.ku.forEach((function(e){e.next()}))}var _b=function(){function e(t,n,r){_(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return w(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=y(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new cb(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=cb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),kb=function(){function e(t,n){_(this,e),this.Gu=t,this.byteLength=n}return w(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),wb=function(){function e(t){_(this,e),this.serializer=t}return w(e,[{key:"rr",value:function(e){return hg(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?mg(this.serializer,e.document,!1):jv.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return ug(e)}}]),e}(),bb=function(){function e(t,n,r){_(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xb(t)}return w(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=Vd.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new wb(this.serializer),i=y(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.rr(a.metadata.name),s=y(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Hy()).add(u);n.set(c,l)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uk(this.localStore,new wb(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=y(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return o=i.value,e.next=11,qk(this.localStore,o,n.get(o.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function xb(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Ib=w((function e(t){_(this,e),this.key=t})),Sb=w((function e(t){_(this,e),this.key=t})),Eb=function(){function e(t,n){_(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Hy(),this.mutatedKeys=Hy(),this.tc=Oy(t),this.ec=new ub(this.tc)}return w(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new sb,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Dy(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.rc(l,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.tc(h,s)>0||c&&n.tc(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:u,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _d()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],u=0===this.Zu.size&&this.current?1:0,s=u!==this.Xu;return this.Xu=u,0!==a.length||s?{snapshot:new cb(this.query,e.ec,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new sb,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=Hy(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new Sb(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new Ib(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=Hy();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return cb.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),Tb=w((function e(t,n,r){_(this,e),this.query=t,this.targetId=n,this.view=r})),Cb=w((function e(t){_(this,e),this.key=t,this.fc=!1})),Nb=function(){function e(t,n,r,i,a,o){_(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new My((function(e){return Ay(e)}),Ny),this._c=new Map,this.mc=new Set,this.gc=new $p(Wd.comparator),this.yc=new Map,this.Ic=new ok,this.Tc={},this.Ec=new Map,this.Ac=L_.Mn(),this.onlineState="Unknown",this.vc=void 0}return w(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function Ab(e,t){return Pb.apply(this,arguments)}function Pb(){return Pb=u(a().mark((function e(t,n){var r,i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=xx(t),!(u=r.wc.get(n))){e.next=6;break}i=u.targetId,r.sharedClientState.addLocalQueryTarget(i),o=u.view.lc(),e.next=15;break;case 6:return e.next=8,Rk(r.localStore,Ey(n));case 8:return s=e.sent,c=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,Db(r,n,i,"current"===c,s.resumeToken);case 13:o=e.sent,r.isPrimaryClient&&bw(r.remoteStore,s);case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),Pb.apply(this,arguments)}function Db(e,t,n,r,i){return Rb.apply(this,arguments)}function Rb(){return Rb=u(a().mark((function e(t,n,r,i,o){var s,c,l,h,f,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=u(a().mark((function e(t,n,r,i){var o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.view.sc(r),e.t0=o.zi,!e.t0){e.next=6;break}return e.next=5,Mk(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,o)}));case 5:o=e.sent;case 6:return u=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(o,t.isPrimaryClient,u),e.abrupt("return",(Zb(t,n.targetId,s.cc),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Mk(t.localStore,n,!0);case 3:return s=e.sent,c=new Eb(n,s.ir),l=c.sc(s.documents),h=Km.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,o),f=c.applyChanges(l,t.isPrimaryClient,h),Zb(t,r,f.cc),d=new Tb(n,r,c),e.abrupt("return",(t.wc.set(n,d),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),f.snapshot));case 11:case"end":return e.stop()}}),e)}))),Rb.apply(this,arguments)}function Ob(e,t){return Lb.apply(this,arguments)}function Lb(){return(Lb=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wd(t),i=r.wc.get(n),!((o=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,o.filter((function(e){return!Ny(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Ok(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),xw(r.remoteStore,i.targetId),Xb(r,i.targetId)})).catch(np);case 9:e.next=14;break;case 11:return Xb(r,i.targetId),e.next=14,Ok(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mb(e,t,n){return Fb.apply(this,arguments)}function Fb(){return Fb=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ix(t),e.prev=1,e.next=4,function(e,t){var n,r,i=wd(e),a=zd.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Hy());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=zy(),s=Hy();return i.Zi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=y(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=_m(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new bm(c.key,l,zv(l.value.mapValue),dm.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Vy(n)}}))}(i.localStore,n);case 4:return o=e.sent,i.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new $p(Ld)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,o.batchId,r),e.next=9,nx(i,o.changes);case 9:return e.next=11,jw(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),u=ob(e.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Fb.apply(this,arguments)}function zb(e,t){return jb.apply(this,arguments)}function jb(){return(jb=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),e.prev=1,e.next=4,Ak(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(kd(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?kd(n.fc):e.removedDocuments.size>0&&(kd(n.fc),n.fc=!1))})),e.next=8,nx(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,np(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Ub(e,t,n){var r=wd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=wd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=y(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&gb(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Vb(e,t,n){return qb.apply(this,arguments)}function qb(){return qb=u(a().mark((function e(t,n,r){var i,o,u,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=wd(t)).sharedClientState.updateQueryState(n,"rejected",r),o=i.yc.get(n),!(u=o&&o.key)){e.next=14;break}return s=(s=new $p(Wd.comparator)).insert(u,jv.newNoDocument(u,jd.min())),c=Hy().add(u),l=new Wm(jd.min(),new Map,new $p(Ld),s,c),e.next=9,zb(i,l);case 9:i.gc=i.gc.remove(u),i.yc.delete(n),tx(i),e.next=16;break;case 14:return e.next=16,Ok(i.localStore,n,!1).then((function(){return Xb(i,n,r)})).catch(np);case 16:case"end":return e.stop()}}),e)}))),qb.apply(this,arguments)}function Bb(e,t){return Wb.apply(this,arguments)}function Wb(){return(Wb=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),i=n.batch.batchId,e.prev=1,e.next=4,Ck(r.localStore,n);case 4:return o=e.sent,Jb(r,i,null),Yb(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,nx(r,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,np(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Kb(e,t,n){return Gb.apply(this,arguments)}function Gb(){return(Gb=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wd(t),e.prev=1,e.next=4,function(e,t){var n=wd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return kd(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return o=e.sent,Jb(i,n,r),Yb(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,nx(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,np(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Hb(e,t){return Qb.apply(this,arguments)}function Qb(){return(Qb=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cw((r=wd(t)).remoteStore)||vd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=wd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(o=r.Ec.get(i)||[]).push(n),r.Ec.set(i,o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),u=ob(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(u);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function Yb(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function Jb(e,t,n){var r=wd(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Xb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=y(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||$b(e,t)}))}function $b(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(xw(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),tx(e))}function Zb(e,t,n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Ib?(e.Ic.addReference(a.key,t),ex(e,a)):a instanceof Sb?(vd("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||$b(e,a.key)):_d()}}catch(o){i.e(o)}finally{i.f()}}function ex(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(vd("SyncEngine","New document in limbo: "+n),e.mc.add(r),tx(e))}function tx(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new Wd(Vd.fromString(t)),r=e.Ac.next();e.yc.set(r,new Cb(n)),e.gc=e.gc.insert(n,r),bw(e.remoteStore,new Rg(Ey(ky(n.path)),r,"TargetPurposeLimboResolution",yp.ct))}}function nx(e,t,n){return rx.apply(this,arguments)}function rx(){return rx=u(a().mark((function e(t,n,r){var i,o,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wd(t),o=[],s=[],c=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){c.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){o.push(e);var n=bk.Li(t.targetId,e);s.push(n)}})))})),e.next=6,Promise.all(c);case 6:return i.dc.nu(o),e.next=9,function(){var e=u(a().mark((function e(t,n){var r,i,o,u,s,c,l,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return ip.forEach(n,(function(t){return ip.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return ip.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),cp(e.t0)){e.next=10;break}throw e.t0;case 10:vd("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=y(n);try{for(i.s();!(o=i.n()).done;)u=o.value,s=u.targetId,u.fromCache||(c=r.Ji.get(s),l=c.snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),r.Ji=r.Ji.insert(s,h))}catch(a){i.e(a)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,s);case 9:case"end":return e.stop()}}),e)}))),rx.apply(this,arguments)}function ix(e,t){return ax.apply(this,arguments)}function ax(){return(ax=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=wd(t)).currentUser.isEqual(n)){e.next=11;break}return vd("SyncEngine","User change. New user:",n.toKey()),e.next=5,Ek(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new xd(bd.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,nx(r,i.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ox(e,t){var n=wd(e),r=n.yc.get(t);if(r&&r.fc)return Hy().add(r.key);var i=Hy(),a=n._c.get(t);if(!a)return i;var o,u=y(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.wc.get(s);i=i.unionWith(c.view.nc)}}catch(l){u.e(l)}finally{u.f()}return i}function ux(e,t){return sx.apply(this,arguments)}function sx(){return(sx=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),e.next=3,Mk(r.localStore,n.query,!0);case 3:return i=e.sent,o=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&Zb(r,n.targetId,o.cc),o));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cx(e,t){return lx.apply(this,arguments)}function lx(){return(lx=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),e.abrupt("return",zk(r.localStore,n).then((function(e){return nx(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hx(e,t,n,r){return fx.apply(this,arguments)}function fx(){return fx=u(a().mark((function e(t,n,r,i){var o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=wd(t),e.next=3,function(e,t){var n=wd(e),r=wd(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):ip.resolve(null)}))}))}(o.localStore,n);case 3:if(null===(u=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,jw(o.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Jb(o,n,i||null),Yb(o,n),function(e,t){wd(wd(e).mutationQueue).Cn(t)}(o.localStore,n)):_d();case 11:return e.next=13,nx(o,u);case 13:e.next=16;break;case 15:vd("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),fx.apply(this,arguments)}function dx(e,t){return px.apply(this,arguments)}function px(){return(px=u(a().mark((function e(t,n){var r,i,o,u,s,c,l,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xx(r=wd(t)),Ix(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,vx(r,i.toArray());case 5:return o=e.sent,r.vc=!0,e.next=9,tb(r.remoteStore,!0);case 9:u=y(o);try{for(u.s();!(s=u.n()).done;)c=s.value,bw(r.remoteStore,c)}catch(a){u.e(a)}finally{u.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return l=[],h=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):h=h.then((function(){return Xb(r,t),Ok(r.localStore,t,!0)})),xw(r.remoteStore,t)})),e.next=19,h;case 19:return e.next=21,vx(r,l);case 21:return function(e){var t=wd(e);t.yc.forEach((function(e,n){xw(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new $p(Wd.comparator)}(r),r.vc=!1,e.next=25,tb(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vx(e,t,n){return yx.apply(this,arguments)}function yx(){return yx=u(a().mark((function e(t,n,r){var i,o,u,s,c,l,h,f,d,p,v,m,g,_;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=wd(t),o=[],u=[],s=y(n),e.prev=2,s.s();case 4:if((c=s.n()).done){e.next=45;break}if(l=c.value,h=void 0,!(f=i._c.get(l))||0===f.length){e.next=34;break}return e.next=11,Rk(i.localStore,Ey(f[0]));case 11:h=e.sent,d=y(f),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,m=i.wc.get(v),e.next=20,ux(i,m);case 20:(g=e.sent).snapshot&&u.push(g.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Fk(i.localStore,l);case 36:return _=e.sent,e.next=39,Rk(i.localStore,_);case 39:return h=e.sent,e.next=42,Db(i,mx(_),l,!1,h.resumeToken);case 42:o.push(h);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(u),o));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),yx.apply(this,arguments)}function mx(e){return _y(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function gx(e){var t=wd(e);return wd(wd(t.localStore).persistence).$i()}function _x(e,t,n,r){return kx.apply(this,arguments)}function kx(){return kx=u(a().mark((function e(t,n,r,i){var o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=wd(t)).vc){e.next=3;break}return e.abrupt("return",void vd("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((u=o._c.get(n))&&u.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,zk(o.localStore,Ry(u[0]));case 10:return s=e.sent,c=Wm.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,ov.EMPTY_BYTE_STRING),e.next=14,nx(o,s,c);case 14:return e.abrupt("break",20);case 15:return e.next=17,Ok(o.localStore,n,!0);case 17:return Xb(o,n,i),e.abrupt("break",20);case 19:_d();case 20:case"end":return e.stop()}}),e)}))),kx.apply(this,arguments)}function wx(e,t,n){return bx.apply(this,arguments)}function bx(){return(bx=u(a().mark((function e(t,n,r){var i,o,u,s,c,l,h,f,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=xx(t)).vc){e.next=45;break}o=y(n),e.prev=3,o.s();case 5:if((u=o.n()).done){e.next=21;break}if(s=u.value,!i._c.has(s)){e.next=10;break}return vd("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Fk(i.localStore,s);case 12:return c=e.sent,e.next=15,Rk(i.localStore,c);case 15:return l=e.sent,e.next=18,Db(i,mx(c),l.targetId,!1,l.resumeToken);case 18:bw(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),o.e(e.t0);case 26:return e.prev=26,o.f(),e.finish(26);case 29:h=y(r),e.prev=30,d=a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,Ok(i.localStore,t,!1).then((function(){xw(i.remoteStore,t),Xb(i,t)})).catch(np);case 5:case"end":return e.stop()}}),e)})),h.s();case 33:if((f=h.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),h.e(e.t2);case 42:return e.prev=42,h.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function xx(e){var t=wd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=zb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ox.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Vb.bind(null,t),t.dc.nu=yb.bind(null,t.eventManager),t.dc.Pc=mb.bind(null,t.eventManager),t}function Ix(e){var t=wd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Bb.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Kb.bind(null,t),t}function Sx(e,t,n){var r=wd(e);(function(){var e=u(a().mark((function e(t,n,r){var i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=wd(e),r=ug(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(xb(i)),o=new bb(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:u=e.sent;case 16:if(!u){e.next=26;break}return e.next=19,o.zu(u);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.bc();case 23:u=e.sent;case 24:e.next=16;break;case 26:return e.next=28,o.complete();case 28:return c=e.sent,e.next=31,nx(t,c.Ju,void 0);case 31:return e.next=33,function(e,t){var n=wd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(c.progress),e.abrupt("return",Promise.resolve(c.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(md("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Ex=function(){function e(){_(this,e),this.synchronizeTabs=!1}return w(e,[{key:"initialize",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=lw(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Sk(this.persistence,new xk,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new fk(pk.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Zk}},{key:"terminate",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Tx=function(e){I(n,e);var t=T(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return w(n,[{key:"initialize",value:function(){var e=u(a().mark((function e(t){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Us(S(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,Ix(this.Vc.syncEngine);case 6:return e.next=8,jw(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Sk(this.persistence,new xk,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new q_(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new vp(t,this.persistence);return new pp(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=wk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?T_.withCacheSize(this.cacheSizeBytes):T_.DEFAULT;return new gk(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,sw(),cw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Zk}}]),n}(Ex),Cx=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return w(n,[{key:"initialize",value:function(){var e=u(a().mark((function e(t){var r,i=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Us(S(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof $k,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:hx.bind(null,r),zr:_x.bind(null,r),Wr:wx.bind(null,r),$i:gx.bind(null,r),Qr:cx.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dx(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=sw();if(!$k.D(t))throw new xd(bd.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=wk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $k(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Tx),Nx=function(){function e(){_(this,e)}return w(e,[{key:"initialize",value:function(){var e=u(a().mark((function e(t,n){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Ub(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ix.bind(null,this.syncEngine),e.next=12,tb(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new hb}},{key:"createDatastore",value:function(e){var t,n=lw(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new uw(t));return function(e,t,n,r){return new vw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Ub(o.syncEngine,e,0)},a=tw.D()?new tw:new ew,new mw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Nb(e,t,n,r,i,a);return o&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=wd(t),vd("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,kw(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Ax(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return u(a().mark((function r(){var i;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var Px=function(){function e(t){_(this,e),this.observer=t,this.muted=!1}return w(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):yd("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Dx=function(){function e(t,n){var r=this;_(this,e),this.Cc=t,this.serializer=n,this.metadata=new Id,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return w(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=u(a().mark((function e(){var t,n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new kb(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Rx=function(){function e(t){_(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return w(e,[{key:"lookup",value:function(){var e=u(a().mark((function e(t){var n,r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new xd(bd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=u(a().mark((function e(t,n){var r,i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),i=pg(r.serializer)+"/documents",o={documents:n.map((function(e){return lg(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,o,n.length);case 5:return u=e.sent,s=new Map,u.forEach((function(e){var t=gg(r.serializer,e);s.set(t.key.toString(),t)})),c=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());kd(!!t),c.push(t)})),c));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Cm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=u(a().mark((function e(){var t,n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Wd.fromPath(t);n.mutations.push(new Nm(r,n.precondition(r)))})),e.next=7,function(){var e=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),i=pg(r.serializer)+"/documents",o={writes:n.map((function(e){return _g(r.serializer,e)}))},e.next=3,r.Io("Commit",i,o);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _d();t=jd.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new xd(bd.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(jd.min())?dm.exists(!1):dm.updateTime(t):dm.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(jd.min()))throw new xd(bd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dm.updateTime(t)}return dm.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Ox=function(){function e(t,n,r,i,a){_(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new hw(this.asyncQueue,"transaction_retry")}return w(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(u(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Rx(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!mp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Om(t)}return!1}}]),e}(),Lx=function(){function e(t,n,r,i){var o=this;_(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=hd.UNAUTHENTICATED,this.clientId=Od.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vd("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return vd("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return w(e,[{key:"getConfiguration",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new xd(bd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Id;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ob(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Mx(e,t){return Fx.apply(this,arguments)}function Fx(){return Fx=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),vd("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Ek(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Fx.apply(this,arguments)}function zx(e,t){return jx.apply(this,arguments)}function jx(){return(jx=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Vx(t);case 3:return r=e.sent,vd("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Zw(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Zw(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ux(e){return"FirebaseError"===e.name?e.code===bd.FAILED_PRECONDITION||e.code===bd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function Vx(e){return qx.apply(this,arguments)}function qx(){return(qx=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return vd("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Mx(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Ux(n=e.t0)){e.next=13;break}throw n;case 13:return md("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Mx(t,new Ex);case 16:e.next=21;break;case 18:return vd("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Mx(t,new Ex);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function Bx(e){return Wx.apply(this,arguments)}function Wx(){return(Wx=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return vd("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,zx(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return vd("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,zx(t,new Nx);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kx(e){return Vx(e).then((function(e){return e.persistence}))}function Gx(e){return Vx(e).then((function(e){return e.localStore}))}function Hx(e){return Bx(e).then((function(e){return e.remoteStore}))}function Qx(e){return Bx(e).then((function(e){return e.syncEngine}))}function Yx(e){return Bx(e).then((function(e){return e.datastore}))}function Jx(e){return Xx.apply(this,arguments)}function Xx(){return(Xx=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bx(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Ab.bind(null,n.syncEngine),r.onUnlisten=Ob.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Id;return e.asyncQueue.enqueueAndForget(u(a().mark((function i(){return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Px({next:function(a){t.enqueueAndForget((function(){return pb(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new xd(bd.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new xd(bd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new _b(ky(n.path),a,{includeMetadataChanges:!0,Ku:!0});return fb(e,o)},i.next=3,Jx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Zx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Id;return e.asyncQueue.enqueueAndForget(u(a().mark((function i(){return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Px({next:function(n){t.enqueueAndForget((function(){return pb(e,o)})),n.fromCache&&"server"===r.source?i.reject(new xd(bd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new _b(n,a,{includeMetadataChanges:!0,Ku:!0});return fb(e,o)},i.next=3,Jx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function eI(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var tI=new Map;function nI(e,t,n){if(!n)throw new xd(bd.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function rI(e,t,n,r){if(!0===t&&!0===r)throw new xd(bd.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function iI(e){if(!Wd.isDocumentKey(e))throw new xd(bd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function aI(e){if(Wd.isDocumentKey(e))throw new xd(bd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function oI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":_d()}function uI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new xd(bd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=oI(e);throw new xd(bd.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function sI(e,t){if(t<=0)throw new xd(bd.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var cI=function(){function e(t){var n,r;if(_(this,e),void 0===t.host){if(void 0!==t.ssl)throw new xd(bd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new xd(bd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}rI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eI(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new xd(bd.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new xd(bd.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new xd(bd.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return w(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),lI=function(){function e(t,n,r,i){_(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cI({}),this._settingsFrozen=!1}return w(e,[{key:"app",get:function(){if(!this._app)throw new xd(bd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new xd(bd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ed;switch(e.type){case"firstParty":return new Ad(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new xd(bd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=tI.get(e);t&&(vd("ComponentProvider","Removing Datastore"),tI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function hI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=uI(e,lI))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&md("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=hd.MOCK_USER;else{u=H(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new xd(bd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new hd(c)}e._authCredentials=new Td(new Sd(u,s))}}var fI=function(){function e(t,n,r){_(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return w(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new pI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),dI=function(){function e(t,n,r){_(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return w(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),pI=function(e){I(n,e);var t=T(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,e,r,ky(i)))._path=i,a.type="collection",a}return w(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new fI(this.firestore,null,new Wd(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(dI);function vI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ee(e),nI("collection","path",t),e instanceof lI){var a=Vd.fromString.apply(Vd,[t].concat(r));return aI(a),new pI(e,null,a)}if(!(e instanceof fI||e instanceof pI))throw new xd(bd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Vd.fromString.apply(Vd,[t].concat(r)));return aI(o),new pI(e.firestore,null,o)}function yI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ee(e),1===arguments.length&&(t=Od.A()),nI("doc","path",t),e instanceof lI){var a=Vd.fromString.apply(Vd,[t].concat(r));return iI(a),new fI(e,null,new Wd(a))}if(!(e instanceof fI||e instanceof pI))throw new xd(bd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Vd.fromString.apply(Vd,[t].concat(r)));return iI(o),new fI(e.firestore,e instanceof pI?e.converter:null,new Wd(o))}function mI(e,t){return e=Ee(e),t=Ee(t),(e instanceof fI||e instanceof pI)&&(t instanceof fI||t instanceof pI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function gI(e,t){return e=Ee(e),t=Ee(t),e instanceof dI&&t instanceof dI&&e.firestore===t.firestore&&Ny(e._query,t._query)&&e.converter===t.converter}var _I=function(){function e(){var t=this;_(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new hw(this,"async_queue_retry"),this.Xc=function(){var e=cw();e&&vd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=cw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return w(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=cw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new Id;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=u(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),cp(e.t0)){e.next=12;break}throw e.t0;case 12:vd("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw yd("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=ab.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&_d()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=y(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=y(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function kI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=y(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var wI=function(){function e(){_(this,e),this._progressObserver={},this._taskCompletionResolver=new Id,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return w(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),bI=function(e){I(n,e);var t=T(n);function n(e,r,i,a){var o;return _(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new _I,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return w(n,[{key:"_terminate",value:function(){return this._firestoreClient||SI(this),this._firestoreClient.terminate()}}]),n}(lI);function xI(e,t){var n="string"==typeof e?e:t||"(default)",r=mt("object"==typeof e?e:St(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=W("firestore");i&&hI.apply(void 0,[r].concat(v(i)))}return r}function II(e){return e._firestoreClient||SI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function SI(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new pv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,eI(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Lx(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function EI(e,t,n){var r=new Id;return e.asyncQueue.enqueue(u(a().mark((function i(){var o;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Mx(e,n);case 3:return i.next=5,zx(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),Ux(o=i.t0)){i.next=13;break}throw o;case 13:md("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function TI(e){return function(e){return e.asyncQueue.enqueue(u(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Kx(e);case 2:return n=t.sent,t.next=5,Hx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=wd(e);return t.vu.delete(0),gw(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(II(e=uI(e,bI)))}function CI(e){return function(e){return e.asyncQueue.enqueue(u(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Kx(e);case 2:return n=t.sent,t.next=5,Hx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wd(t)).vu.add(0),e.next=4,kw(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(II(e=uI(e,bI)))}function NI(e,t){var n=II(e=uI(e,bI)),r=new wI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Dx(e,t)}(function(e,t){if(e instanceof Uint8Array)return Ax(e,t);if(e instanceof ArrayBuffer)return Ax(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?zm().encode(e):e),t)}(n,lw(t));e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Sx,t.next=3,Qx(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function AI(e,t){return function(e,t){return e.asyncQueue.enqueue(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=wd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,Gx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(II(e=uI(e,bI)),t).then((function(t){return t?new dI(e,null,t.query):null}))}function PI(e){if(e._initialized||e._terminated)throw new xd(bd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var DI=function(){function e(t){_(this,e),this._byteString=t}return w(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(ov.fromBase64String(t))}catch(t){throw new xd(bd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(ov.fromUint8Array(t))}}]),e}(),RI=function(){function e(){_(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new xd(bd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bd(n)}return w(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var OI=w((function e(t){_(this,e),this._methodName=t})),LI=function(){function e(t,n){if(_(this,e),!isFinite(t)||t<-90||t>90)throw new xd(bd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new xd(bd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return w(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ld(this._lat,e._lat)||Ld(this._long,e._long)}}]),e}(),MI=/^__.*__$/,FI=function(){function e(t,n,r){_(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return w(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new bm(e,this.data,this.fieldMask,t,this.fieldTransforms):new wm(e,this.data,t,this.fieldTransforms)}}]),e}(),zI=function(){function e(t,n,r){_(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return w(e,[{key:"toMutation",value:function(e,t){return new bm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function jI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _d()}}var UI=function(){function e(t,n,r,i,a,o){_(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return w(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return oS(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(jI(this.ca)&&MI.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),VI=function(){function e(t,n,r){_(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||lw(t)}return w(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new UI({ca:e,methodName:t,ga:n,path:Bd.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function qI(e){var t=e._freezeSettings(),n=lw(e._databaseId);return new VI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function BI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);nS("Data must be an object, but it was:",o,r);var u,s,c=eS(r,o);if(a.merge)u=new iv(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=y(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=rS(t,l.value,n);if(!o.contains(d))throw new xd(bd.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));uS(h,d)||h.push(d)}}catch(p){f.e(p)}finally{f.f()}u=new iv(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new FI(new Fv(c),u,s)}var WI=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(OI);function KI(e,t,n){return new UI({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var GI=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"_toFieldTransform",value:function(e){return new hm(e.path,new rm)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(OI),HI=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e)).pa=r,i}return w(n,[{key:"_toFieldTransform",value:function(e){var t=KI(this,e,!0),n=this.pa.map((function(e){return ZI(e,t)})),r=new im(n);return new hm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(OI),QI=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e)).pa=r,i}return w(n,[{key:"_toFieldTransform",value:function(e){var t=KI(this,e,!0),n=this.pa.map((function(e){return ZI(e,t)})),r=new om(n);return new hm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(OI),YI=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e)).Ia=r,i}return w(n,[{key:"_toFieldTransform",value:function(e){var t=new sm(e.serializer,$y(e.serializer,this.Ia));return new hm(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(OI);function JI(e,t,n,r){var i=e.ya(1,t,n);nS("Data must be an object, but it was:",i,r);var a=[],o=Fv.empty();Jp(r,(function(e,r){var u=aS(t,e,n);r=Ee(r);var s=i.da(u);if(r instanceof WI)a.push(u);else{var c=ZI(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new iv(a);return new zI(o,u,i.fieldTransforms)}function XI(e,t,n,r,i,a){var o=e.ya(1,t,n),u=[rS(t,r,n)],s=[i];if(a.length%2!=0)throw new xd(bd.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(rS(t,a[c])),s.push(a[c+1]);for(var l=[],h=Fv.empty(),f=u.length-1;f>=0;--f)if(!uS(l,u[f])){var d=u[f],p=s[f];p=Ee(p);var v=o.da(d);if(p instanceof WI)l.push(d);else{var y=ZI(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new iv(l);return new zI(h,m,o.fieldTransforms)}function $I(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ZI(n,e.ya(r?4:3,t))}function ZI(e,t){if(tS(e=Ee(e)))return nS("Unsupported field value:",t,e),eS(e,t);if(e instanceof OI)return function(e,t){if(!jI(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=y(e);try{for(a.s();!(n=a.n()).done;){var o=ZI(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Ee(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return $y(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=zd.fromDate(e);return{timestampValue:ig(t.serializer,n)}}if(e instanceof zd){var r=new zd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ig(t.serializer,r)}}if(e instanceof LI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof DI)return{bytesValue:ag(t.serializer,e._byteString)};if(e instanceof fI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:sg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(oI(e)))}(e,t)}function eS(e,t){var n={};return Xp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jp(e,(function(e,r){var i=ZI(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function tS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof zd||e instanceof LI||e instanceof DI||e instanceof fI||e instanceof OI)}function nS(e,t,n){if(!tS(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=oI(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function rS(e,t,n){if((t=Ee(t))instanceof RI)return t._internalPath;if("string"==typeof t)return aS(e,t);throw oS("Field path arguments must be of type string or ",e,!1,void 0,n)}var iS=new RegExp("[~\\*/\\[\\]]");function aS(e,t,n){if(t.search(iS)>=0)throw oS("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return C(RI,v(t.split(".")))._internalPath}catch(r){throw oS("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function oS(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new xd(bd.INVALID_ARGUMENT,u+e+s)}function uS(e,t){return e.some((function(e){return e.isEqual(t)}))}var sS=function(){function e(t,n,r,i,a){_(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return w(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new fI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new cS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(lS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),cS=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"data",value:function(){return Us(S(n.prototype),"data",this).call(this)}}]),n}(sS);function lS(e,t){return"string"==typeof t?aS(e,t):t instanceof RI?t._internalPath:t._delegate._internalPath}function hS(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new xd(bd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var fS=w((function e(){_(this,e)})),dS=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n)}(fS);function pS(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof fS&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof yS})).length,n=e.filter((function(e){return e instanceof vS})).length;if(t>1||t>0&&n>0)throw new xd(bd.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=y(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var vS=function(e){I(n,e);var t=T(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return w(n,[{key:"_apply",value:function(e){var t=this._parse(e);return CS(e._query,t),new dI(e.firestore,e.converter,Ty(e._query,t))}},{key:"_parse",value:function(e){var t=qI(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new xd(bd.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){TS(o,a);var s,c=[],l=y(o);try{for(l.s();!(s=l.n()).done;){var h=s.value;c.push(ES(r,e,h))}}catch(f){l.e(f)}finally{l.f()}u={arrayValue:{values:c}}}else u=ES(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||TS(o,a),u=$I(n,"where",o,"in"===a||"not-in"===a);return Gv.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dS);var yS=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return w(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Hv.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=y(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;CS(r,a),r=Ty(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new dI(e.firestore,e.converter,Ty(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(fS);var mS=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return w(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new xd(bd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new xd(bd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Bv(t,n);return function(e,t){if(null===by(e)){var n=xy(e);null!==n&&NS(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new dI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new gy(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(dS);var gS=function(e){I(n,e);var t=T(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return w(n,[{key:"_apply",value:function(e){return new dI(e.firestore,e.converter,Cy(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dS);var _S=function(e){I(n,e);var t=T(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return w(n,[{key:"_apply",value:function(e){var t=SS(e,this.type,this._docOrFields,this._inclusive);return new dI(e.firestore,e.converter,function(e,t){return new gy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dS);function kS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _S._create("startAt",t,!0)}function wS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _S._create("startAfter",t,!1)}var bS=function(e){I(n,e);var t=T(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return w(n,[{key:"_apply",value:function(e){var t=SS(e,this.type,this._docOrFields,this._inclusive);return new dI(e.firestore,e.converter,function(e,t){return new gy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dS);function xS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return bS._create("endBefore",t,!1)}function IS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return bS._create("endAt",t,!0)}function SS(e,t,n,r){if(n[0]=Ee(n[0]),n[0]instanceof sS)return function(e,t,n,r,i){if(!r)throw new xd(bd.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=y(Sy(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Sv(t,r.key));else{var c=r.data.field(s.field);if(hv(c))throw new xd(bd.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new xd(bd.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new Uv(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=qI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new xd(bd.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new xd(bd.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Iy(e)&&-1!==c.indexOf("/"))throw new xd(bd.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Vd.fromString(c));if(!Wd.isDocumentKey(l))throw new xd(bd.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new Wd(l);u.push(Sv(t,h))}else{var f=$I(n,r,c);u.push(f)}}return new Uv(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function ES(e,t,n){if("string"==typeof(n=Ee(n))){if(""===n)throw new xd(bd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Iy(t)&&-1!==n.indexOf("/"))throw new xd(bd.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Vd.fromString(n));if(!Wd.isDocumentKey(r))throw new xd(bd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Sv(e,new Wd(r))}if(n instanceof fI)return Sv(e,n._key);throw new xd(bd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(oI(n),"."))}function TS(e,t){if(!Array.isArray(e)||0===e.length)throw new xd(bd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function CS(e,t){if(t.isInequality()){var n=xy(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new xd(bd.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=by(e);null!==i&&NS(e,r,i)}var a=function(e,t){var n,r=y(e);try{for(r.s();!(n=r.n()).done;){var i,a=y(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new xd(bd.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new xd(bd.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function NS(e,t,n){if(!n.isEqual(t))throw new xd(bd.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var AS=function(){function e(){_(this,e)}return w(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(gv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw _d()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Jp(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new LI(cv(e.latitude),cv(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=fv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(dv(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=sv(e);return new zd(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Vd.fromString(e);kd(Dg(n));var r=new vv(n.get(1),n.get(3)),i=new Wd(n.popFirst(5));return r.isEqual(t)||yd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function PS(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var DS=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this)).firestore=e,r}return w(n,[{key:"convertBytes",value:function(e){return new DI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new fI(this.firestore,null,t)}}]),n}(AS);var RS=function(){function e(t,n){_(this,e),this.hasPendingWrites=t,this.fromCache=n}return w(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),OS=function(e){I(n,e);var t=T(n);function n(e,r,i,a,o,u){var s;return _(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return w(n,[{key:"exists",value:function(){return Us(S(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new LS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(lS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(sS),LS=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Us(S(n.prototype),"data",this).call(this,e)}}]),n}(OS),MS=function(){function e(t,n,r,i){_(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new RS(i.hasPendingWrites,i.fromCache),this.query=r}return w(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new LS(n._firestore,n._userDataWriter,r.key,r,new RS(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xd(bd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new LS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new RS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new LS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new RS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:FS(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function FS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _d()}}function zS(e,t){return e instanceof OS&&t instanceof OS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof MS&&t instanceof MS&&e._firestore===t._firestore&&gI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var jS=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this)).firestore=e,r}return w(n,[{key:"convertBytes",value:function(e){return new DI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new fI(this.firestore,null,t)}}]),n}(AS);function US(e){e=uI(e,fI);var t=uI(e.firestore,bI),n=II(t),r=new jS(t);return function(e,t){var n=new Id;return e.asyncQueue.enqueueAndForget(u(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=wd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new xd(bd.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),o=ob(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(o);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Gx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new OS(t,r,e._key,n,new RS(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function VS(e){e=uI(e,dI);var t=uI(e.firestore,bI),n=II(t),r=new jS(t);return hS(e._query),Zx(n,e._query).then((function(n){return new MS(t,r,e,n)}))}function qS(e){e=uI(e,dI);var t=uI(e.firestore,bI),n=II(t),r=new jS(t);return function(e,t){var n=new Id;return e.asyncQueue.enqueueAndForget(u(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=u(a().mark((function e(t,n,r){var i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mk(t,n,!0);case 3:i=e.sent,o=new Eb(n,i.ir),u=o.sc(i.documents),s=o.applyChanges(u,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=ob(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Gx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new MS(t,r,e,n)}))}function BS(e,t,n){e=uI(e,fI);var r=uI(e.firestore,bI),i=PS(e.converter,t,n);return QS(r,[BI(qI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,dm.none())])}function WS(e,t,n){e=uI(e,fI);for(var r=uI(e.firestore,bI),i=qI(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return QS(r,[("string"==typeof(t=Ee(t))||t instanceof RI?XI(i,"updateDoc",e._key,t,n,o):JI(i,"updateDoc",e._key,t)).toMutation(e._key,dm.exists(!0))])}function KS(e,t){var n=uI(e.firestore,bI),r=yI(e),i=PS(e.converter,t);return QS(n,[BI(qI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,dm.exists(!1))]).then((function(){return r}))}function GS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=Ee(e);var c={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||kI(n[l])||(c=n[l],l++);var h,f,d,p={includeMetadataChanges:c.includeMetadataChanges};if(kI(n[l])){var v=n[l];n[l]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[l+1]=null===(o=v.error)||void 0===o?void 0:o.bind(v),n[l+2]=null===(s=v.complete)||void 0===s?void 0:s.bind(v)}if(e instanceof fI)f=uI(e.firestore,bI),d=ky(e._key.path),h={next:function(t){n[l]&&n[l](YS(f,e,t))},error:n[l+1],complete:n[l+2]};else{var y=uI(e,dI);f=uI(y.firestore,bI),d=y._query;var m=new jS(f);h={next:function(e){n[l]&&n[l](new MS(f,m,y,e))},error:n[l+1],complete:n[l+2]},hS(e._query)}return function(e,t,n,r){var i=new Px(r),o=new _b(t,i,n);return e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=fb,t.next=3,Jx(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=pb,t.next=3,Jx(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(II(f),d,p,h)}function HS(e,t){return function(e,t){var n=new Px(t);return e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wd(e).ku.add(t),t.next()},t.next=3,Jx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wd(e).ku.delete(t)},t.next=3,Jx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(II(e=uI(e,bI)),kI(t)?t:{next:t})}function QS(e,t){return function(e,t){var n=new Id;return e.asyncQueue.enqueueAndForget(u(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Mb,r.next=3,Qx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(II(e),t)}function YS(e,t,n){var r=n.docs.get(t._key),i=new jS(e);return new OS(e,i,t._key,r,new RS(n.hasPendingWrites,n.fromCache),t.converter)}var JS={maxAttempts:5},XS=function(){function e(t,n){_(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=qI(t)}return w(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=$S(e,this._firestore),i=PS(r.converter,t,n),a=BI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,dm.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=$S(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ee(t))||t instanceof RI?XI(this._dataReader,"WriteBatch.update",i._key,t,n,o):JI(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,dm.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=$S(e,this._firestore);return this._mutations=this._mutations.concat(new Cm(t._key,dm.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new xd(bd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function $S(e,t){if((e=Ee(e)).firestore!==t)throw new xd(bd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var ZS=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r))._firestore=e,i}return w(n,[{key:"get",value:function(e){var t=this,r=$S(e,this._firestore),i=new jS(this._firestore);return Us(S(n.prototype),"get",this).call(this,e).then((function(e){return new OS(t._firestore,i,r._key,e._document,new RS(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){_(this,e),this._firestore=t,this._transaction=n,this._dataReader=qI(t)}return w(e,[{key:"get",value:function(e){var t=this,n=$S(e,this._firestore),r=new DS(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return _d();var i=e[0];if(i.isFoundDocument())return new sS(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new sS(t._firestore,r,n._key,null,n.converter);throw _d()}))}},{key:"set",value:function(e,t,n){var r=$S(e,this._firestore),i=PS(r.converter,t,n),a=BI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=$S(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ee(t))||t instanceof RI?XI(this._dataReader,"Transaction.update",i._key,t,n,o):JI(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=$S(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function eE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new HI("arrayUnion",t)}function tE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new QI("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){fd=e}(xt),yt(new Te("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new bI(new Cd(e.getProvider("auth-internal")),new Dd(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new xd(bd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vv(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Nt(ld,"3.12.2",e),Nt(ld,"3.12.2","esm2017")}();var nE={apiKey:"AIzaSyB1mWqevmipidxWW264EnXV__YFdSkx93M",authDomain:"umka-77a72.firebaseapp.com",databaseURL:"https://umka-77a72-default-rtdb.firebaseio.com",projectId:"umka-77a72",storageBucket:"umka-77a72.appspot.com",messagingSenderId:"270019919476",appId:"1:270019919476:web:28ff114af689a2143bdb21"};tn.registerVersion("firebase","9.22.2","app-compat");var rE=n.p+"static/media/Screenshot_9.2b0a8741973f65cb6743.png",iE=n(184),aE=function(e){var t=e.url;return(0,iE.jsx)("div",{children:(0,iE.jsx)("form",{action:t,target:"_blank",children:(0,iE.jsx)("a",{href:t,className:d.btn,children:(0,iE.jsx)("img",{src:rE,alt:"Logo",style:{width:"350px",height:"200px",borderRadius:"10px"}})})})})},oE=JSON.parse('[{"id":"2","name":"Game-keybord","url":"https://umka-ness.github.io/Game-keybord/","description":"descriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondedescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondedescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptionscriptiondescriptiondescriptiondescriptiondescriptionscriptiondescriptiondescriptiondescriptiondescription"},{"id":"3","name":"Sorting-Quiz","url":"https://umka-ness.github.io/Sorting-Quiz/","description":"description"},{"id":"4","name":"GameThree","url":"https://umka-ness.github.io/Game-keybord/","description":"description"},{"id":"5","name":"gameFour","url":"https://umka-ness.github.io/Game-keybord/","description":"description"},{"id":"6","name":"gameFour","url":"https://umka-ness.github.io/Game-keybord/","description":"description"}]'),uE=function(e){e.name;var t=e.dataSvg;return(0,iE.jsx)(iE.Fragment,{children:(0,iE.jsx)("img",{src:t,alt:"awd",className:d.btnImage})})},sE=n.p+"static/media/zhivopis-illustracia-art-voda-oblako-500x.a40562fe7dbc90a63210.jpg",cE={1:{y:27.5,x:8,xTranslate:-8,yTranslate:-20},2:{y:27.5,x:24,xTranslate:-24,yTranslate:-20},3:{y:27.5,x:44,xTranslate:-44,yTranslate:-20},4:{y:27.5,x:60,xTranslate:-60,yTranslate:-20},5:{y:27.5,x:76,xTranslate:-76,yTranslate:-20},6:{y:51.5,x:12,xTranslate:-12,yTranslate:-53},7:{y:51.5,x:28,xTranslate:-28,yTranslate:-53},8:{y:51.5,x:44,xTranslate:-44,yTranslate:-53},9:{y:51.5,x:64,xTranslate:-64,yTranslate:-53},10:{y:51.5,x:80,xTranslate:-80,yTranslate:-53}},lE=function(e){var n=e.name,r=e.index,i=e.id,a=e.value,o=f((0,t.useState)(!1),2),u=o[0],s=o[1],c=document.getElementsByTagName("body")[0];c.style.overflowX="hidden";var l=(0,t.useRef)(null),h=(0,t.useRef)(),p=(0,t.useRef)(),v=function(e,t,n,r,i,a,o,s,l,h,f,d,p,v,y,m){n.style.top=y,n.style.transition="top 0.5s",r.style.zIndex=s,r.style.position=l,r.style.top="".concat(t,"%"),r.style.left="".concat(e,"%"),r.style.transform="translate(".concat(a,"%, ").concat(o,"%)"),r.style.transition=h,r.style.width=f,r.style.height=d,i.style.fontSize="24px",c.style.overflowY=m,n.style.borderTopLeftRadius=p,n.style.borderTopRightRadius=v,setTimeout((function(){u?(r.style.minWidth=f,r.style.minHeight=d):(r.style.minWidth="0",r.style.minHeight="0")}),2e3)};return(0,iE.jsxs)("div",{onClick:function(e){window.scrollTo({top:0,behavior:"smooth"});var t=e.target.id,n=l.current,r=h.current,i=p.current,a=cE[t],o=a.y,c=a.x,f=a.xTranslate,d=a.yTranslate;!u&&window.innerWidth>=1e3?(s(!0),v(c,o,n,r,i,f,d,9,"absolute","2s","950px","500px","0px","0px","420px","hidden")):!u&&window.innerWidth>=520?(s(!0),v(c,o,n,r,i,f,d,9,"absolute","2s","100vw","650px","0px","0px","520px","hidden")):!u&&window.innerWidth>=325&&window.innerHeight>=700?(s(!0),v(c,o,n,r,i,f,d-15,9,"absolute","2s","100vw","90vh","0px","0px","720px","auto")):!u&&window.innerWidth>=325?(s(!0),v(c,o,n,r,i,f,d-15,9,"absolute","2s","100vw","90vh","0px","0px","520px","auto")):!u&&window.innerWidth<=324?(s(!0),v(c,o,n,r,i,f,d-38.5,9,"absolute","2s","100vw","100vh","0px","0px","550px","auto")):(n.style.top="120px",r.style.position="absolute",r.style.minWidth="0",r.style.minHeight="0",r.style.width="150px",r.style.height="150px",r.style.transform="scale(1)",r.style.zIndex="1",i.style.fontSize="13px",setTimeout((function(){r.style.position="inherit"}),1300),s(!1))},className:d.btnGame,ref:h,id:i,children:[(0,iE.jsx)("div",{ref:l,style:{backgroundImage:"url(".concat(sE,")")},className:d.btnContainerGame,id:i,value:a,children:r}),(0,iE.jsx)("button",{style:{width:"100%",height:"100%",backgroundColor:"orange",border:"none",borderRadius:"13px"},ref:p,id:i,children:(0,iE.jsx)("div",{id:i,children:n})})]})},hE=n.p+"static/media/fon.f497b4796173ee7c8d93.png",fE=function(e,n){document.getElementsByTagName("body")[0].style.overflow="inherit",n=e.data,console.log(e);var r=f((0,t.useState)(!1),2),i=r[0],a=r[1],o=f((0,t.useState)(!1),2),u=o[0],s=o[1],c=function(e){a(!0)},l=function(e){s(!0)};return function(e){return i?(0,iE.jsx)(VE,{}):(0,iE.jsxs)("div",{style:{display:"flex",minHeight:"100vh",justifyContent:"center",backgroundImage:"url(".concat(hE,")")},className:d.fon,children:[(0,iE.jsx)("button",{className:d.BackBtn,onClick:c,id:"back",children:"Back"}),(0,iE.jsx)("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignContent:"center",gap:"20px",flexWrap:"wrap",maxWidth:"995px"},children:e.map((function(e,t){return(0,iE.jsx)("div",{onClick:l,children:(0,iE.jsx)(lE,{name:e.name,id:e.id,index:t+1,value:u})},e.id)}))})]})}(n)},dE=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),pE=JSON.parse('[{"id":1,"name":"1"},{"id":2,"name":"2"},{"id":3,"name":"3"},{"id":4,"name":"123"},{"id":5,"name":"Kub321."},{"id":6,"name":"_____4211sz?"},{"id":7,"name":"Nie l1231 ________"},{"id":8,"name":"D12312_________"},{"id":9,"name":"D12312"},{"id":10,"name":"W421412."}]'),vE=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),yE=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),mE=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),gE=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),_E=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),kE=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),wE=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),bE=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),xE=JSON.parse('[{"id":1,"name":"aaaaaaa"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),IE=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),SE=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),EE=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),TE=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),CE=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),NE=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]');var AE=n.p+"static/media/Go.4343a377ccd01138ea872719176a7622.svg";var PE=n.p+"static/media/bag-1-star.9c3ec4cb14af5d5225e23fd95e651090.svg";var DE=n.p+"static/media/bag-2-stars.676ad479661644aeca9bcd6e66562e10.svg";var RE=n.p+"static/media/bag-3-stars.416ae4603859a27a57675ec72bb27605.svg";var OE=n.p+"static/media/key-1-star.e27cbac06427d6218b57403358007f7f.svg";var LE=n.p+"static/media/key-2-stars.0e2d3d9e44c71dc04b8f0209105941fe.svg";var ME=n.p+"static/media/key-3-stars.d413446b2b6e87426b677c9510f43f73.svg";var FE=n.p+"static/media/question-1-star.1bc5e74e47a96a44dcfa444dd6e15a0d.svg";var zE=n.p+"static/media/question-2-stars.c10ff5cda96c5c3ec48d095f1e9ec0bd.svg";var jE=n.p+"static/media/question-3-stars.a2afbcd0bba765b5bbfffec6acf2d1b6.svg",UE=n.p+"static/media/top-view-of-the-countryside.ca9e841118cb4d67ee0f.jpg",VE=function(){document.getElementsByTagName("body")[0].style.overflow="hidden";var e=f((0,t.useState)(!1),2),n=e[0],r=e[1],i=f((0,t.useState)(!1),2),a=i[0],o=i[1],u=f((0,t.useState)(null),2),s=u[0],c=u[1],l=function(e){var t=e.target.id;console.log(t),r(!0)},h=function(e){c(e.currentTarget.id),o(!0)};return"1"===s?console.log("da"):console.log("net"),!0===n?(0,iE.jsx)(qE,{}):a?"1"===s?(0,iE.jsx)(fE,{dataId:s,data:dE,dataSvg:AE}):"2"===s?(0,iE.jsx)(fE,{dataId:s,data:pE}):"3"===s?(0,iE.jsx)(fE,{dataId:s,data:vE}):"4"===s?(0,iE.jsx)(fE,{dataId:s,data:yE}):"5"===s?(0,iE.jsx)(fE,{dataId:s,data:mE}):"6"===s?(0,iE.jsx)(fE,{dataId:s,data:gE}):"7"===s?(0,iE.jsx)(fE,{dataId:s,data:_E}):"8"===s?(0,iE.jsx)(fE,{dataId:s,data:kE}):"9"===s?(0,iE.jsx)(fE,{dataId:s,data:wE}):"10"===s?(0,iE.jsx)(fE,{dataId:s,data:bE}):"11"===s?(0,iE.jsx)(fE,{dataId:s,data:xE}):"12"===s?(0,iE.jsx)(fE,{dataId:s,data:IE}):"13"===s?(0,iE.jsx)(fE,{dataId:s,data:SE}):"14"===s?(0,iE.jsx)(fE,{dataId:s,data:EE}):"15"===s?(0,iE.jsx)(fE,{dataId:s,data:TE}):"16"===s?(0,iE.jsx)(fE,{dataId:s,data:CE}):"17"===s?(0,iE.jsx)(fE,{dataId:s,data:NE}):void 0:(0,iE.jsx)(iE.Fragment,{children:(0,iE.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",zIndex:"2",alignItems:"center",backgroundImage:"url(".concat(UE,")")},className:d.wrapper,children:[(0,iE.jsx)("button",{className:d.BackBtn,onClick:l,id:"back",children:"Back"}),(0,iE.jsxs)("ul",{className:d.container,children:[(0,iE.jsxs)("li",{children:[(0,iE.jsx)("div",{style:{marginLeft:"50px"},id:1,onClick:h,children:(0,iE.jsx)(uE,{name:"Go",dataSvg:AE})}),(0,iE.jsx)("div",{style:{marginLeft:"-10px"},id:2,onClick:h,children:(0,iE.jsx)(uE,{name:"2",dataSvg:PE})}),(0,iE.jsx)("div",{style:{marginLeft:"70px"},id:3,onClick:h,children:(0,iE.jsx)(uE,{name:"3",dataSvg:DE})}),(0,iE.jsx)("div",{style:{marginLeft:"-5px"},id:4,onClick:h,children:(0,iE.jsx)(uE,{name:"4",dataSvg:OE})})]}),(0,iE.jsxs)("li",{children:[(0,iE.jsx)("div",{style:{marginLeft:"-120px",marginTop:"85px"},id:5,onClick:h,children:(0,iE.jsx)(uE,{name:"5",dataSvg:RE})}),(0,iE.jsx)("div",{style:{marginLeft:"-100px",marginBottom:"60px"},id:6,onClick:h,children:(0,iE.jsx)(uE,{name:"6",dataSvg:ME})}),(0,iE.jsx)("div",{style:{marginLeft:"-150px"},id:7,onClick:h,children:(0,iE.jsx)(uE,{name:"7",dataSvg:FE})})]}),(0,iE.jsxs)("li",{children:[(0,iE.jsx)("div",{style:{marginLeft:"-140px"},id:8,onClick:h,children:(0,iE.jsx)(uE,{name:"8",dataSvg:LE})}),(0,iE.jsx)("div",{style:{marginLeft:"-100px"},id:9,onClick:h,children:(0,iE.jsx)(uE,{name:"9",dataSvg:PE})}),(0,iE.jsx)("div",{style:{marginLeft:"-130px"},id:10,onClick:h,children:(0,iE.jsx)(uE,{name:"10",dataSvg:RE})})]}),(0,iE.jsxs)("li",{children:[(0,iE.jsx)("div",{style:{marginLeft:"-100px"},id:11,onClick:h,children:(0,iE.jsx)(uE,{name:"11",dataSvg:jE})}),(0,iE.jsx)("div",{style:{marginLeft:"10px"},id:12,onClick:h,children:(0,iE.jsx)(uE,{name:"12",dataSvg:PE})}),(0,iE.jsx)("div",{style:{marginLeft:"-10px"},id:13,onClick:h,children:(0,iE.jsx)(uE,{name:"13",dataSvg:zE})}),(0,iE.jsx)("div",{style:{marginLeft:"-115px"},id:14,onClick:h,children:(0,iE.jsx)(uE,{name:"14",dataSvg:DE})})]}),(0,iE.jsxs)("li",{children:[(0,iE.jsx)("div",{style:{marginLeft:"-50px"},id:15,onClick:h,children:(0,iE.jsx)(uE,{name:"15",dataSvg:OE})}),(0,iE.jsx)("div",{children:(0,iE.jsx)(uE,{name:"16",dataSvg:zE})}),(0,iE.jsx)("div",{style:{marginLeft:"-100px"},id:16,onClick:h,children:(0,iE.jsx)(uE,{name:"17",dataSvg:ME})})]})]})]})})},qE=function(){document.getElementsByTagName("body")[0].style.overflow="auto";var e=f((0,t.useState)(null),2),n=e[0],r=e[1],i=f((0,t.useState)(!1),2),a=i[0],o=i[1],u=function(e){var t=e.target.id;console.log(t),r(t)},s=function(e){e.preventDefault(),o(e.target.alt),console.log(e.target.alt)};return(0,iE.jsx)(iE.Fragment,{children:"back"===n?(0,iE.jsx)(QE,{}):"Logo"===a?(0,iE.jsx)(VE,{}):(0,iE.jsxs)("div",{children:[(0,iE.jsx)("div",{style:{display:"flex",textAlign:"center"}}),(0,iE.jsxs)("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap",justifyContent:"center",padding:"20px",verticalAlign:"middle",maxWidth:"100%"},children:[(0,iE.jsx)("button",{className:d.BackBtn,onClick:u,id:"back",children:"Back"}),(0,iE.jsxs)("div",{style:{textAlign:"center",height:"100%"},children:[(0,iE.jsx)("p",{className:d.name,children:"1 StepByStep"}),(0,iE.jsx)("div",{onClick:s,children:(0,iE.jsx)(aE,{})}),(0,iE.jsx)("p",{className:d.blockCard,children:"lala"})]}),oE.map((function(e,t){return(0,iE.jsx)("div",{style:{textAlign:"center",height:"100%"},children:(0,iE.jsx)("div",{style:{display:"flex",gap:"5px"},children:(0,iE.jsxs)("div",{children:[(0,iE.jsxs)("p",{className:d.name,children:[t+2+" ",e.name]}),(0,iE.jsx)(aE,{url:e.url,onClick:s}),(0,iE.jsx)("p",{className:d.blockCard,children:e.description})]})})},e.id)}))]})]})})},BE=function(e){var t=e.id,n=e.image,r=e.name,i=e.color;return(0,iE.jsx)("button",{className:d.NavigationBtn,style:{backgroundImage:"url(".concat(n,")"),backgroundColor:i},id:t,children:r})};var WE=n.p+"static/media/bgButtonStars.b61c87c3fa0e483df0e1aa1298ea07ce.svg";var KE=n.p+"static/media/bgButtonIdk.c7551e2ede4d0a6d5f65806514776fcd.svg";var GE=n.p+"static/media/bgButtonPurple.027a3b4331a04c68b2c98979d0f802d6.svg",HE=function(){return(0,iE.jsxs)(iE.Fragment,{children:[(0,iE.jsx)(BE,{id:"1",name:"Game",color:"red",image:WE}),(0,iE.jsx)(BE,{id:"2",name:"lecture",color:"blue",image:KE}),(0,iE.jsx)(BE,{id:"3",name:"materials",color:"yellow",image:GE}),(0,iE.jsx)(BE,{id:"4",name:"Homework",color:"purple",image:WE})]})},QE=function(){var e=f((0,t.useState)(null),2),n=e[0],r=e[1];return(0,iE.jsx)(iE.Fragment,{children:"1"===n?(0,iE.jsx)(qE,{}):(0,iE.jsx)("div",{onClick:function(e){var t=e.target.id;console.log(t),r(t)},style:{display:"flex",flexWrap:"wrap",width:"100vw",height:"100vh",alignItems:"center",justifyContent:"space-evenly"},children:(0,iE.jsx)(HE,{})})})},YE=function(e){var n=f((0,t.useState)(!1),2),r=n[0],i=n[1],o=f((0,t.useState)(""),2),s=o[0],c=o[1],l=f((0,t.useState)(""),2),h=l[0],p=l[1],v=f((0,t.useState)(!1),2),y=v[0],m=v[1],g=(0,t.useRef)(null),_=(0,t.useContext)(XO).auth,k=function(){var e=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new tn.auth.GoogleAuthProvider,e.next=4,_.signInWithPopup(n);case 4:return r=e.sent,i=r.user,console.log(i),e.prev=7,e.next=10,KS(vI(w,"users"),{name:i.displayName,login:s,password:h,email:i.email,phoneNumber:i.phoneNumber,accessToken:i.multiFactor.user.stsTokenManager.accessToken,photoURL:i.photoURL});case 10:e.sent,m(!0),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.error("Error adding document: ",e.t0);case 17:return e.prev=17,e.finish(17);case 19:case"end":return e.stop()}}),e,null,[[7,14,17,19]])})));return function(t){return e.apply(this,arguments)}}(),w=xI(It(nE)),b=function(){var e=u(a().mark((function e(t){var n,r,i,o,u,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.current,t.preventDefault(),""!==s&&""!==h||(n.style.display="inherit",setTimeout((function(){n.style.display="none"}),5e3)),e.prev=3,e.next=6,VS(vI(w,"users"));case 6:r=e.sent,i=r.docs,o=0;case 9:if(!(o<i.length)){e.next=25;break}if(u=i[o].data(),c=u.login,l=u.password,s!==c||h!==l){e.next=19;break}return m(!0),console.log("Success"),e.abrupt("break",25);case 19:n.style.display="inherit",setTimeout((function(){n.style.display="none"}),5e3),console.log("nee");case 22:o++,e.next=9;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(3),console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0447\u0442\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445:",e.t0);case 30:case"end":return e.stop()}}),e,null,[[3,27]])})));return function(t){return e.apply(this,arguments)}}();return(0,iE.jsx)(iE.Fragment,{children:r?(0,iE.jsx)(JE,{}):y?(0,iE.jsx)(QE,{}):(0,iE.jsx)("div",{className:d.authContainer,children:(0,iE.jsxs)("div",{className:d.auth,children:[(0,iE.jsx)("p",{ref:g,className:d.errorRegister,children:"incorrect username or password"}),(0,iE.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"Email",className:d.email,value:s.trim(),onChange:function(e){return c(e.target.value)}}),(0,iE.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Password",className:d.password,value:h.trim(),onChange:function(e){return p(e.target.value)}}),(0,iE.jsx)("button",{onClick:b,children:"Login in"}),(0,iE.jsx)("p",{style:{color:"#fff",textAlign:"center"},children:"or"}),(0,iE.jsx)("button",{onClick:function(){return i(!0)},children:"Create account "}),(0,iE.jsx)("button",{onClick:k,children:"Gmail"})]})})})},JE=function(){var e=xI(It(nE)),n=f((0,t.useState)(!1),2),r=n[0],i=n[1],o=f((0,t.useState)(""),2),s=o[0],c=o[1],l=f((0,t.useState)(""),2),h=l[0],p=l[1],v=f((0,t.useState)(""),2),y=v[0],m=v[1],g=(0,t.useRef)(null),_=function(){var t=u(a().mark((function t(n){var r,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=g.current,n.preventDefault(),""!==h&&""!==y){t.next=7;break}r.style.display="inherit",setTimeout((function(){r.style.display="none"}),5e3),t.next=21;break;case 7:return t.prev=7,t.next=10,KS(vI(e,"users"),{login:h,password:y,date:new Date});case 10:o=t.sent,console.log("Document written with ID: ",o.id),c(o.id),i(!0),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(7),console.error("Error adding document: ",t.t0);case 19:return t.prev=19,t.finish(19);case 21:case"end":return t.stop()}}),t,null,[[7,16,19,21]])})));return function(e){return t.apply(this,arguments)}}();return(0,iE.jsx)(iE.Fragment,{children:r?(0,iE.jsx)(YE,{id:s}):(0,iE.jsx)("div",{className:d.authContainer,children:(0,iE.jsxs)("div",{className:d.auth,children:[(0,iE.jsx)("p",{ref:g,className:d.errorRegister,children:"incorrect username or password"}),(0,iE.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"Login",className:d.login,value:h.trim(),onChange:function(e){return p(e.target.value)}}),(0,iE.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Password",className:d.password,value:y.trim(),onChange:function(e){return m(e.target.value)}}),(0,iE.jsx)("button",{onClick:_,children:"Create account"}),(0,iE.jsx)("p",{style:{color:"#fff",textAlign:"center"},children:"or"}),(0,iE.jsx)("button",{onClick:function(){return i(!0)},children:"Login"})]})})})};function XE(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new xd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function $E(){if("undefined"===typeof Uint8Array)throw new xd("unimplemented","Uint8Arrays are not available in this environment.")}function ZE(){if("undefined"==typeof atob)throw new xd("unimplemented","Blobs are unavailable in Firestore in this environment.")}var eT=function(){function e(t){_(this,e),this._delegate=t}return w(e,[{key:"toBase64",value:function(){return ZE(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return $E(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return ZE(),new e(DI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return $E(),new e(DI.fromUint8Array(t))}}]),e}();function tT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=y(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var nT=function(){function e(){_(this,e)}return w(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){PI(e=uI(e,bI));var n=II(e);if(n._uninitializedComponentsProvider)throw new xd(bd.FAILED_PRECONDITION,"SDK cache is already specified.");md("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new Nx;return EI(n,i,new Tx(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){PI(e=uI(e,bI));var t=II(e);if(t._uninitializedComponentsProvider)throw new xd(bd.FAILED_PRECONDITION,"SDK cache is already specified.");md("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new Nx;return EI(t,r,new Cx(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new xd(bd.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Id;return e._queue.enqueueAndForgetEvenWhileRestricted(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(op.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,op.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(wk(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),rT=function(){function e(t,n,r){var i=this;_(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof vv||(this._appCompat=t)}return w(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||md("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};hI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return TI(this._delegate)}},{key:"disableNetwork",value:function(){return CI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&rI("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new Id;return e.asyncQueue.enqueueAndForget(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Hb,n.next=3,Qx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(II(uI(this._delegate,bI)))}},{key:"onSnapshotsInSync",value:function(e){return HS(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new xd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new mT(this,vI(this._delegate,e))}catch(t){throw cT(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new sT(this,yI(this._delegate,e))}catch(t){throw cT(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new pT(this,function(e,t){if(e=uI(e,lI),nI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new xd(bd.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new dI(e,null,function(e){return new gy(Vd.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw cT(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=uI(e,bI);var r=Object.assign(Object.assign({},JS),n);return function(e){if(e.maxAttempts<1)throw new xd(bd.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Id;return e.asyncQueue.enqueueAndForget(u(a().mark((function i(){var o;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Yx(e);case 2:o=i.sent,new Ox(e.asyncQueue,o,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(II(e),(function(n){return t(new ZS(e,n))}),r)}(this._delegate,(function(n){return e(new aT(t,n))}))}},{key:"batch",value:function(){var e=this;return II(this._delegate),new oT(new XS(this._delegate,(function(t){return QS(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return NI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return AI(this._delegate,e).then((function(e){return e?new pT(t,e):null}))}}]),e}(),iT=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this)).firestore=e,r}return w(n,[{key:"convertBytes",value:function(e){return new eT(new DI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return sT.forKey(t,this.firestore,null)}}]),n}(AS);var aT=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new iT(t)}return w(e,[{key:"get",value:function(e){var t=this,n=gT(e);return this._delegate.get(n).then((function(e){return new fT(t._firestore,new OS(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=gT(e);return n?(XE("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=gT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=gT(e);return this._delegate.delete(t),this}}]),e}(),oT=function(){function e(t){_(this,e),this._delegate=t}return w(e,[{key:"set",value:function(e,t,n){var r=gT(e);return n?(XE("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=gT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=gT(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),uT=function(){function e(t,n,r){_(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return w(e,[{key:"fromFirestore",value:function(e,t){var n=new LS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new dT(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new iT(t),n),i.set(n,a)),a}}]),e}();uT.INSTANCES=new WeakMap;var sT=function(){function e(t,n){_(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new iT(t)}return w(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new mT(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new mT(this.firestore,vI(this._delegate,e))}catch(t){throw cT(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Ee(e))instanceof fI&&mI(this._delegate,e)}},{key:"set",value:function(e,t){t=XE("DocumentReference.set",t);try{return t?BS(this._delegate,e,t):BS(this._delegate,e)}catch(n){throw cT(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?WS(this._delegate,e):WS.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw cT(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return QS(uI((e=this._delegate).firestore,bI),[new Cm(e._key,dm.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=lT(n),a=hT(n,(function(t){return new fT(e.firestore,new OS(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return GS(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?US(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=uI(e,fI);var t=uI(e.firestore,bI);return $x(II(t),e._key,{source:"server"}).then((function(n){return YS(t,e,n)}))}(this._delegate):function(e){e=uI(e,fI);var t=uI(e.firestore,bI);return $x(II(t),e._key).then((function(n){return YS(t,e,n)}))}(this._delegate)).then((function(e){return new fT(t.firestore,new OS(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(uT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new xd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new fI(n._delegate,r,new Wd(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new fI(n._delegate,r,t))}}]),e}();function cT(e,t,n){return e.message=e.message.replace(t,n),e}function lT(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!tT(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function hT(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=tT(e[0])?e[0]:tT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var fT=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n}return w(e,[{key:"ref",get:function(){return new sT(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return zS(this._delegate,e._delegate)}}]),e}(),dT=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||_d(),t}}]),n}(fT),pT=function(){function e(t,n){_(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new iT(t)}return w(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,pS(this._delegate,function(e,t,n){var r=t,i=lS("where",e);return vS._create(i,r,n)}(t,n,r)))}catch(i){throw cT(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,pS(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=lS("orderBy",e);return mS._create(n,t)}(t,n)))}catch(r){throw cT(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,pS(this._delegate,(sI("limit",n=t),gS._create("limit",n,"F"))))}catch(r){throw cT(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,pS(this._delegate,(sI("limitToLast",n=t),gS._create("limitToLast",n,"L"))))}catch(r){throw cT(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,pS(this._delegate,kS.apply(void 0,arguments)))}catch(t){throw cT(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,pS(this._delegate,wS.apply(void 0,arguments)))}catch(t){throw cT(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,pS(this._delegate,xS.apply(void 0,arguments)))}catch(t){throw cT(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,pS(this._delegate,IS.apply(void 0,arguments)))}catch(t){throw cT(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return gI(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?qS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=uI(e,dI);var t=uI(e.firestore,bI),n=II(t),r=new jS(t);return Zx(n,e._query,{source:"server"}).then((function(n){return new MS(t,r,e,n)}))}(this._delegate):VS(this._delegate)).then((function(e){return new yT(t.firestore,new MS(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=lT(n),a=hT(n,(function(t){return new yT(e.firestore,new MS(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return GS(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(uT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),vT=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n}return w(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new dT(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),yT=function(){function e(t,n){_(this,e),this._firestore=t,this._delegate=n}return w(e,[{key:"query",get:function(){return new pT(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new dT(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new vT(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new dT(n._firestore,r))}))}},{key:"isEqual",value:function(e){return zS(this._delegate,e._delegate)}}]),e}(),mT=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return w(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new sT(this.firestore,e):null}},{key:"doc",value:function(e){try{return new sT(this.firestore,void 0===e?yI(this._delegate):yI(this._delegate,e))}catch(t){throw cT(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return KS(this._delegate,e).then((function(e){return new sT(t.firestore,e)}))}},{key:"isEqual",value:function(e){return mI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(uT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(pT);function gT(e){return uI(e,fI)}var _T=function(){function e(){_(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=C(RI,n)}return w(e,[{key:"isEqual",value:function(e){return(e=Ee(e))instanceof RI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Bd.keyField().canonicalString())}}]),e}(),kT=function(){function e(t){_(this,e),this._delegate=t}return w(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new GI("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new WI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=eE.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=tE.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new YI("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),wT={Firestore:rT,GeoPoint:LI,Timestamp:zd,Blob:eT,Transaction:aT,WriteBatch:oT,DocumentReference:sT,DocumentSnapshot:fT,Query:pT,QueryDocumentSnapshot:dT,QuerySnapshot:yT,CollectionReference:mT,FieldPath:_T,FieldValue:kT,setLogLevel:function(e){var t;t=e,dd.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Te("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},wT)))}(e,(function(e,t){return new rT(e,t,new nT)})),e.registerVersion("@firebase/firestore-compat","0.3.11")}(tn);function bT(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var xT;Object.create;var IT={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ST="EMAIL_SIGNIN",ET="PASSWORD_RESET",TT="RECOVER_EMAIL",CT="REVERT_SECOND_FACTOR_ADDITION",NT="VERIFY_AND_CHANGE_EMAIL",AT="VERIFY_EMAIL";function PT(){return g({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var DT=function(){var e;return g(e={},"admin-restricted-operation","This operation is restricted to administrators only."),g(e,"argument-error",""),g(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),g(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),g(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),g(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),g(e,"cordova-not-ready","Cordova framework is not ready."),g(e,"cors-unsupported","This browser is not supported."),g(e,"credential-already-in-use","This credential is already associated with a different user account."),g(e,"custom-token-mismatch","The custom token corresponds to a different audience."),g(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),g(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),g(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),g(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),g(e,"email-already-in-use","The email address is already in use by another account."),g(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),g(e,"expired-action-code","The action code has expired."),g(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),g(e,"internal-error","An internal AuthError has occurred."),g(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),g(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),g(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),g(e,"invalid-auth-event","An internal AuthError has occurred."),g(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),g(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),g(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),g(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),g(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),g(e,"invalid-email","The email address is badly formatted."),g(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),g(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),g(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),g(e,"invalid-credential","The supplied auth credential is malformed or has expired."),g(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),g(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),g(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),g(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),g(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),g(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),g(e,"wrong-password","The password is invalid or the user does not have a password."),g(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),g(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),g(e,"invalid-provider-id","The specified provider ID is invalid."),g(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),g(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),g(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),g(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),g(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),g(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),g(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),g(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),g(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),g(e,"missing-continue-uri","A continue URL must be provided in the request."),g(e,"missing-iframe-start","An internal AuthError has occurred."),g(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),g(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),g(e,"missing-password","A non-empty password must be provided"),g(e,"missing-multi-factor-info","No second factor identifier is provided."),g(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),g(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),g(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),g(e,"app-deleted","This instance of FirebaseApp has been deleted."),g(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),g(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),g(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),g(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),g(e,"no-auth-event","An internal AuthError has occurred."),g(e,"no-such-provider","User was not linked to an account with the given provider."),g(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),g(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),g(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),g(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),g(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),g(e,"provider-already-linked","User can only be linked to one identity for the given provider."),g(e,"quota-exceeded","The project's quota for this operation has been exceeded."),g(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),g(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),g(e,"rejected-credential","The request contains malformed or mismatching credentials."),g(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),g(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),g(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),g(e,"timeout","The operation has timed out."),g(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),g(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),g(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),g(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),g(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),g(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),g(e,"unverified-email","The operation requires a verified email."),g(e,"user-cancelled","The user did not grant your application the permissions it requested."),g(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),g(e,"user-disabled","The user account has been disabled by an administrator."),g(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),g(e,"user-signed-out",""),g(e,"weak-password","The password must be 6 characters long or more."),g(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),g(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),g(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),g(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),g(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),g(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),g(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),g(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),g(e,"invalid-req-type","Invalid request parameters."),g(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},RT=PT,OT=new re("auth","Firebase",PT()),LT=new ze("@firebase/auth");function MT(e){if(LT.logLevel<=Pe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];LT.warn.apply(LT,["Auth (".concat(xt,"): ").concat(e)].concat(n))}}function FT(e){if(LT.logLevel<=Pe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];LT.error.apply(LT,["Auth (".concat(xt,"): ").concat(e)].concat(n))}}function zT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw qT.apply(void 0,[e].concat(n))}function jT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qT.apply(void 0,[e].concat(n))}function UT(e,t,n){var r=Object.assign(Object.assign({},RT()),g({},t,n));return new re("auth","Firebase",r).create(t,{appName:e.name})}function VT(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&zT(e,"argument-error"),UT(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function qT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=v(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(v(o)))}return OT.create.apply(OT,[e].concat(n))}function BT(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw qT.apply(void 0,[t].concat(r))}}function WT(e){var t="INTERNAL ASSERTION FAILED: "+e;throw FT(t),new Error(t)}function KT(e,t){e||WT(t)}function GT(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function HT(){return"http:"===QT()||"https:"===QT()}function QT(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var YT=function(){function e(t,n){_(this,e),this.shortDelay=t,this.longDelay=n,KT(n>t,"Short delay should be less than long delay!"),this.isMobile=Y()||$()}return w(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(HT()||X()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function JT(e,t){KT(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var XT=function(){function e(){_(this,e)}return w(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void WT("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void WT("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void WT("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),$T=(g(xT={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),g(xT,"MISSING_CUSTOM_TOKEN","internal-error"),g(xT,"INVALID_IDENTIFIER","invalid-email"),g(xT,"MISSING_CONTINUE_URI","internal-error"),g(xT,"INVALID_PASSWORD","wrong-password"),g(xT,"MISSING_PASSWORD","missing-password"),g(xT,"EMAIL_EXISTS","email-already-in-use"),g(xT,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),g(xT,"INVALID_IDP_RESPONSE","invalid-credential"),g(xT,"INVALID_PENDING_TOKEN","invalid-credential"),g(xT,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),g(xT,"MISSING_REQ_TYPE","internal-error"),g(xT,"EMAIL_NOT_FOUND","user-not-found"),g(xT,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),g(xT,"EXPIRED_OOB_CODE","expired-action-code"),g(xT,"INVALID_OOB_CODE","invalid-action-code"),g(xT,"MISSING_OOB_CODE","internal-error"),g(xT,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),g(xT,"INVALID_ID_TOKEN","invalid-user-token"),g(xT,"TOKEN_EXPIRED","user-token-expired"),g(xT,"USER_NOT_FOUND","user-token-expired"),g(xT,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),g(xT,"INVALID_CODE","invalid-verification-code"),g(xT,"INVALID_SESSION_INFO","invalid-verification-id"),g(xT,"INVALID_TEMPORARY_PROOF","invalid-credential"),g(xT,"MISSING_SESSION_INFO","missing-verification-id"),g(xT,"SESSION_EXPIRED","code-expired"),g(xT,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),g(xT,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),g(xT,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),g(xT,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),g(xT,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),g(xT,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),g(xT,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),g(xT,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),g(xT,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),g(xT,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),g(xT,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),g(xT,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),g(xT,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),g(xT,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),g(xT,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),g(xT,"MISSING_CLIENT_TYPE","missing-client-type"),g(xT,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),g(xT,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),g(xT,"INVALID_REQ_TYPE","invalid-req-type"),xT),ZT=new YT(3e4,6e4);function eC(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function tC(e,t,n,r){return nC.apply(this,arguments)}function nC(){return nC=u(a().mark((function e(t,n,r,i){var o,s=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},e.abrupt("return",rC(t,o,u(a().mark((function e(){var o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},u={},i&&("GET"===n?u=i:o={body:JSON.stringify(i)}),s=pe(Object.assign({key:t.config.apiKey},u)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(c=e.sent)["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",XT.fetch()(uC(t,t.config.apiHost,r,s),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},o)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),nC.apply(this,arguments)}function rC(e,t,n){return iC.apply(this,arguments)}function iC(){return iC=u(a().mark((function e(t,n,r){var i,o,u,s,c,l,h,d,p,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},$T),n),e.prev=2,o=new sC(t),e.next=6,Promise.race([r(),o.promise]);case 6:return u=e.sent,o.clearNetworkTimeout(),e.next=10,u.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw cC(t,"account-exists-with-different-credential",s);case 13:if(!u.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=u.ok?s.errorMessage:s.error.message,l=c.split(" : "),h=f(l,2),d=h[0],p=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw cC(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==d){e.next=27;break}throw cC(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==d){e.next=29;break}throw cC(t,"user-disabled",s);case 29:if(v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=34;break}throw UT(t,v,p);case 34:zT(t,v);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof ne)){e.next=41;break}throw e.t0;case 41:zT(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),iC.apply(this,arguments)}function aC(e,t,n,r){return oC.apply(this,arguments)}function oC(){return oC=u(a().mark((function e(t,n,r,i){var o,u,s=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,tC(t,n,r,i,o);case 3:return"mfaPendingCredential"in(u=e.sent)&&zT(t,"multi-factor-auth-required",{_serverResponse:u}),e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)}))),oC.apply(this,arguments)}function uC(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?JT(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var sC=function(){function e(t){var n=this;_(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(jT(n.auth,"network-request-failed"))}),ZT.get())}))}return w(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function cC(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=jT(e,t,r);return i.customData._tokenResponse=n,i}function lC(e,t){return hC.apply(this,arguments)}function hC(){return hC=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tC(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),hC.apply(this,arguments)}function fC(e,t){return dC.apply(this,arguments)}function dC(){return dC=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tC(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),dC.apply(this,arguments)}function pC(e,t){return vC.apply(this,arguments)}function vC(){return vC=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tC(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),vC.apply(this,arguments)}function yC(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function mC(){return mC=u(a().mark((function e(t){var n,r,i,o,u,s,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],r=Ee(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,BT((o=_C(i))&&o.exp&&o.auth_time&&o.iat,r.auth,"internal-error"),u="object"===typeof o.firebase?o.firebase:void 0,s=null===u||void 0===u?void 0:u.sign_in_provider,e.abrupt("return",{claims:o,token:i,authTime:yC(gC(o.auth_time)),issuedAtTime:yC(gC(o.iat)),expirationTime:yC(gC(o.exp)),signInProvider:s||null,signInSecondFactor:(null===u||void 0===u?void 0:u.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),mC.apply(this,arguments)}function gC(e){return 1e3*Number(e)}function _C(e){var t=f(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return FT("JWT malformed, contained fewer than 3 sections"),null;try{var a=U(r);return a?JSON.parse(a):(FT("Failed to decode base64 JWT payload"),null)}catch(o){return FT("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function kC(e,t){return wC.apply(this,arguments)}function wC(){return wC=u(a().mark((function e(t,n){var r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof ne&&bC(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),wC.apply(this,arguments)}function bC(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var xC=function(){function e(t){_(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return w(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),IC=function(){function e(t,n){_(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return w(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=yC(this.lastLoginAt),this.creationTime=yC(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function SC(e){return EC.apply(this,arguments)}function EC(){return EC=u(a().mark((function e(t){var n,r,i,o,u,s,c,l,h,f,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,kC(t,pC(r,{idToken:i}));case 6:BT(null===(o=e.sent)||void 0===o?void 0:o.users.length,r,"internal-error"),u=o.users[0],t._notifyReloadListener(u),s=(null===(n=u.providerUserInfo)||void 0===n?void 0:n.length)?u.providerUserInfo.map((function(e){var t=e.providerId,n=bT(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],c=CC(t.providerData,s),l=t.isAnonymous,h=!(t.email&&u.passwordHash)&&!(null===c||void 0===c?void 0:c.length),f=!!l&&h,d={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:c,metadata:new IC(u.createdAt,u.lastLoginAt),isAnonymous:f},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),EC.apply(this,arguments)}function TC(){return(TC=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ee(t),e.next=3,SC(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CC(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(v(n),v(t))}function NC(e,t){return AC.apply(this,arguments)}function AC(){return AC=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rC(t,{},u(a().mark((function e(){var r,i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pe({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,o=i.tokenApiHost,u=i.apiKey,s=uC(t,o,"/v1/token","key=".concat(u)),e.next=5,t._getAdditionalHeaders();case 5:return(c=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",XT.fetch()(s,{method:"POST",headers:c,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),AC.apply(this,arguments)}var PC=function(){function e(){_(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return w(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){BT(e.idToken,"internal-error"),BT("undefined"!==typeof e.idToken,"internal-error"),BT("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=_C(e);return BT(t,"internal-error"),BT("undefined"!==typeof t.exp,"internal-error"),BT("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=u(a().mark((function e(t){var n,r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],BT(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,NC(t,n);case 2:r=e.sent,i=r.accessToken,o=r.refreshToken,u=r.expiresIn,this.updateTokensAndExpiration(i,o,Number(u));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return WT("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(BT("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(BT("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(BT("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function DC(e,t){BT("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var RC=function(){function e(t){_(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=bT(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?v(a.providerData):[],this.metadata=new IC(a.createdAt||void 0,a.lastLoginAt||void 0)}return w(e,[{key:"getIdToken",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kC(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(BT(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return mC.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return TC.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(BT(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){BT(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=u(a().mark((function e(t){var n,r,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,SC(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,kC(this,lC(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,_=n.uid,k=n.emailVerified,w=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;BT(_&&x,t,"internal-error");var I=PC.fromJSON(this.name,x);BT("string"===typeof _,t,"internal-error"),DC(h,t.name),DC(f,t.name),BT("boolean"===typeof k,t,"internal-error"),BT("boolean"===typeof w,t,"internal-error"),DC(d,t.name),DC(p,t.name),DC(v,t.name),DC(y,t.name),DC(m,t.name),DC(g,t.name);var S=new e({uid:_,auth:t,email:f,emailVerified:k,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(S.providerData=b.map((function(e){return Object.assign({},e)}))),y&&(S._redirectEventId=y),S}},{key:"_fromIdTokenResponse",value:function(){var t=u(a().mark((function t(n,r){var i,o,u,s=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(o=new PC).updateFromServerResponse(r),u=new e({uid:r.localId,auth:n,stsTokenManager:o,isAnonymous:i}),t.next=6,SC(u);case 6:return t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),OC=new Map;function LC(e){KT(e instanceof Function,"Expected a class definition");var t=OC.get(e);return t?(KT(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,OC.set(e,t),t)}var MC=function(){function e(){_(this,e),this.type="NONE",this.storage={}}return w(e,[{key:"_isAvailable",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();MC.type="NONE";var FC=MC;function zC(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var jC=function(){function e(t,n,r){_(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=zC(this.userKey,a.apiKey,o),this.fullPersistenceKey=zC("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return w(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?RC._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=u(a().mark((function t(n,r){var i,o,s,c,l,h,f,d,p,v,m,g=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=g.length>2&&void 0!==g[2]?g[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(LC(FC),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:o=t.sent.filter((function(e){return e})),s=o[0]||LC(FC),c=zC(i,n.config.apiKey,n.name),l=null,h=y(r),t.prev=10,h.s();case 12:if((f=h.n()).done){t.next=29;break}return d=f.value,t.prev=14,t.next=17,d._get(c);case 17:if(!(p=t.sent)){t.next=23;break}return v=RC._fromJSON(n,p),d!==s&&(l=v),s=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),h.e(t.t1);case 34:return t.prev=34,h.f(),t.finish(34);case 37:if(m=o.filter((function(e){return e._shouldAllowMigration})),s._shouldAllowMigration&&m.length){t.next=40;break}return t.abrupt("return",new e(s,n,i));case 40:if(s=m[0],!l){t.next=44;break}return t.next=44,s._set(c,l.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===s){e.next=8;break}return e.prev=1,e.next=4,t._remove(c);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(s,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function UC(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(WC(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(VC(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(GC(t))return"Blackberry";if(HC(t))return"Webos";if(qC(t))return"Safari";if((t.includes("chrome/")||BC(t))&&!t.includes("edge/"))return"Chrome";if(KC(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function VC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/firefox\//i.test(e)}function qC(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/crios\//i.test(e)}function WC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/iemobile/i.test(e)}function KC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/android/i.test(e)}function GC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/blackberry/i.test(e)}function HC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/webos/i.test(e)}function QC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function YC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return QC(e)||KC(e)||HC(e)||GC(e)||/windows phone/i.test(e)||WC(e)}function JC(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=UC(Q());break;case"Worker":t="".concat(UC(Q()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xt,"/").concat(r)}function XC(e){return $C.apply(this,arguments)}function $C(){return $C=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tC(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),$C.apply(this,arguments)}function ZC(e,t){return eN.apply(this,arguments)}function eN(){return eN=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tC(t,"GET","/v2/recaptchaConfig",eC(t,n)));case 1:case"end":return e.stop()}}),e)}))),eN.apply(this,arguments)}function tN(e){return void 0!==e&&void 0!==e.getResponse}function nN(e){return void 0!==e&&void 0!==e.enterprise}var rN=w((function e(t){if(_(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function iN(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=jT("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function aN(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var oN=function(){function e(t){_(this,e),this.type="recaptcha-enterprise",this.auth=hN(t)}return w(e,[{key:"verify",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o,s=this,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e,n,r){var i=window.grecaptcha;nN(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=u(a().mark((function e(n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ZC(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new rN(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=c.length>0&&void 0!==c[0]?c[0]:"verify",n=c.length>1&&void 0!==c[1]&&c[1],e.abrupt("return",new Promise((function(e,t){r(s.auth).then((function(r){if(!n&&nN(window.grecaptcha))o(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));iN("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){o(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function uN(e,t,n){return sN.apply(this,arguments)}function sN(){return sN=u(a().mark((function e(t,n,r){var i,o,u,s,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>3&&void 0!==c[3]&&c[3],o=new oN(t),e.prev=2,e.next=5,o.verify(r);case 5:u=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,o.verify(r,!0);case 12:u=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:u}):Object.assign(s,{captchaResponse:u}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),sN.apply(this,arguments)}var cN=function(){function e(t){_(this,e),this.auth=t,this.queue=[]}return w(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=u(a().mark((function e(t){var n,r,i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=y(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return o=i.value,e.next=11,o(t);case 11:o.onAbort&&n.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),u=y(n);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(a){}}}catch(l){u.e(l)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),lN=function(){function e(t,n,r,i){_(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fN(this),this.idTokenSubscription=new fN(this),this.beforeStateQueue=new cN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return w(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=LC(t)),this._initializationPromise=this.queue(u(a().mark((function r(){var i,o;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,jC.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(o=n.currentUser)||void 0===o?void 0:o.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=u(a().mark((function e(t){var n,r,i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,o=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return u=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:c=e.sent,u&&u!==s||!(null===c||void 0===c?void 0:c.user)||(i=c.user,o=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!o){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return BT(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,SC(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Ee(t):null)&&BT(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=u(a().mark((function e(t){var n,r=this,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&BT(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(LC(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZC(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new rN(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new oN(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new re("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return BT(n=t&&LC(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,jC.create(this,[LC(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=u(a().mark((function e(t){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return BT(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return BT(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JC(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=u(a().mark((function e(){var t,n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&MT("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function hN(e){return Ee(e)}var fN=function(){function e(t){var n=this;_(this,e),this.auth=t,this.observer=null,this.addObserver=ge((function(e){return n.observer=e}))}return w(e,[{key:"next",get:function(){return BT(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function dN(e,t,n){var r=hN(e);BT(r._canInitEmulator,r,"emulator-config-failed"),BT(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=pN(t),o=function(e){var t=pN(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:vN(r.substr(a.length+1))}}var o=f(r.split(":"),2);return{host:o[0],port:vN(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function pN(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function vN(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var yN=function(){function e(t,n){_(this,e),this.providerId=t,this.signInMethod=n}return w(e,[{key:"toJSON",value:function(){return WT("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return WT("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return WT("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return WT("not implemented")}}]),e}();function mN(e,t){return gN.apply(this,arguments)}function gN(){return gN=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tC(t,"POST","/v1/accounts:resetPassword",eC(t,n)));case 1:case"end":return e.stop()}}),e)}))),gN.apply(this,arguments)}function _N(e,t){return kN.apply(this,arguments)}function kN(){return kN=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tC(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),kN.apply(this,arguments)}function wN(e,t){return bN.apply(this,arguments)}function bN(){return bN=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tC(t,"POST","/v1/accounts:update",eC(t,n)));case 1:case"end":return e.stop()}}),e)}))),bN.apply(this,arguments)}function xN(e,t){return IN.apply(this,arguments)}function IN(){return IN=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aC(t,"POST","/v1/accounts:signInWithPassword",eC(t,n)));case 1:case"end":return e.stop()}}),e)}))),IN.apply(this,arguments)}function SN(e,t){return EN.apply(this,arguments)}function EN(){return EN=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tC(t,"POST","/v1/accounts:sendOobCode",eC(t,n)));case 1:case"end":return e.stop()}}),e)}))),EN.apply(this,arguments)}function TN(e,t){return CN.apply(this,arguments)}function CN(){return CN=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",SN(t,n));case 1:case"end":return e.stop()}}),e)}))),CN.apply(this,arguments)}function NN(e,t){return AN.apply(this,arguments)}function AN(){return AN=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",SN(t,n));case 1:case"end":return e.stop()}}),e)}))),AN.apply(this,arguments)}function PN(e,t){return DN.apply(this,arguments)}function DN(){return DN=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",SN(t,n));case 1:case"end":return e.stop()}}),e)}))),DN.apply(this,arguments)}function RN(e,t){return ON.apply(this,arguments)}function ON(){return ON=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",SN(t,n));case 1:case"end":return e.stop()}}),e)}))),ON.apply(this,arguments)}function LN(e,t){return MN.apply(this,arguments)}function MN(){return MN=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aC(t,"POST","/v1/accounts:signInWithEmailLink",eC(t,n)));case 1:case"end":return e.stop()}}),e)}))),MN.apply(this,arguments)}function FN(e,t){return zN.apply(this,arguments)}function zN(){return zN=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aC(t,"POST","/v1/accounts:signInWithEmailLink",eC(t,n)));case 1:case"end":return e.stop()}}),e)}))),zN.apply(this,arguments)}var jN=function(e){I(n,e);var t=T(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return w(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,uN(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",xN(t,i));case 11:return e.abrupt("return",xN(t,r).catch(function(){var e=u(a().mark((function e(n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,uN(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",xN(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",LN(t,{email:this._email,oobCode:this._password}));case 13:zT(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",_N(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",FN(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:zT(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(yN);function UN(e,t){return VN.apply(this,arguments)}function VN(){return VN=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aC(t,"POST","/v1/accounts:signInWithIdp",eC(t,n)));case 1:case"end":return e.stop()}}),e)}))),VN.apply(this,arguments)}var qN=function(e){I(n,e);var t=T(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return w(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return UN(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,UN(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,UN(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pe(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zT("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=bT(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(yN);function BN(e,t){return WN.apply(this,arguments)}function WN(){return WN=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tC(t,"POST","/v1/accounts:sendVerificationCode",eC(t,n)));case 1:case"end":return e.stop()}}),e)}))),WN.apply(this,arguments)}function KN(){return KN=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aC(t,"POST","/v1/accounts:signInWithPhoneNumber",eC(t,n)));case 1:case"end":return e.stop()}}),e)}))),KN.apply(this,arguments)}function GN(){return GN=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aC(t,"POST","/v1/accounts:signInWithPhoneNumber",eC(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw cC(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),GN.apply(this,arguments)}var HN=g({},"USER_NOT_FOUND","user-not-found");function QN(){return QN=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",aC(t,"POST","/v1/accounts:signInWithPhoneNumber",eC(t,r),HN));case 2:case"end":return e.stop()}}),e)}))),QN.apply(this,arguments)}var YN=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this,"phone","phone")).params=e,r}return w(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return KN.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return GN.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return QN.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(yN);var JN=function(){function e(t){var n,r,i,a,o,u;_(this,e);var s=ve(ye(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);BT(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return w(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ve(ye(e)).link,n=t?ve(ye(t)).deep_link_id:null,r=ve(ye(e)).deep_link_id;return(r?ve(ye(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(mx){return null}}}]),e}();var XN=function(){function e(){_(this,e),this.providerId=e.PROVIDER_ID}return w(e,null,[{key:"credential",value:function(e,t){return jN._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=JN.parseLink(t);return BT(n,"argument-error"),jN._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();XN.PROVIDER_ID="password",XN.EMAIL_PASSWORD_SIGN_IN_METHOD="password",XN.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var $N=function(){function e(t){_(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return w(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ZN=function(e){I(n,e);var t=T(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).scopes=[],e}return w(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return v(this.scopes)}}]),n}($N),eA=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return BT(e.idToken||e.accessToken,"argument-error"),qN._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return BT("providerId"in t&&"signInMethod"in t,"argument-error"),qN._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(ZN),tA=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.call(this,"facebook.com")}return w(n,null,[{key:"credential",value:function(e){return qN._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(mx){return null}}}]),n}(ZN);tA.FACEBOOK_SIGN_IN_METHOD="facebook.com",tA.PROVIDER_ID="facebook.com";var nA=function(e){I(n,e);var t=T(n);function n(){var e;return _(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return w(n,null,[{key:"credential",value:function(e,t){return qN._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(mx){return null}}}]),n}(ZN);nA.GOOGLE_SIGN_IN_METHOD="google.com",nA.PROVIDER_ID="google.com";var rA=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.call(this,"github.com")}return w(n,null,[{key:"credential",value:function(e){return qN._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(mx){return null}}}]),n}(ZN);rA.GITHUB_SIGN_IN_METHOD="github.com",rA.PROVIDER_ID="github.com";var iA=function(e){I(n,e);var t=T(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return w(n,[{key:"_getIdTokenResponse",value:function(e){return UN(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,UN(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,UN(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(yN),aA=function(e){I(n,e);var t=T(n);function n(e){return _(this,n),BT(e.startsWith("saml."),"argument-error"),t.call(this,e)}return w(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=iA.fromJSON(e);return BT(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return iA._create(r,n)}catch(i){return null}}}]),n}($N),oA=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.call(this,"twitter.com")}return w(n,null,[{key:"credential",value:function(e,t){return qN._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(mx){return null}}}]),n}(ZN);function uA(e,t){return sA.apply(this,arguments)}function sA(){return sA=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aC(t,"POST","/v1/accounts:signUp",eC(t,n)));case 1:case"end":return e.stop()}}),e)}))),sA.apply(this,arguments)}oA.TWITTER_SIGN_IN_METHOD="twitter.com",oA.PROVIDER_ID="twitter.com";var cA=function(){function e(t){_(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return w(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=u(a().mark((function t(n,r,i){var o,u,s,c,l=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=l.length>3&&void 0!==l[3]&&l[3],t.next=3,RC._fromIdTokenResponse(n,i,o);case 3:return u=t.sent,s=lA(i),c=new e({user:u,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=u(a().mark((function t(n,r,i){var o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return o=lA(i),t.abrupt("return",new e({user:n,providerId:o,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function lA(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function hA(){return hA=u(a().mark((function e(t){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hN(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new cA({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,uA(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,cA._fromIdTokenResponse(r,"signIn",i,!0);case 10:return o=e.sent,e.next=13,r._updateCurrentUser(o.user);case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)}))),hA.apply(this,arguments)}var fA=function(e){I(n,e);var t=T(n);function n(e,r,i,a){var o,u;return _(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(b(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return w(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(ne);function dA(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw fA._fromErrorAndOperation(e,n,t,r);throw n}))}function pA(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function vA(e,t){return yA.apply(this,arguments)}function yA(){return yA=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ee(t),e.next=3,_A(!0,r,n);case 3:return e.t0=fC,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,o=i.providerUserInfo,u=pA(o||[]),r.providerData=r.providerData.filter((function(e){return u.has(e.providerId)})),u.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),yA.apply(this,arguments)}function mA(e,t){return gA.apply(this,arguments)}function gA(){return gA=u(a().mark((function e(t,n){var r,i,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],e.t0=kC,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",cA._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),gA.apply(this,arguments)}function _A(e,t,n){return kA.apply(this,arguments)}function kA(){return(kA=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SC(n);case 2:i=pA(n.providerData),o=!1===t?"provider-already-linked":"no-such-provider",BT(i.has(r)===t,n.auth,o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wA(e,t){return bA.apply(this,arguments)}function bA(){return bA=u(a().mark((function e(t,n){var r,i,o,u,s,c,l=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,o="reauthenticate",e.prev=3,e.next=6,kC(t,dA(i,o,n,t),r);case 6:return BT((u=e.sent).idToken,i,"internal-error"),BT(s=_C(u.idToken),i,"internal-error"),c=s.sub,BT(t.uid===c,i,"user-mismatch"),e.abrupt("return",cA._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&zT(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),bA.apply(this,arguments)}function xA(e,t){return IA.apply(this,arguments)}function IA(){return IA=u(a().mark((function e(t,n){var r,i,o,u,s=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,dA(t,i,n);case 4:return o=e.sent,e.next=7,cA._fromIdTokenResponse(t,i,o);case 7:if(u=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(u.user);case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)}))),IA.apply(this,arguments)}function SA(e,t){return EA.apply(this,arguments)}function EA(){return EA=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xA(hN(t),n));case 1:case"end":return e.stop()}}),e)}))),EA.apply(this,arguments)}function TA(e,t){return CA.apply(this,arguments)}function CA(){return(CA=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ee(t),e.next=3,_A(!1,r,n.providerId);case 3:return e.abrupt("return",mA(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NA(e,t){return AA.apply(this,arguments)}function AA(){return(AA=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wA(Ee(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function PA(e,t){return DA.apply(this,arguments)}function DA(){return DA=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aC(t,"POST","/v1/accounts:signInWithCustomToken",eC(t,n)));case 1:case"end":return e.stop()}}),e)}))),DA.apply(this,arguments)}function RA(){return RA=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hN(t),e.next=3,PA(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,cA._fromIdTokenResponse(r,"signIn",i);case 6:return o=e.sent,e.next=9,r._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),RA.apply(this,arguments)}var OA=function(){function e(t,n){_(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return w(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?LA._fromServerResponse(e,t):"totpInfo"in t?MA._fromServerResponse(e,t):zT(e,"internal-error")}}]),e}(),LA=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return w(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(OA),MA=function(e){I(n,e);var t=T(n);function n(e){return _(this,n),t.call(this,"totp",e)}return w(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(OA);function FA(e,t,n){var r;BT((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),BT("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(BT(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(BT(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function zA(){return zA=u(a().mark((function e(t,n,r){var i,o,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=hN(t),s={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=o._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,uN(o,s,"getOobCode",!0);case 5:return c=e.sent,r&&FA(o,c,r),e.next=9,NN(o,c);case 9:e.next=14;break;case 11:return r&&FA(o,s,r),e.next=14,NN(o,s).catch(function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,uN(o,s,"getOobCode",!0);case 4:return n=e.sent,r&&FA(o,n,r),e.next=8,NN(o,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),zA.apply(this,arguments)}function jA(){return jA=u(a().mark((function e(t,n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mN(Ee(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),jA.apply(this,arguments)}function UA(){return UA=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wN(Ee(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),UA.apply(this,arguments)}function VA(e,t){return qA.apply(this,arguments)}function qA(){return qA=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ee(t),e.next=3,mN(r,{oobCode:n});case 3:i=e.sent,BT(o=i.requestType,r,"internal-error"),e.t0=o,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return BT(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:BT(i.mfaInfo,r,"internal-error");case 13:BT(i.email,r,"internal-error");case 14:return u=null,i.mfaInfo&&(u=OA._fromServerResponse(hN(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:u},operation:o});case 17:case"end":return e.stop()}}),e)}))),qA.apply(this,arguments)}function BA(){return BA=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VA(Ee(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),BA.apply(this,arguments)}function WA(e,t,n){return KA.apply(this,arguments)}function KA(){return KA=u(a().mark((function e(t,n,r){var i,o,s,c,l,h,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=hN(t),s={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=o._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,uN(o,s,"signUpPassword");case 5:l=e.sent,c=uA(o,l),e.next=10;break;case 9:c=uA(o,s).catch(function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,uN(o,s,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",uA(o,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,c.catch((function(e){return Promise.reject(e)}));case 12:return h=e.sent,e.next=15,cA._fromIdTokenResponse(o,"signIn",h);case 15:return f=e.sent,e.next=18,o._updateCurrentUser(f.user);case 18:return e.abrupt("return",f);case 19:case"end":return e.stop()}}),e)}))),KA.apply(this,arguments)}function GA(){return GA=u(a().mark((function e(t,n,r){var i,o,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=function(e,t){BT(t.handleCodeInApp,o,"argument-error"),t&&FA(o,e,t)},o=hN(t),s={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=o._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,uN(o,s,"getOobCode",!0);case 6:return l=e.sent,c(l,r),e.next=10,PN(o,l);case 10:e.next=15;break;case 12:return c(s,r),e.next=15,PN(o,s).catch(function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,uN(o,s,"getOobCode",!0);case 4:return n=e.sent,c(n,r),e.next=8,PN(o,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),GA.apply(this,arguments)}function HA(){return HA=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ee(t),BT((o=XN.credentialWithLink(n,r||GT()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",SA(i,o));case 4:case"end":return e.stop()}}),e)}))),HA.apply(this,arguments)}function QA(e,t){return YA.apply(this,arguments)}function YA(){return YA=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tC(t,"POST","/v1/accounts:createAuthUri",eC(t,n)));case 1:case"end":return e.stop()}}),e)}))),YA.apply(this,arguments)}function JA(){return JA=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=HT()?GT():"http://localhost",i={identifier:n,continueUri:r},e.next=4,QA(Ee(t),i);case 4:return o=e.sent,u=o.signinMethods,e.abrupt("return",u||[]);case 7:case"end":return e.stop()}}),e)}))),JA.apply(this,arguments)}function XA(){return(XA=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ee(t),e.next=3,t.getIdToken();case 3:return i=e.sent,o={requestType:"VERIFY_EMAIL",idToken:i},n&&FA(r.auth,o,n),e.next=8,TN(r.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $A(){return($A=u(a().mark((function e(t,n,r){var i,o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ee(t),e.next=3,t.getIdToken();case 3:return o=e.sent,u={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:o,newEmail:n},r&&FA(i.auth,u,r),e.next=8,RN(i.auth,u);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZA(e,t){return eP.apply(this,arguments)}function eP(){return eP=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tC(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),eP.apply(this,arguments)}function tP(){return(tP=u(a().mark((function e(t,n){var r,i,o,u,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return o=Ee(t),e.next=6,o.getIdToken();case 6:return u=e.sent,s={idToken:u,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,kC(o,ZA(o.auth,s));case 10:return c=e.sent,o.displayName=c.displayName||null,o.photoURL=c.photoUrl||null,(l=o.providerData.find((function(e){return"password"===e.providerId})))&&(l.displayName=o.displayName,l.photoURL=o.photoURL),e.next=17,o._updateTokensIfNecessary(c);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nP(e,t,n){return rP.apply(this,arguments)}function rP(){return rP=u(a().mark((function e(t,n,r){var i,o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return o=e.sent,u={idToken:o,returnSecureToken:!0},n&&(u.email=n),r&&(u.password=r),e.next=9,kC(t,_N(i,u));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),rP.apply(this,arguments)}var iP=w((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),aP=function(e){I(n,e);var t=T(n);function n(e,r,i,a){var o;return _(this,n),(o=t.call(this,e,r,i)).username=a,o}return w(n)}(iP),oP=function(e){I(n,e);var t=T(n);function n(e,r){return _(this,n),t.call(this,e,"facebook.com",r)}return w(n)}(iP),uP=function(e){I(n,e);var t=T(n);function n(e,r){return _(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return w(n)}(aP),sP=function(e){I(n,e);var t=T(n);function n(e,r){return _(this,n),t.call(this,e,"google.com",r)}return w(n)}(iP),cP=function(e){I(n,e);var t=T(n);function n(e,r,i){return _(this,n),t.call(this,e,"twitter.com",r,i)}return w(n)}(aP);function lP(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=_C(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new iP(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new oP(a,i);case"github.com":return new uP(a,i);case"google.com":return new sP(a,i);case"twitter.com":return new cP(a,i,e.screenName||null);case"custom":case"anonymous":return new iP(a,null);default:return new iP(a,r,i)}}(n)}var hP=function(){function e(t,n,r){_(this,e),this.type=t,this.credential=n,this.auth=r}return w(e,[{key:"toJSON",value:function(){return{multiFactorSession:g({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),fP=function(){function e(t,n,r){_(this,e),this.session=t,this.hints=n,this.signInResolver=r}return w(e,[{key:"resolveSignIn",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=hN(t),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map((function(e){return OA._fromServerResponse(r,e)}));BT(i.mfaPendingCredential,r,"internal-error");var s=hP._fromMfaPendingCredential(i.mfaPendingCredential);return new e(s,o,function(){var e=u(a().mark((function e(t){var o,u,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,s);case 2:o=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:o.idToken,refreshToken:o.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,cA._fromIdTokenResponse(r,n.operationType,u);case 11:return c=e.sent,e.next=14,r._updateCurrentUser(c.user);case 14:return e.abrupt("return",c);case 15:return BT(n.user,r,"internal-error"),e.abrupt("return",cA._forOperation(n.user,n.operationType,u));case 17:zT(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function dP(e,t){return tC(e,"POST","/v2/accounts/mfaEnrollment:start",eC(e,t))}function pP(e,t){return tC(e,"POST","/v2/accounts/mfaEnrollment:start",eC(e,t))}function vP(e,t){return tC(e,"POST","/v2/accounts/mfaEnrollment:finalize",eC(e,t))}function yP(e,t){return tC(e,"POST","/v2/accounts/mfaEnrollment:withdraw",eC(e,t))}var mP=function(){function e(t){var n=this;_(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return OA._fromServerResponse(t.auth,e)})))}))}return w(e,[{key:"getSession",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=hP,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,kC(this.user,r._process(this.user.auth,i,n));case 6:return o=e.sent,e.next=9,this.user._updateTokensIfNecessary(o);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,kC(this.user,yP(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),gP=new WeakMap;var _P="__sak",kP=function(){function e(t,n){_(this,e),this.storageRetriever=t,this.type=n}return w(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(_P,"1"),this.storage.removeItem(_P),Promise.resolve(!0)):Promise.resolve(!1)}catch(mx){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var wP=function(e){I(n,e);var t=T(n);function n(){var e;return _(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Q();return qC(e)||QC(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=YC(),e._shouldAllowMigration=!0,e}return w(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Z()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=u(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Us(S(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=u(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Us(S(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Us(S(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(kP);wP.type="LOCAL";var bP=wP,xP=function(e){I(n,e);var t=T(n);function n(){return _(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return w(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(kP);xP.type="SESSION";var IP=xP;function SP(e){return Promise.all(e.map(function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var EP=function(){function e(t){_(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return w(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=u(a().mark((function e(t){var n,r,i,o,s,c,l,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,o=r.eventType,s=r.data,null===(c=this.handlersMap[o])||void 0===c?void 0:c.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:o}),l=Array.from(c).map(function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,s));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,SP(l);case 9:h=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:h});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function TP(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}EP.receivers=[];var CP=function(){function e(t){_(this,e),this.target=t,this.handlers=new Set}return w(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=u(a().mark((function e(t,n){var r,i,o,u,s=this,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,a){var c=TP("",20);i.port1.start();var l=setTimeout((function(){a(new Error("unsupported_event"))}),r);u={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),o=setTimeout((function(){a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(o),e(n.data.response);break;default:clearTimeout(l),clearTimeout(o),a(new Error("invalid_response"))}}},s.handlers.add(u),i.port1.addEventListener("message",u.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){u&&s.removeMessageHandler(u)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function NP(){return window}function AP(e){NP().location.href=e}function PP(){return"undefined"!==typeof NP().WorkerGlobalScope&&"function"===typeof NP().importScripts}function DP(){return RP.apply(this,arguments)}function RP(){return(RP=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function OP(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var LP="firebaseLocalStorageDb",MP="firebaseLocalStorage",FP="fbase_key",zP=function(){function e(t){_(this,e),this.request=t}return w(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function jP(e,t){return e.transaction([MP],t?"readwrite":"readonly").objectStore(MP)}function UP(){var e=indexedDB.deleteDatabase(LP);return new zP(e).toPromise()}function VP(){var e=indexedDB.open(LP,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(MP,{keyPath:FP})}catch(r){n(r)}})),e.addEventListener("success",u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(MP)){n.next=12;break}return r.close(),n.next=5,UP();case 5:return n.t0=t,n.next=8,VP();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function qP(e,t,n){return BP.apply(this,arguments)}function BP(){return BP=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=jP(t,!0).put((g(i={},FP,n),g(i,"value",r),i)),e.abrupt("return",new zP(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),BP.apply(this,arguments)}function WP(e,t){return KP.apply(this,arguments)}function KP(){return KP=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jP(t,!1).get(n),e.next=3,new zP(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),KP.apply(this,arguments)}function GP(e,t){var n=jP(e,!0).delete(t);return new zP(n).toPromise()}var HP=function(){function e(){_(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return w(e,[{key:"_openDb",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,VP();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",PP()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=u(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=EP._getInstance(PP()?self:null),this.receiver._subscribe("keyChanged",function(){var e=u(a().mark((function e(n,r){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=u(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,DP();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new CP(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&OP()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,VP();case 5:return t=e.sent,e.next=8,qP(t,_P,"1");case 8:return e.next=10,GP(t,_P);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=u(a().mark((function e(t,n){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return qP(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return WP(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=u(a().mark((function e(t){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return GP(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o,u,s,c,l,h,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=jP(e,!1).getAll();return new zP(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=y(t);try{for(i.s();!(o=i.n()).done;)u=o.value,s=u.fbase_key,c=u.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(c)&&(this.notifyListeners(s,c),n.push(s))}catch(a){i.e(a)}finally{i.f()}for(l=0,h=Object.keys(this.localCache);l<h.length;l++)f=h[l],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();HP.type="LOCAL";var QP=HP;function YP(e,t){return tC(e,"POST","/v2/accounts/mfaSignIn:start",eC(e,t))}function JP(e,t){return tC(e,"POST","/v2/accounts/mfaSignIn:finalize",eC(e,t))}var XP=1e12,$P=function(){function e(t){_(this,e),this.auth=t,this.counter=XP,this._widgets=new Map}return w(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new ZP(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||XP;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||XP;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||XP,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ZP=function(){function e(t,n,r){var i=this;_(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;BT(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return w(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var eD=aN("rcb"),tD=new YT(3e4,6e4),nD=function(){function e(){var t;_(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=NP().grecaptcha)||void 0===t?void 0:t.render)}return w(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return BT(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&tN(NP().grecaptcha)?Promise.resolve(NP().grecaptcha):new Promise((function(r,i){var a=NP().setTimeout((function(){i(jT(e,"network-request-failed"))}),tD.get());NP()[eD]=function(){NP().clearTimeout(a),delete NP()[eD];var o=NP().grecaptcha;if(o&&tN(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(jT(e,"internal-error"))},iN("".concat("https://www.google.com/recaptcha/api.js?","?").concat(pe({onload:eD,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(jT(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=NP().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var rD=function(){function e(){_(this,e)}return w(e,[{key:"load",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new $P(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),iD="recaptcha",aD={theme:"light",type:"image"},oD=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},aD),r=arguments.length>2?arguments[2]:void 0;_(this,e),this.parameters=n,this.type=iD,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hN(r),this.isInvisible="invisible"===this.parameters.size,BT("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;BT(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new rD:new nD,this.validateStartingState()}return w(e,[{key:"verify",value:function(){var e=u(a().mark((function e(){var t,n,r,i=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){BT(!this.parameters.sitekey,this.auth,"argument-error"),BT(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),BT("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=NP()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){BT(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return BT(HT()&&!PP(),this.auth,"internal-error"),e.next=3,uD();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,XC(this.auth);case 8:BT(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return BT(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function uD(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var sD=function(){function e(t,n){_(this,e),this.verificationId=t,this.onConfirmation=n}return w(e,[{key:"confirm",value:function(e){var t=YN._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function cD(){return cD=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=hN(t),e.next=3,dD(i,n,Ee(r));case 3:return o=e.sent,e.abrupt("return",new sD(o,(function(e){return SA(i,e)})));case 5:case"end":return e.stop()}}),e)}))),cD.apply(this,arguments)}function lD(e,t,n){return hD.apply(this,arguments)}function hD(){return(hD=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ee(t),e.next=3,_A(!1,i,"phone");case 3:return e.next=5,dD(i.auth,n,Ee(r));case 5:return o=e.sent,e.abrupt("return",new sD(o,(function(e){return TA(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fD(){return(fD=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ee(t),e.next=3,dD(i.auth,n,Ee(r));case 3:return o=e.sent,e.abrupt("return",new sD(o,(function(e){return NA(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dD(e,t,n){return pD.apply(this,arguments)}function pD(){return pD=u(a().mark((function e(t,n,r){var i,o,u,s,c,l,h,f,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(o=e.sent,e.prev=3,BT("string"===typeof o,t,"argument-error"),BT(r.type===iD,t,"argument-error"),!("session"in(u="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=u.session,!("phoneNumber"in u)){e.next=17;break}return BT("enroll"===s.type,t,"internal-error"),e.next=13,dP(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:u.phoneNumber,recaptchaToken:o}});case 13:return c=e.sent,e.abrupt("return",c.phoneSessionInfo.sessionInfo);case 17:return BT("signin"===s.type,t,"internal-error"),BT(l=(null===(i=u.multiFactorHint)||void 0===i?void 0:i.uid)||u.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,YP(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:o}});case 22:return h=e.sent,e.abrupt("return",h.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,BN(t,{phoneNumber:u.phoneNumber,recaptchaToken:o});case 28:return f=e.sent,d=f.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),pD.apply(this,arguments)}function vD(){return(vD=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mA(Ee(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yD=function(){function e(t){_(this,e),this.providerId=e.PROVIDER_ID,this.auth=hN(t)}return w(e,[{key:"verifyPhoneNumber",value:function(e,t){return dD(this.auth,e,Ee(t))}}],[{key:"credential",value:function(e,t){return YN._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?YN._fromTokenResponse(n,r):null}}]),e}();function mD(e,t){return t?LC(t):(BT(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}yD.PROVIDER_ID="phone",yD.PHONE_SIGN_IN_METHOD="phone";var gD=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this,"custom","custom")).params=e,r}return w(n,[{key:"_getIdTokenResponse",value:function(e){return UN(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return UN(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return UN(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(yN);function _D(e){return xA(e.auth,new gD(e),e.bypassAuthState)}function kD(e){var t=e.auth,n=e.user;return BT(n,t,"internal-error"),wA(n,new gD(e),e.bypassAuthState)}function wD(e){return bD.apply(this,arguments)}function bD(){return bD=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,BT(r=t.user,n,"internal-error"),e.abrupt("return",mA(r,new gD(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),bD.apply(this,arguments)}var xD=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return w(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=u(a().mark((function t(n,r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=u(a().mark((function e(t){var n,r,i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,o=t.tenantId,u=t.error,s=t.type,!u){e.next=4;break}return this.reject(u),e.abrupt("return");case 4:return c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(c);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _D;case"linkViaPopup":case"linkViaRedirect":return wD;case"reauthViaPopup":case"reauthViaRedirect":return kD;default:zT(this.auth,"internal-error")}}},{key:"resolve",value:function(e){KT(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){KT(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),ID=new YT(2e3,1e4);function SD(e,t,n){return ED.apply(this,arguments)}function ED(){return ED=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=hN(t),VT(t,n,$N),o=mD(i,r),u=new AD(i,"signInViaPopup",n,o),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),ED.apply(this,arguments)}function TD(){return(TD=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return VT((i=Ee(t)).auth,n,$N),o=mD(i.auth,r),u=new AD(i.auth,"reauthViaPopup",n,o,i),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CD(e,t,n){return ND.apply(this,arguments)}function ND(){return(ND=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return VT((i=Ee(t)).auth,n,$N),o=mD(i.auth,r),u=new AD(i.auth,"linkViaPopup",n,o,i),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var AD=function(e){I(n,e);var t=T(n);function n(e,r,i,a,o){var u;return _(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=b(u),u}return w(n,[{key:"executeNotNull",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return BT(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=u(a().mark((function e(){var t,n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return KT(1===this.filter.length,"Popup operations only handle one event"),t=TP(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(jT(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(jT(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(jT(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,ID.get())}()}}]),n}(xD);AD.currentPopupAction=null;var PD="pendingRedirect",DD=new Map,RD=function(e){I(n,e);var t=T(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return w(n,[{key:"execute",value:function(){var e=u(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=DD.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,OD(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Us(S(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:DD.set(this.auth._key(),t);case 21:return this.bypassAuthState||DD.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=u(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Us(S(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Us(S(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(xD);function OD(e,t){return LD.apply(this,arguments)}function LD(){return LD=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=UD(n),i=jD(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,o="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),LD.apply(this,arguments)}function MD(e,t){return FD.apply(this,arguments)}function FD(){return FD=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jD(t)._set(UD(n),"true"));case 1:case"end":return e.stop()}}),e)}))),FD.apply(this,arguments)}function zD(e,t){DD.set(e._key(),t)}function jD(e){return LC(e._redirectPersistence)}function UD(e){return zC(PD,e.config.apiKey,e.name)}function VD(e,t,n){return function(e,t,n){return qD.apply(this,arguments)}(e,t,n)}function qD(){return qD=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=hN(t),VT(t,n,$N),e.next=4,i._initializationPromise;case 4:return o=mD(i,r),e.next=7,MD(o,i);case 7:return e.abrupt("return",o._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),qD.apply(this,arguments)}function BD(e,t,n){return function(e,t,n){return WD.apply(this,arguments)}(e,t,n)}function WD(){return(WD=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return VT((i=Ee(t)).auth,n,$N),e.next=4,i.auth._initializationPromise;case 4:return o=mD(i.auth,r),e.next=7,MD(o,i.auth);case 7:return e.next=9,XD(i);case 9:return u=e.sent,e.abrupt("return",o._openRedirect(i.auth,n,"reauthViaRedirect",u));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function KD(e,t,n){return function(e,t,n){return GD.apply(this,arguments)}(e,t,n)}function GD(){return(GD=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return VT((i=Ee(t)).auth,n,$N),e.next=4,i.auth._initializationPromise;case 4:return o=mD(i.auth,r),e.next=7,_A(!1,i,n.providerId);case 7:return e.next=9,MD(o,i.auth);case 9:return e.next=11,XD(i);case 11:return u=e.sent,e.abrupt("return",o._openRedirect(i.auth,n,"linkViaRedirect",u));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HD(e,t){return QD.apply(this,arguments)}function QD(){return QD=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hN(t)._initializationPromise;case 2:return e.abrupt("return",YD(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),QD.apply(this,arguments)}function YD(e,t){return JD.apply(this,arguments)}function JD(){return JD=u(a().mark((function e(t,n){var r,i,o,u,s,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=hN(t),o=mD(i,n),u=new RD(i,o,r),e.next=6,u.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),JD.apply(this,arguments)}function XD(e){return $D.apply(this,arguments)}function $D(){return($D=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=TP("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ZD=function(){function e(t){_(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return w(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tR(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!tR(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(jT(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(eR(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(eR(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function eR(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function tR(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function nR(e){return rR.apply(this,arguments)}function rR(){return rR=u(a().mark((function e(t){var n,r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",tC(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),rR.apply(this,arguments)}var iR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aR=/^https?/;function oR(){return oR=u(a().mark((function e(t){var n,r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,nR(t);case 4:n=e.sent,r=n.authorizedDomains,i=y(r),e.prev=7,i.s();case 9:if((o=i.n()).done){e.next=20;break}if(u=o.value,e.prev=11,!uR(u)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:zT(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),oR.apply(this,arguments)}function uR(e){var t=GT(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!aR.test(r))return!1;if(iR.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var sR=new YT(3e4,6e4);function cR(){var e=NP().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=v(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var lR=null;function hR(e){return lR=lR||function(e){return new Promise((function(t,n){var r,i,a;function o(){cR(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){cR(),n(jT(e,"network-request-failed"))},timeout:sR.get()})}if(null===(i=null===(r=NP().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=NP().gapi)||void 0===a?void 0:a.load)){var u=aN("iframefcb");return NP()[u]=function(){gapi.load?o():n(jT(e,"network-request-failed"))},iN("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw lR=null,e}))}(e),lR}var fR=new YT(5e3,15e3),dR="__/auth/iframe",pR="emulator/auth/iframe",vR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mR(e){var t=e.config;BT(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?JT(t,pR):"https://".concat(e.config.authDomain,"/").concat(dR),r={apiKey:t.apiKey,appName:e.name,v:xt},i=yR.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(pe(r).slice(1))}function gR(e){return _R.apply(this,arguments)}function _R(){return _R=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hR(t);case 2:return n=e.sent,BT(r=NP().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:mR(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vR,dontclear:!0},(function(e){return new Promise(function(){var n=u(a().mark((function n(r,i){var o,u,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){NP().clearTimeout(u),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:o=jT(t,"network-request-failed"),u=NP().setTimeout((function(){i(o)}),fR.get()),e.ping(s).then(s,(function(){i(o)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),_R.apply(this,arguments)}var kR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wR=function(){function e(t){_(this,e),this.window=t,this.associatedEvent=null}return w(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function bR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},kR),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Q().toLowerCase();n&&(u=BC(c)?"_blank":n),VC(c)&&(t=t||"http://localhost",s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=f(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return QC(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new wR(null);var h=window.open(t||"",u,l);BT(h,e,"popup-blocked");try{h.focus()}catch(d){}return new wR(h)}var xR="__/auth/handler",IR="emulator/auth/handler",SR=encodeURIComponent("fac");function ER(e,t,n,r,i,a){return TR.apply(this,arguments)}function TR(){return TR=u(a().mark((function e(t,n,r,i,o,u){var s,c,l,h,d,p,v,y,m,g,_,k,w;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(BT(t.config.authDomain,t,"auth-domain-config-required"),BT(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:xt,eventId:o},n instanceof $N)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",le(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),c=0,l=Object.entries(u||{});c<l.length;c++)h=f(l[c],2),d=h[0],p=h[1],s[d]=p;for(n instanceof ZN&&(v=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=v.join(",")),t.tenantId&&(s.tid=t.tenantId),y=s,m=0,g=Object.keys(y);m<g.length;m++)_=g[m],void 0===y[_]&&delete y[_];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,w=k?"#".concat(SR,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(CR(t),"?").concat(pe(y).slice(1)).concat(w));case 13:case"end":return e.stop()}}),e)}))),TR.apply(this,arguments)}function CR(e){var t=e.config;return t.emulator?JT(t,IR):"https://".concat(t.authDomain,"/").concat(xR)}var NR="webStorageSupport",AR=function(){function e(){_(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IP,this._completeRedirectFn=YD,this._overrideRedirectResult=zD}return w(e,[{key:"_openPopup",value:function(){var e=u(a().mark((function e(t,n,r,i){var o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return KT(null===(o=this.eventManagers[t._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()"),e.next=3,ER(t,n,r,GT(),i);case 3:return u=e.sent,e.abrupt("return",bR(t,u,TP()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=u(a().mark((function e(t,n,r,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,ER(t,n,r,GT(),i);case 4:return AP(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(KT(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gR(t);case 2:return n=e.sent,r=new ZD(t),n.register("authEvent",(function(e){return BT(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(NR,{type:NR},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[NR];void 0!==i&&t(!!i),zT(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return oR.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return YC()||qC()||QC()}}]),e}(),PR=AR,DR=function(){function e(t){_(this,e),this.factorId=t}return w(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return WT("unexpected MultiFactorSessionType")}}}]),e}(),RR=function(e){I(n,e);var t=T(n);function n(e){var r;return _(this,n),(r=t.call(this,"phone")).credential=e,r}return w(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return tC(e,"POST","/v2/accounts/mfaEnrollment:finalize",eC(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return tC(e,"POST","/v2/accounts/mfaSignIn:finalize",eC(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(DR),OR=function(){function e(){_(this,e)}return w(e,null,[{key:"assertion",value:function(e){return RR._fromCredential(e)}}]),e}();OR.FACTOR_ID="phone";var LR=function(){function e(){_(this,e)}return w(e,null,[{key:"assertionForEnrollment",value:function(e,t){return MR._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return MR._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return BT("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,pP(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",FR._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();LR.FACTOR_ID="totp";var MR=function(e){I(n,e);var t=T(n);function n(e,r,i){var a;return _(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return w(n,[{key:"_finalizeEnroll",value:function(){var e=u(a().mark((function e(t,n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return BT("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",vP(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return BT(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",JP(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(DR),FR=function(){function e(t,n,r,i,a,o,u){_(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return w(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(zR(e)||zR(t))&&(r=!0),r&&(zR(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),zR(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function zR(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var jR="@firebase/auth",UR="0.23.2",VR=function(){function e(t){_(this,e),this.auth=t,this.internalListeners=new Map}return w(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){BT(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var qR;!function(e){var t;null===(t=B())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function BR(){return window}qR="Browser",yt(new Te("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;BT(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:qR,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JC(qR)},l=new lN(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(LC);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),yt(new Te("auth-internal",(function(e){return function(e){return new VR(e)}(hN(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Nt(jR,UR,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(qR)),Nt(jR,UR,"esm2017");var WR=2e3;function KR(e,t,n){return GR.apply(this,arguments)}function GR(){return GR=u(a().mark((function e(t,n,r){var i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=BR(),u=o.BuildInfo,KT(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,$R(n.sessionId);case 4:return s=e.sent,c={},QC()?c.ibi=u.packageName:KC()?c.apn=u.packageName:zT(t,"operation-not-supported-in-this-environment"),u.displayName&&(c.appDisplayName=u.displayName),c.sessionId=s,e.abrupt("return",ER(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,c));case 10:case"end":return e.stop()}}),e)}))),GR.apply(this,arguments)}function HR(){return HR=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=BR(),r=n.BuildInfo,i={},QC()?i.iosBundleId=r.packageName:KC()?i.androidPackageName=r.packageName:zT(t,"operation-not-supported-in-this-environment"),e.next=5,nR(t,i);case 5:case"end":return e.stop()}}),e)}))),HR.apply(this,arguments)}function QR(e){var t=BR().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function YR(e,t,n){return JR.apply(this,arguments)}function JR(){return JR=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=BR(),o=i.cordova,u=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var a=null;function s(){var t;e();var n=null===(t=o.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){a||(a=window.setTimeout((function(){i(jT(t,"redirect-cancelled-by-user"))}),WR))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),KC()&&document.addEventListener("visibilitychange",l,!1),u=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),a&&window.clearTimeout(a)}}));case 5:return e.prev=5,u(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),JR.apply(this,arguments)}function XR(e){var t,n,r,i,a,o,u,s,c,l,h=BR();BT("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),BT("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),BT("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),BT("function"===typeof(null===(s=null===(u=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),BT("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function $R(e){return ZR.apply(this,arguments)}function ZR(){return(ZR=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=eO(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eO(e){if(KT(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var tO=20,nO=function(e){I(n,e);var t=T(n);function n(){var e;return _(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return w(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Us(S(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ZD);function rO(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:sO(),postBody:null,tenantId:e.tenantId,error:jT(e,"no-auth-event")}}function iO(e,t){return cO()._set(lO(e),t)}function aO(e){return oO.apply(this,arguments)}function oO(){return oO=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cO()._get(lO(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,cO()._remove(lO(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),oO.apply(this,arguments)}function uO(e,t){var n,r,i=function(e){var t=hO(e),n=t.link?decodeURIComponent(t.link):void 0,r=hO(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return hO(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=hO(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?jT(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function sO(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<tO;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function cO(){return LC(bP)}function lO(e){return zC("authEvent",e.config.apiKey,e.name)}function hO(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=s(t=n)||p(t)||l(t)||h();r[0];return ve(r.slice(1).join("?"))}var fO=function(){function e(){_(this,e),this._redirectPersistence=IP,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=YD,this._overrideRedirectResult=zD}return w(e,[{key:"_initialize",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new nO(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){zT(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=u(a().mark((function e(t,n,r,i){var o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return XR(t),e.next=3,this._initialize(t);case 3:return o=e.sent,e.next=6,o.initialized();case 6:return o.resetRedirect(),DD.clear(),e.next=10,this._originValidation(t);case 10:return u=rO(t,r,i),e.next=13,iO(t,u);case 13:return e.next=15,KR(t,u,n);case 15:return s=e.sent,e.next=18,QR(s);case 18:return c=e.sent,e.abrupt("return",YR(t,o,c));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return HR.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=BR(),r=n.universalLinks,i=n.handleOpenURL,o=n.BuildInfo,s=setTimeout(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,aO(e);case 2:t.onEvent(pO());case 3:case"end":return n.stop()}}),n)}))),500),c=function(){var n=u(a().mark((function n(r){var i,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(s),n.next=3,aO(e);case 3:i=n.sent,o=null,i&&(null===r||void 0===r?void 0:r.url)&&(o=uO(i,r.url)),t.onEvent(o||pO());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,c);var l=i,h="".concat(o.packageName.toLowerCase(),"://");BR().handleOpenURL=function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(h)&&c({url:t}),"function"===typeof l)try{l(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),dO=fO;function pO(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:jT("no-auth-event")}}var vO=1e3;function yO(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function mO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return!("file:"!==yO()&&"ionic:"!==yO()&&"capacitor:"!==yO()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function gO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return Z()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q();return/Edge\/\d+/.test(e)}(e)}function _O(){try{var e=self.localStorage,t=TP();if(e)return e.setItem(t,"1"),e.removeItem(t),!gO()||te()}catch(n){return kO()&&te()}return!1}function kO(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function wO(){return("http:"===yO()||"https:"===yO()||X()||mO())&&!($()||J())&&_O()&&!kO()}function bO(){return mO()&&"undefined"!==typeof document}function xO(){return IO.apply(this,arguments)}function IO(){return(IO=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bO()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),vO);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var SO={LOCAL:"local",NONE:"none",SESSION:"session"},EO=BT,TO="persistence";function CO(e,t){EO(Object.values(SO).includes(t),e,"invalid-persistence-type"),$()?EO(t!==SO.SESSION,e,"unsupported-persistence-type"):J()?EO(t===SO.NONE,e,"unsupported-persistence-type"):kO()?EO(t===SO.NONE||t===SO.LOCAL&&te(),e,"unsupported-persistence-type"):EO(t===SO.NONE||_O(),e,"unsupported-persistence-type")}function NO(e){return AO.apply(this,arguments)}function AO(){return AO=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=PO(),r=zC(TO,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),AO.apply(this,arguments)}function PO(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var DO=BT,RO=function(){function e(){_(this,e),this.browserResolver=LC(PR),this.cordovaResolver=LC(dO),this.underlyingResolver=null,this._redirectPersistence=IP,this._completeRedirectFn=YD,this._overrideRedirectResult=zD}return w(e,[{key:"_initialize",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=u(a().mark((function e(t,n,r,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=u(a().mark((function e(t,n,r,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return bO()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return DO(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,xO();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function OO(e){return e.unwrap()}function LO(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new UO(e,function(e,t){var n,r=Ee(e),i=t;return BT(t.customData.operationType,r,"argument-error"),BT(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),fP._fromError(r,i)}(e,t));else if(r){var i=MO(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function MO(e){var t=(e instanceof ne?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof ne)&&"temporaryProof"in t&&"phoneNumber"in t)return yD.credentialFromResult(e);var n,r=t.providerId;if(!r||r===IT.PASSWORD)return null;switch(r){case IT.GOOGLE:n=nA;break;case IT.FACEBOOK:n=tA;break;case IT.GITHUB:n=rA;break;case IT.TWITTER:n=oA;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?iA._create(r,u):qN._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new eA(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof ne?n.credentialFromError(e):n.credentialFromResult(e)}function FO(e,t){return t.catch((function(t){throw t instanceof ne&&LO(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,MO(t)),additionalUserInfo:lP(e),user:VO.getOrCreate(r)}}))}function zO(e,t){return jO.apply(this,arguments)}function jO(){return jO=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return FO(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),jO.apply(this,arguments)}var UO=function(){function e(t,n){_(this,e),this.resolver=n,this.auth=t.wrapped()}return w(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return FO(OO(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),VO=function(){function e(t){_(this,e),this._delegate=t,this.multiFactor=function(e){var t=Ee(e);return gP.has(t)||gP.set(t,mP._fromUser(t)),gP.get(t)}(t)}return w(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",FO(this.auth,TA(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zO(this.auth,lD(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",FO(this.auth,CD(this._delegate,t,RO)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,NO(hN(this.auth));case 2:return e.abrupt("return",KD(this._delegate,t,RO));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",FO(this.auth,NA(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return zO(this.auth,function(e,t,n){return fD.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return FO(this.auth,function(e,t,n){return TD.apply(this,arguments)}(this._delegate,e,RO))}},{key:"reauthenticateWithRedirect",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,NO(hN(this.auth));case 2:return e.abrupt("return",BD(this._delegate,t,RO));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return XA.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vA(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return nP(Ee(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return nP(Ee(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return vD.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return tP.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return $A.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();VO.USER_MAP=new WeakMap;var qO=BT,BO=function(){function e(t,n){if(_(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;qO(r,"invalid-api-key",{appName:t.name}),qO(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?RO:void 0;this._delegate=n.initialize({options:{persistence:KO(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(DT),this.linkUnderlyingAuth()}return w(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?VO.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){dN(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return UA.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return VA(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return jA.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",FO(this._delegate,WA(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return JA.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=JN.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qO(wO(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,HD(this._delegate,RO);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",FO(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){hN(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=WO(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=WO(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return GA.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return zA.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:CO(this._delegate,t),e.t0=t,e.next=e.t0===SO.SESSION?4:e.t0===SO.LOCAL?6:e.t0===SO.NONE?11:13;break;case 4:return n=IP,e.abrupt("break",14);case 6:return e.next=8,LC(QP)._isAvailable();case 8:return r=e.sent,n=r?QP:bP,e.abrupt("break",14);case 11:return n=FC,e.abrupt("break",14);case 13:return e.abrupt("return",zT("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return FO(this._delegate,function(e){return hA.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return FO(this._delegate,SA(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return FO(this._delegate,function(e,t){return RA.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return FO(this._delegate,function(e,t,n){return SA(Ee(e),XN.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return FO(this._delegate,function(e,t,n){return HA.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return zO(this._delegate,function(e,t,n){return cD.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qO(wO(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",FO(this._delegate,SD(this._delegate,t,RO)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qO(wO(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,NO(this._delegate);case 3:return e.abrupt("return",VD(this._delegate,t,RO));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return BA.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function WO(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&VO.getOrCreate(e))},error:t,complete:n}}function KO(e,t){var n=function(e,t){var n=PO();if(!n)return[];var r=zC(TO,e,t);switch(n.getItem(r)){case SO.NONE:return[FC];case SO.LOCAL:return[QP,IP];case SO.SESSION:return[IP];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(QP)||n.push(QP),"undefined"!==typeof window)for(var r=0,i=[bP,IP];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(FC)||n.push(FC),n}BO.Persistence=SO;var GO=function(){function e(){_(this,e),this.providerId="phone",this._delegate=new yD(OO(tn.auth()))}return w(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return yD.credential(e,t)}}]),e}();GO.PHONE_SIGN_IN_METHOD=yD.PHONE_SIGN_IN_METHOD,GO.PROVIDER_ID=yD.PROVIDER_ID;var HO=BT,QO=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tn.app();_(this,e),HO(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new oD(t,n,i.auth()),this.type=this._delegate.type}return w(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Te("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new BO(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ST,PASSWORD_RESET:ET,RECOVER_EMAIL:TT,REVERT_SECOND_FACTOR_ADDITION:CT,VERIFY_AND_CHANGE_EMAIL:NT,VERIFY_EMAIL:AT}},EmailAuthProvider:XN,FacebookAuthProvider:tA,GithubAuthProvider:rA,GoogleAuthProvider:nA,OAuthProvider:eA,SAMLAuthProvider:aA,PhoneAuthProvider:GO,PhoneMultiFactorGenerator:OR,RecaptchaVerifier:QO,TwitterAuthProvider:oA,Auth:BO,AuthCredential:yN,Error:ne}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.4.2")}(tn),tn.initializeApp({apiKey:"AIzaSyB1mWqevmipidxWW264EnXV__YFdSkx93M",authDomain:"umka-77a72.firebaseapp.com",databaseURL:"https://umka-77a72-default-rtdb.firebaseio.com",projectId:"umka-77a72",storageBucket:"umka-77a72.appspot.com",messagingSenderId:"270019919476",appId:"1:270019919476:web:28ff114af689a2143bdb21"});var YO=tn.auth(),JO=tn.firestore(),XO=(0,t.createContext)(null);var $O=function(){return(0,iE.jsx)("div",{className:"App",children:(0,iE.jsx)(XO.Provider,{value:{firebase:tn,auth:YO,firestore:JO},children:(0,iE.jsx)(JE,{})})})};r.createRoot(document.getElementById("root")).render((0,iE.jsx)(t.StrictMode,{children:(0,iE.jsx)($O,{})}))}()}();
//# sourceMappingURL=main.4013945d.js.map
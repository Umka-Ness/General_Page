/*! For license information please see main.6c498ed3.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function V(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case S:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function $(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,xe=null,Ie=null;function Se(e){if(e=_i(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),be(e.stateNode,e.type,t))}}function Te(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Ee(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Ee())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,ze=null,Ue={onError:function(e){Me=!0,Fe=e}};function Ve(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ue,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ht(u):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,bt,xt,It,St,Tt=!1,Et=[],Ct=null,Nt=null,At=null,Pt=new Map,Dt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ke=r,n.target.dispatchEvent(r),ke=null,t.shift()}return!0}function zt(e,t,n){jt(e)&&n.delete(t)}function Ut(){Tt=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Pt.forEach(zt),Dt.forEach(zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function qt(e){function t(t){return Vt(t,e)}if(0<Et.length){Vt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==Nt&&Vt(Nt,e),null!==At&&Vt(At,e),Pt.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var Bt=k.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=_t,a=Bt.transition;Bt.transition=null;try{_t=1,Ht(e,t,n,r)}finally{_t=i,Bt.transition=a}}function Gt(e,t,n,r){var i=_t,a=Bt.transition;Bt.transition=null;try{_t=4,Ht(e,t,n,r)}finally{_t=i,Bt.transition=a}}function Ht(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=_i(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=F({},cn,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},hn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(gn),kn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return In}var Tn=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Tn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Pn),Rn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Kn(e,t,n,r){Te(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){jr(e,0)}function Yn(e){if(H(ki(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(l){var $n;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Kn(t,Hn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,_r=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Sr(e){if(xr[e])return xr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Tr=Sr("animationend"),Er=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),s(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Or=Pr[Rr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Tr,"onAnimationEnd"),Dr(Er,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,ze=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(je)throw e=ze,je=!1,ze=null,e}function zr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Jt(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=En;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Tr:case Er:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=fn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=De(p,f))&&l.push(Kr(p,v,d)))),h)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===ke||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==s?u:ki(s),d=null==c?u:ki(c),(u=new l(v,p+"leave",s,n,i)).target=h,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,s&&c)e:{for(f=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=f;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)f=Hr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Hr(l),f=Hr(f)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(s=(u=r?ki(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Jn;else if(Wn(u))if(Xn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?ki(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,kr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":kr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else qn?Un(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==_?"onCompositionEnd"===_&&qn&&(g=en()):($t="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(y=Gr(r,_)).length&&(_=new kn(_,e,null,n,i),o.push({event:_,listeners:y}),g?_.data=g:null!==(g=Vn(n))&&(_.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(zn=!0,jn);case"textInput":return(e=t.data)===jn&&zn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!On&&Un(e,t)?(e=en(),Zt=$t=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new kn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=De(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var bi=[],xi=-1;function Ii(e){return{current:e}}function Si(e){0>xi||(e.current=bi[xi],bi[xi]=null,xi--)}function Ti(e,t){xi++,bi[xi]=e.current,e.current=t}var Ei={},Ci=Ii(Ei),Ni=Ii(!1),Ai=Ei;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Si(Ni),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ei)throw Error(a(168));Ti(Ci,t),Ti(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ai=Ci.current,Ti(Ci,e),Ti(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ti(Ci,e)):Si(Ni),Ti(Ni,n)}var ji=null,zi=!1,Ui=!1;function Vi(e){null===ji?ji=[e]:ji.push(e)}function qi(){if(!Ui&&null!==ji){Ui=!0;var e=0,t=_t;try{var n=ji;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,zi=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),He(Ze,qi),i}finally{_t=t,Ui=!1}}return null}var Bi=[],Wi=0,Ki=null,Gi=0,Hi=[],Qi=0,Yi=null,Ji=1,Xi="";function $i(e,t){Bi[Wi++]=Gi,Bi[Wi++]=Ki,Ki=e,Gi=t}function Zi(e,t,n){Hi[Qi++]=Ji,Hi[Qi++]=Xi,Hi[Qi++]=Yi,Yi=e;var r=Ji;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Ji=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=Bi[--Wi],Bi[Wi]=null,Gi=Bi[--Wi],Bi[Wi]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Xi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=k.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,_a=null,ka=null;function wa(){ka=_a=ga=null}function ba(e){var t=ya.current;Si(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ka=_a=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ku=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},null===_a){if(null===ga)throw Error(a(308));_a=e,ga.dependencies={lanes:0,firstContext:e}}else _a=_a.next=e;return t}var Ta=null;function Ea(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ea(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ea(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var h=i.baseState;for(o=0,l=c=s=null,u=a;;){var f=u.lane,d=u.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[u]:f.push(u))}else d={eventTime:d,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=h):l=l.next=d,o|=f;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(f=u).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(s=h),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=h}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var za=(new r.Component).refs;function Ua(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Va={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function Ba(e,t,n){var r=!1,i=Ei,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Di(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ei),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=za,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Di(t)?Ai:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ua(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Va.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===za&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case b:return(t=zc(t,e.mode,n)).return=e,t;case D:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case b:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,h=a,v=a=0,m=null;null!==h&&v<u.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var y=d(i,h,u[v],s);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,h=m}if(v===u.length)return n(i,h),ia&&$i(i,v),c;if(null===h){for(;v<u.length;v++)null!==(h=f(i,u[v],s))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&$i(i,v),c}for(h=r(i,h);v<u.length;v++)null!==(m=p(h,i,v,u[v],s))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(i,e)})),ia&&$i(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var h=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var _=d(i,v,g.value,c);if(null===_){null===v&&(v=y);break}e&&v&&null===_.alternate&&t(i,v),u=o(_,u,m),null===h?l=_:h.sibling=_,h=_,v=y}if(g.done)return n(i,v),ia&&$i(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=f(i,g.value,c))&&(u=o(g,u,m),null===h?l=g:h.sibling=g,h=g);return ia&&$i(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&$i(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ga(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ga(r,a,o),s.return=r,r=s)}return u(r);case b:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=zc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ja=Ya(!0),Xa=Ya(!1),$a={},Za=Ii($a),eo=Ii($a),to=Ii($a);function no(e){if(e===$a)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,$a),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ti(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=k.ReactCurrentDispatcher,fo=k.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,_o=!1,ko=0,wo=0;function bo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),_o){o=0;do{if(_o=!1,ko=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,ho.current=cu,e=n(r,i)}while(_o)}if(ho.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==ko;return ko=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function Eo(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=f,u=r):c=c.next=f,vo.lanes|=h,Fs|=h}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(ku=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(ku=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Do(e,t){var n=vo,r=Eo(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,ku=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,zo(9,Oo.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function zo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Uo(){return Eo().memoizedState}function Vo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=zo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=Eo();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=zo(t,n,a,r))}vo.flags|=e,i.memoizedState=zo(1|t,n,a,r)}function Bo(e,t){return Vo(8390656,8,e,t)}function Wo(e,t){return qo(2048,8,e,t)}function Ko(e,t){return qo(4,2,e,t)}function Go(e,t){return qo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ku=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{_t=n,fo.transition=r}}function eu(){return Eo().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ea(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){_o=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:jo,useDebugValue:Yo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,zo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=As.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=ko++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:Jo,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Xo,useReducer:No,useRef:Uo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return $o(Eo(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],Eo().memoizedState]},useMutableSource:Po,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:Jo,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Xo,useReducer:Ao,useRef:Uo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=Eo();return null===mo?t.memoizedState=e:$o(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],Eo().memoizedState]},useMutableSource:Po,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),fu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _u=k.ReactCurrentOwner,ku=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ja(t,e.child,n,r)}function bu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=So(),null===e||ku?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(ku=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(ku=!0)}}return Eu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Os,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Os,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Os,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Os,Rs),Rs|=r;return wu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eu(e,t,n,r,i){var a=Di(n)?Ai:Ci.current;return a=Pi(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=So(),null===e||ku?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Wu(e,t),Ba(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Pi(t,c=Di(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Aa=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),s=t.memoizedState,u!==r||f!==s||Ni.current||Aa?("function"===typeof l&&(Ua(t,n,l,r),s=t.memoizedState),(u=Aa||qa(t,n,u,r,f,s,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Pi(t,s=Di(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==h||f!==s)&&Wa(t,o,r,s),Aa=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;u!==h||f!==p||Ni.current||Aa?("function"===typeof d&&(Ua(t,n,d,r),p=t.memoizedState),(c=Aa||qa(t,n,c,r,f,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,_u.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Pu(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Du,Ru,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function ju(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):zu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Uu(e,t,u,r=hu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Uu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Uu(e,t,u,r=hu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),ku||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),Uu(e,t,u,r=hu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=Ji,Hi[Qi++]=Xi,Hi[Qi++]=Yi,Ji=e.id,Xi=e.overflow,Yi=t),t=zu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function zu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){return null!==r&&pa(r),Ja(t,e.child,null,n),(e=zu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Di(t.type)&&Ri(),Hu(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ru(e,t),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)zr(Lr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":J(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ie(r,o),zr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&zr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fi]=t,e[di]=r,Du(e,t,!1,!1),t.stateNode=e;e:{switch(s=_e(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)zr(Lr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&zr("scroll",e):null!=l&&_(e,o,l,s))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),Ru(e,t),null===e&&qr(t.stateNode.containerInfo),Hu(t),null;case 10:return ba(t.type._context),Hu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Bs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Xe()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return ba(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Du=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&zr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ju=!1,Xu=!1,$u="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var hs=null,fs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=hs,i=fs;hs=null,ds(e,t,n),fs=i,null!==(hs=r)&&(fs?(e=hs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hs.removeChild(n.stateNode));break;case 18:null!==hs&&(fs?(e=hs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(hs,n.stateNode));break;case 4:r=hs,i=fs,hs=n.stateNode.containerInfo,fs=!0,ds(e,t,n),hs=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $u),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:hs=s.stateNode,fs=!1;break e;case 3:case 4:hs=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===hs)throw Error(a(160));ps(o,u,i),hs=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Sc(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),_e(s,u);var l=_e(s,o);for(u=0;u<c.length;u+=2){var h=c[u],f=c[u+1];"style"===h?me(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):_(i,h,f,l)}switch(s){case"input":$(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Sc(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Sc(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=Xe())),4&r&&vs(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||h,ms(t,e),Xu=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Zu=e,h=e.child;null!==h;){for(f=Zu=h;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){bs(f);continue}}null!==p?(p.return=d,Zu=p):bs(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=f.stateNode,u=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Sc(e,e.return,m)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _s(e,t,n){Zu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ju;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=Ju;var c=Xu;if(Ju=o,(Xu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,ks(a,t,n),a=a.sibling;Zu=i,Ju=u,Xu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&qt(f)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function bs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{as(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Is,Ss=Math.ceil,Ts=k.ReactCurrentDispatcher,Es=k.ReactCurrentOwner,Cs=k.ReactCurrentBatchConfig,Ns=0,As=null,Ps=null,Ds=0,Rs=0,Os=Ii(0),Ls=0,Ms=null,Fs=0,js=0,zs=0,Us=null,Vs=null,qs=0,Bs=1/0,Ws=null,Ks=!1,Gs=null,Hs=null,Qs=!1,Ys=null,Js=0,Xs=0,$s=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ns)?Xe():-1!==Zs?Zs:Zs=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Ds?Ds&-Ds:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rc(e,t,n,r){if(50<Xs)throw Xs=0,$s=null,Error(a(185));yt(e,n,r),0!==(2&Ns)&&e===As||(e===As&&(0===(2&Ns)&&(js|=n),4===Ls&&sc(e,Ds)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(Bs=Xe()+500,zi&&qi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ft(e,e===As?Ds:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){zi=!0,Vi(e)}(cc.bind(null,e)):Vi(cc.bind(null,e)),oi((function(){0===(6&Ns)&&qi()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ft(e,e===As?Ds:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Ns;Ns|=2;var o=vc();for(As===e&&Ds===t||(Ws=null,Bs=Xe()+500,dc(e,t));;)try{_c();break}catch(s){pc(e,s)}wa(),Ts.current=o,Ns=i,null!==Ps?t=0:(As=null,Ds=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,Vs,Ws);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=qs+500-Xe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Vs,Ws),t);break}bc(e,Vs,Ws);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Vs,Ws),r);break}bc(e,Vs,Ws);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Us;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Vs,Vs=n,null!==t&&uc(t)),e}function uc(e){null===Vs?Vs=e:Vs.push.apply(Vs,e)}function sc(e,t){for(t&=~zs,t&=~js,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));xc();var t=ft(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Vs,Ws),ic(e,Xe()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(Bs=Xe()+500,zi&&qi())}}function hc(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&xc();var t=Ns;Ns|=1;var n=Cs.transition,r=_t;try{if(Cs.transition=null,_t=1,e)return e()}finally{_t=r,Cs.transition=n,0===(6&(Ns=t))&&qi()}}function fc(){Rs=Os.current,Si(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ps)for(n=Ps.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Si(Ni),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:ba(r.type._context);break;case 22:case 23:fc()}n=n.return}if(As=e,Ps=e=Oc(e.current,null),Ds=Rs=t,Ls=0,Ms=null,zs=js=Fs=0,Vs=Us=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function pc(e,t){for(;;){var n=Ps;try{if(wa(),ho.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,_o=!1,ko=0,Es.current=null,null===n||null===n.return){Ls=1,Ms=t,Ps=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ds,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=s,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Us?Us=[o]:Us.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Hs||!Hs.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(k){t=k,Ps===n&&null!==n&&(Ps=n=n.return);continue}break}}function vc(){var e=Ts.current;return Ts.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===As||0===(268435455&Fs)&&0===(268435455&js)||sc(As,Ds)}function yc(e,t){var n=Ns;Ns|=2;var r=vc();for(As===e&&Ds===t||(Ws=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Ns=n,Ts.current=r,null!==Ps)throw Error(a(261));return As=null,Ds=0,Ls}function gc(){for(;null!==Ps;)kc(Ps)}function _c(){for(;null!==Ps&&!Ye();)kc(Ps)}function kc(e){var t=Is(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?wc(e):Ps=t,Es.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Rs)))return void(Ps=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Ps=n);if(null===e)return Ls=6,void(Ps=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ps=t);Ps=t=e}while(null!==t);0===Ls&&(Ls=5)}function bc(e,t,n){var r=_t,i=Cs.transition;try{Cs.transition=null,_t=1,function(e,t,n,r){do{xc()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Ps=As=null,Ds=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=_t;_t=1;var s=Ns;Ns|=4,Es.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(s=u+i),f!==o||0!==r&&3!==f.nodeType||(c=u+r),3===f.nodeType&&(u+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++h===r&&(c=u),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,_=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,_s(n,e,i),Je(),Ns=s,_t=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,Js=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&Js)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===$s?Xs++:(Xs=0,$s=e):Xs=0,qi()}(e,t,n,r)}finally{Cs.transition=i,_t=r}return null}function xc(){if(null!==Ys){var e=kt(Js),t=Cs.transition,n=_t;try{if(Cs.transition=null,_t=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,Js=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var h=Zu;switch(h.tag){case 0:case 11:case 15:rs(8,h,o)}var f=h.child;if(null!==f)f.return=h,Zu=f;else for(;null!==Zu;){var d=(h=Zu).sibling,p=h.return;if(os(h),h===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var _=e.current;for(Zu=_;null!==Zu;){var k=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==k)k.return=u,Zu=k;else e:for(u=_;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(b){Sc(s,s.return,b)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ns=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{_t=n,Cs.transition=t}}return!1}function Ic(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Ds&n)===n&&(4===Ls||3===Ls&&(130023424&Ds)===Ds&&500>Xe()-qs?dc(e,0):zs|=n),ic(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Ac(e,t){return He(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Pc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case I:u=8,i|=8;break;case S:return(e=Dc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Dc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Dc(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case E:u=9;break e;case C:u=11;break e;case P:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function qc(e){if(!e)return Ei;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=qc(null),n=e.current,(a=Ra(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Is=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ku=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ku=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ju(e,t,n):(Ti(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Ku(e,t,n)}(e,t,n);ku=0!==(131072&e.flags)}else ku=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wu(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=Va,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Eu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=bu(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Eu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Pu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return ju(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xu(e,t,r,i=ma(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Wu(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),Ba(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,qr(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&Ns)&&(Bs=Xe()+500,qi()))}break;case 13:hc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},bt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},It=function(){return _t},St=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},be=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),$(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=hc;var tl={usingClientEntryPoint:!1,Events:[_i,ki,wi,Te,Ee,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(hc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var k=_.prototype=new g;k.constructor=_,v(k,y.prototype),k.isPureReactComponent=!0;var w=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)b.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,k(e),!v)if(null!==r(c))v=!0,R(b);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function b(e,n){v=!1,m&&(m=!1,g(T),T=-1),p=!0;var a=d;try{for(k(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var u=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?f.callback=u:f===r(c)&&i(c),k(n)}else i(c);f=r(c)}if(null!==f)var s=!0;else{var h=r(l);null!==h&&O(w,h.startTime-n),s=!1}return s}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,S=null,T=-1,E=5,C=-1;function N(){return!(t.unstable_now()-C<E)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(I=!1,S=null)}}else I=!1}if("function"===typeof _)x=function(){_(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,D=P.port2;P.port1.onmessage=A,x=function(){D.postMessage(null)}}else x=function(){y(A,0)};function R(e){S=e,I||(I=!0,x())}function O(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(T),T=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(b))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)},306:function(e,t,n){e.exports=n.p+"static/media/Isometric_Fantasy_forest_miniatures_in_cartoon_style_10.cccf6994fa40fc75b8ae.jpg"},695:function(e,t,n){e.exports=n.p+"static/media/Isometric_Fantasy_forest_miniatures_in_cartoon_style_11.95a8c44cfefed543ce4b.jpg"},66:function(e,t,n){e.exports=n.p+"static/media/Isometric_Fantasy_forest_miniatures_in_cartoon_style_2.1dea8ae23935d029230f.jpg"},271:function(e,t,n){e.exports=n.p+"static/media/Isometric_Fantasy_forest_miniatures_in_cartoon_style_3.8fb1a0223c7af2342a49.jpg"},382:function(e,t,n){e.exports=n.p+"static/media/Isometric_Fantasy_forest_miniatures_in_cartoon_style_4.eb9dc7abb842ac7033d3.jpg"},112:function(e,t,n){e.exports=n.p+"static/media/Isometric_Fantasy_forest_miniatures_in_cartoon_style_5.c4a91b60c4f23d85e71b.jpg"},74:function(e,t,n){e.exports=n.p+"static/media/Isometric_Fantasy_forest_miniatures_in_cartoon_style_6.e35dc60f29be51293c48.jpg"},318:function(e,t,n){e.exports=n.p+"static/media/Isometric_Fantasy_forest_miniatures_in_cartoon_style_7.9c081684151fe6c63275.jpg"},741:function(e,t,n){e.exports=n.p+"static/media/Isometric_Fantasy_forest_miniatures_in_cartoon_style_8.f9a8ff4a7b1492382a1a.jpg"},502:function(e,t,n){e.exports=n.p+"static/media/Isometric_Fantasy_forest_miniatures_in_cartoon_style_9.752c7a030cbe07eacb0c.jpg"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return X},SDK_VERSION:function(){return xt},_DEFAULT_ENTRY_NAME:function(){return lt},_addComponent:function(){return pt},_addOrOverwriteComponent:function(){return vt},_apps:function(){return ft},_clearComponents:function(){return _t},_components:function(){return dt},_getProvider:function(){return yt},_registerComponent:function(){return mt},_removeServiceInstance:function(){return gt},deleteApp:function(){return Et},getApp:function(){return St},getApps:function(){return Tt},initializeApp:function(){return It},onLog:function(){return At},registerVersion:function(){return Nt},setLogLevel:function(){return Pt}});var t=n(791),r=n(250);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function d(e){if(Array.isArray(e))return e}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){return d(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||h(e,t)||p()}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e){var t=k();return function(){var n,r=_(e);if(t){var a=_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}(this,n)}}function b(e,t,n){return b=k()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&y(i,n.prototype),i},b.apply(null,arguments)}function x(e){var t="function"===typeof Map?new Map:void 0;return x=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return b(e,arguments,_(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)},x(e)}var I=!1,S=!1,T="${JSCORE_VERSION}",E=function(e,t){if(!e)throw C(t)},C=function(e){return new Error("Firebase Database ("+T+") INTERNAL ASSERT FAILED: "+e)},N=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},A={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,h=(3&a)<<4|u>>4,f=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(N(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new P;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var h=u<<6&192|s;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},P=function(e){g(n,e);var t=w(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return c(n)}(x(Error)),D=function(e){var t=N(e);return A.encodeByteArray(t,!0)},R=function(e){return D(e).replace(/\./g,"")},O=function(e){try{return A.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function L(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=L(e[n],t[n]));return e}var M=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},F=function(){try{return M()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&O(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},j=function(e){var t,n;return null===(n=null===(t=F())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},z=function(){var e;return null===(e=F())||void 0===e?void 0:e.config},U=function(e){var t;return null===(t=F())||void 0===t?void 0:t["_".concat(e)]},V=function(){function e(){var t=this;u(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return c(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function q(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[R(JSON.stringify({alg:"none",type:"JWT"})),R(JSON.stringify(a)),""].join(".")}function B(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function W(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(B())}function K(){var e,t=null===(e=F())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function G(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function H(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Q(){var e=B();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Y(){return!0===I||!0===S}function J(){try{return"object"===typeof indexedDB}catch(e){return!1}}var X=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(m(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(m(a),$.prototype.create),a}return c(n)}(x(Error)),$=function(){function e(t,n,r){u(this,e),this.service=t,this.serviceName=n,this.errors=r}return c(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Z,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new X(n,a,t)}}]),e}();var Z=/\{\$([^}]+)}/g;function ee(e){return JSON.parse(e)}function te(e){return JSON.stringify(e)}var ne=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ee(O(a[0])||""),n=ee(O(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function re(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ie(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ae(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function oe(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ue(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(se(u)&&se(s)){if(!ue(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function se(e){return null!==e&&"object"===typeof e}function ce(e){for(var t=[],n=function(){var e=v(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function le(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=v(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function he(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var fe=function(){function e(){u(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return c(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=f^l&(h^f),s=1518500249):(u=l^h^f,s=1859775393):p<60?(u=l&h|f&(l|h),s=2400959708):(u=l^h^f,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function de(e,t){var n=new pe(e,t);return n.subscribe.bind(n)}var pe=function(){function e(t,n){var r=this;u(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return c(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=f(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ve),void 0===r.error&&(r.error=ve),void 0===r.complete&&(r.complete=ve);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ve(){}var me=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function ye(e,t){return"".concat(e," failed: ").concat(t," argument ")}function ge(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(ye(e,t)+"must be a valid function.")}function _e(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(ye(e,t)+"must be a valid context object.")}var ke=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function we(e){return e&&e._delegate?e._delegate:e}function be(){be=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(N){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:b(e,n,u)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=l;var f={};function d(){}function p(){}function v(){}var m={};c(m,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&n.call(g,o)&&(m=g);var _=v.prototype=d.prototype=Object.create(m);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function a(r,o,u,s){var c=h(e[r],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==i(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){a("next",e,u,s)}),(function(e){a("throw",e,u,s)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return a("throw",e,u,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function b(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=h(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=v,r(_,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},k(w.prototype),c(w.prototype,u,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(_),c(_,s,"Generator"),c(_,o,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=E,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function xe(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ie(e){return function(e){if(Array.isArray(e))return l(e)}(e)||xe(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(VE){return void n(VE)}u.done?t(s):Promise.resolve(s).then(r,i)}function Te(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Se(a,r,i,o,u,"next",e)}function u(e){Se(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Ee=function(){function e(t,n,r){u(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return c(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ce="[DEFAULT]",Ne=function(){function e(t,n){u(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return c(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new V;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ce})}catch(s){}var t,n=f(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=v(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Te(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Ie(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Ie(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=f(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=v(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Lm){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ce?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Lm){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce;return this.component?this.component.multipleInstances?e:Ce:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ae,Pe,De=function(){function e(t){u(this,e),this.name=t,this.providers=new Map}return c(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ne(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Re=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Pe||(Pe={}));var Oe={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},Le=Pe.INFO,Me=(o(Ae={},Pe.DEBUG,"log"),o(Ae,Pe.VERBOSE,"log"),o(Ae,Pe.INFO,"info"),o(Ae,Pe.WARN,"warn"),o(Ae,Pe.ERROR,"error"),Ae),Fe=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Me[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},je=function(){function e(t){u(this,e),this.name=t,this._logLevel=Le,this._logHandler=Fe,this._userLogHandler=null,Re.push(this)}return c(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Pe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Oe[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Pe.DEBUG].concat(t)),this._logHandler.apply(this,[this,Pe.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Pe.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Pe.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Pe.INFO].concat(t)),this._logHandler.apply(this,[this,Pe.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Pe.WARN].concat(t)),this._logHandler.apply(this,[this,Pe.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Pe.ERROR].concat(t)),this._logHandler.apply(this,[this,Pe.ERROR].concat(t))}}]),e}();function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve,qe,Be=function(e,t){return t.some((function(t){return e instanceof t}))};var We=new WeakMap,Ke=new WeakMap,Ge=new WeakMap,He=new WeakMap,Qe=new WeakMap;var Ye={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ke.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ge.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $e(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Je(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(qe||(qe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ze(this),n),$e(We.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $e(e.apply(Ze(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ze(this),t].concat(r));return Ge.set(a,t.sort?t.sort():[t]),$e(a)}}function Xe(e){return"function"===typeof e?Je(e):(e instanceof IDBTransaction&&function(e){if(!Ke.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ke.set(e,t)}}(e),Be(e,Ve||(Ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ye):e)}function $e(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t($e(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&We.set(t,e)})).catch((function(){})),Qe.set(t,e),t}(e);if(He.has(e))return He.get(e);var t=Xe(e);return t!==e&&(He.set(e,t),Qe.set(t,e)),t}var Ze=function(e){return Qe.get(e)};var et,tt,nt=["get","getKey","getAll","getAllKeys","count"],rt=["put","add","delete","clear"],it=new Map;function at(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(it.get(t))return it.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=rt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||nt.includes(n))){var a=function(){var e=Te(be().mark((function e(t){var a,o,u,s,c,l,h=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=h[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return it.set(t,a),a}}}Ye=function(e){return Ue(Ue({},e),{},{get:function(t,n,r){return at(t,n)||e.get(t,n,r)},has:function(t,n){return!!at(t,n)||e.has(t,n)}})}(Ye);var ot=function(){function e(t){u(this,e),this.container=t}return c(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var ut="@firebase/app",st="0.9.13",ct=new je("@firebase/app"),lt="[DEFAULT]",ht=(o(et={},ut,"fire-core"),o(et,"@firebase/app-compat","fire-core-compat"),o(et,"@firebase/analytics","fire-analytics"),o(et,"@firebase/analytics-compat","fire-analytics-compat"),o(et,"@firebase/app-check","fire-app-check"),o(et,"@firebase/app-check-compat","fire-app-check-compat"),o(et,"@firebase/auth","fire-auth"),o(et,"@firebase/auth-compat","fire-auth-compat"),o(et,"@firebase/database","fire-rtdb"),o(et,"@firebase/database-compat","fire-rtdb-compat"),o(et,"@firebase/functions","fire-fn"),o(et,"@firebase/functions-compat","fire-fn-compat"),o(et,"@firebase/installations","fire-iid"),o(et,"@firebase/installations-compat","fire-iid-compat"),o(et,"@firebase/messaging","fire-fcm"),o(et,"@firebase/messaging-compat","fire-fcm-compat"),o(et,"@firebase/performance","fire-perf"),o(et,"@firebase/performance-compat","fire-perf-compat"),o(et,"@firebase/remote-config","fire-rc"),o(et,"@firebase/remote-config-compat","fire-rc-compat"),o(et,"@firebase/storage","fire-gcs"),o(et,"@firebase/storage-compat","fire-gcs-compat"),o(et,"@firebase/firestore","fire-fst"),o(et,"@firebase/firestore-compat","fire-fst-compat"),o(et,"fire-js","fire-js"),o(et,"firebase","fire-js-all"),et),ft=new Map,dt=new Map;function pt(e,t){try{e.container.addComponent(t)}catch(n){ct.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function vt(e,t){e.container.addOrOverwriteComponent(t)}function mt(e){var t=e.name;if(dt.has(t))return ct.debug("There were multiple attempts to register component ".concat(t,".")),!1;dt.set(t,e);var n,r=f(ft.values());try{for(r.s();!(n=r.n()).done;){pt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function yt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function gt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lt;yt(e,t).clearInstance(n)}function _t(){dt.clear()}var kt=(o(tt={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),o(tt,"bad-app-name","Illegal App name: '{$appName}"),o(tt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),o(tt,"app-deleted","Firebase App named '{$appName}' already deleted"),o(tt,"no-options","Need to provide options, when not being deployed to hosting via source."),o(tt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),o(tt,"invalid-log-argument","First argument to `onLog` must be null or a function."),o(tt,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),o(tt,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),o(tt,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),o(tt,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),tt),wt=new $("app","Firebase",kt),bt=function(){function e(t,n,r){var i=this;u(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ee("app",(function(){return i}),"PUBLIC"))}return c(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw wt.create("app-deleted",{appName:this._name})}}]),e}(),xt="9.23.0";function It(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:lt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw wt.create("bad-app-name",{appName:String(i)});if(n||(n=z()),!n)throw wt.create("no-options");var a=ft.get(i);if(a){if(ue(n,a.options)&&ue(r,a.config))return a;throw wt.create("duplicate-app",{appName:i})}var o,u=new De(i),s=f(dt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(h){s.e(h)}finally{s.f()}var l=new bt(n,r,u);return ft.set(i,l),l}function St(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=ft.get(e);if(!t&&e===lt&&z())return It();if(!t)throw wt.create("no-app",{appName:e});return t}function Tt(){return Array.from(ft.values())}function Et(e){return Ct.apply(this,arguments)}function Ct(){return Ct=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!ft.has(n)){e.next=6;break}return ft.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),Ct.apply(this,arguments)}function Nt(e,t,n){var r,i=null!==(r=ht[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ct.warn(u.join(" "))}mt(new Ee("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function At(e,t){if(null!==e&&"function"!==typeof e)throw wt.create("invalid-log-argument");!function(e,t){var n,r=f(Re);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Oe[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Pe[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Pt(e){var t;t=e,Re.forEach((function(e){e.setLogLevel(t)}))}var Dt="firebase-heartbeat-database",Rt=1,Ot="firebase-heartbeat-store",Lt=null;function Mt(){return Lt||(Lt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=$e(u);return i&&u.addEventListener("upgradeneeded",(function(e){i($e(u.result),e.oldVersion,e.newVersion,$e(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Dt,Rt,{upgrade:function(e,t){if(0===t)e.createObjectStore(Ot)}}).catch((function(e){throw wt.create("idb-open",{originalErrorMessage:e.message})}))),Lt}function Ft(e){return jt.apply(this,arguments)}function jt(){return jt=Te(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mt();case 3:return n=e.sent,e.next=6,n.transaction(Ot).objectStore(Ot).get(Vt(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof X?ct.warn(e.t0.message):(i=wt.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ct.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),jt.apply(this,arguments)}function zt(e,t){return Ut.apply(this,arguments)}function Ut(){return Ut=Te(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mt();case 3:return r=e.sent,i=r.transaction(Ot,"readwrite"),a=i.objectStore(Ot),e.next=8,a.put(n,Vt(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof X?ct.warn(e.t0.message):(o=wt.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ct.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Ut.apply(this,arguments)}function Vt(e){return"".concat(e.name,"!").concat(e.options.appId)}var qt=function(){function e(t){var n=this;u(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ht(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return c(e,[{key:"triggerHeartbeat",value:function(){var e=Te(be().mark((function e(){var t,n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Bt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Te(be().mark((function e(){var t,n,r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Bt(),n=Wt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=R(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Bt(){return(new Date).toISOString().substring(0,10)}function Wt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=f(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Qt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Qt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Kt,Gt,Ht=function(){function e(t){u(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return c(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(VE){t(VE)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Te(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ft(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Te(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",zt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Te(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",zt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Ie(r.heartbeats),Ie(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Qt(e){return R(JSON.stringify({version:2,heartbeats:e})).length}Kt="",mt(new Ee("platform-logger",(function(e){return new ot(e)}),"PRIVATE")),mt(new Ee("heartbeat",(function(e){return new qt(e)}),"PRIVATE")),Nt(ut,st,Kt),Nt(ut,st,"esm2017"),Nt("fire-js","");var Yt=function(){function e(t,n){var r=this;u(this,e),this._delegate=t,this.firebase=n,pt(t,new Ee("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return c(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Et(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){pt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){vt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Jt=(o(Gt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),o(Gt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Gt),Xt=new $("app-compat","Firebase",Jt);var $t=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=It(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(re(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Nt,setLogLevel:Pt,onLog:At,apps:null,SDK_VERSION:xt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(mt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Xt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&L(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!re(n,e=e||lt))throw Xt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Yt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){L(n,e)},createSubscribe:de,ErrorFactory:$,deepExtend:L}),n}(),Zt=new je("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Zt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var en=self.firebase.SDK_VERSION;en&&en.indexOf("LITE")>=0&&Zt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var tn=$t;!function(e){Nt("@firebase/app-compat","0.2.13",e)}();function nn(){return nn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},nn.apply(this,arguments)}tn.registerVersion("firebase","9.23.0","app-compat");var rn,an="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},on={},un=un||{},sn=an||self;function cn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ln(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var hn="closure_uid_"+(1e9*Math.random()>>>0),fn=0;function dn(e,t,n){return e.call.apply(e.bind,arguments)}function pn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function vn(e,t,n){return(vn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dn:pn).apply(null,arguments)}function mn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function yn(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function gn(){this.s=this.s,this.o=this.o}gn.prototype.s=!1,gn.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,hn)&&e[hn]||(e[hn]=++fn))},gn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var _n=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function kn(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function wn(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(cn(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function bn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}bn.prototype.h=function(){this.defaultPrevented=!0};var xn=function(){if(!sn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{sn.addEventListener("test",(function(){}),t),sn.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function In(e){return/^[\s\xa0]*$/.test(e)}function Sn(){var e=sn.navigator;return e&&(e=e.userAgent)?e:""}function Tn(e){return-1!=Sn().indexOf(e)}function En(e){return En[" "](e),e}En[" "]=function(){};var Cn,Nn,An=Tn("Opera"),Pn=Tn("Trident")||Tn("MSIE"),Dn=Tn("Edge"),Rn=Dn||Pn,On=Tn("Gecko")&&!(-1!=Sn().toLowerCase().indexOf("webkit")&&!Tn("Edge"))&&!(Tn("Trident")||Tn("MSIE"))&&!Tn("Edge"),Ln=-1!=Sn().toLowerCase().indexOf("webkit")&&!Tn("Edge");function Mn(){var e=sn.document;return e?e.documentMode:void 0}e:{var Fn="",jn=function(){var e=Sn();return On?/rv:([^\);]+)(\)|;)/.exec(e):Dn?/Edge\/([\d\.]+)/.exec(e):Pn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ln?/WebKit\/(\S+)/.exec(e):An?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(jn&&(Fn=jn?jn[1]:""),Pn){var zn=Mn();if(null!=zn&&zn>parseFloat(Fn)){Cn=String(zn);break e}}Cn=Fn}if(sn.document&&Pn){var Un=Mn();Nn=Un||(parseInt(Cn,10)||void 0)}else Nn=void 0;var Vn=Nn;function qn(e,t){if(bn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(On){e:{try{En(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Bn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&qn.$.h.call(this)}}yn(qn,bn);var Bn={2:"touch",3:"pen",4:"mouse"};qn.prototype.h=function(){qn.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Wn="closure_listenable_"+(1e6*Math.random()|0),Kn=0;function Gn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Kn,this.fa=this.ia=!1}function Hn(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Qn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Yn(e){var t={};for(var n in e)t[n]=e[n];return t}var Jn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Jn.length;a++)n=Jn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function $n(e){this.src=e,this.g={},this.h=0}function Zn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=_n(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Hn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function er(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}$n.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=er(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Gn(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var tr="closure_lm_"+(1e6*Math.random()|0),nr={};function rr(e,t,n,r,i){if(r&&r.once)return ar(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)rr(e,t[a],n,r,i);return null}return n=fr(n),e&&e[Wn]?e.O(t,n,ln(r)?!!r.capture:!!r,i):ir(e,t,n,!1,r,i)}function ir(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=ln(i)?!!i.capture:!!i,u=lr(e);if(u||(e[tr]=u=new $n(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=cr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)xn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(sr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ar(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ar(e,t[a],n,r,i);return null}return n=fr(n),e&&e[Wn]?e.P(t,n,ln(r)?!!r.capture:!!r,i):ir(e,t,n,!0,r,i)}function or(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)or(e,t[a],n,r,i);else r=ln(r)?!!r.capture:!!r,n=fr(n),e&&e[Wn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=er(a=e.g[t],n,r,i))&&(Hn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=lr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=er(t,n,r,i)),(n=-1<e?t[e]:null)&&ur(n))}function ur(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Wn])Zn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(sr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=lr(t))?(Zn(n,e),0==n.h&&(n.src=null,t[tr]=null)):Hn(e)}}}function sr(e){return e in nr?nr[e]:nr[e]="on"+e}function cr(e,t){if(e.fa)e=!0;else{t=new qn(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ur(e),e=n.call(r,t)}return e}function lr(e){return(e=e[tr])instanceof $n?e:null}var hr="__closure_events_fn_"+(1e9*Math.random()>>>0);function fr(e){return"function"===typeof e?e:(e[hr]||(e[hr]=function(t){return e.handleEvent(t)}),e[hr])}function dr(){gn.call(this),this.i=new $n(this),this.S=this,this.J=null}function pr(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new bn(t,e);else if(t instanceof bn)t.target=t.target||e;else{var i=t;Xn(t=new bn(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=vr(o,r,!0,t)&&i}if(i=vr(o=t.g=e,r,!0,t)&&i,i=vr(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=vr(o=t.g=n[a],r,!1,t)&&i}function vr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&Zn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}yn(dr,gn),dr.prototype[Wn]=!0,dr.prototype.removeEventListener=function(e,t,n,r){or(this,e,t,n,r)},dr.prototype.N=function(){if(dr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Hn(n[r]);delete t.g[e],t.h--}}this.J=null},dr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},dr.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var mr=sn.JSON.stringify,yr=function(){function e(t,n){u(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return c(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function gr(){var e=Tr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _r=function(){function e(){u(this,e),this.h=this.g=null}return c(e,[{key:"add",value:function(e,t){var n=kr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),kr=new yr((function(){return new wr}),(function(e){return e.reset()})),wr=function(){function e(){u(this,e),this.next=this.g=this.h=null}return c(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function br(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function xr(e){sn.setTimeout((function(){throw e}),0)}var Ir,Sr=!1,Tr=new _r,Er=function(){var e=sn.Promise.resolve(void 0);Ir=function(){e.then(Cr)}},Cr=function(){for(var e;e=gr();){try{e.h.call(e.g)}catch(n){xr(n)}var t=kr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Sr=!1};function Nr(e,t){dr.call(this),this.h=e||1,this.g=t||sn,this.j=vn(this.qb,this),this.l=Date.now()}function Ar(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Pr(e,t,n){if("function"===typeof e)n&&(e=vn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=vn(e.handleEvent,e)}return 2147483647<Number(t)?-1:sn.setTimeout(e,t||0)}function Dr(e){e.g=Pr((function(){e.g=null,e.i&&(e.i=!1,Dr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}yn(Nr,dr),(rn=Nr.prototype).ga=!1,rn.T=null,rn.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),pr(this,"tick"),this.ga&&(Ar(this),this.start()))}},rn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rn.N=function(){Nr.$.N.call(this),Ar(this),delete this.g};var Rr=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return c(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Dr(this)}},{key:"N",value:function(){nn(_(n.prototype),"N",this).call(this),this.g&&(sn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(gn);function Or(e){gn.call(this),this.h=e,this.g={}}yn(Or,gn);var Lr=[];function Mr(e,t,n,r){Array.isArray(n)||(n&&(Lr[0]=n.toString()),n=Lr);for(var i=0;i<n.length;i++){var a=rr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Fr(e){Qn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ur(e)}),e),e.g={}}function jr(){this.g=!0}function zr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return mr(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Or.prototype.N=function(){Or.$.N.call(this),Fr(this)},Or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jr.prototype.Ea=function(){this.g=!1},jr.prototype.info=function(){};var Ur={},Vr=null;function qr(){return Vr=Vr||new dr}function Br(e){bn.call(this,Ur.Ta,e)}function Wr(e){var t=qr();pr(t,new Br(t))}function Kr(e,t){bn.call(this,Ur.STAT_EVENT,e),this.stat=t}function Gr(e){var t=qr();pr(t,new Kr(t,e))}function Hr(e,t){bn.call(this,Ur.Ua,e),this.size=t}function Qr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return sn.setTimeout((function(){e()}),t)}Ur.Ta="serverreachability",yn(Br,bn),Ur.STAT_EVENT="statevent",yn(Kr,bn),Ur.Ua="timingevent",yn(Hr,bn);var Yr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Jr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xr(){}function $r(e){return e.h||(e.h=e.i())}function Zr(){}Xr.prototype.h=null;var ei,ti={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ni(){bn.call(this,"d")}function ri(){bn.call(this,"c")}function ii(){}function ai(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Or(this),this.P=ui,e=Rn?125:void 0,this.V=new Nr(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new oi}function oi(){this.i=null,this.g="",this.h=!1}yn(ni,bn),yn(ri,bn),yn(ii,Xr),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},ei=new ii;var ui=45e3,si={},ci={};function li(e,t,n){e.L=1,e.v=Ni(Ii(t)),e.s=n,e.S=!0,hi(e,null)}function hi(e,t){e.G=Date.now(),vi(e),e.A=Ii(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),qi(n.i,"t",r),e.C=0,n=e.l.J,e.h=new oi,e.g=Ba(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Rr(vn(e.Pa,e,e.g),e.O)),Mr(e.U,e.g,"readystatechange",e.nb),t=e.I?Yn(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Wr(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function fi(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function di(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=pi(e,n))==ci){4==t&&(e.o=4,Gr(14),i=!1),zr(e.j,e.m,null,"[Incomplete Response]");break}if(r==si){e.o=4,Gr(15),zr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}zr(e.j,e.m,r,null),ki(e,r)}fi(e)&&r!=ci&&r!=si&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Gr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),La(t),t.M=!0,Gr(11))):(zr(e.j,e.m,n,"[Invalid Chunked Response]"),_i(e),gi(e))}function pi(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ci:(n=Number(t.substring(n,r)),isNaN(n)?si:(r+=1)+n>t.length?ci:(t=t.slice(r,r+n),e.C=r+n,t))}function vi(e){e.Y=Date.now()+e.P,mi(e,e.P)}function mi(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Qr(vn(e.lb,e),t)}function yi(e){e.B&&(sn.clearTimeout(e.B),e.B=null)}function gi(e){0==e.l.H||e.J||ja(e.l,e)}function _i(e){yi(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ar(e.V),Fr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function ki(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Yi(n.i,e)))if(!e.K&&Yi(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Fa(n),Ea(n)}Oa(n),Gr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Qr(vn(n.ib,n),6e3));if(1>=Qi(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Ua(n,11)}else if((e.K||n.g==e)&&Fa(n),!In(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Ji(h,h.h),h.h=null))}if(r.F){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.Da=f,Ci(r.I,r.F,f))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=qa(r,r.J?r.pa:null,r.Y),d.K){Xi(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(yi(p),vi(p)),r.g=d}else Ra(r);0<n.j.length&&Na(n)}else"stop"!=a[0]&&"close"!=a[0]||Ua(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ua(n,7):Ta(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Wr()}catch(a){}}function wi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(cn(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(cn(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(cn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(rn=ai.prototype).setTimeout=function(e){this.P=e},rn.nb=function(e){e=e.target;var t=this.M;t&&3==ka(e)?t.l():this.Pa(e)},rn.Pa=function(e){try{if(e==this.g)e:{var t=ka(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Rn||this.g&&(this.h.h||this.g.ja()||wa(this.g)))){this.J||4!=t||7==n||Wr(),yi(this);var r=this.g.da();this.ca=r;t:if(fi(this)){var i=wa(this.g);e="";var a=i.length,o=4==ka(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){_i(this),gi(this);var u="";break t}this.h.i=new sn.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!In(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Gr(12),_i(this),gi(this);break e}zr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ki(this,r)}this.S?(di(this,t,u),Rn&&this.i&&3==t&&(Mr(this.U,this.V,"tick",this.mb),this.V.start())):(zr(this.j,this.m,u,null),ki(this,u)),4==t&&_i(this),this.i&&!this.J&&(4==t?ja(this.l,this):(this.i=!1,vi(this)))}else(function(e){var t={};e=(e.g&&2<=ka(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!In(e[n])){var r=br(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Gr(12)):(this.o=0,Gr(13)),_i(this),gi(this)}}}catch(t){}},rn.mb=function(){if(this.g){var e=ka(this.g),t=this.g.ja();this.C<t.length&&(yi(this),di(this,e,t),this.i&&4!=e&&vi(this))}},rn.cancel=function(){this.J=!0,_i(this)},rn.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Wr(),Gr(17)),_i(this),this.o=2,gi(this)):mi(this,this.Y-e)};var bi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xi(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof xi){this.h=e.h,Si(this,e.j),this.s=e.s,this.g=e.g,Ti(this,e.m),this.l=e.l;var t=e.i,n=new ji;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ei(this,n),this.o=e.o}else e&&(t=String(e).match(bi))?(this.h=!1,Si(this,t[1]||"",!0),this.s=Ai(t[2]||""),this.g=Ai(t[3]||"",!0),Ti(this,t[4]),this.l=Ai(t[5]||"",!0),Ei(this,t[6]||"",!0),this.o=Ai(t[7]||"")):(this.h=!1,this.i=new ji(null,this.h))}function Ii(e){return new xi(e)}function Si(e,t,n){e.j=n?Ai(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ti(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ei(e,t,n){t instanceof ji?(e.i=t,function(e,t){t&&!e.j&&(zi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ui(this,t),qi(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Pi(t,Mi)),e.i=new ji(t,e.h))}function Ci(e,t,n){e.i.set(t,n)}function Ni(e){return Ci(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ai(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Pi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Di),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Di(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}xi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Pi(t,Ri,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Pi(t,Ri,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Pi(n,"/"==n.charAt(0)?Li:Oi,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Pi(n,Fi)),e.join("")};var Ri=/[#\/\?@]/g,Oi=/[#\?:]/g,Li=/[#\?]/g,Mi=/[#\?@]/g,Fi=/#/g;function ji(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function zi(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ui(e,t){zi(e),t=Bi(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Vi(e,t){return zi(e),t=Bi(e,t),e.g.has(t)}function qi(e,t,n){Ui(e,t),0<n.length&&(e.i=null,e.g.set(Bi(e,t),kn(n)),e.h+=n.length)}function Bi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(rn=ji.prototype).add=function(e,t){zi(this),this.i=null,e=Bi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},rn.forEach=function(e,t){zi(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},rn.ta=function(){zi(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},rn.Z=function(e){zi(this);var t=[];if("string"===typeof e)Vi(this,e)&&(t=t.concat(this.g.get(Bi(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},rn.set=function(e,t){return zi(this),this.i=null,Vi(this,e=Bi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},rn.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},rn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Wi=c((function e(t,n){u(this,e),this.g=t,this.map=n}));function Ki(e){this.l=e||Gi,sn.PerformanceNavigationTiming?e=0<(e=sn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(sn.g&&sn.g.Ka&&sn.g.Ka()&&sn.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Gi=10;function Hi(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Qi(e){return e.h?1:e.g?e.g.size:0}function Yi(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ji(e,t){e.g?e.g.add(t):e.h=t}function Xi(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function $i(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=f(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return kn(e.i)}Ki.prototype.cancel=function(){if(this.i=$i(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=f(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Zi,ea=function(){function e(){u(this,e)}return c(e,[{key:"stringify",value:function(e){return sn.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return sn.JSON.parse(e,void 0)}}]),e}();function ta(){this.g=new ea}function na(e,t,n){var r=n||"";try{wi(e,(function(e,n){var i=e;ln(e)&&(i=mr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ra(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function ia(e){this.l=e.fc||null,this.j=e.ob||!1}function aa(e,t){dr.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=oa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yn(ia,Xr),ia.prototype.g=function(){return new aa(this.l,this.j)},ia.prototype.i=(Zi={},function(){return Zi}),yn(aa,dr);var oa=0;function ua(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function sa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ca(e)}function ca(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(rn=aa.prototype).open=function(e,t){if(this.readyState!=oa)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ca(this)},rn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||sn).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},rn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sa(this)),this.readyState=oa},rn.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ca(this)),this.g&&(this.readyState=3,ca(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof sn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ua(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},rn.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?sa(this):ca(this),3==this.readyState&&ua(this)}},rn.Za=function(e){this.g&&(this.response=this.responseText=e,sa(this))},rn.Ya=function(e){this.g&&(this.response=e,sa(this))},rn.ka=function(){this.g&&sa(this)},rn.setRequestHeader=function(e,t){this.v.append(e,t)},rn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},rn.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(aa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var la=sn.JSON.parse;function ha(e){dr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=fa,this.L=this.M=!1}yn(ha,dr);var fa="",da=/^https?$/i,pa=["POST","PUT"];function va(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ma(e),ga(e)}function ma(e){e.F||(e.F=!0,pr(e,"complete"),pr(e,"error"))}function ya(e){if(e.h&&"undefined"!=typeof un&&(!e.C[1]||4!=ka(e)||2!=e.da()))if(e.v&&4==ka(e))Pr(e.La,0,e);else if(pr(e,"readystatechange"),4==ka(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(bi)[1]||null;!a&&sn.self&&sn.self.location&&(a=sn.self.location.protocol.slice(0,-1)),i=!da.test(a?a.toLowerCase():"")}t=i}if(t)pr(e,"complete"),pr(e,"success");else{e.m=6;try{var o=2<ka(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",ma(e)}}finally{ga(e)}}}function ga(e,t){if(e.g){_a(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||pr(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function _a(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(sn.clearTimeout(e.A),e.A=null)}function ka(e){return e.g?e.g.readyState:0}function wa(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case fa:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Eo){return null}}function ba(e){var t="";return Qn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function xa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ba(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ci(e,t,n))}function Ia(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Sa(e){this.Ga=0,this.j=[],this.l=new jr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ia("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ia("baseRetryDelayMs",5e3,e),this.hb=Ia("retryDelaySeedMs",1e4,e),this.eb=Ia("forwardChannelMaxRetries",2,e),this.xa=Ia("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Ki(e&&e.concurrentRequestLimit),this.Ja=new ta,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ta(e){if(Ca(e),3==e.H){var t=e.W++,n=Ii(e.I);if(Ci(n,"SID",e.K),Ci(n,"RID",t),Ci(n,"TYPE","terminate"),Pa(e,n),(t=new ai(e,e.l,t)).L=2,t.v=Ni(Ii(n)),n=!1,sn.navigator&&sn.navigator.sendBeacon)try{n=sn.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&sn.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ba(t.l,null),t.g.ha(t.v)),t.G=Date.now(),vi(t)}Va(e)}function Ea(e){e.g&&(La(e),e.g.cancel(),e.g=null)}function Ca(e){Ea(e),e.u&&(sn.clearTimeout(e.u),e.u=null),Fa(e),e.i.cancel(),e.m&&("number"===typeof e.m&&sn.clearTimeout(e.m),e.m=null)}function Na(e){if(!Hi(e.i)&&!e.m){e.m=!0;var t=e.Na;Ir||Er(),Sr||(Ir(),Sr=!0),Tr.add(t,e),e.C=0}}function Aa(e,t){var n;n=t?t.m:e.W++;var r=Ii(e.I);Ci(r,"SID",e.K),Ci(r,"RID",n),Ci(r,"AID",e.V),Pa(e,r),e.o&&e.s&&xa(r,e.o,e.s),n=new ai(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Da(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ji(e.i,n),li(n,r,t)}function Pa(e,t){e.na&&Qn(e.na,(function(e,n){Ci(t,n,e)})),e.h&&wi({},(function(e,n){Ci(t,n,e)}))}function Da(e,t,n){n=Math.min(e.j.length,n);var r=e.h?vn(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{na(l,o,"req"+c+"_")}catch(jo){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function Ra(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ir||Er(),Sr||(Ir(),Sr=!0),Tr.add(t,e),e.A=0}}function Oa(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Qr(vn(e.Ma,e),za(e,e.A)),e.A++,!0)}function La(e){null!=e.B&&(sn.clearTimeout(e.B),e.B=null)}function Ma(e){e.g=new ai(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ii(e.wa);Ci(t,"RID","rpc"),Ci(t,"SID",e.K),Ci(t,"AID",e.V),Ci(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ci(t,"TO",e.qa),Ci(t,"TYPE","xmlhttp"),Pa(e,t),e.o&&e.s&&xa(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Ni(Ii(t)),n.s=null,n.S=!0,hi(n,e)}function Fa(e){null!=e.v&&(sn.clearTimeout(e.v),e.v=null)}function ja(e,t){var n=null;if(e.g==t){Fa(e),La(e),e.g=null;var r=2}else{if(!Yi(e.i,t))return;n=t.F,Xi(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;pr(r=qr(),new Hr(r,n)),Na(e)}else Ra(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Qi(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Qr(vn(e.Na,e,t),za(e,e.C)),e.C++,!0))}(e,t)||2==r&&Oa(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ua(e,5);break;case 4:Ua(e,10);break;case 3:Ua(e,6);break;default:Ua(e,2)}}function za(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Ua(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=vn(e.pb,e);n||(n=new xi("//www.google.com/images/cleardot.gif"),sn.location&&"http"==sn.location.protocol||Si(n,"https"),Ni(n)),function(e,t){var n=new jr;if(sn.Image){var r=new Image;r.onload=mn(ra,n,r,"TestLoadImage: loaded",!0,t),r.onerror=mn(ra,n,r,"TestLoadImage: error",!1,t),r.onabort=mn(ra,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=mn(ra,n,r,"TestLoadImage: timeout",!1,t),sn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Gr(2);e.H=0,e.h&&e.h.za(t),Va(e),Ca(e)}function Va(e){if(e.H=0,e.ma=[],e.h){var t=$i(e.i);0==t.length&&0==e.j.length||(wn(e.ma,t),wn(e.ma,e.j),e.i.i.length=0,kn(e.j),e.j.length=0),e.h.ya()}}function qa(e,t,n){var r=n instanceof xi?Ii(n):new xi(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ti(r,r.m);else{var i=sn.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new xi(null);r&&Si(a,r),t&&(a.g=t),i&&Ti(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Ci(r,n,t),Ci(r,"VER",e.ra),Pa(e,r),r}function Ba(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new ha(new ia({ob:!0})):new ha(e.va)).Oa(e.J),t}function Wa(){}function Ka(){if(Pn&&!(10<=Number(Vn)))throw Error("Environmental error: no available transport.")}function Ga(e,t){dr.call(this),this.g=new Sa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!In(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!In(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ya(this)}function Ha(e){ni.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Qa(){ri.call(this),this.status=1}function Ya(e){this.g=e}function Ja(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Xa(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function $a(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(rn=ha.prototype).Oa=function(e){this.M=e},rn.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ei.g(),this.C=this.u?$r(this.u):$r(ei),this.g.onreadystatechange=vn(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void va(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=f(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=sn.FormData&&e instanceof sn.FormData,!(0<=_n(pa,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=f(n);try{for(c.s();!(s=c.n()).done;){var l=v(s.value,2),h=l[0],d=l[1];this.g.setRequestHeader(h,d)}}catch(p){c.e(p)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{_a(this),0<this.B&&((this.L=function(e){return Pn&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vn(this.ua,this)):this.A=Pr(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){va(this,u)}},rn.ua=function(){"undefined"!=typeof un&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pr(this,"timeout"),this.abort(8))},rn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,pr(this,"complete"),pr(this,"abort"),ga(this))},rn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ga(this,!0)),ha.$.N.call(this)},rn.La=function(){this.s||(this.G||this.v||this.l?ya(this):this.kb())},rn.kb=function(){ya(this)},rn.isActive=function(){return!!this.g},rn.da=function(){try{return 2<ka(this)?this.g.status:-1}catch(Zi){return-1}},rn.ja=function(){try{return this.g?this.g.responseText:""}catch(Zi){return""}},rn.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),la(t)}},rn.Ia=function(){return this.m},rn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(rn=Sa.prototype).ra=8,rn.H=1,rn.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new ai(this,this.l,e),n=this.s;if(this.U&&(n?Xn(n=Yn(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Da(this,t,r),Ci(i=Ii(this.I),"RID",e),Ci(i,"CVER",22),this.F&&Ci(i,"X-HTTP-Session-Id",this.F),Pa(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(ba(n)))+"&"+r:this.o&&xa(i,this.o,n)),Ji(this.i,t),this.bb&&Ci(i,"TYPE","init"),this.P?(Ci(i,"$req",r),Ci(i,"SID","null"),t.aa=!0,li(t,i,null)):li(t,i,r),this.H=2}}else 3==this.H&&(e?Aa(this,e):0==this.j.length||Hi(this.i)||Aa(this))},rn.Ma=function(){if(this.u=null,Ma(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Qr(vn(this.jb,this),e)}},rn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Gr(10),Ea(this),Ma(this))},rn.ib=function(){null!=this.v&&(this.v=null,Ea(this),Oa(this),Gr(19))},rn.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Gr(2)):(this.l.info("Failed to ping google.com"),Gr(1))},rn.isActive=function(){return!!this.h&&this.h.isActive(this)},(rn=Wa.prototype).Ba=function(){},rn.Aa=function(){},rn.za=function(){},rn.ya=function(){},rn.isActive=function(){return!0},rn.Va=function(){},Ka.prototype.g=function(e,t){return new Ga(e,t)},yn(Ga,dr),Ga.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Gr(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=qa(e,null,e.Y),Na(e)},Ga.prototype.close=function(){Ta(this.g)},Ga.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=mr(e),e=n);t.j.push(new Wi(t.fb++,e)),3==t.H&&Na(t)},Ga.prototype.N=function(){this.g.h=null,delete this.j,Ta(this.g),delete this.g,Ga.$.N.call(this)},yn(Ha,ni),yn(Qa,ri),yn(Ya,Wa),Ya.prototype.Ba=function(){pr(this.g,"a")},Ya.prototype.Aa=function(e){pr(this.g,new Ha(e))},Ya.prototype.za=function(e){pr(this.g,new Qa)},Ya.prototype.ya=function(){pr(this.g,"b")},yn(Ja,(function(){this.blockSize=-1})),Ja.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ja.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Xa(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Xa(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Xa(this,r),i=0;break}}this.h=i,this.i+=t},Ja.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Za={};function eo(e){return-128<=e&&128>e?function(e,t){var n=Za;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new $a([0|e],0>e?-1:0)})):new $a([0|e],0>e?-1:0)}function to(e){if(isNaN(e)||!isFinite(e))return ro;if(0>e)return so(to(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=no;return new $a(t,0)}var no=4294967296,ro=eo(0),io=eo(1),ao=eo(16777216);function oo(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function uo(e){return-1==e.h}function so(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new $a(n,~e.h).add(io)}function co(e,t){return e.add(so(t))}function lo(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ho(e,t){this.g=e,this.h=t}function fo(e,t){if(oo(t))throw Error("division by zero");if(oo(e))return new ho(ro,ro);if(uo(e))return t=fo(so(e),t),new ho(so(t.g),so(t.h));if(uo(t))return t=fo(e,so(t)),new ho(so(t.g),t.h);if(30<e.g.length){if(uo(e)||uo(t))throw Error("slowDivide_ only works with positive integers.");for(var n=io,r=t;0>=r.X(e);)n=po(n),r=po(r);var i=vo(n,1),a=vo(r,1);for(r=vo(r,2),n=vo(n,2);!oo(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=vo(r,1),n=vo(n,1)}return t=co(e,i.R(t)),new ho(i,t)}for(i=ro;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=to(n)).R(t);uo(o)||0<o.X(e);)o=(a=to(n-=r)).R(t);oo(a)&&(a=io),i=i.add(a),e=co(e,o)}return new ho(i,e)}function po(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new $a(n,e.h)}function vo(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new $a(i,e.h)}(rn=$a.prototype).ea=function(){if(uo(this))return-so(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:no+r)*t,t*=no}return e},rn.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(oo(this))return"0";if(uo(this))return"-"+so(this).toString(e);for(var t=to(Math.pow(e,6)),n=this,r="";;){var i=fo(n,t).g,a=((0<(n=co(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(oo(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},rn.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},rn.X=function(e){return uo(e=co(this,e))?-1:oo(e)?0:1},rn.abs=function(){return uo(this)?so(this):this},rn.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new $a(n,-2147483648&n[n.length-1]?-1:0)},rn.R=function(e){if(oo(this)||oo(e))return ro;if(uo(this))return uo(e)?so(this).R(so(e)):so(so(this).R(e));if(uo(e))return so(this.R(so(e)));if(0>this.X(ao)&&0>e.X(ao))return to(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,lo(n,2*r+2*i),n[2*r+2*i+1]+=a*s,lo(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,lo(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,lo(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new $a(n,0)},rn.gb=function(e){return fo(this,e).h},rn.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new $a(n,this.h&e.h)},rn.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new $a(n,this.h|e.h)},rn.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new $a(n,this.h^e.h)},Ka.prototype.createWebChannel=Ka.prototype.g,Ga.prototype.send=Ga.prototype.u,Ga.prototype.open=Ga.prototype.m,Ga.prototype.close=Ga.prototype.close,Yr.NO_ERROR=0,Yr.TIMEOUT=8,Yr.HTTP_ERROR=6,Jr.COMPLETE="complete",Zr.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",dr.prototype.listen=dr.prototype.O,ha.prototype.listenOnce=ha.prototype.P,ha.prototype.getLastError=ha.prototype.Sa,ha.prototype.getLastErrorCode=ha.prototype.Ia,ha.prototype.getStatus=ha.prototype.da,ha.prototype.getResponseJson=ha.prototype.Wa,ha.prototype.getResponseText=ha.prototype.ja,ha.prototype.send=ha.prototype.ha,ha.prototype.setWithCredentials=ha.prototype.Oa,Ja.prototype.digest=Ja.prototype.l,Ja.prototype.reset=Ja.prototype.reset,Ja.prototype.update=Ja.prototype.j,$a.prototype.add=$a.prototype.add,$a.prototype.multiply=$a.prototype.R,$a.prototype.modulo=$a.prototype.gb,$a.prototype.compare=$a.prototype.X,$a.prototype.toNumber=$a.prototype.ea,$a.prototype.toString=$a.prototype.toString,$a.prototype.getBits=$a.prototype.D,$a.fromNumber=to,$a.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return so(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=to(Math.pow(n,8)),i=ro,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=to(Math.pow(n,o)),i=i.R(o).add(to(u))):i=(i=i.R(r)).add(to(u))}return i};var mo=on.createWebChannelTransport=function(){return new Ka},yo=on.getStatEventTarget=function(){return qr()},go=on.ErrorCode=Yr,_o=on.EventType=Jr,ko=on.Event=Ur,wo=on.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},bo=on.FetchXmlHttpFactory=ia,xo=on.WebChannel=Zr,Io=on.XhrIo=ha,So=on.Md5=Ja,To=on.Integer=$a,Eo="@firebase/firestore",Co=function(){function e(t){u(this,e),this.uid=t}return c(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Co.UNAUTHENTICATED=new Co(null),Co.GOOGLE_CREDENTIALS=new Co("google-credentials-uid"),Co.FIRST_PARTY=new Co("first-party-uid"),Co.MOCK_USER=new Co("mock-user");var No="9.23.0",Ao=new je("@firebase/firestore");function Po(){return Ao.logLevel}function Do(e){if(Ao.logLevel<=Pe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Lo);Ao.debug.apply(Ao,["Firestore (".concat(No,"): ").concat(e)].concat(Ie(i)))}}function Ro(e){if(Ao.logLevel<=Pe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Lo);Ao.error.apply(Ao,["Firestore (".concat(No,"): ").concat(e)].concat(Ie(i)))}}function Oo(e){if(Ao.logLevel<=Pe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Lo);Ao.warn.apply(Ao,["Firestore (".concat(No,"): ").concat(e)].concat(Ie(i)))}}function Lo(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Mo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(No,") INTERNAL ASSERTION FAILED: ")+e;throw Ro(t),new Error(t)}function Fo(e,t){e||Mo()}function jo(e,t){return e}var zo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Uo=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return c(n)}(X),Vo=c((function e(){var t=this;u(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),qo=c((function e(t,n){u(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Bo=function(){function e(){u(this,e)}return c(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Co.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Wo=function(){function e(t){u(this,e),this.token=t,this.changeListener=null}return c(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ko=function(){function e(t){u(this,e),this.t=t,this.currentUser=Co.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return c(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Vo;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Vo,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Do("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Do("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Vo)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Do("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Fo("string"==typeof n.accessToken),new qo(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Fo(null===e||"string"==typeof e),new Co(e)}}]),e}(),Go=function(){function e(t,n,r){u(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Co.FIRST_PARTY,this.g=new Map}return c(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Ho=function(){function e(t,n,r){u(this,e),this.h=t,this.l=n,this.m=r}return c(e,[{key:"getToken",value:function(){return Promise.resolve(new Go(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Co.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Qo=c((function e(t){u(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Yo=function(){function e(t){u(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return c(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Do("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Do("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Do("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Do("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Fo("string"==typeof t.token),e.T=t.token,new Qo(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Jo(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Xo=function(){function e(){u(this,e)}return c(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Jo(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function $o(e,t){return e<t?-1:e>t?1:0}function Zo(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function eu(e){return e+"\0"}var tu=function(){function e(t,n){if(u(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Uo(zo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Uo(zo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Uo(zo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Uo(zo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return c(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?$o(this.nanoseconds,e.nanoseconds):$o(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),nu=function(){function e(t){u(this,e),this.timestamp=t}return c(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new tu(0,0))}},{key:"max",value:function(){return new e(new tu(253402300799,999999999))}}]),e}(),ru=function(){function e(t,n,r){u(this,e),void 0===n?n=0:n>t.length&&Mo(),void 0===r?r=t.length-n:r>t.length-n&&Mo(),this.segments=t,this.offset=n,this.len=r}return c(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),iu=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Uo(zo.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Ie(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ru),au=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ou=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return au.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Uo(zo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Uo(zo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Uo(zo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Uo(zo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ru),uu=function(){function e(t){u(this,e),this.path=t}return c(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===iu.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(iu.fromString(t))}},{key:"fromName",value:function(t){return new e(iu.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(iu.emptyPath())}},{key:"comparator",value:function(e,t){return iu.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new iu(t.slice()))}}]),e}(),su=c((function e(t,n,r,i){u(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function cu(e){return e.fields.find((function(e){return 2===e.kind}))}function lu(e){return e.fields.filter((function(e){return 2!==e.kind}))}su.UNKNOWN_ID=-1;var hu=c((function e(t,n){u(this,e),this.fieldPath=t,this.kind=n}));var fu=function(){function e(t,n){u(this,e),this.sequenceNumber=t,this.offset=n}return c(e,null,[{key:"empty",value:function(){return new e(0,vu.min())}}]),e}();function du(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=nu.fromTimestamp(1e9===r?new tu(n+1,0):new tu(n,r));return new vu(i,uu.empty(),t)}function pu(e){return new vu(e.readTime,e.key,-1)}var vu=function(){function e(t,n,r){u(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return c(e,null,[{key:"min",value:function(){return new e(nu.min(),uu.empty(),-1)}},{key:"max",value:function(){return new e(nu.max(),uu.empty(),-1)}}]),e}();function mu(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=uu.comparator(e.documentKey,t.documentKey))?n:$o(e.largestBatchId,t.largestBatchId)}var yu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",gu=function(){function e(){u(this,e),this.onCommittedListeners=[]}return c(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function _u(e){return ku.apply(this,arguments)}function ku(){return(ku=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===zo.FAILED_PRECONDITION&&t.message===yu){e.next=2;break}throw t;case 2:Do("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wu=function(){function e(t){var n=this;u(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return c(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Mo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=f(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),bu=function(){function e(t,n){var r=this;u(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new Vo,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new Su(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=Au(e.target.error);r.v.reject(new Su(t,n))}}return c(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(Do("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Eu(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Su(n,t)}}}]),e}(),xu=function(){function e(t,n,r){u(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(B())&&Ro("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return c(e,[{key:"$",value:function(){var e=Te(be().mark((function e(t){var n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Do("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Su(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Uo(zo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Uo(zo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Su(t,n))},i.onupgradeneeded=function(e){Do("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){Do("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Te(be().mark((function e(t,n,r,i){var a,o,u,s,c=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=be().mark((function e(){var n,u,s,l;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=bu.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),wu.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.R;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Do("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Do("SimpleDb","Removing database:",e),Cu(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!J())return!1;if(e.C())return!0;var t=B(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Iu=function(){function e(t){u(this,e),this.L=t,this.q=!1,this.U=null}return c(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Cu(this.L.delete())}}]),e}(),Su=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this,zo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return c(n)}(Uo);function Tu(e){return"IndexedDbTransactionError"===e.name}var Eu=function(){function e(t){u(this,e),this.store=t}return c(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Do("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Do("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Cu(n)}},{key:"add",value:function(e){return Do("SimpleDb","ADD",this.store.name,e,e),Cu(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Cu(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Do("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Do("SimpleDb","DELETE",this.store.name,e),Cu(this.store.delete(e))}},{key:"count",value:function(){return Do("SimpleDb","COUNT",this.store.name),Cu(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new wu((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new wu((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Do("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new wu((function(n,r){t.onerror=function(e){var t=Au(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new wu((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Iu(i),o=t(i.primaryKey,i.value,a);if(o instanceof wu){var u=o.catch((function(e){return a.done(),wu.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return wu.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Cu(e){return new wu((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Au(e.target.error);n(t)}}))}var Nu=!1;function Au(e){var t=xu.S(B());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Uo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Nu||(Nu=!0,setTimeout((function(){throw r}),0)),r}}return e}var Pu=function(){function e(t,n){u(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return c(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Do("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Do,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Tu(e.t4)){e.next=17;break}Do("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,_u(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Du=function(){function e(t,n){u(this,e),this.localStore=t,this.persistence=n}return c(e,[{key:"nt",value:function(){var e=Te(be().mark((function e(){var t,n=this,r=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return wu.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Do("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return Do("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=pu(t);mu(r,n)>0&&(n=r)})),new vu(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Ru=function(){function e(t,n){var r=this;u(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return c(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Ou(e){return null==e}function Lu(e){return 0===e&&1/e==-1/0}function Mu(e){return"number"==typeof e&&Number.isInteger(e)&&!Lu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Fu(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=zu(t)),t=ju(e.get(n),t);return zu(t)}function ju(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function zu(e){return e+"\x01\x01"}function Uu(e){var t=e.length;if(Fo(t>=2),2===t)return Fo("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),iu.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Mo(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Mo()}a=o+2}return new iu(r)}Ru.ct=-1;var Vu=["userId","batchId"];function qu(e,t){return[e,Fu(t)]}function Bu(e,t,n){return[e,Fu(t),n]}var Wu={},Ku=["prefixPath","collectionGroup","readTime","documentId"],Gu=["prefixPath","collectionGroup","documentId"],Hu=["collectionGroup","readTime","prefixPath","documentId"],Qu=["canonicalId","targetId"],Yu=["targetId","path"],Ju=["path","targetId"],Xu=["collectionId","parent"],$u=["indexId","uid"],Zu=["uid","sequenceNumber"],es=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ts=["indexId","uid","orderedDocumentKey"],ns=["userId","collectionPath","documentId"],rs=["userId","collectionPath","largestBatchId"],is=["userId","collectionGroup","largestBatchId"],as=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),os=[].concat(Ie(as),["documentOverlays"]),us=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ss=us,cs=[].concat(ss,["indexConfiguration","indexState","indexEntries"]),ls=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return c(n)}(gu);function hs(e,t){var n=jo(e);return xu.M(n.ht,t)}function fs(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ds(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ps(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var vs=function(){function e(t,n){u(this,e),this.comparator=t,this.root=n||ys.EMPTY}return c(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ys.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ys.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ms(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ms(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ms(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ms(this.root,e,this.comparator,!0)}}]),e}(),ms=function(){function e(t,n,r,i){u(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return c(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),ys=function(){function e(t,n,r,i,a){u(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return c(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Mo();if(this.right.isRed())throw Mo();var e=this.left.check();if(e!==this.right.check())throw Mo();return e+(this.isRed()?0:1)}}]),e}();ys.EMPTY=null,ys.RED=!0,ys.BLACK=!1,ys.EMPTY=new(function(){function e(){u(this,e),this.size=0}return c(e,[{key:"key",get:function(){throw Mo()}},{key:"value",get:function(){throw Mo()}},{key:"color",get:function(){throw Mo()}},{key:"left",get:function(){throw Mo()}},{key:"right",get:function(){throw Mo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ys(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var gs=function(){function e(t){u(this,e),this.comparator=t,this.data=new vs(this.comparator)}return c(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new _s(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new _s(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),_s=function(){function e(t){u(this,e),this.iter=t}return c(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ks(e){return e.hasNext()?e.getNext():void 0}var ws=function(){function e(t){u(this,e),this.fields=t,t.sort(ou.comparator)}return c(e,[{key:"unionWith",value:function(t){var n,r=new gs(ou.comparator),i=f(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=f(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=f(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Zo(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),bs=function(e){g(n,e);var t=w(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return c(n)}(x(Error));var xs=function(e){function t(e){u(this,t),this.binaryString=e}return c(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return $o(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new bs("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();xs.EMPTY_BYTE_STRING=new xs("");var Is=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(e){if(Fo(!!e),"string"==typeof e){var t=0,n=Is.exec(e);if(Fo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ts(e.seconds),nanos:Ts(e.nanos)}}function Ts(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Es(e){return"string"==typeof e?xs.fromBase64String(e):xs.fromUint8Array(e)}function Cs(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ns(e){var t=e.mapValue.fields.__previous_value__;return Cs(t)?Ns(t):t}function As(e){var t=Ss(e.mapValue.fields.__local_write_time__.timestampValue);return new tu(t.seconds,t.nanos)}var Ps=c((function e(t,n,r,i,a,o,s,c,l){u(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=c,this.useFetchStreams=l})),Ds=function(){function e(t,n){u(this,e),this.projectId=t,this.database=n||"(default)"}return c(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Rs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Os={nullValue:"NULL_VALUE"};function Ls(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Cs(e)?4:Ys(e)?9007199254740991:10:Mo()}function Ms(e,t){if(e===t)return!0;var n=Ls(e);if(n!==Ls(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return As(e).isEqual(As(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ss(e.timestampValue),r=Ss(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Es(e.bytesValue).isEqual(Es(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ts(e.geoPointValue.latitude)===Ts(t.geoPointValue.latitude)&&Ts(e.geoPointValue.longitude)===Ts(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ts(e.integerValue)===Ts(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Ts(e.doubleValue),r=Ts(t.doubleValue);return n===r?Lu(n)===Lu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Zo(e.arrayValue.values||[],t.arrayValue.values||[],Ms);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(fs(n)!==fs(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ms(n[i],r[i])))return!1;return!0}(e,t);default:return Mo()}}function Fs(e,t){return void 0!==(e.values||[]).find((function(e){return Ms(e,t)}))}function js(e,t){if(e===t)return 0;var n=Ls(e),r=Ls(t);if(n!==r)return $o(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $o(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Ts(e.integerValue||e.doubleValue),r=Ts(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return zs(e.timestampValue,t.timestampValue);case 4:return zs(As(e),As(t));case 5:return $o(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Es(e),r=Es(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=$o(n[i],r[i]);if(0!==a)return a}return $o(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=$o(Ts(e.latitude),Ts(t.latitude));return 0!==n?n:$o(Ts(e.longitude),Ts(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=js(n[i],r[i]);if(a)return a}return $o(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Rs.mapValue&&t===Rs.mapValue)return 0;if(e===Rs.mapValue)return 1;if(t===Rs.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=$o(r[o],a[o]);if(0!==u)return u;var s=js(n[r[o]],i[a[o]]);if(0!==s)return s}return $o(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Mo()}}function zs(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return $o(e,t);var n=Ss(e),r=Ss(t),i=$o(n.seconds,r.seconds);return 0!==i?i:$o(n.nanos,r.nanos)}function Us(e){return Vs(e)}function Vs(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ss(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Es(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,uu.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=f(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Vs(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=f(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Vs(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Mo();var t,n}function qs(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Bs(e){return!!e&&"integerValue"in e}function Ws(e){return!!e&&"arrayValue"in e}function Ks(e){return!!e&&"nullValue"in e}function Gs(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Hs(e){return!!e&&"mapValue"in e}function Qs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return ds(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Qs(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Qs(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Ys(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Js(e){return"nullValue"in e?Os:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?qs(Ds.empty(),uu.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Mo()}function Xs(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?qs(Ds.empty(),uu.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Rs:Mo()}function $s(e,t){var n=js(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Zs(e,t){var n=js(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var ec=function(){function e(t){u(this,e),this.value=t}return c(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Hs(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qs(t)}},{key:"setAll",value:function(e){var t=this,n=ou.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Qs(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Hs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ms(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Hs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){ds(t,(function(t,n){return e[t]=n}));var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Qs(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function tc(e){var t=[];return ds(e.fields,(function(e,n){var r=new ou([e]);if(Hs(n)){var i=tc(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=f(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new ws(t)}var nc=function(){function e(t,n,r,i,a,o,s){u(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return c(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(nu.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ec.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ec.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=nu.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,nu.min(),nu.min(),nu.min(),ec.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,nu.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,nu.min(),nu.min(),ec.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,nu.min(),nu.min(),ec.empty(),2)}}]),e}(),rc=c((function e(t,n){u(this,e),this.position=t,this.inclusive=n}));function ic(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?uu.comparator(uu.fromName(o.referenceValue),n.key):js(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function ac(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ms(e.position[n],t.position[n]))return!1;return!0}var oc=c((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";u(this,e),this.field=t,this.dir=n}));function uc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var sc=c((function e(){u(this,e)})),cc=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return c(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(js(t,this.value)):null!==t&&Ls(this.value)===Ls(t)&&this.matchesComparison(js(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Mo()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new _c(e,t,r):"array-contains"===t?new xc(e,r):"in"===t?new Ic(e,r):"not-in"===t?new Sc(e,r):"array-contains-any"===t?new Tc(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new kc(e,n):new wc(e,n)}}]),n}(sc),lc=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return c(n,[{key:"matches",value:function(e){return hc(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=f(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(sc);function hc(e){return"and"===e.op}function fc(e){return"or"===e.op}function dc(e){return pc(e)&&hc(e)}function pc(e){var t,n=f(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof lc)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function vc(e){if(e instanceof cc)return e.field.canonicalString()+e.op.toString()+Us(e.value);if(dc(e))return e.filters.map((function(e){return vc(e)})).join(",");var t=e.filters.map((function(e){return vc(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function mc(e,t){return e instanceof cc?function(e,t){return t instanceof cc&&e.op===t.op&&e.field.isEqual(t.field)&&Ms(e.value,t.value)}(e,t):e instanceof lc?function(e,t){return t instanceof lc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&mc(n,t.filters[r])}),!0)}(e,t):void Mo()}function yc(e,t){var n=e.filters.concat(t);return lc.create(n,e.op)}function gc(e){return e instanceof cc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Us(e.value))}(e):e instanceof lc?function(e){return e.op.toString()+" {"+e.getFilters().map(gc).join(" ,")+"}"}(e):"Filter"}var _c=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this,e,r,i)).key=uu.fromName(i.referenceValue),a}return c(n,[{key:"matches",value:function(e){var t=uu.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(cc),kc=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,"in",r)).keys=bc("in",r),i}return c(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(cc),wc=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,"not-in",r)).keys=bc("not-in",r),i}return c(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(cc);function bc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return uu.fromName(e.referenceValue)}))}var xc=function(e){g(n,e);var t=w(n);function n(e,r){return u(this,n),t.call(this,e,"array-contains",r)}return c(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Ws(t)&&Fs(t.arrayValue,this.value)}}]),n}(cc),Ic=function(e){g(n,e);var t=w(n);function n(e,r){return u(this,n),t.call(this,e,"in",r)}return c(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Fs(this.value.arrayValue,t)}}]),n}(cc),Sc=function(e){g(n,e);var t=w(n);function n(e,r){return u(this,n),t.call(this,e,"not-in",r)}return c(n,[{key:"matches",value:function(e){if(Fs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Fs(this.value.arrayValue,t)}}]),n}(cc),Tc=function(e){g(n,e);var t=w(n);function n(e,r){return u(this,n),t.call(this,e,"array-contains-any",r)}return c(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Ws(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Fs(t.value.arrayValue,e)}))}}]),n}(cc),Ec=c((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;u(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.dt=null}));function Cc(e){return new Ec(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Nc(e){var t=jo(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return vc(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Ou(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Us(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Us(e)})).join(",")),t.dt=n}return t.dt}function Ac(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!uc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!mc(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ac(e.startAt,t.startAt)&&ac(e.endAt,t.endAt)}function Pc(e){return uu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Dc(e,t){return e.filters.filter((function(e){return e instanceof cc&&e.field.isEqual(t)}))}function Rc(e,t,n){var r,i=Os,a=!0,o=f(Dc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Os,c=!0;switch(u.op){case"<":case"<=":s=Js(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Os}$s({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];$s({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function Oc(e,t,n){var r,i=Rs,a=!0,o=f(Dc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Rs,c=!0;switch(u.op){case">=":case">":s=Xs(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Rs}Zs({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Zs({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var Lc=c((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;u(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=c,this.wt=null,this._t=null,this.startAt,this.endAt}));function Mc(e,t,n,r,i,a,o,u){return new Lc(e,t,n,r,i,a,o,u)}function Fc(e){return new Lc(e)}function jc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function zc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Uc(e){var t,n=f(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Vc(e){return null!==e.collectionGroup}function qc(e){var t=jo(e);if(null===t.wt){t.wt=[];var n=Uc(t),r=zc(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new oc(n)),t.wt.push(new oc(ou.keyField(),"asc"));else{var i,a=!1,o=f(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new oc(ou.keyField(),s))}}}return t.wt}function Bc(e){var t=jo(e);if(!t._t)if("F"===t.limitType)t._t=Cc(t.path,t.collectionGroup,qc(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=f(qc(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new oc(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new rc(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new rc(t.startAt.position,t.startAt.inclusive):null;t._t=Cc(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function Wc(e,t){t.getFirstInequalityField(),Uc(e);var n=e.filters.concat([t]);return new Lc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Kc(e,t,n){return new Lc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Gc(e,t){return Ac(Bc(e),Bc(t))&&e.limitType===t.limitType}function Hc(e){return"".concat(Nc(Bc(e)),"|lt:").concat(e.limitType)}function Qc(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return gc(e)})).join(", "),"]")),Ou(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Us(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Us(e)})).join(",")),"Target(".concat(t,")")}(Bc(e)),"; limitType=").concat(e.limitType,")")}function Yc(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):uu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=f(qc(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=f(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=ic(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,qc(e),t))&&!(e.endAt&&!function(e,t,n){var r=ic(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,qc(e),t))}(e,t)}function Jc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Xc(e){return function(t,n){var r,i=!1,a=f(qc(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=$c(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function $c(e,t,n){var r=e.field.isKeyField()?uu.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?js(r,i):Mo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Mo()}}var Zc=function(){function e(t,n){u(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return c(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var a=v(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){ds(this.inner,(function(t,n){var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var a=v(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ps(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),el=new vs(uu.comparator);function tl(){return el}var nl=new vs(uu.comparator);function rl(){for(var e=nl,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function il(e){var t=nl;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function al(){return ul()}function ol(){return ul()}function ul(){return new Zc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var sl=new vs(uu.comparator),cl=new gs(uu.comparator);function ll(){for(var e=cl,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var hl=new gs($o);function fl(){return hl}function dl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lu(t)?"-0":t}}function pl(e){return{integerValue:""+e}}function vl(e,t){return Mu(t)?pl(t):dl(e,t)}var ml=c((function e(){u(this,e),this._=void 0}));function yl(e,t,n){return e instanceof kl?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Cs(t)&&(t=Ns(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof wl?bl(e,t):e instanceof xl?Il(e,t):function(e,t){var n=_l(e,t),r=Tl(n)+Tl(e.gt);return Bs(n)&&Bs(e.gt)?pl(r):dl(e.serializer,r)}(e,t)}function gl(e,t,n){return e instanceof wl?bl(e,t):e instanceof xl?Il(e,t):n}function _l(e,t){return e instanceof Sl?Bs(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var kl=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n)}(ml),wl=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this)).elements=e,r}return c(n)}(ml);function bl(e,t){var n,r=El(t),i=f(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Ms(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var xl=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this)).elements=e,r}return c(n)}(ml);function Il(e,t){var n,r=El(t),i=f(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Ms(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Sl=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return c(n)}(ml);function Tl(e){return Ts(e.integerValue||e.doubleValue)}function El(e){return Ws(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Cl=c((function e(t,n){u(this,e),this.field=t,this.transform=n}));var Nl=c((function e(t,n){u(this,e),this.version=t,this.transformResults=n})),Al=function(){function e(t,n){u(this,e),this.updateTime=t,this.exists=n}return c(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Pl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Dl=c((function e(){u(this,e)}));function Rl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Kl(e.key,Al.none()):new jl(e.key,e.data,Al.none());var n,r=e.data,i=ec.empty(),a=new gs(ou.comparator),o=f(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new zl(e.key,i,new ws(a.toArray()),Al.none())}function Ol(e,t,n){e instanceof jl?function(e,t,n){var r=e.value.clone(),i=Vl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof zl?function(e,t,n){if(Pl(e.precondition,t)){var r=Vl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ul(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ll(e,t,n,r){return e instanceof jl?function(e,t,n,r){if(!Pl(e.precondition,t))return n;var i=e.value.clone(),a=ql(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof zl?function(e,t,n,r){if(!Pl(e.precondition,t))return n;var i=ql(e.fieldTransforms,r,t),a=t.data;return a.setAll(Ul(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Pl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ml(e,t){var n,r=null,i=f(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=_l(a.transform,o||null);null!=u&&(null===r&&(r=ec.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Fl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Zo(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof wl&&t instanceof wl||e instanceof xl&&t instanceof xl?Zo(e.elements,t.elements,Ms):e instanceof Sl&&t instanceof Sl?Ms(e.gt,t.gt):e instanceof kl&&t instanceof kl}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var jl=function(e){g(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return u(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return c(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Dl),zl=function(e){g(n,e);var t=w(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return u(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return c(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Dl);function Ul(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Vl(e,t,n){var r=new Map;Fo(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,gl(o,u,n[i]))}return r}function ql(e,t,n){var r,i=new Map,a=f(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,yl(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Bl,Wl,Kl=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return c(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Dl),Gl=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return c(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Dl),Hl=function(){function e(t,n,r,i){u(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return c(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ol(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=f(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Ll(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=f(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Ll(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=ol();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Rl(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(nu.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),ll())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,(function(e,t){return Fl(e,t)}))&&Zo(this.baseMutations,e.baseMutations,(function(e,t){return Fl(e,t)}))}}]),e}(),Ql=function(){function e(t,n,r,i){u(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return c(e,null,[{key:"from",value:function(t,n,r){Fo(t.mutations.length===r.length);for(var i=sl,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Yl=function(){function e(t,n){u(this,e),this.largestBatchId=t,this.mutation=n}return c(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Jl=c((function e(t,n){u(this,e),this.count=t,this.unchangedNames=n}));function Xl(e){switch(e){default:return Mo();case zo.CANCELLED:case zo.UNKNOWN:case zo.DEADLINE_EXCEEDED:case zo.RESOURCE_EXHAUSTED:case zo.INTERNAL:case zo.UNAVAILABLE:case zo.UNAUTHENTICATED:return!1;case zo.INVALID_ARGUMENT:case zo.NOT_FOUND:case zo.ALREADY_EXISTS:case zo.PERMISSION_DENIED:case zo.FAILED_PRECONDITION:case zo.ABORTED:case zo.OUT_OF_RANGE:case zo.UNIMPLEMENTED:case zo.DATA_LOSS:return!0}}function $l(e){if(void 0===e)return Ro("GRPC error has no .code"),zo.UNKNOWN;switch(e){case Bl.OK:return zo.OK;case Bl.CANCELLED:return zo.CANCELLED;case Bl.UNKNOWN:return zo.UNKNOWN;case Bl.DEADLINE_EXCEEDED:return zo.DEADLINE_EXCEEDED;case Bl.RESOURCE_EXHAUSTED:return zo.RESOURCE_EXHAUSTED;case Bl.INTERNAL:return zo.INTERNAL;case Bl.UNAVAILABLE:return zo.UNAVAILABLE;case Bl.UNAUTHENTICATED:return zo.UNAUTHENTICATED;case Bl.INVALID_ARGUMENT:return zo.INVALID_ARGUMENT;case Bl.NOT_FOUND:return zo.NOT_FOUND;case Bl.ALREADY_EXISTS:return zo.ALREADY_EXISTS;case Bl.PERMISSION_DENIED:return zo.PERMISSION_DENIED;case Bl.FAILED_PRECONDITION:return zo.FAILED_PRECONDITION;case Bl.ABORTED:return zo.ABORTED;case Bl.OUT_OF_RANGE:return zo.OUT_OF_RANGE;case Bl.UNIMPLEMENTED:return zo.UNIMPLEMENTED;case Bl.DATA_LOSS:return zo.DATA_LOSS;default:return Mo()}}(Wl=Bl||(Bl={}))[Wl.OK=0]="OK",Wl[Wl.CANCELLED=1]="CANCELLED",Wl[Wl.UNKNOWN=2]="UNKNOWN",Wl[Wl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wl[Wl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wl[Wl.NOT_FOUND=5]="NOT_FOUND",Wl[Wl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wl[Wl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wl[Wl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wl[Wl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wl[Wl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wl[Wl.ABORTED=10]="ABORTED",Wl[Wl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wl[Wl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wl[Wl.INTERNAL=13]="INTERNAL",Wl[Wl.UNAVAILABLE=14]="UNAVAILABLE",Wl[Wl.DATA_LOSS=15]="DATA_LOSS";var Zl=function(){function e(){u(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return c(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return eh}},{key:"getOrCreateInstance",value:function(){return null===eh&&(eh=new e),eh}}]),e}(),eh=null;function th(){return new TextEncoder}var nh=new To([4294967295,4294967295],0);function rh(e){var t=th().encode(e),n=new So;return n.update(t),new Uint8Array(n.digest())}function ih(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new To([n,r],0),new To([i,a],0)]}var ah=function(){function e(t,n,r){if(u(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new oh("Invalid padding: ".concat(n));if(r<0)throw new oh("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new oh("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new oh("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=To.fromNumber(this.It)}return c(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(To.fromNumber(n)));return 1===r.compare(nh)&&(r=new To([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=v(ih(rh(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=v(ih(rh(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),oh=function(e){g(n,e);var t=w(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return c(n)}(x(Error)),uh=function(){function e(t,n,r,i,a){u(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return c(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,sh.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(nu.min(),i,new vs($o),tl(),ll())}}]),e}(),sh=function(){function e(t,n,r,i,a){u(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return c(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,ll(),ll(),ll())}}]),e}(),ch=c((function e(t,n,r,i){u(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),lh=c((function e(t,n){u(this,e),this.targetId=t,this.Vt=n})),hh=c((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xs.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;u(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),fh=function(){function e(){u(this,e),this.St=0,this.Dt=vh(),this.Ct=xs.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return c(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=ll(),t=ll(),n=ll();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Mo()}})),new sh(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=vh()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),dh=function(){function e(t){u(this,e),this.Gt=t,this.Qt=new Map,this.jt=tl(),this.zt=ph(),this.Wt=new vs($o)}return c(e,[{key:"Ht",value:function(e){var t,n=f(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(u){n.e(u)}finally{n.f()}var i,a=f(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:Mo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(Pc(a))if(0===r){var o=new uu(a.path);this.Yt(n,o,nc.newNoDocument(o,nu.min()))}else Fo(1===r);else{var u=this.ie(n);if(u!==r){var s=this.re(e,u);if(0!==s){this.ee(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=Zl.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,h=void 0===l?0:l,f=r.hashCount,d=void 0===f?0:f;try{a=Es(c).toUint8Array()}catch(e){if(e instanceof bs)return Oo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new ah(a,h,d)}catch(e){return Oo(e instanceof oh?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&Pc(a.target)){var o=new uu(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,nc.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=ll();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new uh(e,n,this.Wt,this.jt,r);return this.jt=tl(),this.zt=ph(),this.Wt=new vs($o),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new fh,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new gs($o),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||Do("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new fh),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function ph(){return new vs(uu.comparator)}function vh(){return new vs(uu.comparator)}var mh={asc:"ASCENDING",desc:"DESCENDING"},yh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gh={and:"AND",or:"OR"},_h=c((function e(t,n){u(this,e),this.databaseId=t,this.useProto3Json=n}));function kh(e,t){return e.useProto3Json||Ou(t)?t:{value:t}}function wh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function bh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function xh(e,t){return wh(e,t.toTimestamp())}function Ih(e){return Fo(!!e),nu.fromTimestamp(function(e){var t=Ss(e);return new tu(t.seconds,t.nanos)}(e))}function Sh(e,t){return function(e){return new iu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Th(e){var t=iu.fromString(e);return Fo(Yh(t)),t}function Eh(e,t){return Sh(e.databaseId,t.path)}function Ch(e,t){var n=Th(t);if(n.get(1)!==e.databaseId.projectId)throw new Uo(zo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Uo(zo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new uu(Dh(n))}function Nh(e,t){return Sh(e.databaseId,t)}function Ah(e){var t=Th(e);return 4===t.length?iu.emptyPath():Dh(t)}function Ph(e){return new iu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Dh(e){return Fo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Rh(e,t,n){return{name:Eh(e,t),fields:n.value.mapValue.fields}}function Oh(e,t,n){var r=Ch(e,t.name),i=Ih(t.updateTime),a=t.createTime?Ih(t.createTime):nu.min(),o=new ec({mapValue:{fields:t.fields}}),u=nc.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Lh(e,t){return"found"in t?function(e,t){Fo(!!t.found),t.found.name,t.found.updateTime;var n=Ch(e,t.found.name),r=Ih(t.found.updateTime),i=t.found.createTime?Ih(t.found.createTime):nu.min(),a=new ec({mapValue:{fields:t.found.fields}});return nc.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Fo(!!t.missing),Fo(!!t.readTime);var n=Ch(e,t.missing),r=Ih(t.readTime);return nc.newNoDocument(n,r)}(e,t):Mo()}function Mh(e,t){var n;if(t instanceof jl)n={update:Rh(e,t.key,t.value)};else if(t instanceof Kl)n={delete:Eh(e,t.key)};else if(t instanceof zl)n={update:Rh(e,t.key,t.data),updateMask:Qh(t.fieldMask)};else{if(!(t instanceof Gl))return Mo();n={verify:Eh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof kl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof wl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof xl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Sl)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Mo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:xh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Mo()}(e,t.precondition)),n}function Fh(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Al.updateTime(Ih(e.updateTime)):void 0!==e.exists?Al.exists(e.exists):Al.none()}(t.currentDocument):Al.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Fo("REQUEST_TIME"===t.setToServerValue),n=new kl;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new wl(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new xl(i)}else"increment"in t?n=new Sl(e,t.increment):Mo();var a=ou.fromServerFormat(t.fieldPath);return new Cl(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Ch(e,t.update.name),a=new ec({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ws(t.map((function(e){return ou.fromServerFormat(e)})))}(t.updateMask);return new zl(i,a,o,n,r)}return new jl(i,a,n,r)}if(t.delete){var u=Ch(e,t.delete);return new Kl(u,n)}if(t.verify){var s=Ch(e,t.verify);return new Gl(s,n)}return Mo()}function jh(e,t){return{documents:[Nh(e,t.path)]}}function zh(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Nh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Nh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Hh(lc.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Kh(e.field),direction:qh(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=kh(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Uh(e){var t=Ah(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Fo(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Vh(e);return t instanceof lc&&dc(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new oc(Gh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Ou(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new rc(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new rc(n,t)}(n.endAt)),Mc(t,i,u,o,s,"F",c,l)}function Vh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Gh(e.unaryFilter.field);return cc.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Gh(e.unaryFilter.field);return cc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Gh(e.unaryFilter.field);return cc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Gh(e.unaryFilter.field);return cc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Mo()}}(e):void 0!==e.fieldFilter?function(e){return cc.create(Gh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Mo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return lc.create(e.compositeFilter.filters.map((function(e){return Vh(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Mo()}}(e.compositeFilter.op))}(e):Mo()}function qh(e){return mh[e]}function Bh(e){return yh[e]}function Wh(e){return gh[e]}function Kh(e){return{fieldPath:e.canonicalString()}}function Gh(e){return ou.fromServerFormat(e.fieldPath)}function Hh(e){return e instanceof cc?function(e){if("=="===e.op){if(Gs(e.value))return{unaryFilter:{field:Kh(e.field),op:"IS_NAN"}};if(Ks(e.value))return{unaryFilter:{field:Kh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Gs(e.value))return{unaryFilter:{field:Kh(e.field),op:"IS_NOT_NAN"}};if(Ks(e.value))return{unaryFilter:{field:Kh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kh(e.field),op:Bh(e.op),value:e.value}}}(e):e instanceof lc?function(e){var t=e.getFilters().map((function(e){return Hh(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Wh(e.op),filters:t}}}(e):Mo()}function Qh(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Yh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Jh=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nu.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:nu.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:xs.EMPTY_BYTE_STRING,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;u(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=c}return c(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Xh=c((function e(t){u(this,e),this.fe=t}));function $h(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Zh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Eh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:wh(e,t.version.toTimestamp()),createTime:wh(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ef(t.version)};else{if(!t.isUnknownDocument())return Mo();r.unknownDocument={path:n.path.toArray(),version:ef(t.version)}}return r}function Zh(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ef(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function tf(e){var t=new tu(e.seconds,e.nanoseconds);return nu.fromTimestamp(t)}function nf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Fh(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Fh(e.fe,t)})),u=tu.fromMillis(t.localWriteTimeMs);return new Hl(t.batchId,u,n,o)}function rf(e){var t,n,r=tf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?tf(e.lastLimboFreeSnapshotVersion):nu.min();return void 0!==e.query.documents?(Fo(1===(n=e.query).documents.length),t=Bc(Fc(Ah(n.documents[0])))):t=function(e){return Bc(Uh(e))}(e.query),new Jh(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,xs.fromBase64String(e.resumeToken))}function af(e,t){var n,r=ef(t.snapshotVersion),i=ef(t.lastLimboFreeSnapshotVersion);n=Pc(t.target)?jh(e.fe,t.target):zh(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Nc(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function of(e){var t=Uh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Kc(t,t.limit,"L"):t}function uf(e,t){return new Yl(t.largestBatchId,Fh(e.fe,t.overlayMutation))}function sf(e,t){var n=t.path.lastSegment();return[e,Fu(t.path.popLast()),n]}function cf(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:ef(r.readTime),documentKey:Fu(r.documentKey.path),largestBatchId:r.largestBatchId}}var lf=function(){function e(){u(this,e)}return c(e,[{key:"getBundleMetadata",value:function(e,t){return hf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:tf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return hf(e).put({bundleId:(n=t).id,createTime:ef(Ih(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return ff(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:of(t.bundledQuery),readTime:tf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return ff(e).put(function(e){return{name:e.name,readTime:ef(Ih(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function hf(e){return hs(e,"bundles")}function ff(e){return hs(e,"namedQueries")}var df=function(){function e(t,n){u(this,e),this.serializer=t,this.userId=n}return c(e,[{key:"getOverlay",value:function(e,t){var n=this;return pf(e).get(sf(this.userId,t)).next((function(e){return e?uf(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=al();return wu.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Yl(t,a);i.push(r.we(e,o))})),wu.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Fu(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(pf(e).J("collectionPathOverlayIndex",i))})),wu.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=al(),a=Fu(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return pf(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=uf(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=al(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pf(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=uf(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return pf(e).put(function(e,t,n){var r=v(sf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Mh(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function pf(e){return hs(e,"documentOverlays")}var vf=function(){function e(){u(this,e)}return c(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Ts(e.integerValue));else if("doubleValue"in e){var n=Ts(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Lu(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Es(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?Ys(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Mo()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),uu.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function mf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function yf(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=mf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}vf.Ve=new vf;var gf=function(){function e(){u(this,e),this.buffer=new Uint8Array(1024),this.position=0}return c(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=yf(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=yf(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),_f=function(){function e(t){u(this,e),this.je=t}return c(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),kf=function(){function e(t){u(this,e),this.je=t}return c(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),wf=function(){function e(){u(this,e),this.je=new gf,this.ze=new _f(this.je),this.We=new kf(this.je)}return c(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),bf=function(){function e(t,n,r,i){u(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return c(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function xf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=If(e.arrayValue,t.arrayValue))?n:0!==(n=If(e.directionalValue,t.directionalValue))?n:uu.comparator(e.documentKey,t.documentKey)}function If(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Sf=function(){function e(t){u(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=f(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return c(e,[{key:"tn",value:function(e){Fo(e.collectionGroup===this.collectionId);var t=cu(e);if(void 0!==t&&!this.en(t))return!1;for(var n=lu(e),r=new Set,i=0,a=0;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){var o=n[i];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Ye.length||!this.sn(this.Ye[a++],u))return!1}return!0}},{key:"en",value:function(e){var t,n=f(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Tf(e){var t,n;if(Fo(e instanceof cc||e instanceof lc),e instanceof cc){if(e instanceof Ic){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return cc.create(e.field,"==",t)})))||[];return lc.create(r,"or")}return e}var i=e.filters.map((function(e){return Tf(e)}));return lc.create(i,e.op)}function Ef(e){if(0===e.getFilters().length)return[];var t=Pf(Tf(e));return Fo(Af(t)),Cf(t)||Nf(t)?[t]:t.getFilters()}function Cf(e){return e instanceof cc}function Nf(e){return e instanceof lc&&dc(e)}function Af(e){return Cf(e)||Nf(e)||function(e){if(e instanceof lc&&fc(e)){var t,n=f(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Cf(r)&&!Nf(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Pf(e){if(Fo(e instanceof cc||e instanceof lc),e instanceof cc)return e;if(1===e.filters.length)return Pf(e.filters[0]);var t=e.filters.map((function(e){return Pf(e)})),n=lc.create(t,e.op);return Af(n=Of(n))?n:(Fo(n instanceof lc),Fo(hc(n)),Fo(n.filters.length>1),n.filters.reduce((function(e,t){return Df(e,t)})))}function Df(e,t){var n;return Fo(e instanceof cc||e instanceof lc),Fo(t instanceof cc||t instanceof lc),n=e instanceof cc?t instanceof cc?function(e,t){return lc.create([e,t],"and")}(e,t):Rf(e,t):t instanceof cc?Rf(t,e):function(e,t){if(Fo(e.filters.length>0&&t.filters.length>0),hc(e)&&hc(t))return yc(e,t.getFilters());var n=fc(e)?e:t,r=fc(e)?t:e,i=n.filters.map((function(e){return Df(e,r)}));return lc.create(i,"or")}(e,t),Of(n)}function Rf(e,t){if(hc(t))return yc(t,e.getFilters());var n=t.filters.map((function(t){return Df(e,t)}));return lc.create(n,"or")}function Of(e){if(Fo(e instanceof cc||e instanceof lc),e instanceof cc)return e;var t=e.getFilters();if(1===t.length)return Of(t[0]);if(pc(e))return e;var n=t.map((function(e){return Of(e)})),r=[];return n.forEach((function(t){t instanceof cc?r.push(t):t instanceof lc&&(t.op===e.op?r.push.apply(r,Ie(t.filters)):r.push(t))})),1===r.length?r[0]:lc.create(r,e.op)}var Lf=function(){function e(){u(this,e),this.rn=new Mf}return c(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),wu.resolve()}},{key:"getCollectionParents",value:function(e,t){return wu.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return wu.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return wu.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return wu.resolve(null)}},{key:"getIndexType",value:function(e,t){return wu.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return wu.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return wu.resolve(null)}},{key:"getMinOffset",value:function(e,t){return wu.resolve(vu.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return wu.resolve(vu.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return wu.resolve()}},{key:"updateIndexEntries",value:function(e,t){return wu.resolve()}}]),e}(),Mf=function(){function e(){u(this,e),this.index={}}return c(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new gs(iu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new gs(iu.comparator)).toArray()}}]),e}(),Ff=new Uint8Array(0),jf=function(){function e(t,n){u(this,e),this.user=t,this.databaseId=n,this.on=new Mf,this.un=new Zc((function(e){return Nc(e)}),(function(e,t){return Ac(e,t)})),this.uid=t.uid||""}return c(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:Fu(i)};return zf(e).put(a)}return wu.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[eu(t),""],!1,!0);return zf(e).j(r).next((function(e){var r,i=f(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Uu(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Vf(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=qf(e);return a.next((function(e){o.put(cf(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Vf(e),r=qf(e),i=Uf(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Uf(e),i=!0,a=new Map;return wu.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=ll(),o=[];return wu.forEach(a,(function(i,a){var u;Do("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Nc(t)));var s=function(e,t){var n=cu(t);if(void 0===n)return null;var r,i=f(Dc(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=f(lu(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=f(Dc(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=f(lu(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Rc(e,o.fieldPath,e.startAt):Oc(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new rc(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=f(lu(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Oc(e,o.fieldPath,e.endAt):Rc(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new rc(r,i)}(a,i),d=n.hn(i,a,l),p=n.hn(i,a,h),v=n.ln(i,a,c),m=n.fn(i.indexId,s,d,l.inclusive,p,h.inclusive,v);return wu.forEach(m,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=uu.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return wu.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Ef(lc.create(e.filters,"and")).map((function(t){return Cc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],h=function(){var s=t?u.dn(t[f/c]):Ff,h=u.wn(e,s,n[f%c],r),d=u._n(e,s,i[f%c],a),p=o.map((function(t){return u.wn(e,s,t,!0)}));l.push.apply(l,Ie(u.createRange(h,d,p)))},f=0;f<s;++f)h();return l}},{key:"wn",value:function(e,t,n,r){var i=new bf(e,uu.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new bf(e,uu.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new Sf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=f(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return wu.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new gs(ou.comparator),r=!1,i=f(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=f(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){i.e(h)}finally{i.f()}var s,c=f(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(h){c.e(h)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new wf,i=f(lu(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.He(a.kind);vf.Ve._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new wf;return vf.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new wf;return vf.Ve._e(qs(this.databaseId,t),n.He(function(e){var t=lu(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new wf);var i,a=0,o=f(lu(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=f(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(this.yn(t,s.fieldPath)&&Ws(c))r=this.pn(r,s,c);else{var d=h.He(s.kind);vf.Ve._e(c,d)}}}catch(p){l.e(p)}finally{l.f()}}}catch(p){o.e(p)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=Ie(e),a=[],o=f(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=f(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=new wf;h.seed(l.Qe()),vf.Ve._e(s,h.He(t.kind)),a.push(h)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof cc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Vf(e),i=qf(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return wu.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new fu(t.sequenceNumber,new vu(tf(t.readTime),new uu(Uu(t.documentKey)),t.largestBatchId)):fu.empty(),r=e.fields.map((function(e){var t=v(e,2),n=t[0],r=t[1];return new hu(ou.fromServerFormat(n),r)}));return new su(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:$o(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Vf(e),a=qf(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return wu.forEach(t,(function(t){return a.put(cf(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return wu.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?wu.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),wu.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?wu.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return Uf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return Uf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=Uf(e),i=new gs(xf);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new bf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new gs(xf),r=this.mn(t,e);if(null==r)return n;var i=cu(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Ws(a)){var o,u=f(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new bf(t.indexId,e.key,this.dn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new bf(t.indexId,e.key,Ff,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;Do("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=ks(a),s=ks(o);u||s;){var c=!1,l=!1;if(u&&s){var h=n(u,s);h<0?l=!0:h>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=ks(o)):l?(i(u),u=ks(a)):(u=ks(a),s=ks(o))}}(r,i,xf,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),wu.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return qf(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return xf(e,t)})).filter((function(e,t,n){return!t||0!==xf(e,n[t-1])}));var r=[];r.push(e);var i,a=f(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=xf(o,e),s=xf(o,t);if(0===u)r[0]=e.Je();else if(u>0&&s<0)r.push(o),r.push(o.Je());else if(s>0)break}}catch(p){a.e(p)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var h=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Ff,[]],d=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Ff,[]];c.push(IDBKeyRange.bound(h,d))}return c}},{key:"bn",value:function(e,t){return xf(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Bf)}},{key:"getMinOffset",value:function(e,t){var n=this;return wu.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||Mo()}))})).next(Bf)}}]),e}();function zf(e){return hs(e,"collectionParents")}function Uf(e){return hs(e,"indexEntries")}function Vf(e){return hs(e,"indexConfiguration")}function qf(e){return hs(e,"indexState")}function Bf(e){Fo(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;mu(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new vu(t.readTime,t.documentKey,n)}var Wf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kf=function(){function e(t,n,r){u(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return c(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Gf(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Fo(1===u)})));var c,l=[],h=f(n.mutations);try{for(h.s();!(c=h.n()).done;){var d=c.value,p=Bu(t,d.key.path,n.batchId);a.push(i.delete(p)),l.push(d.key)}}catch(v){h.e(v)}finally{h.f()}return wu.waitFor(a).next((function(){return l}))}function Hf(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Mo();t=e.noDocument}return JSON.stringify(t).length}Kf.DEFAULT_COLLECTION_PERCENTILE=10,Kf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kf.DEFAULT=new Kf(41943040,Kf.DEFAULT_COLLECTION_PERCENTILE,Kf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kf.DISABLED=new Kf(-1,0,0);var Qf=function(){function e(t,n,r,i){u(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return c(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jf(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Xf(e),o=Jf(e);return o.add({}).next((function(u){Fo("number"==typeof u);var s,c=new Hl(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Mh(e.fe,t)})),i=n.mutations.map((function(t){return Mh(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),h=[],d=new gs((function(e,t){return $o(e.canonicalString(),t.canonicalString())})),p=f(r);try{for(p.s();!(s=p.n()).done;){var v=s.value,m=Bu(i.userId,v.key.path,u);d=d.add(v.key.path.popLast()),h.push(o.put(l)),h.push(a.put(m,Wu))}}catch(y){p.e(y)}finally{p.f()}return d.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[u]=c.keys()})),wu.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Jf(e).get(t).next((function(e){return e?(Fo(e.userId===n.userId),nf(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?wu.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Jf(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Fo(t.batchId>=r),a=nf(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Jf(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jf(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return nf(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=qu(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Xf(e).X({range:i},(function(r,i,o){var u=v(r,3),s=u[0],c=u[1],l=u[2],h=Uu(c);if(s===n.userId&&t.path.isEqual(h))return Jf(e).get(l).next((function(e){if(!e)throw Mo();Fo(e.userId===n.userId),a.push(nf(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new gs($o),i=[];return t.forEach((function(t){var a=qu(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Xf(e).X({range:o},(function(e,i,a){var o=v(e,3),u=o[0],s=o[1],c=o[2],l=Uu(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),wu.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=qu(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new gs($o);return Xf(e).X({range:o},(function(e,t,a){var o=v(e,3),s=o[0],c=o[1],l=o[2],h=Uu(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Dn(e,u)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Jf(e).get(t).next((function(e){if(null===e)throw Mo();Fo(e.userId===n.userId),r.push(nf(n.serializer,e))})))})),wu.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Gf(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),wu.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return wu.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Xf(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Uu(e[1]);i.push(a)}else r.done()})).next((function(){Fo(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Yf(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return $f(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return Fo(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Yf(e,t,n){var r=qu(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Xf(e).X({range:a,Y:!0},(function(e,n,r){var a=v(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Jf(e){return hs(e,"mutations")}function Xf(e){return hs(e,"documentMutations")}function $f(e){return hs(e,"mutationQueues")}var Zf=function(){function e(t){u(this,e),this.Nn=t}return c(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),ed=function(){function e(t,n){u(this,e),this.referenceDelegate=t,this.serializer=n}return c(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new Zf(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return nu.fromTimestamp(new tu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return td(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return Fo(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return td(e).X((function(o,u){var s=rf(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return wu.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return td(e).X((function(e,n){var r=rf(n);t(r)}))}},{key:"$n",value:function(e){return nd(e).get("targetGlobalKey").next((function(e){return Fo(null!==e),e}))}},{key:"On",value:function(e,t){return nd(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return td(e).put(af(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Nc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return td(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=rf(n);Ac(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=rd(e);return t.forEach((function(t){var o=Fu(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),wu.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=rd(e);return wu.forEach(t,(function(t){var a=Fu(t.path);return wu.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=rd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=rd(e),i=ll();return r.X({range:n,Y:!0},(function(e,t,n){var r=Uu(e[1]),a=new uu(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Fu(t.path),r=IDBKeyRange.bound([n],[eu(n)],!1,!0),i=0;return rd(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=v(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return td(e).get(t).next((function(e){return e?rf(e):null}))}}]),e}();function td(e){return hs(e,"targets")}function nd(e){return hs(e,"targetGlobal")}function rd(e){return hs(e,"targetDocuments")}function id(e,t){var n=v(e,2),r=n[0],i=n[1],a=v(t,2),o=a[0],u=a[1],s=$o(r,o);return 0===s?$o(i,u):s}var ad=function(){function e(t){u(this,e),this.Ln=t,this.buffer=new gs(id),this.qn=0}return c(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();id(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),od=function(){function e(t,n,r){u(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return c(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;Do("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Tu(e.t0)){e.next=12;break}Do("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,_u(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),ud=function(){function e(t,n){u(this,e),this.jn=t,this.params=n}return c(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return wu.resolve(Ru.ct);var r=new ad(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Do("LruGarbageCollector","Garbage collection skipped; disabled"),wu.resolve(Wf)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Do("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Wf):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Do("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Po()<=Pe.DEBUG&&Do("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),wu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function sd(e,t){return new ud(e,t)}var cd=function(){function e(t,n){u(this,e),this.db=t,this.garbageCollector=sd(this,n)}return c(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return ld(e,n)}},{key:"removeReference",value:function(e,t,n){return ld(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return ld(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return $f(e).Z((function(r){return Yf(e,r,t).next((function(e){return e&&(n=!0),wu.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,nu.min()),rd(e).delete([0,Fu(o.path)])}))}));i.push(s)}})).next((function(){return wu.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return ld(e,t)}},{key:"Yn",value:function(e,t){var n,r=rd(e),i=Ru.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=v(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Ru.ct&&t(new uu(Uu(n)),i),i=s,n=u):i=Ru.ct})).next((function(){i!==Ru.ct&&t(new uu(Uu(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function ld(e,t){return rd(e).put(function(e,t){return{targetId:0,path:Fu(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var hd=function(){function e(){u(this,e),this.changes=new Zc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return c(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,nc.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?wu.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),fd=function(){function e(t){u(this,e),this.serializer=t}return c(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return md(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return md(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Zh(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=nc.newInvalidDocument(t);return md(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(yd(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:nc.newInvalidDocument(t)};return md(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(yd(t))},(function(e,i){r={document:n.ts(t,i),size:Hf(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=tl();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=tl(),i=new vs(uu.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,Hf(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return wu.resolve();var r=new gs(_d);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(yd(r.first()),yd(r.last())),a=r.getIterator(),o=a.getNext();return md(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=uu.fromSegments([].concat(Ie(t.prefixPath),[t.collectionGroup,t.documentId]));o&&_d(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(yd(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Zh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return md(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=tl(),o=f(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.ts(uu.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Yc(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=tl(),o=gd(t,n),u=gd(t,vu.max());return md(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.ts(uu.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new pd(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return vd(e).get("remoteDocumentGlobalKey").next((function(e){return Fo(!!e),e}))}},{key:"Zn",value:function(e,t){return vd(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Oh(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=uu.fromSegments(t.noDocument.path),i=tf(t.noDocument.readTime);n=nc.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Mo();var a=uu.fromSegments(t.unknownDocument.path),o=tf(t.unknownDocument.version);n=nc.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new tu(e[0],e[1]);return nu.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(nu.min()))return n}return nc.newInvalidDocument(e)}}]),e}();function dd(e){return new fd(e)}var pd=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new Zc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return c(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new gs((function(e,t){return $o(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.us.get(a);if(n.push(t.os.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=$h(t.os.serializer,o);i=i.add(a.path.popLast());var c=Hf(s);r+=c-u.size,n.push(t.os.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=$h(t.os.serializer,o.convertToNoDocument(nu.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),wu.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(hd);function vd(e){return hs(e,"remoteDocumentGlobal")}function md(e){return hs(e,"remoteDocumentsV14")}function yd(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function gd(e,t){var n=t.documentKey.path.toArray();return[e,Zh(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function _d(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=$o(n[a],r[a]))return i;return(i=$o(n.length,r.length))||((i=$o(n[n.length-2],r[r.length-2]))||$o(n[n.length-1],r[r.length-1]))}var kd=c((function e(t,n){u(this,e),this.overlayedDocument=t,this.mutatedFields=n})),wd=function(){function e(t,n,r,i){u(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return c(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Ll(r.mutation,e,ws.empty(),tu.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,ll()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ll(),i=al();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=rl();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=al();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,ll())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=tl(),a=ul(),o=ul();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof zl)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Ll(o.mutation,t,o.mutation.getFieldMask(),tu.now())):a.set(t.key,ws.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new kd(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=ul(),i=new vs((function(e,t){return e-t})),a=ll();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=f(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||ws.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||ll()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=ol();c.forEach((function(e){if(!a.has(e)){var n=Rl(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return wu.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return uu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Vc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):wu.resolve(al()),u=-1,s=a;return o.next((function(t){return wu.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?wu.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,ll())})).next((function(e){return{batchId:u,changes:il(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new uu(t)).next((function(e){var t=rl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=rl();return this.indexManager.getCollectionParents(e,i).next((function(o){return wu.forEach(o,(function(o){var u=function(e,t){return new Lc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,nc.newInvalidDocument(r)))}));var n=rl();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Ll(a.mutation,i,ws.empty(),tu.now()),Yc(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),bd=function(){function e(t){u(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return c(e,[{key:"getBundleMetadata",value:function(e,t){return wu.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Ih(n.createTime)}),wu.resolve()}},{key:"getNamedQuery",value:function(e,t){return wu.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:of(e.bundledQuery),readTime:Ih(e.readTime)}}(t)),wu.resolve()}}]),e}(),xd=function(){function e(){u(this,e),this.overlays=new vs(uu.comparator),this.ls=new Map}return c(e,[{key:"getOverlay",value:function(e,t){return wu.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=al();return wu.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),wu.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),wu.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=al(),i=t.length+1,a=new uu(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return wu.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new vs((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=al(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=al(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return wu.resolve(s)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Yl(t,n));var a=this.ls.get(t);void 0===a&&(a=ll(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),Id=function(){function e(){u(this,e),this.fs=new gs(Sd.ds),this.ws=new gs(Sd._s)}return c(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Sd(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new Sd(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new uu(new iu([])),r=new Sd(n,e),i=new Sd(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new uu(new iu([])),n=new Sd(t,e),r=new Sd(t,e+1),i=ll();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Sd(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Sd=function(){function e(t,n){u(this,e),this.key=t,this.As=n}return c(e,null,[{key:"ds",value:function(e,t){return uu.comparator(e.key,t.key)||$o(e.As,t.As)}},{key:"_s",value:function(e,t){return $o(e.As,t.As)||uu.comparator(e.key,t.key)}}]),e}(),Td=function(){function e(t,n){u(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new gs(Sd.ds)}return c(e,[{key:"checkEmpty",value:function(e){return wu.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Hl(i,t,n,r);this.mutationQueue.push(a);var o,u=f(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new Sd(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return wu.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return wu.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return wu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return wu.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return wu.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Sd(t,0),i=new Sd(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),wu.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new gs($o);return t.forEach((function(e){var t=new Sd(e,0),i=new Sd(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),wu.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;uu.isDocumentKey(i)||(i=i.child(""));var a=new Sd(new uu(i),0),o=new gs($o);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),wu.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Fo(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return wu.forEach(t.mutations,(function(i){var a=new Sd(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Sd(t,0),r=this.Rs.firstAfterOrEqual(n);return wu.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,wu.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Ed=function(){function e(t){u(this,e),this.Ds=t,this.docs=new vs(uu.comparator),this.size=0}return c(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return wu.resolve(n?n.document.mutableCopy():nc.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=tl();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():nc.newInvalidDocument(e))})),wu.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=tl(),a=t.path,o=new uu(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||mu(pu(l),n)<=0||(r.has(l.key)||Yc(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return wu.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Mo()}},{key:"Cs",value:function(e,t){return wu.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Cd(this)}},{key:"getSize",value:function(e){return wu.resolve(this.size)}}]),e}(),Cd=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this)).os=e,r}return c(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),wu.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(hd),Nd=function(){function e(t){u(this,e),this.persistence=t,this.xs=new Zc((function(e){return Nc(e)}),Ac),this.lastRemoteSnapshotVersion=nu.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Id,this.targetCount=0,this.Ms=Zf.kn()}return c(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),wu.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return wu.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return wu.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),wu.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),wu.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new Zf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,wu.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),wu.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,wu.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),wu.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return wu.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return wu.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),wu.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),wu.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),wu.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return wu.resolve(n)}},{key:"containsKey",value:function(e,t){return wu.resolve(this.ks.containsKey(t))}}]),e}(),Ad=function(){function e(t,n){var r=this;u(this,e),this.$s={},this.overlays={},this.Os=new Ru(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new Nd(this),this.indexManager=new Lf,this.remoteDocumentCache=new Ed((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new Xh(n),this.qs=new bd(this.serializer)}return c(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new xd,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new Td(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Do("MemoryPersistence","Starting transaction:",e);var i=new Pd(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return wu.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Pd=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return c(n)}(gu),Dd=function(){function e(t){u(this,e),this.persistence=t,this.Qs=new Id,this.js=null}return c(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw Mo()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),wu.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),wu.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),wu.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wu.forEach(this.Ws,(function(r){var i=uu.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,nu.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return wu.or([function(){return wu.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),Rd=function(){function e(t){u(this,e),this.serializer=t}return c(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new bu("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Vu,{unique:!0}),e.createObjectStore("documentMutations")}(e),Od(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=wu.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Od(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:nu.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Vu,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return wu.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:ns});t.createIndex("collectionPathOverlayIndex",rs,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",is,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ku});t.createIndex("documentKeyIndex",Gu),t.createIndex("collectionGroupIndex",Hu)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:$u}).createIndex("sequenceNumberIndex",Zu,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:es}).createIndex("documentKeyIndex",ts,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=Hf(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return wu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return wu.forEach(r,(function(r){Fo(r.userId===n.userId);var i=nf(t.serializer,r);return Gf(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new iu(n),o=function(e){return[0,Fu(e)]}(a);r.push(t.get(o).next((function(n){return n?wu.resolve():function(n){return t.put({targetId:0,path:Fu(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return wu.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Xu});var n=t.store("collectionParents"),r=new Mf,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Fu(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new iu(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=v(e,3),r=(n[0],n[1]),a=(n[2],Uu(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=rf(r),a=af(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new uu(iu.fromString(i.document.name).popFirst(5)):i.noDocument?uu.fromSegments(i.noDocument.path):i.unknownDocument?uu.fromSegments(i.unknownDocument.path):Mo()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return wu.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=dd(this.serializer),a=new Ad(Dd.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:ll();nf(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),wu.forEach(r,(function(e,r){var o=new Co(r),u=df.de(n.serializer,o),s=a.getIndexManager(o),c=Qf.de(o,n.serializer,s,a.referenceDelegate);return new wd(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new ls(t,Ru.ct),e).next()}))}))}}]),e}();function Od(e){e.createObjectStore("targetDocuments",{keyPath:Yu}).createIndex("documentTargetsIndex",Ju,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qu,{unique:!0}),e.createObjectStore("targetGlobal")}var Ld="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Md=function(){function e(t,n,r,i,a,o,s,c,l,h){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(u(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=s,this.ri=l,this.oi=h,this.ui=f,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new Uo(zo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cd(this,i),this.di=n+"main",this.serializer=new Xh(c),this.wi=new xu(this.di,this.ui,new Rd(this.serializer)),this.Bs=new ed(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dd(this.serializer),this.qs=new lf,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===h&&Ro("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return c(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Uo(zo.FAILED_PRECONDITION,Ld);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new Ru(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=Te(be().mark((function n(r){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=Te(be().mark((function t(n){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return jd(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(Tu(t))return Do("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Do("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return Fd(e).get("owner").next((function(e){return wu.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return jd(e).delete(this.clientId)}},{key:"bi",value:function(){var e=Te(be().mark((function e(){var t,n,r,i,a=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=hs(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return wu.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=f(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?wu.resolve(!0):Fd(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new Uo(zo.FAILED_PRECONDITION,Ld);return!1}}return!(!t.networkEnabled||!t.inForeground)||jd(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Do("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Te(be().mark((function e(){var t=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new ls(e,Ru.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return jd(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return Qf.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new jf(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return df.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Do("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ui)?cs:14===i?ss:13===i?us:12===i?os:11===i?as:void Mo();return this.wi.runTransaction(e,o,u,(function(i){return a=new ls(i,r.Os?r.Os.next():Ru.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw Ro("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new Uo(zo.FAILED_PRECONDITION,yu);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return Fd(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Uo(zo.FAILED_PRECONDITION,Ld)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fd(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=Fd(e);return n.get("owner").next((function(e){return t.Ri(e)?(Do("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):wu.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Ro("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Do("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ro("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ro("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return xu.D()}}]),e}();function Fd(e){return hs(e,"owner")}function jd(e){return hs(e,"clientMetadata")}function zd(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Ud=function(){function e(t,n,r,i){u(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return c(e,null,[{key:"Li",value:function(t,n){var r,i=ll(),a=ll(),o=f(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Vd=function(){function e(){u(this,e),this.qi=!1}return c(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(jc(t))return wu.resolve(null);var r=Bc(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Kc(t,null,"F"),r=Bc(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=ll.apply(void 0,Ie(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,Kc(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return jc(t)||r.isEqual(nu.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(Po()<=Pe.DEBUG&&Do("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qc(t)),i.Wi(e,o,t,du(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new gs(Xc(e));return t.forEach((function(t,r){Yc(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return Po()<=Pe.DEBUG&&Do("QueryEngine","Using full collection scan to execute query:",Qc(t)),this.Ui.getDocumentsMatchingQuery(e,t,vu.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),qd=function(){function e(t,n,r,i){u(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new vs($o),this.Yi=new Zc((function(e){return Nc(e)}),Ac),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return c(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wd(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function Bd(e,t,n,r){return new qd(e,t,n,r)}function Wd(e,t){return Kd.apply(this,arguments)}function Kd(){return Kd=Te(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jo(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=ll(),s=f(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,h=f(c.mutations);try{for(h.s();!(l=h.n()).done;){var d=l.value;u=u.add(d.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){s.e(k)}finally{s.f()}var p,v=f(n);try{for(v.s();!(p=v.n()).done;){var m=p.value;o.push(m.batchId);var y,g=f(m.mutations);try{for(g.s();!(y=g.n()).done;){var _=y.value;u=u.add(_.key)}}catch(k){g.e(k)}finally{g.f()}}}catch(k){v.e(k)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Kd.apply(this,arguments)}function Gd(e,t){var n=jo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=wu.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Fo(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=ll(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Hd(e){var t=jo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function Qd(e,t){var n=jo(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(xs.EMPTY_BYTE_STRING,nu.min()).withLastLimboFreeSnapshotVersion(nu.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var u=tl(),s=ll();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Yd(e,a,t.documentUpdates).next((function(e){u=e.nr,s=e.sr}))),!r.isEqual(nu.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return wu.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function Yd(e,t,n){var r=ll(),i=ll();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=tl();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(nu.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Do("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function Jd(e,t){var n=jo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Xd(e,t){var n=jo(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,wu.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new Jh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function $d(e,t,n){return Zd.apply(this,arguments)}function Zd(){return Zd=Te(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=jo(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Tu(e.t1)){e.next=12;break}throw e.t1;case 12:Do("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Zd.apply(this,arguments)}function ep(e,t,n){var r=jo(e),i=nu.min(),a=ll();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=jo(e),i=r.Yi.get(n);return void 0!==i?wu.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Bc(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:nu.min(),n?a:ll())})).next((function(e){return rp(r,Jc(t),e),{documents:e,ir:a}}))}))}function tp(e,t){var n=jo(e),r=jo(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function np(e,t){var n=jo(e),r=n.Xi.get(t)||nu.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,du(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return rp(n,t,e),e}))}function rp(e,t,n){var r=e.Xi.get(t)||nu.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function ip(e,t,n,r){return ap.apply(this,arguments)}function ap(){return ap=Te(be().mark((function e(t,n,r,i){var a,o,u,s,c,l,h,d,p,v;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=jo(t),o=ll(),u=tl(),s=f(r);try{for(s.s();!(c=s.n()).done;)l=c.value,h=n.rr(l.metadata.name),l.document&&(o=o.add(h)),(d=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),u=u.insert(h,d)}catch(m){s.e(m)}finally{s.f()}return p=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,Xd(a,function(e){return Bc(Fc(iu.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Yd(e,p,u).next((function(t){return p.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),ap.apply(this,arguments)}function op(e,t){return up.apply(this,arguments)}function up(){return up=Te(be().mark((function e(t,n){var r,i,a,o=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:ll(),e.next=3,Xd(t,Bc(of(n.bundledQuery)));case 3:return i=e.sent,a=jo(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Ih(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(xs.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),up.apply(this,arguments)}function sp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function cp(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function lp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var hp=function(){function e(t,n,r,i){u(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return c(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Uo(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Ro("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),fp=function(){function e(t,n,r){u(this,e),this.targetId=t,this.state=n,this.error=r}return c(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Uo(i.error.code,i.error.message))),a?new e(t,i.state,r):(Ro("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),dp=function(){function e(t,n){u(this,e),this.clientId=t,this.activeTargetIds=n}return c(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=fl(),o=0;i&&o<r.activeTargetIds.length;++o)i=Mu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ro("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),pp=function(){function e(t,n){u(this,e),this.clientId=t,this.onlineState=n}return c(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ro("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),vp=function(){function e(){u(this,e),this.activeTargetIds=fl()}return c(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),mp=function(){function e(t,n,r,i,a){u(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new vs($o),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=sp(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new vp),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return c(e,[{key:"start",value:function(){var e=Te(be().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h,d=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=f(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(sp(this.persistenceKey,i)))&&(o=dp.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(u=this.storage.getItem(this.vr))&&(s=this.br(u))&&this.Vr(s),c=f(this.yr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.mr(h)}catch(p){c.e(p)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(lp(this.persistenceKey,e));if(n){var r=fp.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(lp(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Do("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Do("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Do("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Do("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void Ro("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(Te(be().mark((function e(){var r,i,a,o,u,s,c;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(u));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}s=function(e){var t=Ru.ct;if(null!=e)try{var n=JSON.parse(e);Fo("number"==typeof n),t=n}catch(e){Ro("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Ru.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new hp(this.currentUser,e,t,n),i=cp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=cp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=lp(this.persistenceKey,e),i=new fp(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return dp.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return hp.ar(new Co(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return fp.ar(r,t)}},{key:"br",value:function(e){return pp.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:Do("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Wr(o,u).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=fl();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),yp=function(){function e(){u(this,e),this.Hr=new vp,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return c(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new vp,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),gp=function(){function e(){u(this,e)}return c(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),_p=function(){function e(){var t=this;u(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return c(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){Do("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=f(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){Do("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=f(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),kp=null;function wp(){return null===kp?kp=268435456+Math.round(2147483648*Math.random()):kp++,"0x"+kp.toString(16)}var bp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},xp=function(){function e(t){u(this,e),this.ro=t.ro,this.oo=t.oo}return c(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),Ip="WebChannelConnection",Sp=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return c(n,[{key:"Ao",value:function(e,t,n,r){var i=wp();return new Promise((function(a,o){var u=new Io;u.setWithCredentials(!0),u.listenOnce(_o.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case go.NO_ERROR:var t=u.getResponseJson();Do(Ip,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case go.TIMEOUT:Do(Ip,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Uo(zo.DEADLINE_EXCEEDED,"Request time out"));break;case go.HTTP_ERROR:var n=u.getStatus();if(Do(Ip,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(zo).indexOf(t)>=0?t:zo.UNKNOWN}(s.status);o(new Uo(c,s.message))}else o(new Uo(zo.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Uo(zo.UNAVAILABLE,"Connection failed."));break;default:Mo()}}finally{Do(Ip,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Do(Ip,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=wp(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=mo(),o=yo(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new bo({})),this.Eo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");Do(Ip,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),h=!1,f=!1,d=new xp({ro:function(t){f?Do(Ip,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Do(Ip,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),h=!0),Do(Ip,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,xo.EventType.OPEN,(function(){f||Do(Ip,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,xo.EventType.CLOSE,(function(){f||(f=!0,Do(Ip,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,xo.EventType.ERROR,(function(t){f||(f=!0,Oo(Ip,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new Uo(zo.UNAVAILABLE,"The operation could not be completed")))})),p(l,xo.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];Fo(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Do(Ip,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Bl[e];if(void 0!==t)return $l(t)}(u),c=o.message;void 0===s&&(s=zo.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),f=!0,d.wo(new Uo(s,c)),l.close()}else Do(Ip,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,ko.STAT_EVENT,(function(t){t.stat===wo.PROXY?Do(Ip,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===wo.NOPROXY&&Do(Ip,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){u(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return c(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=wp(),o=this.To(e,t);Do("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.Eo(u,r,i),this.Ao(e,o,u,n).then((function(t){return Do("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Oo("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+No,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=bp[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function Tp(){return"undefined"!=typeof window?window:null}function Ep(){return"undefined"!=typeof document?document:null}function Cp(e){return new _h(e,!0)}var Np=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;u(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return c(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Do("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),Ap=function(){function e(t,n,r,i,a,o,s,c){u(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Np(t,n)}return c(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===zo.RESOURCE_EXHAUSTED?(Ro(n.toString()),Ro("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===zo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=v(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new Uo(zo.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(Te(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return Do("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(Do("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Pp=function(e){g(n,e);var t=w(n);function n(e,r,i,a,o,s){var c;return u(this,n),(c=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,c}return c(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Mo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Fo(void 0===t||"string"==typeof t),xs.fromBase64String(t||"")):(Fo(void 0===t||t instanceof Uint8Array),xs.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?zo.UNKNOWN:$l(e.code);return new Uo(t,e.message||"")}(o);n=new hh(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Ch(e,s.document.name),l=Ih(s.document.updateTime),h=s.document.createTime?Ih(s.document.createTime):nu.min(),f=new ec({mapValue:{fields:s.document.fields}}),d=nc.newFoundDocument(c,l,h,f),p=s.targetIds||[],v=s.removedTargetIds||[];n=new ch(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Ch(e,m.document),g=m.readTime?Ih(m.readTime):nu.min(),_=nc.newNoDocument(y,g),k=m.removedTargetIds||[];n=new ch([],k,_.key,_)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Ch(e,w.document),x=w.removedTargetIds||[];n=new ch([],x,b,null)}else{if(!("filter"in t))return Mo();t.filter;var I=t.filter;I.targetId;var S=I.count,T=void 0===S?0:S,E=I.unchangedNames,C=new Jl(T,E),N=I.targetId;n=new lh(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return nu.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?nu.min():t.readTime?Ih(t.readTime):nu.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=Ph(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Pc(r)?{documents:jh(e,r)}:{query:zh(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=bh(e,t.resumeToken);var i=kh(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(nu.min())>0){n.readTime=wh(e,t.snapshotVersion.toTimestamp());var a=kh(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Mo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=Ph(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(Ap),Dp=function(e){g(n,e);var t=w(n);function n(e,r,i,a,o,s){var c;return u(this,n),(c=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,c.ru=!1,c}return c(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,nn(_(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(Fo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(Fo(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Ih(e.updateTime):Ih(t);return n.isEqual(nu.min())&&(n=Ih(t)),new Nl(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Ih(e.commitTime);return this.listener.cu(n,t)}return Fo(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=Ph(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Mh(t.serializer,e)}))};this.Wo(n)}}]),n}(Ap),Rp=function(e){g(n,e);var t=w(n);function n(e,r,i,a){var o;return u(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return c(n,[{key:"fu",value:function(){if(this.lu)throw new Uo(zo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=v(i,2),o=a[0],u=a[1];return r.connection.Io(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===zo.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Uo(zo.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=v(a,2),u=o[0],s=o[1];return i.connection.vo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===zo.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Uo(zo.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return c((function e(){u(this,e)}))}());var Op=function(){function e(t,n){u(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return c(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Ro(t),this.mu=!1):Do("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),Lp=c((function e(t,n,r,i,a){var o=this;u(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Gp(o),!e.t0){e.next=5;break}return Do("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=jo(t)).vu.add(4),e.next=4,jp(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,Mp(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new Op(r,i)}));function Mp(e){return Fp.apply(this,arguments)}function Fp(){return(Fp=Te(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Gp(t)){e.next=18;break}n=f(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function jp(e){return zp.apply(this,arguments)}function zp(){return(zp=Te(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=f(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function Up(e,t){var n=jo(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Kp(n)?Wp(n):wv(n).Ko()&&qp(n,t))}function Vp(e,t){var n=jo(e),r=wv(n);n.Au.delete(t),r.Ko()&&Bp(n,t),0===n.Au.size&&(r.Ko()?r.jo():Gp(n)&&n.bu.set("Unknown"))}function qp(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(nu.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}wv(e).su(t)}function Bp(e,t){e.Vu.qt(t),wv(e).iu(t)}function Wp(e){e.Vu=new dh({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),wv(e).start(),e.bu.gu()}function Kp(e){return Gp(e)&&!wv(e).Uo()&&e.Au.size>0}function Gp(e){return 0===jo(e).vu.size}function Hp(e){e.Vu=void 0}function Qp(e){return Yp.apply(this,arguments)}function Yp(){return(Yp=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){qp(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jp(e,t){return Xp.apply(this,arguments)}function Xp(){return(Xp=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Hp(t),Kp(t)?(t.bu.Iu(n),Wp(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $p(e,t,n){return Zp.apply(this,arguments)}function Zp(){return Zp=Te(be().mark((function e(t,n,r){var i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof hh&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Te(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=f(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Do("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,ev(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ch?t.Vu.Ht(n):n instanceof lh?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(nu.min())){e.next=29;break}return e.prev=14,e.next=17,Hd(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(xs.EMPTY_BYTE_STRING,r.snapshotVersion)),Bp(e,t);var i=new Jh(r.target,t,n,r.sequenceNumber);qp(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Do("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,ev(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Zp.apply(this,arguments)}function ev(e,t,n){return tv.apply(this,arguments)}function tv(){return(tv=Te(be().mark((function e(t,n,r){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Tu(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,jp(t);case 5:t.bu.set("Offline"),r||(r=function(){return Hd(t.localStore)}),t.asyncQueue.enqueueRetryable(Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Do("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,Mp(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nv(e,t){return t().catch((function(n){return ev(e,n,t)}))}function rv(e){return iv.apply(this,arguments)}function iv(){return(iv=Te(be().mark((function e(t){var n,r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=jo(t),r=bv(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!av(n)){e.next=19;break}return e.prev=3,e.next=6,Jd(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,ov(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,ev(n,e.t0);case 17:e.next=2;break;case 19:uv(n)&&sv(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function av(e){return Gp(e)&&e.Eu.length<10}function ov(e,t){e.Eu.push(t);var n=bv(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function uv(e){return Gp(e)&&!bv(e).Uo()&&e.Eu.length>0}function sv(e){bv(e).start()}function cv(e){return lv.apply(this,arguments)}function lv(){return(lv=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bv(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hv(e){return fv.apply(this,arguments)}function fv(){return(fv=Te(be().mark((function e(t){var n,r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=bv(t),r=f(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dv(e,t,n){return pv.apply(this,arguments)}function pv(){return(pv=Te(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=Ql.from(i,n,r),e.next=3,nv(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,rv(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vv(e,t){return mv.apply(this,arguments)}function mv(){return mv=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&bv(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=Te(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Xl(i=n.code)||i===zo.ABORTED){e.next=7;break}return r=t.Eu.shift(),bv(t).Qo(),e.next=5,nv(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,rv(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:uv(t)&&sv(t);case 5:case"end":return e.stop()}}),e)}))),mv.apply(this,arguments)}function yv(e,t){return gv.apply(this,arguments)}function gv(){return(gv=Te(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=jo(t)).asyncQueue.verifyOperationInProgress(),Do("RemoteStore","RemoteStore received new credentials"),i=Gp(r),r.vu.add(3),e.next=6,jp(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,Mp(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _v(e,t){return kv.apply(this,arguments)}function kv(){return(kv=Te(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=jo(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,Mp(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,jp(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wv(e){return e.Su||(e.Su=function(e,t,n){var r=jo(e);return r.fu(),new Pp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Qp.bind(null,e),ao:Jp.bind(null,e),nu:$p.bind(null,e)}),e.Ru.push(function(){var t=Te(be().mark((function t(n){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),Kp(e)?Wp(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:Hp(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function bv(e){return e.Du||(e.Du=function(e,t,n){var r=jo(e);return r.fu(),new Dp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:cv.bind(null,e),ao:vv.bind(null,e),au:hv.bind(null,e),cu:dv.bind(null,e)}),e.Ru.push(function(){var t=Te(be().mark((function t(n){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,rv(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(Do("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var xv=function(){function e(t,n,r,i,a){u(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Vo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return c(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Uo(zo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Iv(e,t){if(Ro("AsyncQueue","".concat(t,": ").concat(e)),Tu(e))return new Uo(zo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Sv=function(){function e(t){u(this,e),this.comparator=t?function(e,n){return t(e,n)||uu.comparator(e.key,n.key)}:function(e,t){return uu.comparator(e.key,t.key)},this.keyedMap=rl(),this.sortedSet=new vs(this.comparator)}return c(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Tv=function(){function e(){u(this,e),this.Cu=new vs(uu.comparator)}return c(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Mo():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Ev=function(){function e(t,n,r,i,a,o,s,c,l){u(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=c,this.hasCachedResults=l}return c(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Sv.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Cv=c((function e(){u(this,e),this.Nu=void 0,this.listeners=[]})),Nv=c((function e(){u(this,e),this.queries=new Zc((function(e){return Hc(e)}),Gc),this.onlineState="Unknown",this.ku=new Set}));function Av(e,t){return Pv.apply(this,arguments)}function Pv(){return Pv=Te(be().mark((function e(t,n){var r,i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=jo(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Cv),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Iv(e.t0,"Initialization of query '".concat(Qc(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&Mv(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Pv.apply(this,arguments)}function Dv(e,t){return Rv.apply(this,arguments)}function Rv(){return Rv=Te(be().mark((function e(t,n){var r,i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=jo(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Rv.apply(this,arguments)}function Ov(e,t){var n,r=jo(e),i=!1,a=f(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=f(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}s.Nu=o}}}catch(h){a.e(h)}finally{a.f()}i&&Mv(r)}function Lv(e,t,n){var r=jo(e),i=r.queries.get(t);if(i){var a,o=f(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Mv(e){e.ku.forEach((function(e){e.next()}))}var Fv=function(){function e(t,n,r){u(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return c(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=f(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Ev(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=Ev.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),jv=function(){function e(t,n){u(this,e),this.Gu=t,this.byteLength=n}return c(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),zv=function(){function e(t){u(this,e),this.serializer=t}return c(e,[{key:"rr",value:function(e){return Ch(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?Oh(this.serializer,e.document,!1):nc.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return Ih(e)}}]),e}(),Uv=function(){function e(t,n,r){u(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Vv(t)}return c(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=iu.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new zv(this.serializer),i=f(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.rr(a.metadata.name),s=f(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||ll()).add(u);n.set(c,l)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Te(be().mark((function e(){var t,n,r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ip(this.localStore,new zv(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=f(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,op(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Vv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var qv=c((function e(t){u(this,e),this.key=t})),Bv=c((function e(t){u(this,e),this.key=t})),Wv=function(){function e(t,n){u(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ll(),this.mutatedKeys=ll(),this.tc=Xc(t),this.ec=new Sv(this.tc)}return c(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new Tv,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Yc(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.rc(l,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.tc(h,s)>0||c&&n.tc(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:u,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mo()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],u=0===this.Zu.size&&this.current?1:0,s=u!==this.Xu;return this.Xu=u,0!==a.length||s?{snapshot:new Ev(this.query,e.ec,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Tv,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=ll(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new Bv(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new qv(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=ll();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return Ev.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),Kv=c((function e(t,n,r){u(this,e),this.query=t,this.targetId=n,this.view=r})),Gv=c((function e(t){u(this,e),this.key=t,this.fc=!1})),Hv=function(){function e(t,n,r,i,a,o){u(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Zc((function(e){return Hc(e)}),Gc),this._c=new Map,this.mc=new Set,this.gc=new vs(uu.comparator),this.yc=new Map,this.Ic=new Id,this.Tc={},this.Ec=new Map,this.Ac=Zf.Mn(),this.onlineState="Unknown",this.vc=void 0}return c(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function Qv(e,t){return Yv.apply(this,arguments)}function Yv(){return Yv=Te(be().mark((function e(t,n){var r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vm(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,Xd(r.localStore,Bc(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,Jv(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&Up(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Yv.apply(this,arguments)}function Jv(e,t,n,r,i){return Xv.apply(this,arguments)}function Xv(){return Xv=Te(be().mark((function e(t,n,r,i,a){var o,u,s,c,l,h;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=Te(be().mark((function e(t,n,r,i){var a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,ep(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(ym(t,n.targetId,u.cc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,ep(t.localStore,n,!0);case 3:return o=e.sent,u=new Wv(n,o.ir),s=u.sc(o.documents),c=sh.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),ym(t,r,l.cc),h=new Kv(n,r,u),e.abrupt("return",(t.wc.set(n,h),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Xv.apply(this,arguments)}function $v(e,t){return Zv.apply(this,arguments)}function Zv(){return(Zv=Te(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=jo(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!Gc(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,$d(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Vp(r.remoteStore,i.targetId),vm(r,i.targetId)})).catch(_u);case 9:e.next=14;break;case 11:return vm(r,i.targetId),e.next=14,$d(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function em(e,t,n){return tm.apply(this,arguments)}function tm(){return tm=Te(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qm(t),e.prev=1,e.next=4,function(e,t){var n,r,i=jo(e),a=tu.now(),o=t.reduce((function(e,t){return e.add(t.key)}),ll());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=tl(),s=ll();return i.Zi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=f(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Ml(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new zl(c.key,l,tc(l.value.mapValue),Al.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:il(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new vs($o)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,km(i,a.changes);case 9:return e.next=11,rv(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Iv(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),tm.apply(this,arguments)}function nm(e,t){return rm.apply(this,arguments)}function rm(){return(rm=Te(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jo(t),e.prev=1,e.next=4,Qd(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(Fo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?Fo(n.fc):e.removedDocuments.size>0&&(Fo(n.fc),n.fc=!1))})),e.next=8,km(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,_u(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function im(e,t,n){var r=jo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=jo(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=f(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Mv(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function am(e,t,n){return om.apply(this,arguments)}function om(){return om=Te(be().mark((function e(t,n,r){var i,a,o,u,s,c;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=jo(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new vs(uu.comparator)).insert(o,nc.newNoDocument(o,nu.min())),s=ll().add(o),c=new uh(nu.min(),new Map,new vs($o),u,s),e.next=9,nm(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),_m(i),e.next=16;break;case 14:return e.next=16,$d(i.localStore,n,!1).then((function(){return vm(i,n,r)})).catch(_u);case 16:case"end":return e.stop()}}),e)}))),om.apply(this,arguments)}function um(e,t){return sm.apply(this,arguments)}function sm(){return(sm=Te(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jo(t),i=n.batch.batchId,e.prev=1,e.next=4,Gd(r.localStore,n);case 4:return a=e.sent,pm(r,i,null),dm(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,km(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,_u(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function cm(e,t,n){return lm.apply(this,arguments)}function lm(){return(lm=Te(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jo(t),e.prev=1,e.next=4,function(e,t){var n=jo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Fo(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,pm(i,n,r),dm(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,km(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,_u(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function hm(e,t){return fm.apply(this,arguments)}function fm(){return(fm=Te(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gp((r=jo(t)).remoteStore)||Do("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=jo(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Iv(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function dm(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function pm(e,t,n){var r=jo(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function vm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=f(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||mm(e,t)}))}function mm(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(Vp(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),_m(e))}function ym(e,t,n){var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof qv?(e.Ic.addReference(a.key,t),gm(e,a)):a instanceof Bv?(Do("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||mm(e,a.key)):Mo()}}catch(o){i.e(o)}finally{i.f()}}function gm(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Do("SyncEngine","New document in limbo: "+n),e.mc.add(r),_m(e))}function _m(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new uu(iu.fromString(t)),r=e.Ac.next();e.yc.set(r,new Gv(n)),e.gc=e.gc.insert(n,r),Up(e.remoteStore,new Jh(Bc(Fc(n.path)),r,"TargetPurposeLimboResolution",Ru.ct))}}function km(e,t,n){return wm.apply(this,arguments)}function wm(){return wm=Te(be().mark((function e(t,n,r){var i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=jo(t),a=[],o=[],u=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){u.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Ud.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.dc.nu(a),e.next=9,function(){var e=Te(be().mark((function e(t,n){var r,i,a,o,u,s,c,l;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jo(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return wu.forEach(n,(function(t){return wu.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return wu.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Tu(e.t0)){e.next=10;break}throw e.t0;case 10:Do("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=f(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ji.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),wm.apply(this,arguments)}function bm(e,t){return xm.apply(this,arguments)}function xm(){return(xm=Te(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=jo(t)).currentUser.isEqual(n)){e.next=11;break}return Do("SyncEngine","User change. New user:",n.toKey()),e.next=5,Wd(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new Uo(zo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,km(r,i.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Im(e,t){var n=jo(e),r=n.yc.get(t);if(r&&r.fc)return ll().add(r.key);var i=ll(),a=n._c.get(t);if(!a)return i;var o,u=f(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.wc.get(s);i=i.unionWith(c.view.nc)}}catch(l){u.e(l)}finally{u.f()}return i}function Sm(e,t){return Tm.apply(this,arguments)}function Tm(){return(Tm=Te(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jo(t),e.next=3,ep(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&ym(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Em(e,t){return Cm.apply(this,arguments)}function Cm(){return(Cm=Te(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jo(t),e.abrupt("return",np(r.localStore,n).then((function(e){return km(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nm(e,t,n,r){return Am.apply(this,arguments)}function Am(){return Am=Te(be().mark((function e(t,n,r,i){var a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=jo(t),e.next=3,function(e,t){var n=jo(e),r=jo(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):wu.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,rv(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(pm(a,n,i||null),dm(a,n),function(e,t){jo(jo(e).mutationQueue).Cn(t)}(a.localStore,n)):Mo();case 11:return e.next=13,km(a,o);case 13:e.next=16;break;case 15:Do("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Am.apply(this,arguments)}function Pm(e,t){return Dm.apply(this,arguments)}function Dm(){return(Dm=Te(be().mark((function e(t,n){var r,i,a,o,u,s,c,l;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vm(r=jo(t)),qm(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Rm(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,_v(r.remoteStore,!0);case 9:o=f(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Up(r.remoteStore,s)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return vm(r,t),$d(r.localStore,t,!0)})),Vp(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Rm(r,c);case 21:return function(e){var t=jo(e);t.yc.forEach((function(e,n){Vp(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new vs(uu.comparator)}(r),r.vc=!1,e.next=25,_v(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rm(e,t,n){return Om.apply(this,arguments)}function Om(){return Om=Te(be().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,d,p,v,m,y,g;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=jo(t),a=[],o=[],u=f(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(h=i._c.get(c))||0===h.length){e.next=34;break}return e.next=11,Xd(i.localStore,Bc(h[0]));case 11:l=e.sent,d=f(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,m=i.wc.get(v),e.next=20,Sm(i,m);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,tp(i.localStore,c);case 36:return g=e.sent,e.next=39,Xd(i.localStore,g);case 39:return l=e.sent,e.next=42,Jv(i,Lm(g),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Om.apply(this,arguments)}function Lm(e){return Mc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Mm(e){var t=jo(e);return jo(jo(t.localStore).persistence).$i()}function Fm(e,t,n,r){return jm.apply(this,arguments)}function jm(){return jm=Te(be().mark((function e(t,n,r,i){var a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=jo(t)).vc){e.next=3;break}return e.abrupt("return",void Do("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,np(a.localStore,Jc(o[0]));case 10:return u=e.sent,s=uh.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,xs.EMPTY_BYTE_STRING),e.next=14,km(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,$d(a.localStore,n,!0);case 17:return vm(a,n,i),e.abrupt("break",20);case 19:Mo();case 20:case"end":return e.stop()}}),e)}))),jm.apply(this,arguments)}function zm(e,t,n){return Um.apply(this,arguments)}function Um(){return(Um=Te(be().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,d;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Vm(t)).vc){e.next=45;break}a=f(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i._c.has(u)){e.next=10;break}return Do("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,tp(i.localStore,u);case 12:return s=e.sent,e.next=15,Xd(i.localStore,s);case 15:return c=e.sent,e.next=18,Jv(i,Lm(s),c.targetId,!1,c.resumeToken);case 18:Up(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=f(r),e.prev=30,d=be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,$d(i.localStore,t,!1).then((function(){Vp(i.remoteStore,t),vm(i,t)})).catch(_u);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function Vm(e){var t=jo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=nm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Im.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=am.bind(null,t),t.dc.nu=Ov.bind(null,t.eventManager),t.dc.Pc=Lv.bind(null,t.eventManager),t}function qm(e){var t=jo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=um.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=cm.bind(null,t),t}function Bm(e,t,n){var r=jo(e);(function(){var e=Te(be().mark((function e(t,n,r){var i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=jo(e),r=Ih(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Vv(i)),a=new Uv(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,km(t,s.Ju,void 0);case 31:return e.next=33,function(e,t){var n=jo(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Oo("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Wm=function(){function e(){u(this,e),this.synchronizeTabs=!1}return c(e,[{key:"initialize",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Cp(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Bd(this.persistence,new Vd,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Ad(Dd.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new yp}},{key:"terminate",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Km=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return c(n,[{key:"initialize",value:function(){var e=Te(be().mark((function e(t){var r=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(_(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,qm(this.Vc.syncEngine);case 6:return e.next=8,rv(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Bd(this.persistence,new Vd,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new od(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Du(t,this.persistence);return new Pu(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=zd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Kf.withCacheSize(this.cacheSizeBytes):Kf.DEFAULT;return new Md(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Tp(),Ep(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new yp}}]),n}(Wm),Gm=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return c(n,[{key:"initialize",value:function(){var e=Te(be().mark((function e(t){var r,i=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(_(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof mp,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:Nm.bind(null,r),zr:Fm.bind(null,r),Wr:zm.bind(null,r),$i:Mm.bind(null,r),Qr:Em.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pm(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=Tp();if(!mp.D(t))throw new Uo(zo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=zd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new mp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Km),Hm=function(){function e(){u(this,e)}return c(e,[{key:"initialize",value:function(){var e=Te(be().mark((function e(t,n){var r=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return im(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=bm.bind(null,this.syncEngine),e.next=12,_v(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Nv}},{key:"createDatastore",value:function(e){var t,n=Cp(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Sp(t));return function(e,t,n,r){return new Rp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return im(o.syncEngine,e,0)},a=_p.D()?new _p:new gp,new Lp(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Hv(e,t,n,r,i,a);return o&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=jo(t),Do("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,jp(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Qm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Te(be().mark((function r(){var i;return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var Ym=function(){function e(t){u(this,e),this.observer=t,this.muted=!1}return c(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):Ro("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Jm=function(){function e(t,n){var r=this;u(this,e),this.Cc=t,this.serializer=n,this.metadata=new Vo,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return c(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=Te(be().mark((function e(){var t,n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new jv(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=Te(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=Te(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Xm=function(){function e(t){u(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return c(e,[{key:"lookup",value:function(){var e=Te(be().mark((function e(t){var n,r=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Uo(zo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Te(be().mark((function e(t,n){var r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jo(t),i=Ph(r.serializer)+"/documents",a={documents:n.map((function(e){return Eh(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Lh(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Fo(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Kl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Te(be().mark((function e(){var t,n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=uu.fromPath(t);n.mutations.push(new Gl(r,n.precondition(r)))})),e.next=7,function(){var e=Te(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jo(t),i=Ph(r.serializer)+"/documents",a={writes:n.map((function(e){return Mh(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Mo();t=nu.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Uo(zo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(nu.min())?Al.exists(!1):Al.updateTime(t):Al.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(nu.min()))throw new Uo(zo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Al.updateTime(t)}return Al.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),$m=function(){function e(t,n,r,i,a){u(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new Np(this.asyncQueue,"transaction_retry")}return c(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(Te(be().mark((function t(){var n,r;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Xm(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!Ou(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Xl(t)}return!1}}]),e}(),Zm=function(){function e(t,n,r,i){var a=this;u(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Co.UNAUTHENTICATED,this.clientId=Xo.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Do("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Do("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return c(e,[{key:"getConfiguration",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Uo(zo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Vo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Te(be().mark((function n(){var r;return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Iv(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function ey(e,t){return ty.apply(this,arguments)}function ty(){return ty=Te(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Do("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Wd(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),ty.apply(this,arguments)}function ny(e,t){return ry.apply(this,arguments)}function ry(){return(ry=Te(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,ay(t);case 3:return r=e.sent,Do("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return yv(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return yv(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iy(e){return"FirebaseError"===e.name?e.code===zo.FAILED_PRECONDITION||e.code===zo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function ay(e){return oy.apply(this,arguments)}function oy(){return(oy=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Do("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,ey(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),iy(n=e.t0)){e.next=13;break}throw n;case 13:return Oo("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,ey(t,new Wm);case 16:e.next=21;break;case 18:return Do("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,ey(t,new Wm);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function uy(e){return sy.apply(this,arguments)}function sy(){return(sy=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Do("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,ny(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Do("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,ny(t,new Hm);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cy(e){return ay(e).then((function(e){return e.persistence}))}function ly(e){return ay(e).then((function(e){return e.localStore}))}function hy(e){return uy(e).then((function(e){return e.remoteStore}))}function fy(e){return uy(e).then((function(e){return e.syncEngine}))}function dy(e){return uy(e).then((function(e){return e.datastore}))}function py(e){return vy.apply(this,arguments)}function vy(){return(vy=Te(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uy(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Qv.bind(null,n.syncEngine),r.onUnlisten=$v.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function my(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Vo;return e.asyncQueue.enqueueAndForget(Te(be().mark((function i(){return be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Ym({next:function(a){t.enqueueAndForget((function(){return Dv(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Uo(zo.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Uo(zo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Fv(Fc(n.path),a,{includeMetadataChanges:!0,Ku:!0});return Av(e,o)},i.next=3,py(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function yy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Vo;return e.asyncQueue.enqueueAndForget(Te(be().mark((function i(){return be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Ym({next:function(n){t.enqueueAndForget((function(){return Dv(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Uo(zo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Fv(n,a,{includeMetadataChanges:!0,Ku:!0});return Av(e,o)},i.next=3,py(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function gy(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var _y=new Map;function ky(e,t,n){if(!n)throw new Uo(zo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function wy(e,t,n,r){if(!0===t&&!0===r)throw new Uo(zo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function by(e){if(!uu.isDocumentKey(e))throw new Uo(zo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function xy(e){if(uu.isDocumentKey(e))throw new Uo(zo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Iy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Mo()}function Sy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Uo(zo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Iy(e);throw new Uo(zo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Ty(e,t){if(t<=0)throw new Uo(zo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Ey=function(){function e(t){var n,r;if(u(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Uo(zo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Uo(zo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}wy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gy(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Uo(zo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Uo(zo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Uo(zo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return c(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),Cy=function(){function e(t,n,r,i){u(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ey({}),this._settingsFrozen=!1}return c(e,[{key:"app",get:function(){if(!this._app)throw new Uo(zo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Uo(zo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ey(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Bo;switch(e.type){case"firstParty":return new Ho(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Uo(zo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=_y.get(e);t&&(Do("ComponentProvider","Removing Datastore"),_y.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Ny(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Sy(e,Cy))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=Co.MOCK_USER;else{u=q(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Uo(zo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Co(c)}e._authCredentials=new Wo(new qo(u,s))}}var Ay=function(){function e(t,n,r){u(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return c(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Dy(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Py=function(){function e(t,n,r){u(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return c(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Dy=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this,e,r,Fc(i)))._path=i,a.type="collection",a}return c(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Ay(this.firestore,null,new uu(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Py);function Ry(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=we(e),ky("collection","path",t),e instanceof Cy){var a=iu.fromString.apply(iu,[t].concat(r));return xy(a),new Dy(e,null,a)}if(!(e instanceof Ay||e instanceof Dy))throw new Uo(zo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(iu.fromString.apply(iu,[t].concat(r)));return xy(o),new Dy(e.firestore,null,o)}function Oy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=we(e),1===arguments.length&&(t=Xo.A()),ky("doc","path",t),e instanceof Cy){var a=iu.fromString.apply(iu,[t].concat(r));return by(a),new Ay(e,null,new uu(a))}if(!(e instanceof Ay||e instanceof Dy))throw new Uo(zo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(iu.fromString.apply(iu,[t].concat(r)));return by(o),new Ay(e.firestore,e instanceof Dy?e.converter:null,new uu(o))}function Ly(e,t){return e=we(e),t=we(t),(e instanceof Ay||e instanceof Dy)&&(t instanceof Ay||t instanceof Dy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function My(e,t){return e=we(e),t=we(t),e instanceof Py&&t instanceof Py&&e.firestore===t.firestore&&Gc(e._query,t._query)&&e.converter===t.converter}var Fy=function(){function e(){var t=this;u(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Np(this,"async_queue_retry"),this.Xc=function(){var e=Ep();e&&Do("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=Ep();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return c(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=Ep();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new Vo;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=Te(be().mark((function e(){var t=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Tu(e.t0)){e.next=12;break}throw e.t0;case 12:Do("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ro("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=xv.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&Mo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=Te(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=f(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=f(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function jy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=f(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var zy=function(){function e(){u(this,e),this._progressObserver={},this._taskCompletionResolver=new Vo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return c(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Uy=function(e){g(n,e);var t=w(n);function n(e,r,i,a){var o;return u(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Fy,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return c(n,[{key:"_terminate",value:function(){return this._firestoreClient||By(this),this._firestoreClient.terminate()}}]),n}(Cy);function Vy(e,t){var n="string"==typeof e?e:t||"(default)",r=yt("object"==typeof e?e:St(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=function(e){var t=j(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}}("firestore");i&&Ny.apply(void 0,[r].concat(Ie(i)))}return r}function qy(e){return e._firestoreClient||By(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function By(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Ps(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,gy(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Zm(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function Wy(e,t,n){var r=new Vo;return e.asyncQueue.enqueue(Te(be().mark((function i(){var a;return be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,ey(e,n);case 3:return i.next=5,ny(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),iy(a=i.t0)){i.next=13;break}throw a;case 13:Oo("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Ky(e){return function(e){return e.asyncQueue.enqueue(Te(be().mark((function t(){var n,r;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cy(e);case 2:return n=t.sent,t.next=5,hy(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=jo(e);return t.vu.delete(0),Mp(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(qy(e=Sy(e,Uy)))}function Gy(e){return function(e){return e.asyncQueue.enqueue(Te(be().mark((function t(){var n,r;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cy(e);case 2:return n=t.sent,t.next=5,hy(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=jo(t)).vu.add(0),e.next=4,jp(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(qy(e=Sy(e,Uy)))}function Hy(e,t){var n=qy(e=Sy(e,Uy)),r=new zy;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Jm(e,t)}(function(e,t){if(e instanceof Uint8Array)return Qm(e,t);if(e instanceof ArrayBuffer)return Qm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?th().encode(e):e),t)}(n,Cp(t));e.asyncQueue.enqueueAndForget(Te(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Bm,t.next=3,fy(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Qy(e,t){return function(e,t){return e.asyncQueue.enqueue(Te(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=jo(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,ly(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(qy(e=Sy(e,Uy)),t).then((function(t){return t?new Py(e,null,t.query):null}))}function Yy(e){if(e._initialized||e._terminated)throw new Uo(zo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Jy=function(){function e(t){u(this,e),this._byteString=t}return c(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(xs.fromBase64String(t))}catch(t){throw new Uo(zo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(xs.fromUint8Array(t))}}]),e}(),Xy=function(){function e(){u(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Uo(zo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ou(n)}return c(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var $y=c((function e(t){u(this,e),this._methodName=t})),Zy=function(){function e(t,n){if(u(this,e),!isFinite(t)||t<-90||t>90)throw new Uo(zo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Uo(zo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return c(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return $o(this._lat,e._lat)||$o(this._long,e._long)}}]),e}(),eg=/^__.*__$/,tg=function(){function e(t,n,r){u(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return c(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new zl(e,this.data,this.fieldMask,t,this.fieldTransforms):new jl(e,this.data,t,this.fieldTransforms)}}]),e}(),ng=function(){function e(t,n,r){u(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return c(e,[{key:"toMutation",value:function(e,t){return new zl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function rg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mo()}}var ig=function(){function e(t,n,r,i,a,o){u(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return c(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return Ig(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(rg(this.ca)&&eg.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),ag=function(){function e(t,n,r){u(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Cp(t)}return c(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ig({ca:e,methodName:t,ga:n,path:ou.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function og(e){var t=e._freezeSettings(),n=Cp(e._databaseId);return new ag(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ug(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);kg("Data must be an object, but it was:",o,r);var u,s,c=gg(r,o);if(a.merge)u=new ws(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,h=[],d=f(a.mergeFields);try{for(d.s();!(l=d.n()).done;){var p=wg(t,l.value,n);if(!o.contains(p))throw new Uo(zo.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Sg(h,p)||h.push(p)}}catch(v){d.e(v)}finally{d.f()}u=new ws(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new tg(new ec(c),u,s)}var sg=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}($y);function cg(e,t,n){return new ig({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var lg=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n,[{key:"_toFieldTransform",value:function(e){return new Cl(e.path,new kl)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}($y),hg=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e)).pa=r,i}return c(n,[{key:"_toFieldTransform",value:function(e){var t=cg(this,e,!0),n=this.pa.map((function(e){return yg(e,t)})),r=new wl(n);return new Cl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}($y),fg=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e)).pa=r,i}return c(n,[{key:"_toFieldTransform",value:function(e){var t=cg(this,e,!0),n=this.pa.map((function(e){return yg(e,t)})),r=new xl(n);return new Cl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}($y),dg=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e)).Ia=r,i}return c(n,[{key:"_toFieldTransform",value:function(e){var t=new Sl(e.serializer,vl(e.serializer,this.Ia));return new Cl(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}($y);function pg(e,t,n,r){var i=e.ya(1,t,n);kg("Data must be an object, but it was:",i,r);var a=[],o=ec.empty();ds(r,(function(e,r){var u=xg(t,e,n);r=we(r);var s=i.da(u);if(r instanceof sg)a.push(u);else{var c=yg(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new ws(a);return new ng(o,u,i.fieldTransforms)}function vg(e,t,n,r,i,a){var o=e.ya(1,t,n),u=[wg(t,r,n)],s=[i];if(a.length%2!=0)throw new Uo(zo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(wg(t,a[c])),s.push(a[c+1]);for(var l=[],h=ec.empty(),f=u.length-1;f>=0;--f)if(!Sg(l,u[f])){var d=u[f],p=s[f];p=we(p);var v=o.da(d);if(p instanceof sg)l.push(d);else{var m=yg(p,v);null!=m&&(l.push(d),h.set(d,m))}}var y=new ws(l);return new ng(h,y,o.fieldTransforms)}function mg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return yg(n,e.ya(r?4:3,t))}function yg(e,t){if(_g(e=we(e)))return kg("Unsupported field value:",t,e),gg(e,t);if(e instanceof $y)return function(e,t){if(!rg(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=f(e);try{for(a.s();!(n=a.n()).done;){var o=yg(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=we(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return vl(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=tu.fromDate(e);return{timestampValue:wh(t.serializer,n)}}if(e instanceof tu){var r=new tu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:wh(t.serializer,r)}}if(e instanceof Zy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Jy)return{bytesValue:bh(t.serializer,e._byteString)};if(e instanceof Ay){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Sh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Iy(e)))}(e,t)}function gg(e,t){var n={};return ps(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ds(e,(function(e,r){var i=yg(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function _g(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof tu||e instanceof Zy||e instanceof Jy||e instanceof Ay||e instanceof $y)}function kg(e,t,n){if(!_g(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Iy(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function wg(e,t,n){if((t=we(t))instanceof Xy)return t._internalPath;if("string"==typeof t)return xg(e,t);throw Ig("Field path arguments must be of type string or ",e,!1,void 0,n)}var bg=new RegExp("[~\\*/\\[\\]]");function xg(e,t,n){if(t.search(bg)>=0)throw Ig("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return b(Xy,Ie(t.split(".")))._internalPath}catch(r){throw Ig("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ig(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Uo(zo.INVALID_ARGUMENT,u+e+s)}function Sg(e,t){return e.some((function(e){return e.isEqual(t)}))}var Tg=function(){function e(t,n,r,i,a){u(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return c(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Ay(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Eg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Cg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Eg=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n,[{key:"data",value:function(){return nn(_(n.prototype),"data",this).call(this)}}]),n}(Tg);function Cg(e,t){return"string"==typeof t?xg(e,t):t instanceof Xy?t._internalPath:t._delegate._internalPath}function Ng(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Uo(zo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ag=c((function e(){u(this,e)})),Pg=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n)}(Ag);function Dg(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Ag&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Og})).length,n=e.filter((function(e){return e instanceof Rg})).length;if(t>1||t>0&&n>0)throw new Uo(zo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=f(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var Rg=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return c(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Gg(e._query,t),new Py(e.firestore,e.converter,Wc(e._query,t))}},{key:"_parse",value:function(e){var t=og(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Uo(zo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Kg(o,a);var s,c=[],l=f(o);try{for(l.s();!(s=l.n()).done;){var h=s.value;c.push(Wg(r,e,h))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=Wg(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Kg(o,a),u=mg(n,"where",o,"in"===a||"not-in"===a);return cc.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Pg);var Og=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return c(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:lc.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=f(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Gg(r,a),r=Wc(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Py(e.firestore,e.converter,Wc(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ag);var Lg=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return c(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Uo(zo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Uo(zo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new oc(t,n);return function(e,t){if(null===zc(e)){var n=Uc(e);null!==n&&Hg(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Py(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Lc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Pg);var Mg=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return c(n,[{key:"_apply",value:function(e){return new Py(e.firestore,e.converter,Kc(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Pg);var Fg=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return c(n,[{key:"_apply",value:function(e){var t=Bg(e,this.type,this._docOrFields,this._inclusive);return new Py(e.firestore,e.converter,function(e,t){return new Lc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Pg);function jg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Fg._create("startAt",t,!0)}function zg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Fg._create("startAfter",t,!1)}var Ug=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return c(n,[{key:"_apply",value:function(e){var t=Bg(e,this.type,this._docOrFields,this._inclusive);return new Py(e.firestore,e.converter,function(e,t){return new Lc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Pg);function Vg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ug._create("endBefore",t,!1)}function qg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ug._create("endAt",t,!0)}function Bg(e,t,n,r){if(n[0]=we(n[0]),n[0]instanceof Tg)return function(e,t,n,r,i){if(!r)throw new Uo(zo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=f(qc(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(qs(t,r.key));else{var c=r.data.field(s.field);if(Cs(c))throw new Uo(zo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Uo(zo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new rc(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=og(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Uo(zo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Uo(zo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Vc(e)&&-1!==c.indexOf("/"))throw new Uo(zo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(iu.fromString(c));if(!uu.isDocumentKey(l))throw new Uo(zo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new uu(l);u.push(qs(t,h))}else{var f=mg(n,r,c);u.push(f)}}return new rc(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Wg(e,t,n){if("string"==typeof(n=we(n))){if(""===n)throw new Uo(zo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vc(t)&&-1!==n.indexOf("/"))throw new Uo(zo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(iu.fromString(n));if(!uu.isDocumentKey(r))throw new Uo(zo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return qs(e,new uu(r))}if(n instanceof Ay)return qs(e,n._key);throw new Uo(zo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Iy(n),"."))}function Kg(e,t){if(!Array.isArray(e)||0===e.length)throw new Uo(zo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Gg(e,t){if(t.isInequality()){var n=Uc(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Uo(zo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=zc(e);null!==i&&Hg(e,r,i)}var a=function(e,t){var n,r=f(e);try{for(r.s();!(n=r.n()).done;){var i,a=f(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Uo(zo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Uo(zo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Hg(e,t,n){if(!n.isEqual(t))throw new Uo(zo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Qg=function(){function e(){u(this,e)}return c(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ts(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Mo()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return ds(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new Zy(Ts(e.latitude),Ts(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Ns(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(As(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ss(e);return new tu(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=iu.fromString(e);Fo(Yh(n));var r=new Ds(n.get(1),n.get(3)),i=new uu(n.popFirst(5));return r.isEqual(t)||Ro("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Yg(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Jg=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this)).firestore=e,r}return c(n,[{key:"convertBytes",value:function(e){return new Jy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ay(this.firestore,null,t)}}]),n}(Qg);var Xg=function(){function e(t,n){u(this,e),this.hasPendingWrites=t,this.fromCache=n}return c(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),$g=function(e){g(n,e);var t=w(n);function n(e,r,i,a,o,s){var c;return u(this,n),(c=t.call(this,e,r,i,a,s))._firestore=e,c._firestoreImpl=e,c.metadata=o,c}return c(n,[{key:"exists",value:function(){return nn(_(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Zg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Cg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Tg),Zg=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nn(_(n.prototype),"data",this).call(this,e)}}]),n}($g),e_=function(){function e(t,n,r,i){u(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xg(i.hasPendingWrites,i.fromCache),this.query=r}return c(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Zg(n._firestore,n._userDataWriter,r.key,r,new Xg(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Uo(zo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Zg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Xg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Zg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Xg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:t_(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function t_(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mo()}}function n_(e,t){return e instanceof $g&&t instanceof $g?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof e_&&t instanceof e_&&e._firestore===t._firestore&&My(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var r_=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this)).firestore=e,r}return c(n,[{key:"convertBytes",value:function(e){return new Jy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ay(this.firestore,null,t)}}]),n}(Qg);function i_(e){e=Sy(e,Ay);var t=Sy(e.firestore,Uy),n=qy(t),r=new r_(t);return function(e,t){var n=new Vo;return e.asyncQueue.enqueueAndForget(Te(be().mark((function r(){return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Te(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=jo(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Uo(zo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Iv(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ly(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new $g(t,r,e._key,n,new Xg(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function a_(e){e=Sy(e,Py);var t=Sy(e.firestore,Uy),n=qy(t),r=new r_(t);return Ng(e._query),yy(n,e._query).then((function(n){return new e_(t,r,e,n)}))}function o_(e){e=Sy(e,Py);var t=Sy(e.firestore,Uy),n=qy(t),r=new r_(t);return function(e,t){var n=new Vo;return e.asyncQueue.enqueueAndForget(Te(be().mark((function r(){return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Te(be().mark((function e(t,n,r){var i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ep(t,n,!0);case 3:i=e.sent,a=new Wv(n,i.ir),o=a.sc(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Iv(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ly(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new e_(t,r,e,n)}))}function u_(e,t,n){e=Sy(e,Ay);var r=Sy(e.firestore,Uy),i=Yg(e.converter,t,n);return f_(r,[ug(og(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Al.none())])}function s_(e,t,n){e=Sy(e,Ay);for(var r=Sy(e.firestore,Uy),i=og(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return f_(r,[("string"==typeof(t=we(t))||t instanceof Xy?vg(i,"updateDoc",e._key,t,n,o):pg(i,"updateDoc",e._key,t)).toMutation(e._key,Al.exists(!0))])}function c_(e,t){var n=Sy(e.firestore,Uy),r=Oy(e),i=Yg(e.converter,t);return f_(n,[ug(og(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Al.exists(!1))]).then((function(){return r}))}function l_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=we(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||jy(n[s])||(u=n[s],s++);var c,l,h,f={includeMetadataChanges:u.includeMetadataChanges};if(jy(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Ay)l=Sy(e.firestore,Uy),h=Fc(e._key.path),c={next:function(t){n[s]&&n[s](d_(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Sy(e,Py);l=Sy(p.firestore,Uy),h=p._query;var v=new r_(l);c={next:function(e){n[s]&&n[s](new e_(l,v,p,e))},error:n[s+1],complete:n[s+2]},Ng(e._query)}return function(e,t,n,r){var i=new Ym(r),a=new Fv(t,i,n);return e.asyncQueue.enqueueAndForget(Te(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Av,t.next=3,py(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(Te(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Dv,t.next=3,py(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(qy(l),h,f,c)}function h_(e,t){return function(e,t){var n=new Ym(t);return e.asyncQueue.enqueueAndForget(Te(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){jo(e).ku.add(t),t.next()},t.next=3,py(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(Te(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){jo(e).ku.delete(t)},t.next=3,py(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(qy(e=Sy(e,Uy)),jy(t)?t:{next:t})}function f_(e,t){return function(e,t){var n=new Vo;return e.asyncQueue.enqueueAndForget(Te(be().mark((function r(){return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=em,r.next=3,fy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(qy(e),t)}function d_(e,t,n){var r=n.docs.get(t._key),i=new r_(e);return new $g(e,i,t._key,r,new Xg(n.hasPendingWrites,n.fromCache),t.converter)}var p_={maxAttempts:5},v_=function(){function e(t,n){u(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=og(t)}return c(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=m_(e,this._firestore),i=Yg(r.converter,t,n),a=ug(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Al.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=m_(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=we(t))||t instanceof Xy?vg(this._dataReader,"WriteBatch.update",i._key,t,n,o):pg(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Al.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=m_(e,this._firestore);return this._mutations=this._mutations.concat(new Kl(t._key,Al.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Uo(zo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function m_(e,t){if((e=we(e)).firestore!==t)throw new Uo(zo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var y_=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,r))._firestore=e,i}return c(n,[{key:"get",value:function(e){var t=this,r=m_(e,this._firestore),i=new r_(this._firestore);return nn(_(n.prototype),"get",this).call(this,e).then((function(e){return new $g(t._firestore,i,r._key,e._document,new Xg(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){u(this,e),this._firestore=t,this._transaction=n,this._dataReader=og(t)}return c(e,[{key:"get",value:function(e){var t=this,n=m_(e,this._firestore),r=new Jg(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Mo();var i=e[0];if(i.isFoundDocument())return new Tg(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Tg(t._firestore,r,n._key,null,n.converter);throw Mo()}))}},{key:"set",value:function(e,t,n){var r=m_(e,this._firestore),i=Yg(r.converter,t,n),a=ug(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=m_(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=we(t))||t instanceof Xy?vg(this._dataReader,"Transaction.update",i._key,t,n,o):pg(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=m_(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function g_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hg("arrayUnion",t)}function __(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fg("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){No=e}(xt),mt(new Ee("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new Uy(new Ko(e.getProvider("auth-internal")),new Yo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Uo(zo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ds(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Nt(Eo,"3.13.0",e),Nt(Eo,"3.13.0","esm2017")}();function k_(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Uo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function w_(){if("undefined"===typeof Uint8Array)throw new Uo("unimplemented","Uint8Arrays are not available in this environment.")}function b_(){if("undefined"==typeof atob)throw new Uo("unimplemented","Blobs are unavailable in Firestore in this environment.")}var x_=function(){function e(t){u(this,e),this._delegate=t}return c(e,[{key:"toBase64",value:function(){return b_(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return w_(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return b_(),new e(Jy.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return w_(),new e(Jy.fromUint8Array(t))}}]),e}();function I_(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=f(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var S_=function(){function e(){u(this,e)}return c(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Yy(e=Sy(e,Uy));var n=qy(e);if(n._uninitializedComponentsProvider)throw new Uo(zo.FAILED_PRECONDITION,"SDK cache is already specified.");Oo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new Hm;return Wy(n,i,new Km(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Yy(e=Sy(e,Uy));var t=qy(e);if(t._uninitializedComponentsProvider)throw new Uo(zo.FAILED_PRECONDITION,"SDK cache is already specified.");Oo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new Hm;return Wy(t,r,new Gm(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Uo(zo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Vo;return e._queue.enqueueAndForgetEvenWhileRestricted(Te(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xu.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,xu.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(zd(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),T_=function(){function e(t,n,r){var i=this;u(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Ds||(this._appCompat=t)}return c(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Oo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ny(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Ky(this._delegate)}},{key:"disableNetwork",value:function(){return Gy(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&wy("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new Vo;return e.asyncQueue.enqueueAndForget(Te(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=hm,n.next=3,fy(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(qy(Sy(this._delegate,Uy)))}},{key:"onSnapshotsInSync",value:function(e){return h_(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Uo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new U_(this,Ry(this._delegate,e))}catch(t){throw D_(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new P_(this,Oy(this._delegate,e))}catch(t){throw D_(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new F_(this,function(e,t){if(e=Sy(e,Cy),ky("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Uo(zo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Py(e,null,function(e){return new Lc(iu.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw D_(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Sy(e,Uy);var r=Object.assign(Object.assign({},p_),n);return function(e){if(e.maxAttempts<1)throw new Uo(zo.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Vo;return e.asyncQueue.enqueueAndForget(Te(be().mark((function i(){var a;return be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,dy(e);case 2:a=i.sent,new $m(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(qy(e),(function(n){return t(new y_(e,n))}),r)}(this._delegate,(function(n){return e(new C_(t,n))}))}},{key:"batch",value:function(){var e=this;return qy(this._delegate),new N_(new v_(this._delegate,(function(t){return f_(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Hy(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Qy(this._delegate,e).then((function(e){return e?new F_(t,e):null}))}}]),e}(),E_=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this)).firestore=e,r}return c(n,[{key:"convertBytes",value:function(e){return new x_(new Jy(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return P_.forKey(t,this.firestore,null)}}]),n}(Qg);var C_=function(){function e(t,n){u(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new E_(t)}return c(e,[{key:"get",value:function(e){var t=this,n=V_(e);return this._delegate.get(n).then((function(e){return new L_(t._firestore,new $g(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=V_(e);return n?(k_("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=V_(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=V_(e);return this._delegate.delete(t),this}}]),e}(),N_=function(){function e(t){u(this,e),this._delegate=t}return c(e,[{key:"set",value:function(e,t,n){var r=V_(e);return n?(k_("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=V_(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=V_(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),A_=function(){function e(t,n,r){u(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return c(e,[{key:"fromFirestore",value:function(e,t){var n=new Zg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new M_(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new E_(t),n),i.set(n,a)),a}}]),e}();A_.INSTANCES=new WeakMap;var P_=function(){function e(t,n){u(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new E_(t)}return c(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new U_(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new U_(this.firestore,Ry(this._delegate,e))}catch(t){throw D_(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=we(e))instanceof Ay&&Ly(this._delegate,e)}},{key:"set",value:function(e,t){t=k_("DocumentReference.set",t);try{return t?u_(this._delegate,e,t):u_(this._delegate,e)}catch(n){throw D_(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?s_(this._delegate,e):s_.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw D_(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return f_(Sy((e=this._delegate).firestore,Uy),[new Kl(e._key,Al.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=R_(n),a=O_(n,(function(t){return new L_(e.firestore,new $g(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return l_(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?i_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Sy(e,Ay);var t=Sy(e.firestore,Uy);return my(qy(t),e._key,{source:"server"}).then((function(n){return d_(t,e,n)}))}(this._delegate):function(e){e=Sy(e,Ay);var t=Sy(e.firestore,Uy);return my(qy(t),e._key).then((function(n){return d_(t,e,n)}))}(this._delegate)).then((function(e){return new L_(t.firestore,new $g(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(A_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Uo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Ay(n._delegate,r,new uu(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Ay(n._delegate,r,t))}}]),e}();function D_(e,t,n){return e.message=e.message.replace(t,n),e}function R_(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!I_(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function O_(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=I_(e[0])?e[0]:I_(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var L_=function(){function e(t,n){u(this,e),this._firestore=t,this._delegate=n}return c(e,[{key:"ref",get:function(){return new P_(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return n_(this._delegate,e._delegate)}}]),e}(),M_=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||Mo(),t}}]),n}(L_),F_=function(){function e(t,n){u(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new E_(t)}return c(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Dg(this._delegate,function(e,t,n){var r=t,i=Cg("where",e);return Rg._create(i,r,n)}(t,n,r)))}catch(i){throw D_(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Dg(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Cg("orderBy",e);return Lg._create(n,t)}(t,n)))}catch(r){throw D_(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Dg(this._delegate,(Ty("limit",n=t),Mg._create("limit",n,"F"))))}catch(r){throw D_(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Dg(this._delegate,(Ty("limitToLast",n=t),Mg._create("limitToLast",n,"L"))))}catch(r){throw D_(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,Dg(this._delegate,jg.apply(void 0,arguments)))}catch(t){throw D_(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Dg(this._delegate,zg.apply(void 0,arguments)))}catch(t){throw D_(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Dg(this._delegate,Vg.apply(void 0,arguments)))}catch(t){throw D_(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Dg(this._delegate,qg.apply(void 0,arguments)))}catch(t){throw D_(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return My(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?o_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Sy(e,Py);var t=Sy(e.firestore,Uy),n=qy(t),r=new r_(t);return yy(n,e._query,{source:"server"}).then((function(n){return new e_(t,r,e,n)}))}(this._delegate):a_(this._delegate)).then((function(e){return new z_(t.firestore,new e_(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=R_(n),a=O_(n,(function(t){return new z_(e.firestore,new e_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return l_(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(A_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),j_=function(){function e(t,n){u(this,e),this._firestore=t,this._delegate=n}return c(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new M_(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),z_=function(){function e(t,n){u(this,e),this._firestore=t,this._delegate=n}return c(e,[{key:"query",get:function(){return new F_(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new M_(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new j_(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new M_(n._firestore,r))}))}},{key:"isEqual",value:function(e){return n_(this._delegate,e._delegate)}}]),e}(),U_=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return c(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new P_(this.firestore,e):null}},{key:"doc",value:function(e){try{return new P_(this.firestore,void 0===e?Oy(this._delegate):Oy(this._delegate,e))}catch(t){throw D_(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return c_(this._delegate,e).then((function(e){return new P_(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Ly(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(A_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(F_);function V_(e){return Sy(e,Ay)}var q_,B_=function(){function e(){u(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=b(Xy,n)}return c(e,[{key:"isEqual",value:function(e){return(e=we(e))instanceof Xy&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(ou.keyField().canonicalString())}}]),e}(),W_=function(){function e(t){u(this,e),this._delegate=t}return c(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new lg("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new sg("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=g_.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=__.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new dg("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),K_={Firestore:T_,GeoPoint:Zy,Timestamp:tu,Blob:x_,Transaction:C_,WriteBatch:N_,DocumentReference:P_,DocumentSnapshot:L_,Query:F_,QueryDocumentSnapshot:M_,QuerySnapshot:z_,CollectionReference:U_,FieldPath:B_,FieldValue:W_,setLogLevel:function(e){var t;t=e,Ao.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Ee("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},K_)))})(q_=tn,(function(e,t){return new T_(e,t,new S_)})),q_.registerVersion("@firebase/firestore-compat","0.3.12");function G_(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var H_;Object.create;var Q_={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Y_="EMAIL_SIGNIN",J_="PASSWORD_RESET",X_="RECOVER_EMAIL",$_="REVERT_SECOND_FACTOR_ADDITION",Z_="VERIFY_AND_CHANGE_EMAIL",ek="VERIFY_EMAIL";function tk(){return o({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var nk=function(){var e;return o(e={},"admin-restricted-operation","This operation is restricted to administrators only."),o(e,"argument-error",""),o(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),o(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),o(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),o(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),o(e,"cordova-not-ready","Cordova framework is not ready."),o(e,"cors-unsupported","This browser is not supported."),o(e,"credential-already-in-use","This credential is already associated with a different user account."),o(e,"custom-token-mismatch","The custom token corresponds to a different audience."),o(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),o(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),o(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),o(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),o(e,"email-already-in-use","The email address is already in use by another account."),o(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),o(e,"expired-action-code","The action code has expired."),o(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),o(e,"internal-error","An internal AuthError has occurred."),o(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),o(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),o(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),o(e,"invalid-auth-event","An internal AuthError has occurred."),o(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),o(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),o(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),o(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),o(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),o(e,"invalid-email","The email address is badly formatted."),o(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),o(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),o(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),o(e,"invalid-credential","The supplied auth credential is malformed or has expired."),o(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),o(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),o(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),o(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),o(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),o(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),o(e,"wrong-password","The password is invalid or the user does not have a password."),o(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),o(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),o(e,"invalid-provider-id","The specified provider ID is invalid."),o(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),o(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),o(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),o(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),o(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),o(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),o(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),o(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),o(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),o(e,"missing-continue-uri","A continue URL must be provided in the request."),o(e,"missing-iframe-start","An internal AuthError has occurred."),o(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),o(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),o(e,"missing-password","A non-empty password must be provided"),o(e,"missing-multi-factor-info","No second factor identifier is provided."),o(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),o(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),o(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),o(e,"app-deleted","This instance of FirebaseApp has been deleted."),o(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),o(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),o(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),o(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),o(e,"no-auth-event","An internal AuthError has occurred."),o(e,"no-such-provider","User was not linked to an account with the given provider."),o(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),o(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),o(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),o(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),o(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),o(e,"provider-already-linked","User can only be linked to one identity for the given provider."),o(e,"quota-exceeded","The project's quota for this operation has been exceeded."),o(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),o(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),o(e,"rejected-credential","The request contains malformed or mismatching credentials."),o(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),o(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),o(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),o(e,"timeout","The operation has timed out."),o(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),o(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),o(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),o(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),o(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),o(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),o(e,"unverified-email","The operation requires a verified email."),o(e,"user-cancelled","The user did not grant your application the permissions it requested."),o(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),o(e,"user-disabled","The user account has been disabled by an administrator."),o(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),o(e,"user-signed-out",""),o(e,"weak-password","The password must be 6 characters long or more."),o(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),o(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),o(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),o(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),o(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),o(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),o(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),o(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),o(e,"invalid-req-type","Invalid request parameters."),o(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},rk=tk,ik=new $("auth","Firebase",tk()),ak=new je("@firebase/auth");function ok(e){if(ak.logLevel<=Pe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ak.warn.apply(ak,["Auth (".concat(xt,"): ").concat(e)].concat(n))}}function uk(e){if(ak.logLevel<=Pe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ak.error.apply(ak,["Auth (".concat(xt,"): ").concat(e)].concat(n))}}function sk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw fk.apply(void 0,[e].concat(n))}function ck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fk.apply(void 0,[e].concat(n))}function lk(e,t,n){var r=Object.assign(Object.assign({},rk()),o({},t,n));return new $("auth","Firebase",r).create(t,{appName:e.name})}function hk(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&sk(e,"argument-error"),lk(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function fk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Ie(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Ie(o)))}return ik.create.apply(ik,[e].concat(n))}function dk(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw fk.apply(void 0,[t].concat(r))}}function pk(e){var t="INTERNAL ASSERTION FAILED: "+e;throw uk(t),new Error(t)}function vk(e,t){e||pk(t)}function mk(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function yk(){return"http:"===gk()||"https:"===gk()}function gk(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var _k=function(){function e(t,n){u(this,e),this.shortDelay=t,this.longDelay=n,vk(n>t,"Short delay should be less than long delay!"),this.isMobile=W()||H()}return c(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(yk()||G()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function kk(e,t){vk(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var wk=function(){function e(){u(this,e)}return c(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void pk("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void pk("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void pk("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),bk=(o(H_={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),o(H_,"MISSING_CUSTOM_TOKEN","internal-error"),o(H_,"INVALID_IDENTIFIER","invalid-email"),o(H_,"MISSING_CONTINUE_URI","internal-error"),o(H_,"INVALID_PASSWORD","wrong-password"),o(H_,"MISSING_PASSWORD","missing-password"),o(H_,"EMAIL_EXISTS","email-already-in-use"),o(H_,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),o(H_,"INVALID_IDP_RESPONSE","invalid-credential"),o(H_,"INVALID_PENDING_TOKEN","invalid-credential"),o(H_,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),o(H_,"MISSING_REQ_TYPE","internal-error"),o(H_,"EMAIL_NOT_FOUND","user-not-found"),o(H_,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),o(H_,"EXPIRED_OOB_CODE","expired-action-code"),o(H_,"INVALID_OOB_CODE","invalid-action-code"),o(H_,"MISSING_OOB_CODE","internal-error"),o(H_,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),o(H_,"INVALID_ID_TOKEN","invalid-user-token"),o(H_,"TOKEN_EXPIRED","user-token-expired"),o(H_,"USER_NOT_FOUND","user-token-expired"),o(H_,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),o(H_,"INVALID_CODE","invalid-verification-code"),o(H_,"INVALID_SESSION_INFO","invalid-verification-id"),o(H_,"INVALID_TEMPORARY_PROOF","invalid-credential"),o(H_,"MISSING_SESSION_INFO","missing-verification-id"),o(H_,"SESSION_EXPIRED","code-expired"),o(H_,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),o(H_,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),o(H_,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),o(H_,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),o(H_,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),o(H_,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),o(H_,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),o(H_,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),o(H_,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),o(H_,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),o(H_,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),o(H_,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),o(H_,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),o(H_,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),o(H_,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),o(H_,"MISSING_CLIENT_TYPE","missing-client-type"),o(H_,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),o(H_,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),o(H_,"INVALID_REQ_TYPE","invalid-req-type"),H_),xk=new _k(3e4,6e4);function Ik(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Sk(e,t,n,r){return Tk.apply(this,arguments)}function Tk(){return Tk=Te(be().mark((function e(t,n,r,i){var a,o=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Ek(t,a,Te(be().mark((function e(){var a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=ce(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",wk.fetch()(Pk(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Tk.apply(this,arguments)}function Ek(e,t,n){return Ck.apply(this,arguments)}function Ck(){return Ck=Te(be().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f,d;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},bk),n),e.prev=2,a=new Dk(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Rk(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=v(c,2),h=l[0],f=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Rk(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Rk(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Rk(t,"user-disabled",u);case 29:if(d=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!f){e.next=34;break}throw lk(t,d,f);case 34:sk(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof X)){e.next=41;break}throw e.t0;case 41:sk(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Ck.apply(this,arguments)}function Nk(e,t,n,r){return Ak.apply(this,arguments)}function Ak(){return Ak=Te(be().mark((function e(t,n,r,i){var a,o,u=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Sk(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&sk(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Ak.apply(this,arguments)}function Pk(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?kk(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Dk=function(){function e(t){var n=this;u(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(ck(n.auth,"network-request-failed"))}),xk.get())}))}return c(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Rk(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=ck(e,t,r);return i.customData._tokenResponse=n,i}function Ok(e,t){return Lk.apply(this,arguments)}function Lk(){return Lk=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sk(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Lk.apply(this,arguments)}function Mk(e,t){return Fk.apply(this,arguments)}function Fk(){return Fk=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Fk.apply(this,arguments)}function jk(e,t){return zk.apply(this,arguments)}function zk(){return zk=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sk(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),zk.apply(this,arguments)}function Uk(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Vk(){return Vk=Te(be().mark((function e(t){var n,r,i,a,o,u,s=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=we(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,dk((a=Bk(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Uk(qk(a.auth_time)),issuedAtTime:Uk(qk(a.iat)),expirationTime:Uk(qk(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Vk.apply(this,arguments)}function qk(e){return 1e3*Number(e)}function Bk(e){var t=v(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return uk("JWT malformed, contained fewer than 3 sections"),null;try{var a=O(r);return a?JSON.parse(a):(uk("Failed to decode base64 JWT payload"),null)}catch(o){return uk("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Wk(e,t){return Kk.apply(this,arguments)}function Kk(){return Kk=Te(be().mark((function e(t,n){var r=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof X&&Gk(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Kk.apply(this,arguments)}function Gk(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Hk=function(){function e(t){u(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return c(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Te(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Qk=function(){function e(t,n){u(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return c(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Uk(this.lastLoginAt),this.creationTime=Uk(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Yk(e){return Jk.apply(this,arguments)}function Jk(){return Jk=Te(be().mark((function e(t){var n,r,i,a,o,u,s,c,l,h,f;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Wk(t,jk(r,{idToken:i}));case 6:dk(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=G_(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=$k(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Qk(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),Jk.apply(this,arguments)}function Xk(){return(Xk=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=we(t),e.next=3,Yk(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $k(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Ie(n),Ie(t))}function Zk(e,t){return ew.apply(this,arguments)}function ew(){return ew=Te(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ek(t,{},Te(be().mark((function e(){var r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ce({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Pk(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",wk.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),ew.apply(this,arguments)}var tw=function(){function e(){u(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return c(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){dk(e.idToken,"internal-error"),dk("undefined"!==typeof e.idToken,"internal-error"),dk("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Bk(e);return dk(t,"internal-error"),dk("undefined"!==typeof t.exp,"internal-error"),dk("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Te(be().mark((function e(t){var n,r=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],dk(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Te(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zk(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return pk("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(dk("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(dk("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(dk("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function nw(e,t){dk("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var rw=function(){function e(t){u(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=G_(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Ie(a.providerData):[],this.metadata=new Qk(a.createdAt||void 0,a.lastLoginAt||void 0)}return c(e,[{key:"getIdToken",value:function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wk(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(dk(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Vk.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Xk.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(dk(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){dk(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Te(be().mark((function e(t){var n,r,i=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Yk(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Te(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Wk(this,Ok(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,_=n.uid,k=n.emailVerified,w=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;dk(_&&x,t,"internal-error");var I=tw.fromJSON(this.name,x);dk("string"===typeof _,t,"internal-error"),nw(h,t.name),nw(f,t.name),dk("boolean"===typeof k,t,"internal-error"),dk("boolean"===typeof w,t,"internal-error"),nw(d,t.name),nw(p,t.name),nw(v,t.name),nw(m,t.name),nw(y,t.name),nw(g,t.name);var S=new e({uid:_,auth:t,email:f,emailVerified:k,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return b&&Array.isArray(b)&&(S.providerData=b.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=Te(be().mark((function t(n,r){var i,a,o,u=arguments;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new tw).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Yk(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),iw=new Map;function aw(e){vk(e instanceof Function,"Expected a class definition");var t=iw.get(e);return t?(vk(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,iw.set(e,t),t)}var ow=function(){function e(){u(this,e),this.type="NONE",this.storage={}}return c(e,[{key:"_isAvailable",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ow.type="NONE";var uw=ow;function sw(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var cw=function(){function e(t,n,r){u(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=sw(this.userKey,a.apiKey,o),this.fullPersistenceKey=sw("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return c(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Te(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?rw._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Te(be().mark((function t(n,r){var i,a,o,u,s,c,l,h,d,p,v,m=arguments;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(aw(uw),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||aw(uw),u=sw(i,n.config.apiKey,n.name),s=null,c=f(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(u);case 17:if(!(d=t.sent)){t.next=23;break}return p=rw._fromJSON(n,d),h!==o&&(s=p),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(v=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&v.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=v[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function lw(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(pw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(hw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(mw(t))return"Blackberry";if(yw(t))return"Webos";if(fw(t))return"Safari";if((t.includes("chrome/")||dw(t))&&!t.includes("edge/"))return"Chrome";if(vw(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function hw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/firefox\//i.test(e)}function fw(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:B()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/crios\//i.test(e)}function pw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/iemobile/i.test(e)}function vw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/android/i.test(e)}function mw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/blackberry/i.test(e)}function yw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/webos/i.test(e)}function gw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function _w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return gw(e)||vw(e)||yw(e)||mw(e)||/windows phone/i.test(e)||pw(e)}function kw(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=lw(B());break;case"Worker":t="".concat(lw(B()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xt,"/").concat(r)}function ww(e){return bw.apply(this,arguments)}function bw(){return bw=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sk(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),bw.apply(this,arguments)}function xw(e,t){return Iw.apply(this,arguments)}function Iw(){return Iw=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sk(t,"GET","/v2/recaptchaConfig",Ik(t,n)));case 1:case"end":return e.stop()}}),e)}))),Iw.apply(this,arguments)}function Sw(e){return void 0!==e&&void 0!==e.getResponse}function Tw(e){return void 0!==e&&void 0!==e.enterprise}var Ew=c((function e(t){if(u(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function Cw(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=ck("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Nw(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Aw=function(){function e(t){u(this,e),this.type="recaptcha-enterprise",this.auth=Lw(t)}return c(e,[{key:"verify",value:function(){var e=Te(be().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;Tw(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=Te(be().mark((function e(n,r){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xw(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new Ew(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&Tw(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Cw("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Pw(e,t,n){return Dw.apply(this,arguments)}function Dw(){return Dw=Te(be().mark((function e(t,n,r){var i,a,o,u,s=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new Aw(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Dw.apply(this,arguments)}var Rw=function(){function e(t){u(this,e),this.auth=t,this.queue=[]}return c(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Te(be().mark((function e(t){var n,r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=f(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=f(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ow=function(){function e(t,n,r,i){u(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mw(this),this.idTokenSubscription=new Mw(this),this.beforeStateQueue=new Rw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ik,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return c(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=aw(t)),this._initializationPromise=this.queue(Te(be().mark((function r(){var i,a;return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,cw.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Te(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Te(be().mark((function e(t){var n,r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return dk(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yk(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?we(t):null)&&dk(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Te(be().mark((function e(t){var n,r=this,i=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&dk(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Te(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(aw(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=Te(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xw(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new Ew(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new Aw(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new $("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Te(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return dk(n=t&&aw(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,cw.create(this,[aw(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Te(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Te(be().mark((function e(t){var n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return dk(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return dk(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kw(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Te(be().mark((function e(){var t,n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Te(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&ok("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Lw(e){return we(e)}var Mw=function(){function e(t){var n=this;u(this,e),this.auth=t,this.observer=null,this.addObserver=de((function(e){return n.observer=e}))}return c(e,[{key:"next",get:function(){return dk(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Fw(e,t,n){var r=Lw(e);dk(r._canInitEmulator,r,"emulator-config-failed"),dk(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=jw(t),o=function(e){var t=jw(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:zw(r.substr(a.length+1))}}var o=v(r.split(":"),2);return{host:o[0],port:zw(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function jw(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function zw(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Uw=function(){function e(t,n){u(this,e),this.providerId=t,this.signInMethod=n}return c(e,[{key:"toJSON",value:function(){return pk("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return pk("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return pk("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return pk("not implemented")}}]),e}();function Vw(e,t){return qw.apply(this,arguments)}function qw(){return qw=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sk(t,"POST","/v1/accounts:resetPassword",Ik(t,n)));case 1:case"end":return e.stop()}}),e)}))),qw.apply(this,arguments)}function Bw(e,t){return Ww.apply(this,arguments)}function Ww(){return Ww=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ww.apply(this,arguments)}function Kw(e,t){return Gw.apply(this,arguments)}function Gw(){return Gw=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sk(t,"POST","/v1/accounts:update",Ik(t,n)));case 1:case"end":return e.stop()}}),e)}))),Gw.apply(this,arguments)}function Hw(e,t){return Qw.apply(this,arguments)}function Qw(){return Qw=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nk(t,"POST","/v1/accounts:signInWithPassword",Ik(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qw.apply(this,arguments)}function Yw(e,t){return Jw.apply(this,arguments)}function Jw(){return Jw=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sk(t,"POST","/v1/accounts:sendOobCode",Ik(t,n)));case 1:case"end":return e.stop()}}),e)}))),Jw.apply(this,arguments)}function Xw(e,t){return $w.apply(this,arguments)}function $w(){return $w=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yw(t,n));case 1:case"end":return e.stop()}}),e)}))),$w.apply(this,arguments)}function Zw(e,t){return eb.apply(this,arguments)}function eb(){return eb=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yw(t,n));case 1:case"end":return e.stop()}}),e)}))),eb.apply(this,arguments)}function tb(e,t){return nb.apply(this,arguments)}function nb(){return nb=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yw(t,n));case 1:case"end":return e.stop()}}),e)}))),nb.apply(this,arguments)}function rb(e,t){return ib.apply(this,arguments)}function ib(){return ib=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yw(t,n));case 1:case"end":return e.stop()}}),e)}))),ib.apply(this,arguments)}function ab(e,t){return ob.apply(this,arguments)}function ob(){return ob=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nk(t,"POST","/v1/accounts:signInWithEmailLink",Ik(t,n)));case 1:case"end":return e.stop()}}),e)}))),ob.apply(this,arguments)}function ub(e,t){return sb.apply(this,arguments)}function sb(){return sb=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nk(t,"POST","/v1/accounts:signInWithEmailLink",Ik(t,n)));case 1:case"end":return e.stop()}}),e)}))),sb.apply(this,arguments)}var cb=function(e){g(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return u(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return c(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Te(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Pw(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",Hw(t,i));case 11:return e.abrupt("return",Hw(t,r).catch(function(){var e=Te(be().mark((function e(n){var i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Pw(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",Hw(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",ab(t,{email:this._email,oobCode:this._password}));case 13:sk(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Bw(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ub(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:sk(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Uw);function lb(e,t){return hb.apply(this,arguments)}function hb(){return hb=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nk(t,"POST","/v1/accounts:signInWithIdp",Ik(t,n)));case 1:case"end":return e.stop()}}),e)}))),hb.apply(this,arguments)}var fb=function(e){g(n,e);var t=w(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return c(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return lb(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,lb(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,lb(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ce(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):sk("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=G_(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Uw);function db(e,t){return pb.apply(this,arguments)}function pb(){return pb=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sk(t,"POST","/v1/accounts:sendVerificationCode",Ik(t,n)));case 1:case"end":return e.stop()}}),e)}))),pb.apply(this,arguments)}function vb(){return vb=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nk(t,"POST","/v1/accounts:signInWithPhoneNumber",Ik(t,n)));case 1:case"end":return e.stop()}}),e)}))),vb.apply(this,arguments)}function mb(){return mb=Te(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nk(t,"POST","/v1/accounts:signInWithPhoneNumber",Ik(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Rk(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),mb.apply(this,arguments)}var yb=o({},"USER_NOT_FOUND","user-not-found");function gb(){return gb=Te(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Nk(t,"POST","/v1/accounts:signInWithPhoneNumber",Ik(t,r),yb));case 2:case"end":return e.stop()}}),e)}))),gb.apply(this,arguments)}var _b=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this,"phone","phone")).params=e,r}return c(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return vb.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return mb.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return gb.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Uw);var kb=function(){function e(t){var n,r,i,a,o,s;u(this,e);var c=le(he(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,h=null!==(r=c.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);dk(l&&h&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=h,this.continueUrl=null!==(a=c.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=c.tenantId)&&void 0!==s?s:null}return c(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=le(he(e)).link,n=t?le(he(t)).deep_link_id:null,r=le(he(e)).deep_link_id;return(r?le(he(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Lm){return null}}}]),e}();var wb=function(){function e(){u(this,e),this.providerId=e.PROVIDER_ID}return c(e,null,[{key:"credential",value:function(e,t){return cb._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=kb.parseLink(t);return dk(n,"argument-error"),cb._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();wb.PROVIDER_ID="password",wb.EMAIL_PASSWORD_SIGN_IN_METHOD="password",wb.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var bb=function(){function e(t){u(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return c(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),xb=function(e){g(n,e);var t=w(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).scopes=[],e}return c(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Ie(this.scopes)}}]),n}(bb),Ib=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return dk(e.idToken||e.accessToken,"argument-error"),fb._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return dk("providerId"in t&&"signInMethod"in t,"argument-error"),fb._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(xb),Sb=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.call(this,"facebook.com")}return c(n,null,[{key:"credential",value:function(e){return fb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Lm){return null}}}]),n}(xb);Sb.FACEBOOK_SIGN_IN_METHOD="facebook.com",Sb.PROVIDER_ID="facebook.com";var Tb=function(e){g(n,e);var t=w(n);function n(){var e;return u(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return c(n,null,[{key:"credential",value:function(e,t){return fb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Lm){return null}}}]),n}(xb);Tb.GOOGLE_SIGN_IN_METHOD="google.com",Tb.PROVIDER_ID="google.com";var Eb=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.call(this,"github.com")}return c(n,null,[{key:"credential",value:function(e){return fb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Lm){return null}}}]),n}(xb);Eb.GITHUB_SIGN_IN_METHOD="github.com",Eb.PROVIDER_ID="github.com";var Cb=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return c(n,[{key:"_getIdTokenResponse",value:function(e){return lb(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,lb(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,lb(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Uw),Nb=function(e){g(n,e);var t=w(n);function n(e){return u(this,n),dk(e.startsWith("saml."),"argument-error"),t.call(this,e)}return c(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Cb.fromJSON(e);return dk(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Cb._create(r,n)}catch(i){return null}}}]),n}(bb),Ab=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.call(this,"twitter.com")}return c(n,null,[{key:"credential",value:function(e,t){return fb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Lm){return null}}}]),n}(xb);function Pb(e,t){return Db.apply(this,arguments)}function Db(){return Db=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nk(t,"POST","/v1/accounts:signUp",Ik(t,n)));case 1:case"end":return e.stop()}}),e)}))),Db.apply(this,arguments)}Ab.TWITTER_SIGN_IN_METHOD="twitter.com",Ab.PROVIDER_ID="twitter.com";var Rb=function(){function e(t){u(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return c(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Te(be().mark((function t(n,r,i){var a,o,u,s,c=arguments;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,rw._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Ob(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Te(be().mark((function t(n,r,i){var a;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Ob(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Ob(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Lb(){return Lb=Te(be().mark((function e(t){var n,r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lw(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Rb({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Pb(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Rb._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Lb.apply(this,arguments)}var Mb=function(e){g(n,e);var t=w(n);function n(e,r,i,a){var o,s;return u(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(m(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return c(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(X);function Fb(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Mb._fromErrorAndOperation(e,n,t,r);throw n}))}function jb(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function zb(e,t){return Ub.apply(this,arguments)}function Ub(){return Ub=Te(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=we(t),e.next=3,Bb(!0,r,n);case 3:return e.t0=Mk,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=jb(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Ub.apply(this,arguments)}function Vb(e,t){return qb.apply(this,arguments)}function qb(){return qb=Te(be().mark((function e(t,n){var r,i,a=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Wk,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Rb._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),qb.apply(this,arguments)}function Bb(e,t,n){return Wb.apply(this,arguments)}function Wb(){return(Wb=Te(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yk(n);case 2:i=jb(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",dk(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kb(e,t){return Gb.apply(this,arguments)}function Gb(){return Gb=Te(be().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Wk(t,Fb(i,a,n,t),r);case 6:return dk((o=e.sent).idToken,i,"internal-error"),dk(u=Bk(o.idToken),i,"internal-error"),s=u.sub,dk(t.uid===s,i,"user-mismatch"),e.abrupt("return",Rb._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&sk(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Gb.apply(this,arguments)}function Hb(e,t){return Qb.apply(this,arguments)}function Qb(){return Qb=Te(be().mark((function e(t,n){var r,i,a,o,u=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Fb(t,i,n);case 4:return a=e.sent,e.next=7,Rb._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Qb.apply(this,arguments)}function Yb(e,t){return Jb.apply(this,arguments)}function Jb(){return Jb=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hb(Lw(t),n));case 1:case"end":return e.stop()}}),e)}))),Jb.apply(this,arguments)}function Xb(e,t){return $b.apply(this,arguments)}function $b(){return($b=Te(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=we(t),e.next=3,Bb(!1,r,n.providerId);case 3:return e.abrupt("return",Vb(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zb(e,t){return ex.apply(this,arguments)}function ex(){return(ex=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kb(we(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tx(e,t){return nx.apply(this,arguments)}function nx(){return nx=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nk(t,"POST","/v1/accounts:signInWithCustomToken",Ik(t,n)));case 1:case"end":return e.stop()}}),e)}))),nx.apply(this,arguments)}function rx(){return rx=Te(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lw(t),e.next=3,tx(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Rb._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),rx.apply(this,arguments)}var ix=function(){function e(t,n){u(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return c(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?ax._fromServerResponse(e,t):"totpInfo"in t?ox._fromServerResponse(e,t):sk(e,"internal-error")}}]),e}(),ax=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return c(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ix),ox=function(e){g(n,e);var t=w(n);function n(e){return u(this,n),t.call(this,"totp",e)}return c(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ix);function ux(e,t,n){var r;dk((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),dk("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(dk(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(dk(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function sx(){return sx=Te(be().mark((function e(t,n,r){var i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Lw(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,Pw(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&ux(a,u,r),e.next=9,Zw(a,u);case 9:e.next=14;break;case 11:return r&&ux(a,o,r),e.next=14,Zw(a,o).catch(function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,Pw(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&ux(a,n,r),e.next=8,Zw(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),sx.apply(this,arguments)}function cx(){return cx=Te(be().mark((function e(t,n,r){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vw(we(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),cx.apply(this,arguments)}function lx(){return lx=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kw(we(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),lx.apply(this,arguments)}function hx(e,t){return fx.apply(this,arguments)}function fx(){return fx=Te(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=we(t),e.next=3,Vw(r,{oobCode:n});case 3:i=e.sent,dk(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return dk(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:dk(i.mfaInfo,r,"internal-error");case 13:dk(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ix._fromServerResponse(Lw(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),fx.apply(this,arguments)}function dx(){return dx=Te(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hx(we(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),dx.apply(this,arguments)}function px(e,t,n){return vx.apply(this,arguments)}function vx(){return vx=Te(be().mark((function e(t,n,r){var i,a,o,u,s,c,l;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Lw(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Pw(a,o,"signUpPassword");case 5:s=e.sent,u=Pb(a,s),e.next=10;break;case 9:u=Pb(a,o).catch(function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Pw(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",Pb(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,Rb._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),vx.apply(this,arguments)}function mx(){return mx=Te(be().mark((function e(t,n,r){var i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){dk(t.handleCodeInApp,a,"argument-error"),t&&ux(a,e,t)},a=Lw(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,Pw(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,tb(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,tb(a,o).catch(function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Pw(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,tb(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),mx.apply(this,arguments)}function yx(){return yx=Te(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=we(t),dk((a=wb.credentialWithLink(n,r||mk()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Yb(i,a));case 4:case"end":return e.stop()}}),e)}))),yx.apply(this,arguments)}function gx(e,t){return _x.apply(this,arguments)}function _x(){return _x=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sk(t,"POST","/v1/accounts:createAuthUri",Ik(t,n)));case 1:case"end":return e.stop()}}),e)}))),_x.apply(this,arguments)}function kx(){return kx=Te(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yk()?mk():"http://localhost",i={identifier:n,continueUri:r},e.next=4,gx(we(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),kx.apply(this,arguments)}function wx(){return(wx=Te(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=we(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&ux(r.auth,a,n),e.next=8,Xw(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bx(){return(bx=Te(be().mark((function e(t,n,r){var i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=we(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&ux(i.auth,o,r),e.next=8,rb(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xx(e,t){return Ix.apply(this,arguments)}function Ix(){return Ix=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ix.apply(this,arguments)}function Sx(){return(Sx=Te(be().mark((function e(t,n){var r,i,a,o,u,s,c;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=we(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Wk(a,xx(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tx(e,t,n){return Ex.apply(this,arguments)}function Ex(){return Ex=Te(be().mark((function e(t,n,r){var i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Wk(t,Bw(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Ex.apply(this,arguments)}var Cx=c((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};u(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Nx=function(e){g(n,e);var t=w(n);function n(e,r,i,a){var o;return u(this,n),(o=t.call(this,e,r,i)).username=a,o}return c(n)}(Cx),Ax=function(e){g(n,e);var t=w(n);function n(e,r){return u(this,n),t.call(this,e,"facebook.com",r)}return c(n)}(Cx),Px=function(e){g(n,e);var t=w(n);function n(e,r){return u(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return c(n)}(Nx),Dx=function(e){g(n,e);var t=w(n);function n(e,r){return u(this,n),t.call(this,e,"google.com",r)}return c(n)}(Cx),Rx=function(e){g(n,e);var t=w(n);function n(e,r,i){return u(this,n),t.call(this,e,"twitter.com",r,i)}return c(n)}(Nx);function Ox(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Bk(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Cx(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Ax(a,i);case"github.com":return new Px(a,i);case"google.com":return new Dx(a,i);case"twitter.com":return new Rx(a,i,e.screenName||null);case"custom":case"anonymous":return new Cx(a,null);default:return new Cx(a,r,i)}}(n)}var Lx=function(){function e(t,n,r){u(this,e),this.type=t,this.credential=n,this.auth=r}return c(e,[{key:"toJSON",value:function(){return{multiFactorSession:o({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Mx=function(){function e(t,n,r){u(this,e),this.session=t,this.hints=n,this.signInResolver=r}return c(e,[{key:"resolveSignIn",value:function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Lw(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ix._fromServerResponse(r,e)}));dk(i.mfaPendingCredential,r,"internal-error");var o=Lx._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Te(be().mark((function e(t){var a,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Rb._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return dk(n.user,r,"internal-error"),e.abrupt("return",Rb._forOperation(n.user,n.operationType,u));case 17:sk(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Fx(e,t){return Sk(e,"POST","/v2/accounts/mfaEnrollment:start",Ik(e,t))}function jx(e,t){return Sk(e,"POST","/v2/accounts/mfaEnrollment:start",Ik(e,t))}function zx(e,t){return Sk(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ik(e,t))}function Ux(e,t){return Sk(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Ik(e,t))}var Vx=function(){function e(t){var n=this;u(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ix._fromServerResponse(t.auth,e)})))}))}return c(e,[{key:"getSession",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Lx,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Te(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Wk(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Te(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Wk(this.user,Ux(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),qx=new WeakMap;var Bx="__sak",Wx=function(){function e(t,n){u(this,e),this.storageRetriever=t,this.type=n}return c(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Bx,"1"),this.storage.removeItem(Bx),Promise.resolve(!0)):Promise.resolve(!1)}catch(Lm){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Kx=function(e){g(n,e);var t=w(n);function n(){var e;return u(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=B();return fw(e)||gw(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=_w(),e._shouldAllowMigration=!0,e}return c(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Q()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Te(be().mark((function e(t,r){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(_(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Te(be().mark((function e(t){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(_(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(_(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Wx);Kx.type="LOCAL";var Gx=Kx,Hx=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return c(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Wx);Hx.type="SESSION";var Qx=Hx;function Yx(e){return Promise.all(e.map(function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Jx=function(){function e(t){u(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return c(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Te(be().mark((function e(t){var n,r,i,a,o,u,s,c;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Yx(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Xx(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Jx.receivers=[];var $x=function(){function e(t){u(this,e),this.target=t,this.handlers=new Set}return c(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Te(be().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Xx("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Zx(){return window}function eI(e){Zx().location.href=e}function tI(){return"undefined"!==typeof Zx().WorkerGlobalScope&&"function"===typeof Zx().importScripts}function nI(){return rI.apply(this,arguments)}function rI(){return(rI=Te(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function iI(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var aI="firebaseLocalStorageDb",oI="firebaseLocalStorage",uI="fbase_key",sI=function(){function e(t){u(this,e),this.request=t}return c(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function cI(e,t){return e.transaction([oI],t?"readwrite":"readonly").objectStore(oI)}function lI(){var e=indexedDB.deleteDatabase(aI);return new sI(e).toPromise()}function hI(){var e=indexedDB.open(aI,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(oI,{keyPath:uI})}catch(r){n(r)}})),e.addEventListener("success",Te(be().mark((function n(){var r;return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(oI)){n.next=12;break}return r.close(),n.next=5,lI();case 5:return n.t0=t,n.next=8,hI();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function fI(e,t,n){return dI.apply(this,arguments)}function dI(){return dI=Te(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=cI(t,!0).put((o(i={},uI,n),o(i,"value",r),i)),e.abrupt("return",new sI(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),dI.apply(this,arguments)}function pI(e,t){return vI.apply(this,arguments)}function vI(){return vI=Te(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cI(t,!1).get(n),e.next=3,new sI(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),vI.apply(this,arguments)}function mI(e,t){var n=cI(e,!0).delete(t);return new sI(n).toPromise()}var yI=function(){function e(){u(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return c(e,[{key:"_openDb",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,hI();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Te(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tI()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Te(be().mark((function e(){var t=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Jx._getInstance(tI()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Te(be().mark((function e(n,r){var i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Te(be().mark((function e(){var t,n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nI();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new $x(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&iI()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Te(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,hI();case 5:return t=e.sent,e.next=8,fI(t,Bx,"1");case 8:return e.next=10,mI(t,Bx);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Te(be().mark((function e(t,n){var r=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return fI(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return pI(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Te(be().mark((function e(t){var n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return mI(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Te(be().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=cI(e,!1).getAll();return new sI(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=f(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(d){i.e(d)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Te(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();yI.type="LOCAL";var gI=yI;function _I(e,t){return Sk(e,"POST","/v2/accounts/mfaSignIn:start",Ik(e,t))}function kI(e,t){return Sk(e,"POST","/v2/accounts/mfaSignIn:finalize",Ik(e,t))}var wI=1e12,bI=function(){function e(t){u(this,e),this.auth=t,this.counter=wI,this._widgets=new Map}return c(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new xI(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||wI;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||wI;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Te(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||wI,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),xI=function(){function e(t,n,r){var i=this;u(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;dk(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return c(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var II=Nw("rcb"),SI=new _k(3e4,6e4),TI=function(){function e(){var t;u(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Zx().grecaptcha)||void 0===t?void 0:t.render)}return c(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return dk(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Sw(Zx().grecaptcha)?Promise.resolve(Zx().grecaptcha):new Promise((function(r,i){var a=Zx().setTimeout((function(){i(ck(e,"network-request-failed"))}),SI.get());Zx()[II]=function(){Zx().clearTimeout(a),delete Zx()[II];var o=Zx().grecaptcha;if(o&&Sw(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(ck(e,"internal-error"))},Cw("".concat("https://www.google.com/recaptcha/api.js?","?").concat(ce({onload:II,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(ck(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Zx().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var EI=function(){function e(){u(this,e)}return c(e,[{key:"load",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new bI(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),CI="recaptcha",NI={theme:"light",type:"image"},AI=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},NI),r=arguments.length>2?arguments[2]:void 0;u(this,e),this.parameters=n,this.type=CI,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Lw(r),this.isInvisible="invisible"===this.parameters.size,dk("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;dk(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new EI:new TI,this.validateStartingState()}return c(e,[{key:"verify",value:function(){var e=Te(be().mark((function e(){var t,n,r,i=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){dk(!this.parameters.sitekey,this.auth,"argument-error"),dk(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),dk("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Zx()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){dk(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Te(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Te(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dk(yk()&&!tI(),this.auth,"internal-error"),e.next=3,PI();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,ww(this.auth);case 8:dk(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return dk(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function PI(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var DI=function(){function e(t,n){u(this,e),this.verificationId=t,this.onConfirmation=n}return c(e,[{key:"confirm",value:function(e){var t=_b._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function RI(){return RI=Te(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lw(t),e.next=3,FI(i,n,we(r));case 3:return a=e.sent,e.abrupt("return",new DI(a,(function(e){return Yb(i,e)})));case 5:case"end":return e.stop()}}),e)}))),RI.apply(this,arguments)}function OI(e,t,n){return LI.apply(this,arguments)}function LI(){return(LI=Te(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=we(t),e.next=3,Bb(!1,i,"phone");case 3:return e.next=5,FI(i.auth,n,we(r));case 5:return a=e.sent,e.abrupt("return",new DI(a,(function(e){return Xb(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function MI(){return(MI=Te(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=we(t),e.next=3,FI(i.auth,n,we(r));case 3:return a=e.sent,e.abrupt("return",new DI(a,(function(e){return Zb(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FI(e,t,n){return jI.apply(this,arguments)}function jI(){return jI=Te(be().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,dk("string"===typeof a,t,"argument-error"),dk(r.type===CI,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return dk("enroll"===u.type,t,"internal-error"),e.next=13,Fx(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return dk("signin"===u.type,t,"internal-error"),dk(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,_I(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,db(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),jI.apply(this,arguments)}function zI(){return(zI=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vb(we(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var UI=function(){function e(t){u(this,e),this.providerId=e.PROVIDER_ID,this.auth=Lw(t)}return c(e,[{key:"verifyPhoneNumber",value:function(e,t){return FI(this.auth,e,we(t))}}],[{key:"credential",value:function(e,t){return _b._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?_b._fromTokenResponse(n,r):null}}]),e}();function VI(e,t){return t?aw(t):(dk(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}UI.PROVIDER_ID="phone",UI.PHONE_SIGN_IN_METHOD="phone";var qI=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this,"custom","custom")).params=e,r}return c(n,[{key:"_getIdTokenResponse",value:function(e){return lb(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return lb(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return lb(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Uw);function BI(e){return Hb(e.auth,new qI(e),e.bypassAuthState)}function WI(e){var t=e.auth,n=e.user;return dk(n,t,"internal-error"),Kb(n,new qI(e),e.bypassAuthState)}function KI(e){return GI.apply(this,arguments)}function GI(){return GI=Te(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,dk(r=t.user,n,"internal-error"),e.abrupt("return",Vb(r,new qI(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),GI.apply(this,arguments)}var HI=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];u(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return c(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Te(be().mark((function t(n,r){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Te(be().mark((function e(t){var n,r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BI;case"linkViaPopup":case"linkViaRedirect":return KI;case"reauthViaPopup":case"reauthViaRedirect":return WI;default:sk(this.auth,"internal-error")}}},{key:"resolve",value:function(e){vk(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){vk(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),QI=new _k(2e3,1e4);function YI(e,t,n){return JI.apply(this,arguments)}function JI(){return JI=Te(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lw(t),hk(t,n,bb),a=VI(i,r),o=new eS(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),JI.apply(this,arguments)}function XI(){return(XI=Te(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hk((i=we(t)).auth,n,bb),a=VI(i.auth,r),o=new eS(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $I(e,t,n){return ZI.apply(this,arguments)}function ZI(){return(ZI=Te(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hk((i=we(t)).auth,n,bb),a=VI(i.auth,r),o=new eS(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var eS=function(e){g(n,e);var t=w(n);function n(e,r,i,a,o){var s;return u(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=m(s),s}return c(n,[{key:"executeNotNull",value:function(){var e=Te(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return dk(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Te(be().mark((function e(){var t,n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vk(1===this.filter.length,"Popup operations only handle one event"),t=Xx(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(ck(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(ck(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(ck(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,QI.get())}()}}]),n}(HI);eS.currentPopupAction=null;var tS="pendingRedirect",nS=new Map,rS=function(e){g(n,e);var t=w(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return u(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return c(n,[{key:"execute",value:function(){var e=Te(be().mark((function e(){var t,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=nS.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,iS(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,nn(_(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:nS.set(this.auth._key(),t);case 21:return this.bypassAuthState||nS.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Te(be().mark((function e(t){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",nn(_(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",nn(_(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(HI);function iS(e,t){return aS.apply(this,arguments)}function aS(){return aS=Te(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lS(n),i=cS(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),aS.apply(this,arguments)}function oS(e,t){return uS.apply(this,arguments)}function uS(){return uS=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cS(t)._set(lS(n),"true"));case 1:case"end":return e.stop()}}),e)}))),uS.apply(this,arguments)}function sS(e,t){nS.set(e._key(),t)}function cS(e){return aw(e._redirectPersistence)}function lS(e){return sw(tS,e.config.apiKey,e.name)}function hS(e,t,n){return function(e,t,n){return fS.apply(this,arguments)}(e,t,n)}function fS(){return fS=Te(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Lw(t),hk(t,n,bb),e.next=4,i._initializationPromise;case 4:return a=VI(i,r),e.next=7,oS(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),fS.apply(this,arguments)}function dS(e,t,n){return function(e,t,n){return pS.apply(this,arguments)}(e,t,n)}function pS(){return(pS=Te(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hk((i=we(t)).auth,n,bb),e.next=4,i.auth._initializationPromise;case 4:return a=VI(i.auth,r),e.next=7,oS(a,i.auth);case 7:return e.next=9,wS(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vS(e,t,n){return function(e,t,n){return mS.apply(this,arguments)}(e,t,n)}function mS(){return(mS=Te(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hk((i=we(t)).auth,n,bb),e.next=4,i.auth._initializationPromise;case 4:return a=VI(i.auth,r),e.next=7,Bb(!1,i,n.providerId);case 7:return e.next=9,oS(a,i.auth);case 9:return e.next=11,wS(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yS(e,t){return gS.apply(this,arguments)}function gS(){return gS=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lw(t)._initializationPromise;case 2:return e.abrupt("return",_S(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),gS.apply(this,arguments)}function _S(e,t){return kS.apply(this,arguments)}function kS(){return kS=Te(be().mark((function e(t,n){var r,i,a,o,u,s=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Lw(t),a=VI(i,n),o=new rS(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),kS.apply(this,arguments)}function wS(e){return bS.apply(this,arguments)}function bS(){return(bS=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Xx("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xS=function(){function e(t){u(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return c(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SS(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!SS(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ck(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(IS(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(IS(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function IS(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function SS(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function TS(e){return ES.apply(this,arguments)}function ES(){return ES=Te(be().mark((function e(t){var n,r=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Sk(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ES.apply(this,arguments)}var CS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NS=/^https?/;function AS(){return AS=Te(be().mark((function e(t){var n,r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,TS(t);case 4:n=e.sent,r=n.authorizedDomains,i=f(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!PS(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:sk(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),AS.apply(this,arguments)}function PS(e){var t=mk(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!NS.test(r))return!1;if(CS.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var DS=new _k(3e4,6e4);function RS(){var e=Zx().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Ie(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var OS=null;function LS(e){return OS=OS||function(e){return new Promise((function(t,n){var r,i,a;function o(){RS(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){RS(),n(ck(e,"network-request-failed"))},timeout:DS.get()})}if(null===(i=null===(r=Zx().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Zx().gapi)||void 0===a?void 0:a.load)){var u=Nw("iframefcb");return Zx()[u]=function(){gapi.load?o():n(ck(e,"network-request-failed"))},Cw("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw OS=null,e}))}(e),OS}var MS=new _k(5e3,15e3),FS="__/auth/iframe",jS="emulator/auth/iframe",zS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},US=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VS(e){var t=e.config;dk(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?kk(t,jS):"https://".concat(e.config.authDomain,"/").concat(FS),r={apiKey:t.apiKey,appName:e.name,v:xt},i=US.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ce(r).slice(1))}function qS(e){return BS.apply(this,arguments)}function BS(){return BS=Te(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LS(t);case 2:return n=e.sent,dk(r=Zx().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:VS(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zS,dontclear:!0},(function(e){return new Promise(function(){var n=Te(be().mark((function n(r,i){var a,o,u;return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Zx().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=ck(t,"network-request-failed"),o=Zx().setTimeout((function(){i(a)}),MS.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),BS.apply(this,arguments)}var WS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KS=function(){function e(t){u(this,e),this.window=t,this.associatedEvent=null}return c(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function GS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},WS),{width:r.toString(),height:i.toString(),top:a,left:o}),c=B().toLowerCase();n&&(u=dw(c)?"_blank":n),hw(c)&&(t=t||"http://localhost",s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=v(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return gw(arguments.length>0&&void 0!==arguments[0]?arguments[0]:B())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new KS(null);var h=window.open(t||"",u,l);dk(h,e,"popup-blocked");try{h.focus()}catch(f){}return new KS(h)}var HS="__/auth/handler",QS="emulator/auth/handler",YS=encodeURIComponent("fac");function JS(e,t,n,r,i,a){return XS.apply(this,arguments)}function XS(){return XS=Te(be().mark((function e(t,n,r,i,a,o){var u,s,c,l,h,f,d,p,m,y,g,_,k;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dk(t.config.authDomain,t,"auth-domain-config-required"),dk(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:xt,eventId:a},n instanceof bb)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",ae(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),s=0,c=Object.entries(o||{});s<c.length;s++)l=v(c[s],2),h=l[0],f=l[1],u[h]=f;for(n instanceof xb&&(d=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=d.join(",")),t.tenantId&&(u.tid=t.tenantId),p=u,m=0,y=Object.keys(p);m<y.length;m++)g=y[m],void 0===p[g]&&delete p[g];return e.next=10,t._getAppCheckToken();case 10:return _=e.sent,k=_?"#".concat(YS,"=").concat(encodeURIComponent(_)):"",e.abrupt("return","".concat($S(t),"?").concat(ce(p).slice(1)).concat(k));case 13:case"end":return e.stop()}}),e)}))),XS.apply(this,arguments)}function $S(e){var t=e.config;return t.emulator?kk(t,QS):"https://".concat(t.authDomain,"/").concat(HS)}var ZS="webStorageSupport",eT=function(){function e(){u(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qx,this._completeRedirectFn=_S,this._overrideRedirectResult=sS}return c(e,[{key:"_openPopup",value:function(){var e=Te(be().mark((function e(t,n,r,i){var a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vk(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,JS(t,n,r,mk(),i);case 3:return o=e.sent,e.abrupt("return",GS(t,o,Xx()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Te(be().mark((function e(t,n,r,i){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,JS(t,n,r,mk(),i);case 4:return eI(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(vk(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Te(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qS(t);case 2:return n=e.sent,r=new xS(t),n.register("authEvent",(function(e){return dk(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(ZS,{type:ZS},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ZS];void 0!==i&&t(!!i),sk(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return AS.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return _w()||fw()||gw()}}]),e}(),tT=eT,nT=function(){function e(t){u(this,e),this.factorId=t}return c(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return pk("unexpected MultiFactorSessionType")}}}]),e}(),rT=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this,"phone")).credential=e,r}return c(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Sk(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ik(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Sk(e,"POST","/v2/accounts/mfaSignIn:finalize",Ik(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(nT),iT=function(){function e(){u(this,e)}return c(e,null,[{key:"assertion",value:function(e){return rT._fromCredential(e)}}]),e}();iT.FACTOR_ID="phone";var aT=function(){function e(){u(this,e)}return c(e,null,[{key:"assertionForEnrollment",value:function(e,t){return oT._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return oT._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=Te(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dk("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,jx(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",uT._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();aT.FACTOR_ID="totp";var oT=function(e){g(n,e);var t=w(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return c(n,[{key:"_finalizeEnroll",value:function(){var e=Te(be().mark((function e(t,n,r){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dk("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",zx(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=Te(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dk(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",kI(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(nT),uT=function(){function e(t,n,r,i,a,o,s){u(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return c(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(sT(e)||sT(t))&&(r=!0),r&&(sT(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),sT(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function sT(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var cT="@firebase/auth",lT="0.23.2",hT=function(){function e(t){u(this,e),this.auth=t,this.internalListeners=new Map}return c(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){dk(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var fT,dT=U("authIdTokenMaxAge")||300,pT=null;function vT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St(),t=yt(e,"auth");if(t.isInitialized())return t.getImmediate();var n,r=function(e,t){var n=yt(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(ue(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;sk(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:tT,persistence:[gI,Gx,Qx]}),i=U("authTokenSyncURL");if(i){var a=(n=i,function(){var e=Te(be().mark((function e(t){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=5;break}return e.next=4,t.getIdTokenResult();case 4:e.t0=e.sent;case 5:if(r=e.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>dT)){e.next=9;break}return e.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,pT!==a){e.next=12;break}return e.abrupt("return");case 12:return pT=a,e.next=15,fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());!function(e,t,n){we(e).beforeAuthStateChanged(t,n)}(r,a,(function(){return a(r.currentUser)})),function(e,t,n,r){we(e).onIdTokenChanged(t,n,r)}(r,(function(e){return a(e)}))}var o=j("auth");return o&&Fw(r,"http://".concat(o)),r}function mT(){return window}fT="Browser",mt(new Ee("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;dk(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:fT,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kw(fT)},l=new Ow(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(aw);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),mt(new Ee("auth-internal",(function(e){return function(e){return new hT(e)}(Lw(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Nt(cT,lT,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(fT)),Nt(cT,lT,"esm2017");var yT=2e3;function gT(e,t,n){return _T.apply(this,arguments)}function _T(){return _T=Te(be().mark((function e(t,n,r){var i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=mT(),o=a.BuildInfo,vk(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,ST(n.sessionId);case 4:return u=e.sent,s={},gw()?s.ibi=o.packageName:vw()?s.apn=o.packageName:sk(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",JS(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),_T.apply(this,arguments)}function kT(){return kT=Te(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=mT(),r=n.BuildInfo,i={},gw()?i.iosBundleId=r.packageName:vw()?i.androidPackageName=r.packageName:sk(t,"operation-not-supported-in-this-environment"),e.next=5,TS(t,i);case 5:case"end":return e.stop()}}),e)}))),kT.apply(this,arguments)}function wT(e){var t=mT().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function bT(e,t,n){return xT.apply(this,arguments)}function xT(){return xT=Te(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mT(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(ck(t,"redirect-cancelled-by-user"))}),yT))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),vw()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),xT.apply(this,arguments)}function IT(e){var t,n,r,i,a,o,u,s,c,l,h=mT();dk("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),dk("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),dk("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),dk("function"===typeof(null===(s=null===(u=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),dk("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function ST(e){return TT.apply(this,arguments)}function TT(){return(TT=Te(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ET(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ET(e){if(vk(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var CT=20,NT=function(e){g(n,e);var t=w(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return c(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),nn(_(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xS);function AT(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:LT(),postBody:null,tenantId:e.tenantId,error:ck(e,"no-auth-event")}}function PT(e,t){return MT()._set(FT(e),t)}function DT(e){return RT.apply(this,arguments)}function RT(){return RT=Te(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MT()._get(FT(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,MT()._remove(FT(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),RT.apply(this,arguments)}function OT(e,t){var n,r,i=function(e){var t=jT(e),n=t.link?decodeURIComponent(t.link):void 0,r=jT(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return jT(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=jT(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?ck(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function LT(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<CT;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function MT(){return aw(Gx)}function FT(e){return sw("authEvent",e.config.apiKey,e.name)}function jT(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=d(t=n)||xe(t)||h(t)||p();r[0];return le(r.slice(1).join("?"))}var zT=function(){function e(){u(this,e),this._redirectPersistence=Qx,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_S,this._overrideRedirectResult=sS}return c(e,[{key:"_initialize",value:function(){var e=Te(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new NT(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){sk(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Te(be().mark((function e(t,n,r,i){var a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return IT(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),nS.clear(),e.next=10,this._originValidation(t);case 10:return o=AT(t,r,i),e.next=13,PT(t,o);case 13:return e.next=15,gT(t,o,n);case 15:return u=e.sent,e.next=18,wT(u);case 18:return s=e.sent,e.abrupt("return",bT(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return kT.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=mT(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Te(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,DT(e);case 2:t.onEvent(VT());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Te(be().mark((function n(r){var i,a;return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,DT(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=OT(i,r.url)),t.onEvent(a||VT());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");mT().handleOpenURL=function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),UT=zT;function VT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ck("no-auth-event")}}var qT=1e3;function BT(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function WT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return!("file:"!==BT()&&"ionic:"!==BT()&&"capacitor:"!==BT()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function KT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return Q()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B();return/Edge\/\d+/.test(e)}(e)}function GT(){try{var e=self.localStorage,t=Xx();if(e)return e.setItem(t,"1"),e.removeItem(t),!KT()||J()}catch(n){return HT()&&J()}return!1}function HT(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function QT(){return("http:"===BT()||"https:"===BT()||G()||WT())&&!(H()||K())&&GT()&&!HT()}function YT(){return WT()&&"undefined"!==typeof document}function JT(){return XT.apply(this,arguments)}function XT(){return(XT=Te(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(YT()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),qT);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $T={LOCAL:"local",NONE:"none",SESSION:"session"},ZT=dk,eE="persistence";function tE(e,t){ZT(Object.values($T).includes(t),e,"invalid-persistence-type"),H()?ZT(t!==$T.SESSION,e,"unsupported-persistence-type"):K()?ZT(t===$T.NONE,e,"unsupported-persistence-type"):HT()?ZT(t===$T.NONE||t===$T.LOCAL&&J(),e,"unsupported-persistence-type"):ZT(t===$T.NONE||GT(),e,"unsupported-persistence-type")}function nE(e){return rE.apply(this,arguments)}function rE(){return rE=Te(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=iE(),r=sw(eE,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),rE.apply(this,arguments)}function iE(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var aE=dk,oE=function(){function e(){u(this,e),this.browserResolver=aw(tT),this.cordovaResolver=aw(UT),this.underlyingResolver=null,this._redirectPersistence=Qx,this._completeRedirectFn=_S,this._overrideRedirectResult=sS}return c(e,[{key:"_initialize",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Te(be().mark((function e(t,n,r,i){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Te(be().mark((function e(t,n,r,i){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return YT()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return aE(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Te(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,JT();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function uE(e){return e.unwrap()}function sE(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new dE(e,function(e,t){var n,r=we(e),i=t;return dk(t.customData.operationType,r,"argument-error"),dk(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Mx._fromError(r,i)}(e,t));else if(r){var i=cE(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function cE(e){var t=(e instanceof X?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof X)&&"temporaryProof"in t&&"phoneNumber"in t)return UI.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Q_.PASSWORD)return null;switch(r){case Q_.GOOGLE:n=Tb;break;case Q_.FACEBOOK:n=Sb;break;case Q_.GITHUB:n=Eb;break;case Q_.TWITTER:n=Ab;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Cb._create(r,u):fb._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Ib(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof X?n.credentialFromError(e):n.credentialFromResult(e)}function lE(e,t){return t.catch((function(t){throw t instanceof X&&sE(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,cE(t)),additionalUserInfo:Ox(e),user:pE.getOrCreate(r)}}))}function hE(e,t){return fE.apply(this,arguments)}function fE(){return fE=Te(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return lE(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),fE.apply(this,arguments)}var dE=function(){function e(t,n){u(this,e),this.resolver=n,this.auth=t.wrapped()}return c(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return lE(uE(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),pE=function(){function e(t){u(this,e),this._delegate=t,this.multiFactor=function(e){var t=we(e);return qx.has(t)||qx.set(t,Vx._fromUser(t)),qx.get(t)}(t)}return c(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lE(this.auth,Xb(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hE(this.auth,OI(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lE(this.auth,$I(this._delegate,t,oE)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nE(Lw(this.auth));case 2:return e.abrupt("return",vS(this._delegate,t,oE));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lE(this.auth,Zb(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return hE(this.auth,function(e,t,n){return MI.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return lE(this.auth,function(e,t,n){return XI.apply(this,arguments)}(this._delegate,e,oE))}},{key:"reauthenticateWithRedirect",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nE(Lw(this.auth));case 2:return e.abrupt("return",dS(this._delegate,t,oE));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return wx.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zb(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Tx(we(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Tx(we(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return zI.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Sx.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return bx.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();pE.USER_MAP=new WeakMap;var vE=dk,mE=function(){function e(t,n){if(u(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;vE(r,"invalid-api-key",{appName:t.name}),vE(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?oE:void 0;this._delegate=n.initialize({options:{persistence:gE(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(nk),this.linkUnderlyingAuth()}return c(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?pE.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Fw(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return lx.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return hx(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return cx.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Te(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lE(this._delegate,px(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return kx.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=kb.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Te(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vE(QT(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,yS(this._delegate,oE);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",lE(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Lw(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=yE(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=yE(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return mx.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return sx.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Te(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:tE(this._delegate,t),e.t0=t,e.next=e.t0===$T.SESSION?4:e.t0===$T.LOCAL?6:e.t0===$T.NONE?11:13;break;case 4:return n=Qx,e.abrupt("break",14);case 6:return e.next=8,aw(gI)._isAvailable();case 8:return r=e.sent,n=r?gI:Gx,e.abrupt("break",14);case 11:return n=uw,e.abrupt("break",14);case 13:return e.abrupt("return",sk("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return lE(this._delegate,function(e){return Lb.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return lE(this._delegate,Yb(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return lE(this._delegate,function(e,t){return rx.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return lE(this._delegate,function(e,t,n){return Yb(we(e),wb.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return lE(this._delegate,function(e,t,n){return yx.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return hE(this._delegate,function(e,t,n){return RI.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vE(QT(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",lE(this._delegate,YI(this._delegate,t,oE)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Te(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vE(QT(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,nE(this._delegate);case 3:return e.abrupt("return",hS(this._delegate,t,oE));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return dx.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function yE(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&pE.getOrCreate(e))},error:t,complete:n}}function gE(e,t){var n=function(e,t){var n=iE();if(!n)return[];var r=sw(eE,e,t);switch(n.getItem(r)){case $T.NONE:return[uw];case $T.LOCAL:return[gI,Qx];case $T.SESSION:return[Qx];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(gI)||n.push(gI),"undefined"!==typeof window)for(var r=0,i=[Gx,Qx];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(uw)||n.push(uw),n}mE.Persistence=$T;var _E=function(){function e(){u(this,e),this.providerId="phone",this._delegate=new UI(uE(tn.auth()))}return c(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return UI.credential(e,t)}}]),e}();_E.PHONE_SIGN_IN_METHOD=UI.PHONE_SIGN_IN_METHOD,_E.PROVIDER_ID=UI.PROVIDER_ID;var kE=dk,wE=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tn.app();u(this,e),kE(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new AI(t,n,i.auth()),this.type=this._delegate.type}return c(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Ee("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new mE(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Y_,PASSWORD_RESET:J_,RECOVER_EMAIL:X_,REVERT_SECOND_FACTOR_ADDITION:$_,VERIFY_AND_CHANGE_EMAIL:Z_,VERIFY_EMAIL:ek}},EmailAuthProvider:wb,FacebookAuthProvider:Sb,GithubAuthProvider:Eb,GoogleAuthProvider:Tb,OAuthProvider:Ib,SAMLAuthProvider:Nb,PhoneAuthProvider:_E,PhoneMultiFactorGenerator:iT,RecaptchaVerifier:wE,TwitterAuthProvider:Ab,Auth:mE,AuthCredential:Uw,Error:X}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.4.2")}(tn);var bE={btnComponent:"main_btnComponent__Zjrq9",container:"main_container__wBnZU",btnGame:"main_btnGame__Tg9sl",btnContainerGame:"main_btnContainerGame__YIIcU",zoomIn:"main_zoomIn__ZiWuX",wrapper:"main_wrapper__JgPLp",btnImage:"main_btnImage__APgCV",answers:"main_answers__ojcjM",stepbystepModale:"main_stepbystepModale__rWQQY",modalContainer:"main_modalContainer__c-FZR",closeBtn:"main_closeBtn__PsE8Q",NavigationBtn:"main_NavigationBtn__pDyFc",blockCard:"main_blockCard__b-ECB",name:"main_name__x7271",btn:"main_btn__vaKii",BackBtn:"main_BackBtn__TZCf-",fon:"main_fon__9Gtte",bgSvg:"main_bgSvg__ziYKL",bgContainer:"main_bgContainer__u9M3j",authContainer:"main_authContainer__1ZqZD",auth:"main_auth__1t7AK",login:"main_login__jGHlb",password:"main_password__zoeAx",namePage:"main_namePage__bprAH",errorRegister:"main_errorRegister__92zgU",loginBtn:"main_loginBtn__0Wi4R",createBtn:"main_createBtn__NWjH1",gmailBtn:"main_gmailBtn__U8DWA",loginInBtn:"main_loginInBtn__aBVbb",burgerContainer:"main_burgerContainer__RFjEc",burgerUl:"main_burgerUl__6iCf2",burgerLi:"main_burgerLi__PQW1h",settingContainer:"main_settingContainer__E9Max",signOut:"main_signOut__OeeNy",containteCard:"main_containteCard__kZBWs",card:"main_card__LcVu3",startBtnContainer:"main_startBtnContainer__1y-gv",startBtn:"main_startBtn__aPW6+",containerForLevelButton:"main_containerForLevelButton__Km8sx"};Nt("firebase","9.23.0","app");var xE="@firebase/database",IE="0.14.4",SE="";function TE(e){SE=e}var EE=function(){function e(t){u(this,e),this.domStorage_=t,this.prefix_="firebase:"}return c(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),te(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ee(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),CE=function(){function e(){u(this,e),this.cache_={},this.isInMemoryStorage=!0}return c(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return re(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),NE=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new EE(t)}}catch(n){}return new CE},AE=NE("localStorage"),PE=NE("sessionStorage"),DE=new je("@firebase/database"),RE=function(){var e=1;return function(){return e++}}(),OE=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,E(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new fe;n.update(t);var r=n.digest();return A.encodeByteArray(r)},LE=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?te(r):r,t+=" "}return t},ME=null,FE=!0,jE=function(e,t){E(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(DE.logLevel=Pe.VERBOSE,ME=DE.log.bind(DE),t&&PE.set("logging_enabled",!0)):"function"===typeof e?ME=e:(ME=null,PE.remove("logging_enabled"))},zE=function(){if(!0===FE&&(FE=!1,null===ME&&!0===PE.get("logging_enabled")&&jE(!0)),ME){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=LE.apply(null,t);ME(r)}},UE=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];zE.apply(void 0,[e].concat(n))}},VE=function(){var e="FIREBASE INTERNAL ERROR: "+LE.apply(void 0,arguments);DE.error(e)},qE=function(){var e="FIREBASE FATAL ERROR: ".concat(LE.apply(void 0,arguments));throw DE.error(e),new Error(e)},BE=function(){var e="FIREBASE WARNING: "+LE.apply(void 0,arguments);DE.warn(e)},WE=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},KE="[MIN_NAME]",GE="[MAX_NAME]",HE=function(e,t){if(e===t)return 0;if(e===KE||t===GE)return-1;if(t===KE||e===GE)return 1;var n=tC(e),r=tC(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},QE=function(e,t){return e===t?0:e<t?-1:1},YE=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+te(t))},JE=function e(t){if("object"!==typeof t||null===t)return te(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=te(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},XE=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function $E(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var ZE=function(e){E(!WE(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var eC=new RegExp("^-?(0*)\\d{1,10}$"),tC=function(e){if(eC.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},nC=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw BE("Exception was thrown by user callback.",e),t}),Math.floor(0))}},rC=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},iC=function(){function e(t,n){var r=this;u(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return c(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){BE('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),aC=function(){function e(t,n,r){var i=this;u(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return c(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(zE("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',BE(e)}}]),e}(),oC=function(){function e(t){u(this,e),this.accessToken=t}return c(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();oC.OWNER="owner";var uC="5",sC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,cC="ac",lC="websocket",hC="long_polling",fC=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]&&arguments[7];u(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=AE.get("host:"+t)||this._host}return c(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&AE.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function dC(e,t,n){var r;if(E("string"===typeof t,"typeof type must == string"),E("object"===typeof n,"typeof params must == object"),t===lC)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==hC)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return $E(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var pC=function(){function e(){u(this,e),this.counters_={}}return c(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;re(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return L(void 0,this.counters_)}}]),e}(),vC={},mC={};function yC(e){var t=e.toString();return vC[t]||(vC[t]=new pC),vC[t]}var gC=function(){function e(t){u(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return c(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&nC((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),_C="start",kC=function(){function e(t,n,r,i,a,o,s){var c=this;u(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=UE(t),this.stats_=yC(n),this.urlFn=function(e){return c.appCheckToken&&(e[cC]=c.appCheckToken),dC(n,hC,e)}}return c(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new gC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Y()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new wC((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===_C)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[_C]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=uC,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[cC]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&sC.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=te(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=D(t),r=XE(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Y()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=te(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Y()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),wC=function(){function e(t,n,r,i){if(u(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Y())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=RE(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){zE("frame writing exception"),s.stack&&zE(s.stack),zE(s)}}}return c(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Y()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){zE("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||zE("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),bC=null;"undefined"!==typeof MozWebSocket?bC=MozWebSocket:"undefined"!==typeof WebSocket&&(bC=WebSocket);var xC=function(){function e(t,n,r,i,a,o,s){u(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=UE(this.connId),this.stats_=yC(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return c(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,AE.set("previous_websocket_failure",!0);try{var r;if(Y()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(uC,"/").concat(SE,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new bC(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){AE.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ee(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(E(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=te(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=XE(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=uC,!Y()&&"undefined"!==typeof location&&location.hostname&&sC.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[cC]=r),i&&(a.p=i),dC(e,lC,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==bC&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return AE.isInMemoryStorage||!0===AE.get("previous_websocket_failure")}}]),e}();xC.responsesRequiredToBeHealthy=2,xC.healthyTimeout=3e4;var IC=function(){function e(t){u(this,e),this.initTransports_(t)}return c(e,[{key:"initTransports_",value:function(t){var n=xC&&xC.isAvailable(),r=n&&!xC.previouslyFailed();if(t.webSocketOnly&&(n||BE("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[xC];else{var i,a=this.transports_=[],o=f(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[kC,xC]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();IC.globalTransportInitialized_=!1;var SC=function(){function e(t,n,r,i,a,o,s,c,l,h){u(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=UE("c:"+this.id+":"),this.transportManager_=new IC(n),this.log_("Connection created"),this.start_()}return c(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=rC((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=YE("t",e),n=YE("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=YE("t",e),n=YE("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=YE("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?VE("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):VE("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),uC!==n&&BE("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),rC((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):rC((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(AE.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),TC=function(){function e(){u(this,e)}return c(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),EC=function(){function e(t){u(this,e),this.allowedEvents_=t,this.listeners_={},E(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return c(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=Ie(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){E(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),CC=function(e){g(n,e);var t=w(n);function n(){var e;return u(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||W()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return c(n,[{key:"getInitialEvent",value:function(e){return E("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(EC),NC=32,AC=768,PC=function(){function e(t,n){if(u(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return c(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function DC(){return new PC("")}function RC(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function OC(e){return e.pieces_.length-e.pieceNum_}function LC(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new PC(e.pieces_,t)}function MC(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function FC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function jC(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new PC(t,0)}function zC(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof PC)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new PC(n,0)}function UC(e){return e.pieceNum_>=e.pieces_.length}function VC(e,t){var n=RC(e),r=RC(t);if(null===n)return t;if(n===r)return VC(LC(e),LC(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function qC(e,t){for(var n=FC(e,0),r=FC(t,0),i=0;i<n.length&&i<r.length;i++){var a=HE(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function BC(e,t){if(OC(e)!==OC(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function WC(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(OC(e)>OC(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var KC=c((function e(t,n){u(this,e),this.errorPrefix_=n,this.parts_=FC(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ke(this.parts_[r]);GC(this)}));function GC(e){if(e.byteLength_>AC)throw new Error(e.errorPrefix_+"has a key path longer than "+AC+" bytes ("+e.byteLength_+").");if(e.parts_.length>NC)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+NC+") or object contains a cycle "+HC(e))}function HC(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var QC=function(e){g(n,e);var t=w(n);function n(){var e,r,i;return u(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return c(n,[{key:"getInitialEvent",value:function(e){return E("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(EC),YC=1e3,JC=function(e){g(n,e);var t=w(n);function n(e,r,i,a,o,s,c,l){var h;if(u(this,n),(h=t.call(this)).repoInfo_=e,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=a,h.onServerInfoUpdate_=o,h.authTokenProvider_=s,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=n.nextPersistentConnectionId_++,h.log_=UE("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=YC,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Y())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return QC.getInstance().on("visible",h.onVisible_,m(h)),-1===e.host.indexOf("fblocal")&&CC.getInstance().on("online",h.onOnline_,m(h)),h}return c(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(te(i)),E(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new V,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),E(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=ne(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=ne(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+te(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):VE("Unrecognized action received from server: "+te(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;E(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=YC,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=YC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=YC),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Te(be().mark((function e(){var t,r,i,a,o,u,s,c,l,h,f,d,p,m,y=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,c=function(){s?s.close():(u=!0,i())},l=function(e){E(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:c,sendRequest:l},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:f=e.sent,d=v(f,2),p=d[0],m=d[1],u?zE("getToken() completed but was canceled"):(zE("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=m&&m.token,s=new SC(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){BE(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&BE(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){zE("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){zE("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ae(this.interruptReasons_)&&(this.reconnectDelay_=YC,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return JE(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new PC(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){zE("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){zE("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=f(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=f(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Y()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+SE.replace(/\./g,"-")]=1,W()?e["framework.cordova"]=1:H()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=CC.getInstance().currentlyOnline();return ae(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&re(e,"w")){var n=ie(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();BE("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(TC);JC.nextPersistentConnectionId_=0,JC.nextConnectionId_=0;var XC,$C=function(){function e(t,n){u(this,e),this.name=t,this.node=n}return c(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),ZC=function(){function e(){u(this,e)}return c(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new $C(KE,e),r=new $C(KE,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return $C.MIN}}]),e}(),eN=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n,[{key:"compare",value:function(e,t){return HE(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw C("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return $C.MIN}},{key:"maxPost",value:function(){return new $C(GE,XC)}},{key:"makePost",value:function(e,t){return E("string"===typeof e,"KeyIndex indexValue must always be a string."),new $C(e,XC)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return XC},set:function(e){XC=e}}]),n}(ZC),tN=new eN,nN=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;u(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return c(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),rN=function(){function e(t,n,r,i,a){u(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:oN.EMPTY_NODE,this.right=null!=a?a:oN.EMPTY_NODE}return c(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return oN.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return oN.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();rN.RED=!0,rN.BLACK=!1;var iN,aN=function(){function e(){u(this,e)}return c(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new rN(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),oN=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;u(this,e),this.comparator_=t,this.root_=n}return c(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,rN.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,rN.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new nN(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new nN(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new nN(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new nN(this.root_,null,this.comparator_,!0,e)}}]),e}();function uN(e,t){return HE(e.name,t.name)}function sN(e,t){return HE(e,t)}oN.EMPTY_NODE=new aN;var cN,lN,hN,fN=function(e){return"number"===typeof e?"number:"+ZE(e):"string:"+e},dN=function(e){if(e.isLeafNode()){var t=e.val();E("string"===typeof t||"number"===typeof t||"object"===typeof t&&re(t,".sv"),"Priority must be a string or number.")}else E(e===iN||e.isEmpty(),"priority of unexpected type.");E(e===iN||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},pN=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;u(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,E(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),dN(this.priorityNode_)}return c(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return UC(t)?this:".priority"===RC(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=RC(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(E(".priority"!==r||1===OC(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(LC(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+fN(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?ZE(this.value_):this.value_,this.lazyHash_=OE(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(E(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return E(i>=0,"Unknown leaf type: "+n),E(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return cN},set:function(e){cN=e}}]),e}();pN.VALUE_TYPE_ORDER=["object","boolean","number","string"];var vN,mN,yN=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?HE(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return $C.MIN}},{key:"maxPost",value:function(){return new $C(GE,new pN("[PRIORITY-POST]",hN))}},{key:"makePost",value:function(e,t){var n=lN(e);return new $C(t,new pN("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(ZC),gN=new yN,_N=Math.log(2),kN=function(){function e(t){u(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/_N,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return c(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),wN=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new rN(o,a.node,rN.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new rN(o,a.node,rN.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],h=n?n(l):l;s(new rN(h,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?u(h,rN.BLACK):(u(h,rN.BLACK),u(h,rN.RED))}return a}(new kN(e.length));return new oN(r||t,a)},bN={},xN=function(){function e(t,n){u(this,e),this.indexes_=t,this.indexSet_=n}return c(e,[{key:"get",value:function(e){var t=ie(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof oN?t:null}},{key:"hasIndex",value:function(e){return re(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){E(t!==tN,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator($C.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?wN(i,t.getCompare()):bN;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(oe(this.indexes_,(function(e,i){var a=ie(r.indexSet_,i);if(E(a,"Missing index implementation for "+i),e===bN){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator($C.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),wN(o,a.getCompare())}return bN}var c=n.get(t.name),l=e;return c&&(l=l.remove(new $C(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(oe(this.indexes_,(function(e){if(e===bN)return e;var r=n.get(t.name);return r?e.remove(new $C(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return E(bN&&gN,"ChildrenNode.ts has not been loaded"),vN=vN||new e({".priority":bN},{".priority":gN})}}]),e}(),IN=function(){function e(t,n,r){u(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&dN(this.priorityNode_),this.children_.isEmpty()&&E(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return c(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||mN}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?mN:t}},{key:"getChild",value:function(e){var t=RC(e);return null===t?this:this.getImmediateChild(t).getChild(LC(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(E(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new $C(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?mN:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=RC(e);if(null===n)return t;E(".priority"!==RC(e)||1===OC(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(LC(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(gN,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+fN(this.getPriority().val())+":"),this.forEachChild(gN,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":OE(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new $C(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new $C(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new $C(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,$C.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,$C.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===SN?-1:0}},{key:"withIndex",value:function(t){if(t===tN||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===tN||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(gN),r=t.getIterator(gN),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===tN?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return mN||(mN=new e(new oN(sN),null,xN.Default))}}]),e}();IN.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var SN=new(function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.call(this,new oN(sN),IN.EMPTY_NODE,xN.Default)}return c(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return IN.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(IN));Object.defineProperties($C,{MIN:{value:new $C(KE,IN.EMPTY_NODE)},MAX:{value:new $C(GE,SN)}}),eN.__EMPTY_NODE=IN.EMPTY_NODE,pN.__childrenNodeConstructor=IN,iN=SN,function(e){hN=e}(SN);var TN=!0;function EN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return IN.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),E(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new pN(e,EN(t));if(e instanceof Array||!TN){var n=IN.EMPTY_NODE;return $E(e,(function(t,r){if(re(e,t)&&"."!==t.substring(0,1)){var i=EN(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(EN(t))}var r=[],i=!1;if($E(e,(function(e,t){if("."!==e.substring(0,1)){var n=EN(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new $C(e,n)))}})),0===r.length)return IN.EMPTY_NODE;var a=wN(r,uN,(function(e){return e.name}),sN);if(i){var o=wN(r,gN.getCompare());return new IN(a,EN(t),new xN({".priority":o},{".priority":gN}))}return new IN(a,EN(t),xN.Default)}!function(e){lN=e}(EN);var CN=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this)).indexPath_=e,E(!UC(e)&&".priority"!==RC(e),"Can't create PathIndex with empty path or .priority key"),r}return c(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?HE(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=EN(e),r=IN.EMPTY_NODE.updateChild(this.indexPath_,n);return new $C(t,r)}},{key:"maxPost",value:function(){var e=IN.EMPTY_NODE.updateChild(this.indexPath_,SN);return new $C(GE,e)}},{key:"toString",value:function(){return FC(this.indexPath_,0).join("/")}}]),n}(ZC),NN=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?HE(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return $C.MIN}},{key:"maxPost",value:function(){return $C.MAX}},{key:"makePost",value:function(e,t){var n=EN(e);return new $C(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(ZC),AN=new NN;function PN(e){return{type:"value",snapshotNode:e}}function DN(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function RN(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ON(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var LN=function(){function e(t){u(this,e),this.index_=t}return c(e,[{key:"updateChild",value:function(e,t,n,r,i,a){E(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(RN(t,o)):E(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(DN(t,n)):a.trackChildChange(ON(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(gN,(function(e,r){t.hasChild(e)||n.trackChildChange(RN(e,r))})),t.isLeafNode()||t.forEachChild(gN,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(ON(t,r,i))}else n.trackChildChange(DN(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?IN.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),MN=function(){function e(t){u(this,e),this.indexedFilter_=new LN(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return c(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new $C(t,n))||(n=IN.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=IN.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(IN.EMPTY_NODE);var i=this;return t.forEachChild(gN,(function(e,t){i.matches(new $C(e,t))||(r=r.updateImmediateChild(e,IN.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),FN=function(){function e(t){var n=this;u(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new MN(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return c(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new $C(t,n))||(n=IN.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=IN.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=IN.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var u;r=(r=t.withIndex(this.index_)).updatePriority(IN.EMPTY_NODE),u=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var s=0;u.hasNext();){var c=u.getNext();s<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?s++:r=r.updateImmediateChild(c.name,IN.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;E(u.numChildren()===this.limit_,"");var s=new $C(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var h=u.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(ON(t,n,h)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(RN(t,h));var p=u.updateImmediateChild(t,IN.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(DN(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(RN(c.name,c.node)),i.trackChildChange(DN(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,IN.EMPTY_NODE)):e}}]),e}(),jN=function(){function e(){u(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=gN}return c(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return E(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return E(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:KE}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return E(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return E(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:GE}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return E(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===gN}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function zN(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function UN(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function VN(e,t){var n=e.copy();return n.index_=t,n}function qN(e){var t,n={};if(e.isDefault())return n;if(e.index_===gN?t="$priority":e.index_===AN?t="$value":e.index_===tN?t="$key":(E(e.index_ instanceof CN,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=te(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=te(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+te(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=te(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+te(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function BN(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==gN&&(t.i=e.index_.toString()),t}var WN=function(e){g(n,e);var t=w(n);function n(e,r,i,a){var o;return u(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=UE("p:rest:"),o.listens_={},o}return c(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=qN(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),ie(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=qN(e._queryParams),r=e._path.toString(),i=new V;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=v(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+ce(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=ee(c.responseText)}catch(n){BE("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&BE("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(E(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(TC),KN=function(){function e(){u(this,e),this.rootNode_=IN.EMPTY_NODE}return c(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function GN(){return{value:null,children:new Map}}function HN(e,t,n){if(UC(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=RC(t);e.children.has(r)||e.children.set(r,GN()),HN(e.children.get(r),t=LC(t),n)}}function QN(e,t){if(UC(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(gN,(function(t,n){HN(e,new PC(t),n)})),QN(e,t)}if(e.children.size>0){var r=RC(t);if(t=LC(t),e.children.has(r))QN(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function YN(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){YN(r,new PC(t.toString()+"/"+e),n)}))}var JN,XN=function(){function e(t){u(this,e),this.collection_=t,this.last_=null}return c(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&$E(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),$N=function(){function e(t,n){u(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new XN(t);var r=1e4+2e4*Math.random();rC(this.reportStats_.bind(this),Math.floor(r))}return c(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;$E(t,(function(t,i){i>0&&re(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),rC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function ZN(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(JN||(JN={}));var eA,tA=function(){function e(t,n,r){u(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=JN.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return c(e,[{key:"operationForChild",value:function(t){if(UC(this.path)){if(null!=this.affectedTree.value)return E(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new PC(t));return new e(DC(),n,this.revert)}return E(RC(this.path)===t,"operationForChild called for unrelated child."),new e(LC(this.path),this.affectedTree,this.revert)}}]),e}(),nA=function(){function e(t,n){u(this,e),this.source=t,this.path=n,this.type=JN.LISTEN_COMPLETE}return c(e,[{key:"operationForChild",value:function(t){return UC(this.path)?new e(this.source,DC()):new e(this.source,LC(this.path))}}]),e}(),rA=function(){function e(t,n,r){u(this,e),this.source=t,this.path=n,this.snap=r,this.type=JN.OVERWRITE}return c(e,[{key:"operationForChild",value:function(t){return UC(this.path)?new e(this.source,DC(),this.snap.getImmediateChild(t)):new e(this.source,LC(this.path),this.snap)}}]),e}(),iA=function(){function e(t,n,r){u(this,e),this.source=t,this.path=n,this.children=r,this.type=JN.MERGE}return c(e,[{key:"operationForChild",value:function(t){if(UC(this.path)){var n=this.children.subtree(new PC(t));return n.isEmpty()?null:n.value?new rA(this.source,DC(),n.value):new e(this.source,DC(),n)}return E(RC(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,LC(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),aA=function(){function e(t,n,r){u(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return c(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(UC(e))return this.isFullyInitialized()&&!this.filtered_;var t=RC(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),oA=c((function e(t){u(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function uA(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw C("Should only compare child_ events.");var r=new $C(t.childName,t.snapshotNode),i=new $C(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function sA(e,t){return{eventCache:e,serverCache:t}}function cA(e,t,n,r){return sA(new aA(t,n,r),e.serverCache)}function lA(e,t,n,r){return sA(e.eventCache,new aA(t,n,r))}function hA(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function fA(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var dA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(eA||(eA=new oN(QE)),eA);u(this,e),this.value=t,this.children=n}return c(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:DC(),value:this.value};if(UC(e))return null;var n=RC(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(LC(e),t);return null!=i?{path:zC(new PC(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(UC(t))return this;var n=RC(t),r=this.children.get(n);return null!==r?r.subtree(LC(t)):new e(null)}},{key:"set",value:function(t,n){if(UC(t))return new e(n,this.children);var r=RC(t),i=(this.children.get(r)||new e(null)).set(LC(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(UC(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=RC(t),r=this.children.get(n);if(r){var i,a=r.remove(LC(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(UC(e))return this.value;var t=RC(e),n=this.children.get(t);return n?n.get(LC(e)):null}},{key:"setTree",value:function(t,n){if(UC(t))return n;var r,i=RC(t),a=(this.children.get(i)||new e(null)).setTree(LC(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(DC(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(zC(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,DC(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(UC(e))return null;var i=RC(e),a=this.children.get(i);return a?a.findOnPath_(LC(e),zC(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,DC(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(UC(t))return this;this.value&&r(n,this.value);var i=RC(t),a=this.children.get(i);return a?a.foreachOnPath_(LC(t),zC(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(DC(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(zC(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return $E(t,(function(e,t){n=n.set(new PC(e),t)})),n}}]),e}(),pA=function(){function e(t){u(this,e),this.writeTree_=t}return c(e,null,[{key:"empty",value:function(){return new e(new dA(null))}}]),e}();function vA(e,t,n){if(UC(t))return new pA(new dA(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=VC(i,t);return a=a.updateChild(o,n),new pA(e.writeTree_.set(i,a))}var u=new dA(n),s=e.writeTree_.setTree(t,u);return new pA(s)}function mA(e,t,n){var r=e;return $E(n,(function(e,n){r=vA(r,zC(t,e),n)})),r}function yA(e,t){if(UC(t))return pA.empty();var n=e.writeTree_.setTree(t,new dA(null));return new pA(n)}function gA(e,t){return null!=_A(e,t)}function _A(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(VC(n.path,t)):null}function kA(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(gN,(function(e,n){t.push(new $C(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new $C(e,n.value))})),t}function wA(e,t){if(UC(t))return e;var n=_A(e,t);return new pA(null!=n?new dA(n):e.writeTree_.subtree(t))}function bA(e){return e.writeTree_.isEmpty()}function xA(e,t){return IA(DC(),e.writeTree_,t)}function IA(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(E(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=IA(zC(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(zC(e,".priority"),r)),n}function SA(e,t){return jA(t,e)}function TA(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));E(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&EA(u,r.path)?i=!1:WC(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=NA(e.allWrites,CA,DC()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=yA(e.visibleWrites,r.path):$E(r.children,(function(t){e.visibleWrites=yA(e.visibleWrites,zC(r.path,t))}));return!0}return!1}function EA(e,t){if(e.snap)return WC(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&WC(zC(e.path,n),t))return!0;return!1}function CA(e){return e.visible}function NA(e,t,n){for(var r=pA.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)WC(n,o)?r=vA(r,u=VC(n,o),a.snap):WC(o,n)&&(u=VC(o,n),r=vA(r,DC(),a.snap.getChild(u)));else{if(!a.children)throw C("WriteRecord should have .snap or .children");if(WC(n,o))r=mA(r,u=VC(n,o),a.children);else if(WC(o,n))if(UC(u=VC(o,n)))r=mA(r,DC(),a.children);else{var s=ie(a.children,RC(u));if(s){var c=s.getChild(LC(u));r=vA(r,DC(),c)}}}}}return r}function AA(e,t,n,r,i){if(r||i){var a=wA(e.visibleWrites,t);if(!i&&bA(a))return n;if(i||null!=n||gA(a,DC())){return xA(NA(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(WC(e.path,t)||WC(t,e.path))}),t),n||IN.EMPTY_NODE)}return null}var o=_A(e.visibleWrites,t);if(null!=o)return o;var u=wA(e.visibleWrites,t);return bA(u)?n:null!=n||gA(u,DC())?xA(u,n||IN.EMPTY_NODE):null}function PA(e,t,n,r){return AA(e.writeTree,e.treePath,t,n,r)}function DA(e,t){return function(e,t,n){var r=IN.EMPTY_NODE,i=_A(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(gN,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=wA(e.visibleWrites,t);return n.forEachChild(gN,(function(e,t){var n=xA(wA(a,new PC(e)),t);r=r.updateImmediateChild(e,n)})),kA(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return kA(wA(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function RA(e,t,n,r){return function(e,t,n,r,i){E(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=zC(t,n);if(gA(e.visibleWrites,a))return null;var o=wA(e.visibleWrites,a);return bA(o)?i.getChild(n):xA(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function OA(e,t){return function(e,t){return _A(e.visibleWrites,t)}(e.writeTree,zC(e.treePath,t))}function LA(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=wA(e.visibleWrites,t),c=_A(s,DC());if(null!=c)u=c;else{if(null==n)return[];u=xA(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function MA(e,t,n){return function(e,t,n,r){var i=zC(t,n),a=_A(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?xA(wA(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function FA(e,t){return jA(zC(e.treePath,t),e.writeTree)}function jA(e,t){return{treePath:e,writeTree:t}}var zA=function(){function e(){u(this,e),this.changeMap=new Map}return c(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;E("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),E(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,ON(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,RN(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,DN(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw C("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,ON(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),UA=new(function(){function e(){u(this,e)}return c(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),VA=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;u(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return c(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new aA(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return MA(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:fA(this.viewCache_),i=LA(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function qA(e,t,n,r,i){var a,o,u=new zA;if(n.type===JN.OVERWRITE){var s=n;s.source.fromUser?a=KA(e,t,s.path,s.snap,r,i,u):(E(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!UC(s.path),a=WA(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===JN.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=zC(n,r);GA(t,RC(c))&&(u=KA(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=zC(n,r);GA(t,RC(c))||(u=KA(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(E(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=QA(e,t,c.path,c.children,r,i,o,u))}else if(n.type===JN.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=OA(r,n))return t;var u,s=new VA(r,t,i),c=t.eventCache.getNode();if(UC(n)||".priority"===RC(n)){var l;if(t.serverCache.isFullyInitialized())l=PA(r,fA(t));else{var h=t.serverCache.getNode();E(h instanceof IN,"serverChildren would be complete if leaf node"),l=DA(r,h)}u=e.filter.updateFullNode(c,l,a)}else{var f=RC(n),d=MA(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(u=null!=d?e.filter.updateChild(c,f,d,LC(n),s,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,IN.EMPTY_NODE,LC(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=PA(r,fA(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=OA(r,DC()),cA(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=OA(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(UC(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return WA(e,t,n,s.getNode().getChild(n),i,a,u,o);if(UC(n)){var c=new dA(null);return s.getNode().forEachChild(tN,(function(e,t){c=c.set(new PC(e),t)})),QA(e,t,n,c,i,a,u,o)}return t}var l=new dA(null);return r.foreach((function(e,t){var r=zC(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),QA(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==JN.LISTEN_COMPLETE)throw C("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=lA(t,a.getNode(),a.isFullyInitialized()||UC(n),a.isFiltered());return BA(e,o,n,r,UA,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=hA(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(PN(hA(t)))}}(t,a,h),{viewCache:a,changes:h}}function BA(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=OA(r,n))return t;if(UC(n))if(E(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=fA(t),l=DA(r,c instanceof IN?c:IN.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=PA(r,fA(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=RC(n);if(".priority"===f){E(1===OC(n),"Can't have a priority with additional path components");var d=s.getNode(),p=RA(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,m=LC(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var y=RA(r,n,s.getNode(),u);v=null!=y?s.getNode().getImmediateChild(f).updateChild(m,y):s.getNode().getImmediateChild(f)}else v=MA(r,f,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),f,v,m,i,a):s.getNode()}}return cA(t,o,s.isFullyInitialized()||UC(n),e.filter.filtersNodes())}function WA(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(UC(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),h,null)}else{var f=RC(n);if(!c.isCompleteForPath(n)&&OC(n)>1)return t;var d=LC(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,UA,null)}var v=lA(t,s,c.isFullyInitialized()||UC(n),l.filtersNodes());return BA(e,v,n,i,new VA(i,v,a),u)}function KA(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new VA(i,t,a);if(UC(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=cA(t,s,!0,e.filter.filtersNodes());else{var h=RC(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=cA(t,s,c.isFullyInitialized(),c.isFiltered());else{var f,d=LC(n),p=c.getNode().getImmediateChild(h);if(UC(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===MC(d)&&v.getChild(jC(d)).isEmpty()?v:v.updateChild(d,r):IN.EMPTY_NODE}if(p.equals(f))u=t;else u=cA(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function GA(e,t){return e.eventCache.isCompleteForChild(t)}function HA(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function QA(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=UC(n)?r:new dA(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=HA(0,t.serverCache.getNode().getImmediateChild(n),r);c=WA(e,c,new PC(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var h=HA(0,t.serverCache.getNode().getImmediateChild(n),r);c=WA(e,c,new PC(n),h,i,a,o,u)}})),c}var YA,JA=function(){function e(t,n){u(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new LN(i.getIndex()),o=(r=i).loadsAllData()?new LN(r.getIndex()):r.hasLimit()?new FN(r):new MN(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,c=n.eventCache,l=a.updateFullNode(IN.EMPTY_NODE,s.getNode(),null),h=o.updateFullNode(IN.EMPTY_NODE,c.getNode(),null),f=new aA(l,s.isFullyInitialized(),a.filtersNodes()),d=new aA(h,c.isFullyInitialized(),o.filtersNodes());this.viewCache_=sA(d,f),this.eventGenerator_=new oA(this.query_)}return c(e,[{key:"query",get:function(){return this.query_}}]),e}();function XA(e,t){var n=fA(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!UC(t)&&!n.getImmediateChild(RC(t)).isEmpty())?n.getChild(t):null}function $A(e){return 0===e.eventRegistrations_.length}function ZA(e,t,n){var r=[];if(n){E(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function eP(e,t,n,r){t.type===JN.MERGE&&null!==t.source.queryId&&(E(fA(e.viewCache_),"We should always have a full cache before handling merges"),E(hA(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=qA(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,E(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),E(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),E(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,tP(e,u.changes,u.viewCache.eventCache.getNode(),null)}function tP(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),uA(e,i,"child_removed",t,r,n),uA(e,i,"child_added",t,r,n),uA(e,i,"child_moved",a,r,n),uA(e,i,"child_changed",t,r,n),uA(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var nP,rP=c((function e(){u(this,e),this.views=new Map}));function iP(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return E(null!=a,"SyncTree gave us an op for an invalid query."),eP(a,t,n,r)}var o,u=[],s=f(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(eP(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function aP(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=PA(n,i?r:null),s=!1;u?s=!0:r instanceof IN?(u=DA(n,r),s=!1):(u=IN.EMPTY_NODE,s=!1);var c=sA(new aA(u,s,!1),new aA(r,i,!1));return new JA(t,c)}return o}function oP(e,t,n,r,i,a){var o=aP(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(gN,(function(e,t){r.push(DN(e,t))})),n.isFullyInitialized()&&r.push(PN(n.getNode())),tP(e,r,n.getNode(),t)}(o,n)}function uP(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=fP(e);if("default"===i){var s,c=f(e.views.entries());try{for(c.s();!(s=c.n()).done;){var l=v(s.value,2),h=l[0],d=l[1];o=o.concat(ZA(d,n,r)),$A(d)&&(e.views.delete(h),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(m){c.e(m)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(ZA(p,n,r)),$A(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!fP(e)&&a.push(new(E(YA,"Reference.ts has not been loaded"),YA)(t._repo,t._path)),{removed:a,events:o}}function sP(e){var t,n=[],r=f(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function cP(e,t){var n,r=null,i=f(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||XA(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function lP(e,t){if(t._queryParams.loadsAllData())return dP(e);var n=t._queryIdentifier;return e.views.get(n)}function hP(e,t){return null!=lP(e,t)}function fP(e){return null!=dP(e)}function dP(e){var t,n=f(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var pP=1,vP=c((function e(t){u(this,e),this.listenProvider_=t,this.syncPointTree_=new dA(null),this.pendingWriteTree_={visibleWrites:pA.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function mP(e,t,n,r,i){return function(e,t,n,r,i){E(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=vA(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?SP(e,new rA({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function yP(e,t,n,r){!function(e,t,n,r){E(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=mA(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=dA.fromObject(n);return SP(e,new iA({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function gP(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(TA(e.pendingWriteTree_,t)){var i=new dA(null);return null!=r.snap?i=i.set(DC(),!0):$E(r.children,(function(e){i=i.set(new PC(e),!0)})),SP(e,new tA(r.path,i,n))}return[]}function _P(e,t,n){return SP(e,new rA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function kP(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||hP(o,t))){var s=uP(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return fP(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=function(e){return e.fold((function(e,t,n){if(t&&fP(t))return[dP(t)];var r=[];return t&&(r=sP(t)),$E(n,(function(e,t){r=r.concat(t)})),r}))}(f),p=0;p<d.length;++p){var v=d[p],m=v.query,y=CP(e,v);e.listenProvider_.startListening(OP(m),NP(e,m),y.hashFn,y.onComplete)}}if(!h&&c.length>0&&!r)if(l){e.listenProvider_.stopListening(OP(t),null)}else c.forEach((function(t){var n=e.queryToTagMap.get(AP(t));e.listenProvider_.stopListening(OP(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=AP(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,c)}return u}function wP(e,t,n,r){var i=PP(e,r);if(null!=i){var a=DP(i),o=a.path,u=a.queryId,s=VC(o,t);return RP(e,o,new rA(ZN(u),s,n))}return[]}function bP(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=VC(e,i);a=a||cP(t,n),o=o||fP(t)}));var u,s=e.syncPointTree_.get(i);(s?(o=o||fP(s),a=a||cP(s,DC())):(s=new rP,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)?u=!0:(u=!1,a=IN.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=cP(t,DC());n&&(a=a.updateImmediateChild(e,n))})));var c=hP(s,t);if(!c&&!t._queryParams.loadsAllData()){var l=AP(t);E(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=pP++;e.queryToTagMap.set(l,h),e.tagToQueryMap.set(h,l)}var f=oP(s,t,n,SA(e.pendingWriteTree_,i),a,u);if(!c&&!o&&!r){var d=lP(s,t);f=f.concat(function(e,t,n){var r=t._path,i=NP(e,t),a=CP(e,n),o=e.listenProvider_.startListening(OP(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)E(!fP(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!UC(e)&&t&&fP(t))return[dP(t).query];var r=[];return t&&(r=r.concat(sP(t).map((function(e){return e.query})))),$E(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(OP(l),NP(e,l))}return o}(e,t,d))}return f}function xP(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=cP(n,VC(e,t));if(r)return r}));return AA(r,t,i,n,!0)}function IP(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=VC(e,n);r=r||cP(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||cP(i,DC()):(i=new rP,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new aA(r,!0,!1):null;return function(e){return hA(e.viewCache_)}(aP(i,t,SA(e.pendingWriteTree_,t._path),a?o.getNode():IN.EMPTY_NODE,a))}function SP(e,t){return TP(t,e.syncPointTree_,null,SA(e.pendingWriteTree_,DC()))}function TP(e,t,n,r){if(UC(e.path))return EP(e,t,n,r);var i=t.get(DC());null==n&&null!=i&&(n=cP(i,DC()));var a=[],o=RC(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=FA(r,o);a=a.concat(TP(u,s,c,l))}return i&&(a=a.concat(iP(i,e,r,n))),a}function EP(e,t,n,r){var i=t.get(DC());null==n&&null!=i&&(n=cP(i,DC()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=FA(r,t),s=e.operationForChild(t);s&&(a=a.concat(EP(s,i,o,u)))})),i&&(a=a.concat(iP(i,e,r,n))),a}function CP(e,t){var n=t.query,r=NP(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||IN.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=PP(e,n);if(r){var i=DP(r),a=i.path,o=i.queryId,u=VC(a,t);return RP(e,a,new nA(ZN(o),u))}return[]}(e,n._path,r):function(e,t){return SP(e,new nA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return kP(e,n,null,i)}}}function NP(e,t){var n=AP(t);return e.queryToTagMap.get(n)}function AP(e){return e._path.toString()+"$"+e._queryIdentifier}function PP(e,t){return e.tagToQueryMap.get(t)}function DP(e){var t=e.indexOf("$");return E(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new PC(e.substr(0,t))}}function RP(e,t,n){var r=e.syncPointTree_.get(t);return E(r,"Missing sync point for query tag that we're tracking"),iP(r,n,SA(e.pendingWriteTree_,t),null)}function OP(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(E(nP,"Reference.ts has not been loaded"),nP)(e._repo,e._path):e}var LP=function(){function e(t){u(this,e),this.node_=t}return c(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),MP=function(){function e(t,n){u(this,e),this.syncTree_=t,this.path_=n}return c(e,[{key:"getImmediateChild",value:function(t){var n=zC(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return xP(this.syncTree_,this.path_)}}]),e}(),FP=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},jP=function(e,t,n){return e&&"object"===typeof e?(E(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?zP(e[".sv"],t,n):"object"===typeof e[".sv"]?UP(e[".sv"],t):void E(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},zP=function(e,t,n){if("timestamp"===e)return n.timestamp;E(!1,"Unexpected server value: "+e)},UP=function(e,t,n){e.hasOwnProperty("increment")||E(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&E(!1,"Unexpected increment value: "+r);var i=t.node();if(E(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},VP=function(e,t,n,r){return BP(t,new MP(n,e),r)},qP=function(e,t,n){return BP(e,new LP(t),n)};function BP(e,t,n){var r,i=e.getPriority().val(),a=jP(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=jP(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new pN(u,EN(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new pN(a))),s.forEachChild(gN,(function(e,i){var a=BP(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var WP=c((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};u(this,e),this.name=t,this.parent=n,this.node=r}));function KP(e,t){for(var n=t instanceof PC?t:new PC(t),r=e,i=RC(n);null!==i;){var a=ie(r.node.children,i)||{children:{},childCount:0};r=new WP(i,r,a),i=RC(n=LC(n))}return r}function GP(e){return e.node.value}function HP(e,t){e.node.value=t,$P(e)}function QP(e){return e.node.childCount>0}function YP(e,t){$E(e.node.children,(function(n,r){t(new WP(n,e,r))}))}function JP(e,t,n,r){n&&!r&&t(e),YP(e,(function(e){JP(e,t,!0,r)})),n&&r&&t(e)}function XP(e){return new PC(null===e.parent?e.name:XP(e.parent)+"/"+e.name)}function $P(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===GP(e)&&!QP(e)}(n),i=re(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,$P(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,$P(e))}(e.parent,e.name,e)}var ZP=/[\[\].#$\/\u0000-\u001F\u007F]/,eD=/[\[\].#$\u0000-\u001F\u007F]/,tD=10485760,nD=function(e){return"string"===typeof e&&0!==e.length&&!ZP.test(e)},rD=function(e){return"string"===typeof e&&0!==e.length&&!eD.test(e)},iD=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!WE(e)||e&&"object"===typeof e&&re(e,".sv")},aD=function(e,t,n,r){r&&void 0===t||oD(ye(e,"value"),t,n)},oD=function e(t,n,r){var i=r instanceof PC?new KC(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+HC(i));if("function"===typeof n)throw new Error(t+"contains a function "+HC(i)+" with contents = "+n.toString());if(WE(n))throw new Error(t+"contains "+n.toString()+" "+HC(i));if("string"===typeof n&&n.length>tD/3&&ke(n)>tD)throw new Error(t+"contains a string greater than "+tD+" utf8 bytes "+HC(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if($E(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!nD(n)))throw new Error(t+" contains an invalid key ("+n+") "+HC(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=ke(s),GC(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=ke(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+HC(i)+" in addition to actual children.")}},uD=function(e,t,n,r){if(!r||void 0!==t){var i=ye(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];$E(t,(function(e,t){var r=new PC(e);if(oD(i,t,zC(n,r)),".priority"===MC(r)&&!iD(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=FC(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!nD(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(qC);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&WC(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},sD=function(e,t,n){if(!n||void 0!==t){if(WE(t))throw new Error(ye(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!iD(t))throw new Error(ye(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},cD=function(e,t,n,r){if((!r||void 0!==n)&&!nD(n))throw new Error(ye(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},lD=function(e,t,n,r){if((!r||void 0!==n)&&!rD(n))throw new Error(ye(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},hD=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),lD(e,t,n,r)},fD=function(e,t){if(".info"===RC(t))throw new Error(e+" failed = Can't modify data under /.info/")},dD=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!nD(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),rD(e)}(n))throw new Error(ye(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},pD=c((function e(){u(this,e),this.eventLists_=[],this.recursionDepth_=0}));function vD(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||BC(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function mD(e,t,n){vD(e,n),gD(e,(function(e){return BC(e,t)}))}function yD(e,t,n){vD(e,n),gD(e,(function(e){return WC(e,t)||WC(t,e)}))}function gD(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(_D(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function _D(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();ME&&zE("event: "+n.toString()),nC(r)}}}var kD="repo_interrupt",wD=25,bD=function(){function e(t,n,r,i){u(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new pD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=GN(),this.transactionQueueTree_=new WP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return c(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function xD(e,t,n){if(e.stats_=yC(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new WN(e.repoInfo_,(function(t,n,r,i){TD(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return ED(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{te(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new JC(e.repoInfo_,t,(function(t,n,r,i){TD(e,t,n,r,i)}),(function(t){ED(e,t)}),(function(t){!function(e,t){$E(t,(function(t,n){CD(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return mC[n]||(mC[n]=t()),mC[n]}(e.repoInfo_,(function(){return new $N(e.stats_,e.server_)})),e.infoData_=new KN,e.infoSyncTree_=new vP({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=_P(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),CD(e,"connected",!1),e.serverSyncTree_=new vP({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);yD(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function ID(e){var t=e.infoData_.getNode(new PC(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function SD(e){return FP({timestamp:ID(e)})}function TD(e,t,n,r,i){e.dataUpdateCount++;var a=new PC(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=oe(n,(function(e){return EN(e)}));o=function(e,t,n,r){var i=PP(e,r);if(i){var a=DP(i),o=a.path,u=a.queryId,s=VC(o,t),c=dA.fromObject(n);return RP(e,o,new iA(ZN(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=EN(n);o=wP(e.serverSyncTree_,a,s,i)}else if(r){var c=oe(n,(function(e){return EN(e)}));o=function(e,t,n){var r=dA.fromObject(n);return SP(e,new iA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=EN(n);o=_P(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=zD(e,a)),yD(e.eventQueue_,h,o)}function ED(e,t){CD(e,"connected",t),!1===t&&function(e){LD(e,"onDisconnectEvents");var t=SD(e),n=GN();YN(e.onDisconnect_,DC(),(function(r,i){var a=VP(r,i,e.serverSyncTree_,t);HN(n,r,a)}));var r=[];YN(n,DC(),(function(t,n){r=r.concat(_P(e.serverSyncTree_,t,n));var i=WD(e,t);zD(e,i)})),e.onDisconnect_=GN(),yD(e.eventQueue_,DC(),r)}(e)}function CD(e,t,n){var r=new PC("/.info/"+t),i=EN(n);e.infoData_.updateSnapshot(r,i);var a=_P(e.infoSyncTree_,r,i);yD(e.eventQueue_,r,a)}function ND(e){return e.nextWriteId_++}function AD(e,t,n,r,i){LD(e,"set",{path:t.toString(),value:n,priority:r});var a=SD(e),o=EN(n,r),u=xP(e.serverSyncTree_,t),s=qP(o,u,a),c=ND(e),l=mP(e.serverSyncTree_,t,s,c,!0);vD(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||BE("set at "+t+" failed: "+n);var o=gP(e.serverSyncTree_,c,!a);yD(e.eventQueue_,t,o),MD(e,i,n,r)}));var h=WD(e,t);zD(e,h),yD(e.eventQueue_,h,[])}function PD(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&QN(e.onDisconnect_,t),MD(e,n,r,i)}))}function DD(e,t,n,r){var i=EN(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&HN(e.onDisconnect_,t,i),MD(e,r,n,a)}))}function RD(e,t,n){var r;r=".info"===RC(t._path)?kP(e.infoSyncTree_,t,n):kP(e.serverSyncTree_,t,n),mD(e.eventQueue_,t._path,r)}function OD(e){e.persistentConnection_&&e.persistentConnection_.interrupt(kD)}function LD(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];zE.apply(void 0,[t].concat(r))}function MD(e,t,n,r){t&&nC((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function FD(e,t,n){return xP(e.serverSyncTree_,t,n)||IN.EMPTY_NODE}function jD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||BD(e,t),GP(t)){var n=VD(e,t);E(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=FD(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];E(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=VC(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){LD(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(gP(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);BD(e,KP(e.transactionQueueTree_,t)),jD(e,e.transactionQueueTree_),yD(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)nC(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{BE("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}zD(e,t)}}),o)}(e,XP(t),n)}else QP(t)&&YP(t,(function(t){jD(e,t)}))}function zD(e,t){var n=UD(e,t),r=XP(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s,c=t[a],l=VC(n,c.path),h=!1;if(E(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(gP(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=wD)h=!0,u="maxretry",i=i.concat(gP(e.serverSyncTree_,c.currentWriteId,!0));else{var f=FD(e,c.path,o);c.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){oD("transaction failed: Data returned ",d,c.path);var p=EN(d);"object"===typeof d&&null!=d&&re(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=c.currentWriteId,m=SD(e),y=qP(p,f,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=ND(e),o.splice(o.indexOf(v),1),i=(i=i.concat(mP(e.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(gP(e.serverSyncTree_,v,!0))}else h=!0,u="nodata",i=i.concat(gP(e.serverSyncTree_,c.currentWriteId,!0))}yD(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===u?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(u),!1,null)}))))},s=0;s<t.length;s++)u(s);BD(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)nC(r[c]);jD(e,e.transactionQueueTree_)}(e,VD(e,n),r),r}function UD(e,t){var n,r=e.transactionQueueTree_;for(n=RC(t);null!==n&&void 0===GP(r);)r=KP(r,n),n=RC(t=LC(t));return r}function VD(e,t){var n=[];return qD(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function qD(e,t,n){var r=GP(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);YP(t,(function(t){qD(e,t,n)}))}function BD(e,t){var n=GP(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,HP(t,n.length>0?n:void 0)}YP(t,(function(t){BD(e,t)}))}function WD(e,t){var n=XP(UD(e,t)),r=KP(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){KD(e,t)})),KD(e,r),JP(r,(function(t){KD(e,t)})),n}function KD(e,t){var n=GP(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(E(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(E(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(gP(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?HP(t,void 0):n.length=a+1,yD(e.eventQueue_,XP(t),i);for(var u=0;u<r.length;u++)nC(r[u])}}var GD=function(e,t){var n=HD(e),r=n.namespace;"firebase.com"===n.domain&&qE(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||qE("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&BE("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new fC(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new PC(n.pathString)}},HD=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var d=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=f(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):BE("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=t.indexOf(".");r=t.substring(0,v).toLowerCase(),n=t.substring(v+1),a=r}"ns"in d&&(a=d.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},QD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",YD=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=QD.charAt(n%64),n=Math.floor(n/64);E(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=QD.charAt(t[r]);return E(20===o.length,"nextPushId: Length should be 20."),o}}(),JD=function(){function e(t,n,r,i){u(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return c(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+te(this.snapshot.exportVal())}}]),e}(),XD=function(){function e(t,n,r){u(this,e),this.eventRegistration=t,this.error=n,this.path=r}return c(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),$D=function(){function e(t,n){u(this,e),this.snapshotCallback=t,this.cancelCallback=n}return c(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return E(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),ZD=function(){function e(t,n){u(this,e),this._repo=t,this._path=n}return c(e,[{key:"cancel",value:function(){var e=new V;return PD(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){fD("OnDisconnect.remove",this._path);var e=new V;return DD(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){fD("OnDisconnect.set",this._path),aD("OnDisconnect.set",e,this._path,!1);var t=new V;return DD(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){fD("OnDisconnect.setWithPriority",this._path),aD("OnDisconnect.setWithPriority",e,this._path,!1),sD("OnDisconnect.setWithPriority",t,!1);var n=new V;return function(e,t,n,r,i){var a=EN(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&HN(e.onDisconnect_,t,a),MD(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){fD("OnDisconnect.update",this._path),uD("OnDisconnect.update",e,this._path,!1);var t=new V;return function(e,t,n,r){if(ae(n))return zE("onDisconnect().update() called with empty data.  Don't do anything."),void MD(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&$E(n,(function(n,r){var i=EN(r);HN(e.onDisconnect_,zC(t,n),i)})),MD(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),eR=function(){function e(t,n,r,i){u(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return c(e,[{key:"key",get:function(){return UC(this._path)?null:MC(this._path)}},{key:"ref",get:function(){return new iR(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=BN(this._queryParams),t=JE(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return BN(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=we(t))instanceof e))return!1;var n=this._repo===t._repo,r=BC(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function tR(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function nR(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===tN){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==KE)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==GE)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===gN){if(null!=t&&!iD(t)||null!=n&&!iD(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(E(e.getIndex()instanceof CN||e.getIndex()===AN,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function rR(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var iR=function(e){g(n,e);var t=w(n);function n(e,r){return u(this,n),t.call(this,e,r,new jN,!1)}return c(n,[{key:"parent",get:function(){var e=jC(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(eR),aR=function(){function e(t,n,r){u(this,e),this._node=t,this.ref=n,this._index=r}return c(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new PC(t),r=sR(this.ref,t);return new e(this._node.getChild(n),r,gN)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,sR(n.ref,r),gN))}))}},{key:"hasChild",value:function(e){var t=new PC(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function oR(e,t){return(e=we(e))._checkNotDeleted("ref"),void 0!==t?sR(e._root,t):e._root}function uR(e,t){(e=we(e))._checkNotDeleted("refFromURL");var n=GD(t,e._repo.repoInfo_.nodeAdmin);dD("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||qE("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),oR(e,n.path.toString())}function sR(e,t){return null===RC((e=we(e))._path)?hD("child","path",t,!1):lD("child","path",t,!1),new iR(e._repo,zC(e._path,t))}function cR(e,t){e=we(e),fD("set",e._path),aD("set",t,e._path,!1);var n=new V;return AD(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function lR(e,t){uD("update",t,e._path,!1);var n=new V;return function(e,t,n,r){LD(e,"update",{path:t.toString(),value:n});var i=!0,a=SD(e),o={};if($E(n,(function(n,r){i=!1,o[n]=VP(zC(t,n),EN(r),e.serverSyncTree_,a)})),i)zE("update() called with empty data.  Don't do anything."),MD(0,r,"ok",void 0);else{var u=ND(e),s=yP(e.serverSyncTree_,t,o,u);vD(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||BE("update at "+t+" failed: "+n);var o=gP(e.serverSyncTree_,u,!a),s=o.length>0?zD(e,t):t;yD(e.eventQueue_,s,o),MD(0,r,n,i)})),$E(n,(function(n){var r=WD(e,zC(t,n));zD(e,r)})),yD(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function hR(e){e=we(e);var t=new $D((function(){})),n=new fR(t);return function(e,t,n){var r=IP(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=EN(r).withIndex(t._queryParams.getIndex());if(bP(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=_P(e.serverSyncTree_,t._path,a);else{var o=NP(e.serverSyncTree_,t);i=wP(e.serverSyncTree_,t._path,a,o)}return yD(e.eventQueue_,t._path,i),kP(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return LD(e,"get for query "+te(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new aR(t,new iR(e._repo,e._path),e._queryParams.getIndex())}))}var fR=function(){function e(t){u(this,e),this.callbackContext=t}return c(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new JD("value",this,new aR(e.snapshotNode,new iR(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new XD(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),dR=function(){function e(t,n){u(this,e),this.eventType=t,this.callbackContext=n}return c(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new XD(this,e,t):null}},{key:"createEvent",value:function(e,t){E(null!=e.childName,"Child events should have a childName.");var n=sR(new iR(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new JD(e.type,this,new aR(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function pR(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){RD(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new $D(n,a||void 0),c="value"===t?new fR(s):new dR(t,s);return function(e,t,n){var r;r=".info"===RC(t._path)?bP(e.infoSyncTree_,t,n):bP(e.serverSyncTree_,t,n),mD(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return RD(e._repo,e,c)}}function vR(e,t,n,r){return pR(e,"value",t,n,r)}function mR(e,t,n,r){return pR(e,"child_added",t,n,r)}function yR(e,t,n,r){return pR(e,"child_changed",t,n,r)}function gR(e,t,n,r){return pR(e,"child_moved",t,n,r)}function _R(e,t,n,r){return pR(e,"child_removed",t,n,r)}function kR(e,t,n){var r=null,i=n?new $D(n):null;"value"===t?r=new fR(i):t&&(r=new dR(t,i)),RD(e._repo,e,r)}var wR=c((function e(){u(this,e)})),bR=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this))._value=e,i._key=r,i}return c(n,[{key:"_apply",value:function(e){aD("endAt",this._value,e._path,!0);var t=UN(e._queryParams,this._value,this._key);if(rR(t),nR(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new eR(e._repo,e._path,t,e._orderByCalled)}}]),n}(wR);var xR=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this))._value=e,i._key=r,i}return c(n,[{key:"_apply",value:function(e){aD("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===tN||n?UN(e,t,n):UN(e,t,KE)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(rR(t),nR(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new eR(e._repo,e._path,t,e._orderByCalled)}}]),n}(wR);var IR=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this))._value=e,i._key=r,i}return c(n,[{key:"_apply",value:function(e){aD("startAt",this._value,e._path,!0);var t=zN(e._queryParams,this._value,this._key);if(rR(t),nR(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new eR(e._repo,e._path,t,e._orderByCalled)}}]),n}(wR);var SR=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this))._value=e,i._key=r,i}return c(n,[{key:"_apply",value:function(e){aD("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===tN||n?zN(e,t,n):zN(e,t,GE)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(rR(t),nR(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new eR(e._repo,e._path,t,e._orderByCalled)}}]),n}(wR);var TR=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this))._limit=e,r}return c(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new eR(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(wR);var ER=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this))._limit=e,r}return c(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new eR(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(wR);var CR=function(e){g(n,e);var t=w(n);function n(e){var r;return u(this,n),(r=t.call(this))._path=e,r}return c(n,[{key:"_apply",value:function(e){tR(e,"orderByChild");var t=new PC(this._path);if(UC(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new CN(t),r=VN(e._queryParams,n);return nR(r),new eR(e._repo,e._path,r,!0)}}]),n}(wR);var NR=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n,[{key:"_apply",value:function(e){tR(e,"orderByKey");var t=VN(e._queryParams,tN);return nR(t),new eR(e._repo,e._path,t,!0)}}]),n}(wR);var AR=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n,[{key:"_apply",value:function(e){tR(e,"orderByPriority");var t=VN(e._queryParams,gN);return nR(t),new eR(e._repo,e._path,t,!0)}}]),n}(wR);var PR=function(e){g(n,e);var t=w(n);function n(){return u(this,n),t.apply(this,arguments)}return c(n,[{key:"_apply",value:function(e){tR(e,"orderByValue");var t=VN(e._queryParams,AN);return nR(t),new eR(e._repo,e._path,t,!0)}}]),n}(wR);var DR=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this))._value=e,i._key=r,i}return c(n,[{key:"_apply",value:function(e){if(aD("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new bR(this._value,this._key)._apply(new IR(this._value,this._key)._apply(e))}}]),n}(wR);function RR(e){for(var t=we(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){t=o[a]._apply(t)}return t}!function(e){E(!YA,"__referenceConstructor has already been defined"),YA=e}(iR),function(e){E(!nP,"__referenceConstructor has already been defined"),nP=e}(iR);var OR="FIREBASE_DATABASE_EMULATOR_HOST",LR={},MR=!1;function FR(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||qE("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zE("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=GD(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[OR]),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=GD(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new oC(oC.OWNER):new aC(e.name,e.options,t);dD("Invalid Firebase Database URL",u),UC(u.path)||qE("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=LR[t.name];i||(i={},LR[t.name]=i);var a=i[e.toURLString()];a&&qE("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new bD(e,MR,n,r),i[e.toURLString()]=a,a}(s,e,l,new iC(e.name,n));return new jR(h,e)}var jR=function(){function e(t,n){u(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return c(e,[{key:"_repo",get:function(){return this._instanceStarted||(xD(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new iR(this._repo,DC())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=LR[t];n&&n[e.key]===e||qE("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),OD(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&qE("Cannot call "+e+" on a deleted database.")}}]),e}();function zR(){IC.IS_TRANSPORT_INITIALIZED&&BE("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function UR(){zR(),kC.forceDisallow()}function VR(){zR(),xC.forceDisallow(),kC.forceAllow()}function qR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=we(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&qE("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&qE('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new oC(oC.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:q(r.mockUserToken,e.app.options.projectId);a=new oC(o)}!function(e,t,n,r){e.repoInfo_=new fC("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}function BR(e){var t;(e=we(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(kD)}function WR(e,t){jE(e,t)}var KR={".sv":"timestamp"};var GR=function(){function e(t,n){u(this,e),this.committed=t,this.snapshot=n}return c(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function HR(e,t,n){var r;if(e=we(e),fD("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new V,o=vR(e,(function(){}));return function(e,t,n,r,i,a){LD(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:RE(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=FD(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{oD("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=KP(e.transactionQueueTree_,t),h=GP(l)||[];h.push(o),HP(l,h),"object"===typeof s&&null!==s&&re(s,".priority")?(c=ie(s,".priority"),E(iD(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(xP(e.serverSyncTree_,t)||IN.EMPTY_NODE).getPriority().val();var f=SD(e),d=EN(s,c),p=qP(d,u,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=ND(e);var v=mP(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);yD(e.eventQueue_,t,v),jD(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new aR(r,new iR(e._repo,e._path),gN),a.resolve(new GR(n,i)))}),o,i),a.promise}JC.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},JC.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){TE(xt),mt(new Ee("database",(function(e,t){var n=t.instanceIdentifier;return FR(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Nt(xE,IE,e),Nt(xE,IE,"esm2017")}();var QR=new je("@firebase/database-compat"),YR=function(e){var t="FIREBASE WARNING: "+e;QR.warn(t)},JR=function(){function e(t){u(this,e),this._delegate=t}return c(e,[{key:"cancel",value:function(e){me("OnDisconnect.cancel",0,1,arguments.length),ge("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){me("OnDisconnect.remove",0,1,arguments.length),ge("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){me("OnDisconnect.set",1,2,arguments.length),ge("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){me("OnDisconnect.setWithPriority",2,3,arguments.length),ge("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(me("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,YR("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ge("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),XR=function(){function e(t,n){u(this,e),this.committed=t,this.snapshot=n}return c(e,[{key:"toJSON",value:function(){return me("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),$R=function(){function e(t,n){u(this,e),this._database=t,this._delegate=n}return c(e,[{key:"val",value:function(){return me("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return me("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return me("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return me("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return me("DataSnapshot.child",0,1,arguments.length),t=String(t),lD("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return me("DataSnapshot.hasChild",1,1,arguments.length),lD("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return me("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return me("DataSnapshot.forEach",1,1,arguments.length),ge("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return me("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return me("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return me("DataSnapshot.ref",0,0,arguments.length),new eO(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),ZR=function(){function e(t,n){u(this,e),this.database=t,this._delegate=n}return c(e,[{key:"on",value:function(t,n,r,i){var a,o=this;me("Query.on",2,4,arguments.length),ge("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new $R(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return vR(this._delegate,s,c),n;case"child_added":return mR(this._delegate,s,c),n;case"child_removed":return _R(this._delegate,s,c),n;case"child_changed":return yR(this._delegate,s,c),n;case"child_moved":return gR(this._delegate,s,c),n;default:throw new Error(ye("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(me("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ye(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),ge("Query.off","callback",t,!0),_e("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,kR(this._delegate,e,r)}else kR(this._delegate,e)}},{key:"get",value:function(){var e=this;return hR(this._delegate).then((function(t){return new $R(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;me("Query.once",1,4,arguments.length),ge("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new V,s=function(e,t){var r=new $R(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":vR(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":mR(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":_R(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":yR(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":gR(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(ye("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return me("Query.limitToFirst",1,1,arguments.length),new e(this.database,RR(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new TR(e)}(t)))}},{key:"limitToLast",value:function(t){return me("Query.limitToLast",1,1,arguments.length),new e(this.database,RR(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ER(e)}(t)))}},{key:"orderByChild",value:function(t){return me("Query.orderByChild",1,1,arguments.length),new e(this.database,RR(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return lD("orderByChild","path",e,!1),new CR(e)}(t)))}},{key:"orderByKey",value:function(){return me("Query.orderByKey",0,0,arguments.length),new e(this.database,RR(this._delegate,new NR))}},{key:"orderByPriority",value:function(){return me("Query.orderByPriority",0,0,arguments.length),new e(this.database,RR(this._delegate,new AR))}},{key:"orderByValue",value:function(){return me("Query.orderByValue",0,0,arguments.length),new e(this.database,RR(this._delegate,new PR))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return me("Query.startAt",0,2,arguments.length),new e(this.database,RR(this._delegate,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return cD("startAt","key",t,!0),new IR(e,t)}(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return me("Query.startAfter",0,2,arguments.length),new e(this.database,RR(this._delegate,function(e,t){return cD("startAfter","key",t,!0),new SR(e,t)}(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return me("Query.endAt",0,2,arguments.length),new e(this.database,RR(this._delegate,function(e,t){return cD("endAt","key",t,!0),new bR(e,t)}(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return me("Query.endBefore",0,2,arguments.length),new e(this.database,RR(this._delegate,function(e,t){return cD("endBefore","key",t,!0),new xR(e,t)}(t,n)))}},{key:"equalTo",value:function(t,n){return me("Query.equalTo",1,2,arguments.length),new e(this.database,RR(this._delegate,function(e,t){return cD("equalTo","key",t,!0),new DR(e,t)}(t,n)))}},{key:"toString",value:function(){return me("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return me("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(me("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new eO(this.database,new iR(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,ge(e,"cancel",r.cancel,!0),r.context=n,_e(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(ye(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),eO=function(e){g(n,e);var t=w(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,new eR(r._repo,r._path,new jN,!1))).database=e,i._delegate=r,i}return c(n,[{key:"getKey",value:function(){return me("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return me("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,sR(this._delegate,e))}},{key:"getParent",value:function(){me("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return me("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){me("Reference.set",1,2,arguments.length),ge("Reference.set","onComplete",t,!0);var n=cR(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(me("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,YR("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fD("Reference.update",this._delegate._path),ge("Reference.update","onComplete",t,!0);var i=lR(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){me("Reference.setWithPriority",2,3,arguments.length),ge("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(fD("setWithPriority",e._path),aD("setWithPriority",t,e._path,!1),sD("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new V;return AD(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){me("Reference.remove",0,1,arguments.length),ge("Reference.remove","onComplete",e,!0);var t,n=(t=this._delegate,fD("remove",t._path),cR(t,null));return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n}},{key:"transaction",value:function(e,t,n){var r=this;me("Reference.transaction",1,3,arguments.length),ge("Reference.transaction","transactionUpdate",e,!1),ge("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(ye(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);var i=HR(this._delegate,e,{applyLocally:n}).then((function(e){return new XR(e.committed,new $R(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){me("Reference.setPriority",1,2,arguments.length),ge("Reference.setPriority","onComplete",t,!0);var n=function(e,t){e=we(e),fD("setPriority",e._path),sD("setPriority",t,!1);var n=new V;return AD(e._repo,zC(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;me("Reference.push",0,2,arguments.length),ge("Reference.push","onComplete",t,!0);var i=function(e,t){e=we(e),fD("push",e._path),aD("push",t,e._path,!0);var n,r=ID(e._repo),i=YD(r),a=sR(e,i),o=sR(e,i);return n=null!=t?cR(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return fD("Reference.onDisconnect",this._delegate._path),new JR(new ZD(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(ZR),tO=function(){function e(t,n){var r=this;u(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:UR,forceLongPolling:VR}}return c(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};qR(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(me("database.ref",0,1,arguments.length),e instanceof eO){var t=uR(this._delegate,e.toString());return new eO(this,t)}var n=oR(this._delegate,e);return new eO(this,n)}},{key:"refFromURL",value:function(e){me("database.refFromURL",1,1,arguments.length);var t=uR(this._delegate,e);return new eO(this,t)}},{key:"goOffline",value:function(){return me("database.goOffline",0,0,arguments.length),function(e){(e=we(e))._checkNotDeleted("goOffline"),OD(e._repo)}(this._delegate)}},{key:"goOnline",value:function(){return me("database.goOnline",0,0,arguments.length),BR(this._delegate)}}]),e}();tO.ServerValue={TIMESTAMP:KR,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var nO=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;TE(r);var s=new Ne("auth-internal",new De("database-standalone"));return s.setComponent(new Ee("auth-internal",(function(){return i}),"PRIVATE")),{instance:new tO(FR(t,s,void 0,n,u),t),namespace:a}}}),rO=tO.ServerValue;!function(e){e.INTERNAL.registerComponent(new Ee("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new tO(i,r)}),"PUBLIC").setServiceProps({Reference:eO,Query:ZR,Database:tO,DataSnapshot:$R,enableLogging:WR,INTERNAL:nO,ServerValue:rO}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.3.4")}(tn);var iO={apiKey:"AIzaSyB1mWqevmipidxWW264EnXV__YFdSkx93M",authDomain:"umka-77a72.firebaseapp.com",databaseURL:"https://umka-77a72-default-rtdb.firebaseio.com",projectId:"umka-77a72",storageBucket:"umka-77a72.appspot.com",messagingSenderId:"270019919476",appId:"1:270019919476:web:28ff114af689a2143bdb21"},aO=n.p+"static/media/podvodnie-peizazhi-1.4e8308c03b75dedab97a.jpg",oO=n(184),uO=function(){var e=Vy(It(iO)),n=v((0,t.useState)(!1),2),r=n[0],i=n[1],a=v((0,t.useState)(""),2),o=a[0],u=a[1],s=v((0,t.useState)(""),2),c=s[0],l=s[1],h=v((0,t.useState)(""),2),f=h[0],d=h[1],p=(0,t.useRef)(null),m=function(){var t=Te(be().mark((function t(n){var r,a;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=p.current,n.preventDefault(),""!==c&&""!==f){t.next=7;break}r.style.display="inherit",setTimeout((function(){r.style.display="none"}),5e3),t.next=21;break;case 7:return t.prev=7,t.next=10,c_(Ry(e,"users"),{login:c,password:f,date:new Date});case 10:a=t.sent,console.log("Document written with ID: ",a.id),u(a.id),i(!0),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(7),console.error("Error adding document: ",t.t0);case 19:return t.prev=19,t.finish(19);case 21:case"end":return t.stop()}}),t,null,[[7,16,19,21]])})));return function(e){return t.apply(this,arguments)}}();return(0,oO.jsx)(oO.Fragment,{children:r?(0,oO.jsx)(sL,{id:o}):(0,oO.jsxs)(oO.Fragment,{children:[(0,oO.jsx)("div",{className:bE.bgContainer,style:{backgroundImage:"url(".concat(aO,")")}}),(0,oO.jsx)("div",{className:bE.authContainer,children:(0,oO.jsxs)("div",{className:bE.auth,children:[(0,oO.jsx)("p",{className:bE.namePage,children:"Register"}),(0,oO.jsx)("p",{ref:p,className:bE.errorRegister,children:"incorrect username or password"}),(0,oO.jsx)("input",{type:"text",name:"email",id:"email",placeholder:"Login or email",className:bE.login,value:c.trim(),onChange:function(e){return l(e.target.value)}}),(0,oO.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Password",className:bE.password,value:f.trim(),onChange:function(e){return d(e.target.value)}}),(0,oO.jsx)("button",{onClick:m,className:bE.createBtn,children:"Create account"}),(0,oO.jsx)("p",{style:{color:"#000",textAlign:"center"},children:"or"}),(0,oO.jsx)("button",{onClick:function(){return i(!0)},className:bE.loginBtn,children:"Login"})]})})]})})},sO=n.p+"static/media/Screenshot_9.2b0a8741973f65cb6743.png",cO=function(e){var t=e.url,n=e.alt;return(0,oO.jsx)("div",{children:(0,oO.jsx)("form",{action:t,target:"_blank",children:(0,oO.jsx)("a",{href:t,className:bE.btn,children:(0,oO.jsx)("img",{src:sO,alt:n,style:{width:"350px",height:"200px",borderRadius:"10px"}})})})})},lO=JSON.parse('[{"id":"2","name":"Game-keybord","url":"https://umka-ness.github.io/Game-keybord/","description":"descriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondedescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondedescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptiondescriptionscriptiondescriptiondescriptiondescriptiondescriptionscriptiondescriptiondescriptiondescriptiondescription"},{"id":"3","name":"Sorting-Quiz","url":"https://umka-ness.github.io/Sorting-Quiz/","description":"description"},{"id":"4","name":"GameThree","url":"https://umka-ness.github.io/Game-keybord/","description":"description"},{"id":"5","name":"gameFour","url":"https://umka-ness.github.io/Game-keybord/","description":"description"},{"id":"6","name":"gameFour","url":"https://umka-ness.github.io/Game-keybord/","description":"description"}]'),hO=function(e){e.name;var n=e.dataSvg;return(0,t.useEffect)((function(){localStorage.setItem("numberPage","  StepByStepGame")}),[]),(0,oO.jsx)(oO.Fragment,{children:(0,oO.jsx)("img",{src:n,alt:"Images",className:bE.btnImage})})},fO=function(e){var n=e.id,r=e.text,i=e.textOne,a=e.textTwo,o=e.textThree,u=e.goodAnswer,s=v((0,t.useState)(!1),2),c=s[0],l=s[1],h=function(){l(!0)};return(0,oO.jsxs)("div",{style:{display:"flex"},id:n,children:[(0,oO.jsxs)("div",{className:bE.answers,children:[(0,oO.jsx)("button",{style:{width:"200px",borderRadius:"15px",border:"1px solid black",padding:"5px",cursor:"pointer"},data:r===u?u:"",disabled:c,datavalue:"answerBtn",onClick:h,children:r}),(0,oO.jsx)("button",{style:{width:"200px",borderRadius:"15px",border:"1px solid black",padding:"5px",cursor:"pointer"},data:i===u?u:"",disabled:c,datavalue:"answerBtn",onClick:h,children:i})]}),(0,oO.jsxs)("div",{className:bE.answers,children:[(0,oO.jsx)("button",{style:{width:"200px",borderRadius:"15px",border:"1px solid black",padding:"5px",cursor:"pointer"},data:a===u?u:"",disabled:c,datavalue:"answerBtn",onClick:h,children:a}),(0,oO.jsx)("button",{style:{width:"200px",borderRadius:"15px",border:"1px solid black",padding:"5px",cursor:"pointer"},data:o===u?u:"",disabled:c,datavalue:"answerBtn",onClick:h,children:o})]})]})},dO={1:{y:27.5,x:8,xTranslate:-8,yTranslate:-28.6},2:{y:27.5,x:24,xTranslate:-24,yTranslate:-28.6},3:{y:27.5,x:44,xTranslate:-44,yTranslate:-28.6},4:{y:27.5,x:60,xTranslate:-60,yTranslate:-28.6},5:{y:27.5,x:76,xTranslate:-76,yTranslate:-28.6},6:{y:51.5,x:12,xTranslate:-12,yTranslate:-53},7:{y:51.5,x:28,xTranslate:-28,yTranslate:-53},8:{y:51.5,x:44,xTranslate:-44,yTranslate:-53},9:{y:51.5,x:64,xTranslate:-64,yTranslate:-53},10:{y:51.5,x:80,xTranslate:-80,yTranslate:-53}},pO=function(e){var r=e.name,i=e.id,a=e.value,o=e.text,u=e.textOne,s=e.textTwo,c=e.textThree,l=e.goodAnswer,h=v((0,t.useState)(!1),2),f=h[0],d=h[1],p=(0,t.useRef)(null),m=(0,t.useRef)(),y=(0,t.useRef)(),g=(0,t.useRef)(),_=document.getElementsByTagName("body")[0];_.style.overflowX="hidden";!function(){for(var e=0,t=[l];e<t.length;e++){var n=t[e];console.log(n)}}();var k=function(e,t,n,r,i,a,o,u,s,c,l,h,d,p,v,m){n.style.top=v,n.style.transition="top 0.5s",r.style.zIndex=u,r.style.position=s,r.style.top="".concat(t,"%"),r.style.left="".concat(e,"%"),r.style.transform="translate(".concat(a,"%, ").concat(o,"%)"),r.style.transition=c,r.style.width=l,r.style.height=h,i.style.fontSize="24px",_.style.overflowY=m,n.style.backgroundSize="cover",n.style.borderTopLeftRadius=d,n.style.borderTopRightRadius=p,setTimeout((function(){f?(r.style.minWidth=l,r.style.minHeight=h):(r.style.minWidth="0",r.style.minHeight="0")}),200)},w=[n(66),n(271),n(382),n(112),n(74),n(318),n(741),n(502),n(306),n(695)];return(0,oO.jsxs)("div",{onClick:function(e){window.scrollTo({top:0,behavior:"smooth"});var t=g.current,n=e.target.id,r=p.current,i=m.current,a=y.current;try{var o=dO[n],u=o.y,s=o.x,c=o.xTranslate,l=o.yTranslate;if(t.style.display="inherit",!f&&window.innerWidth>=1e3)d(!0),k(s,u,r,i,a,c,l,9,"absolute","2s","950px","500px","0px","0px","420px","hidden");else if(!f&&window.innerWidth>=520)d(!0),k(s,u,r,i,a,c,l,9,"absolute","2s","100vw","650px","0px","0px","520px","hidden");else if(!f&&window.innerWidth>=325&&window.innerHeight>=700)d(!0),k(s,u,r,i,a,c,l+1,9,"absolute","2s","100vw","100vh","0px","0px","720px","auto");else if(!f&&window.innerWidth>=325)d(!0),k(s,u,r,i,a,c,l-15,9,"absolute","2s","100vw","90vh","0px","0px","520px","auto");else if(!f&&window.innerWidth<=324)d(!0),k(s,u,r,i,a,c,l-38.5,9,"absolute","2s","100vw","100vh","0px","0px","650px","auto");else{r.style.top="120px",i.style.position="absolute",i.style.minWidth="0",i.style.minHeight="0",i.style.width="150px",i.style.height="150px",i.style.transform="scale(1)",i.style.zIndex="1",a.style.fontSize="13px",t.style.display="none",d(!1);var h=setTimeout((function(){i.style.position="inherit",clearTimeout(h)}),1300)}}catch(VE){}},className:bE.btnGame,ref:m,id:i,children:[(0,oO.jsx)("div",{ref:p,style:{backgroundImage:"url(".concat(w[i-1],")")},className:bE.btnContainerGame,id:i,value:a}),(0,oO.jsxs)("button",{style:{width:"100%",height:"100%",backgroundColor:"orange",border:"none",borderRadius:"13px"},ref:y,id:i,children:[(0,oO.jsx)("div",{id:i,children:r}),(0,oO.jsx)("div",{style:{display:"none",position:"relative",top:"80px"},ref:g,className:bE.answers,children:(0,oO.jsx)(fO,{id:i,text:o,textOne:u,textTwo:s,textThree:c,goodAnswer:l})})]})]})},vO=n.p+"static/media/fon.f497b4796173ee7c8d93.png",mO=function(e){var t=e.error;return(0,oO.jsx)("div",{children:(0,oO.jsx)("div",{id:"close",style:{display:"flex",width:"100vw",height:"100vh",justifyContent:"center",alignItems:"center",zIndex:"11"},children:(0,oO.jsxs)("div",{className:bE.modalContainer,children:[(0,oO.jsxs)("div",{children:[(0,oO.jsx)("div",{children:"Modal"}),(0,oO.jsx)("div",{children:"Text"}),(0,oO.jsx)("div",{children:t})]}),(0,oO.jsx)("div",{children:(0,oO.jsx)("button",{className:bE.closeBtn,children:"x"})})]})})})},yO=function(e,n){n=e.data,console.log(e);var r=v((0,t.useState)(!1),2),i=r[0],a=r[1],o=v((0,t.useState)(!1),2),u=o[0],s=o[1],c=v((0,t.useState)(0),2),l=c[0],h=c[1],f=(0,t.useRef)();(0,t.useEffect)((function(){2===l&&(setTimeout((function(){f.current.style.transform="translate(-50%, -50%) scale(1)"}),300),f.current.style.display="inherit")}),[l]);var d=function(e){a(!0)},p=function(e){s(!0);try{"answerBtn"===e.target.attributes.datavalue.value&&(e.target.style.backgroundColor="purple",e.target.style.color="white",console.log(e.target.textContent),console.log(e.target.goodAnswer),e.target.goodAnswer!==e.target.textContent&&h(l+1))}catch(l){}},m=function(e){"x"!==e.target.textContent&&"close"!==e.target.id||(setTimeout((function(){f.current.style.display="none"}),300),f.current.style.transform="translate(-50%, -50%) scale(0)")};return function(e){return i?(0,oO.jsx)(GO,{}):(0,oO.jsxs)(oO.Fragment,{children:[(0,oO.jsx)("div",{style:{backgroundImage:"url(".concat(vO,")"),width:"100vw",height:"100vh",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},className:bE.fon}),(0,oO.jsxs)("div",{style:{display:"flex",minHeight:"100vh",justifyContent:"center"},children:[(0,oO.jsx)("button",{className:bE.BackBtn,onClick:d,id:"back",children:"Back"}),(0,oO.jsx)("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignContent:"center",gap:"20px",flexWrap:"wrap",maxWidth:"995px"},children:e.map((function(e,t){return(0,oO.jsx)("div",{onClick:p,children:(0,oO.jsx)(pO,{name:e.name,id:e.id,index:t+1,text:e.text,textOne:e.textOne,textTwo:e.textTwo,textThree:e.textThree,value:u,goodAnswer:e.goodAnswer,answerBtn:"answerBtn"})},e.id)}))}),(0,oO.jsx)("div",{className:bE.stepbystepModale,ref:f,onClick:m,children:(0,oO.jsx)(mO,{error:l})})]})]})}(n)},gO=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________","text":"wadw","textOne":"textone","textTwo":"miasto","textThree":"876543","goodAnswer":"miasto"},{"id":2,"name":"Ela ma __________________","text":"2","textOne":"textonetwo","textTwo":"nic","textThree":"876543wadawdawda","goodAnswer":"nic"},{"id":3,"name":"Andrzej jest z zawodu ____________________","text":"3","textOne":";;;;;;;","textTwo":"tak","textThree":"8765431231231","goodAnswer":"tak"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?","text":"wagfddw","textOne":"spacer","textTwo":"awdawd","textThree":"876543","goodAnswer":"spacer"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak.","text":"mi\u0142e","textOne":"22","textTwo":"1","textThree":"2","goodAnswer":"mi\u0142e"},{"id":6,"name":"_______ si\u0119 zajmujesz?","text":"wadw","textOne":";;;;;;;","textTwo":"awdawd","textThree":"pan","goodAnswer":"pan"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________","text":"ikujhg","textOne":";;;;;;;","textTwo":"Ukrainu","textThree":"876543","goodAnswer":"Ukrainu"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________","text":"1234","textOne":"ma\u0142a","textTwo":"awdawd","textThree":"876543","goodAnswer":"ma\u0142a"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119.","text":"mnb v","textOne":"pan","textTwo":"awdawd","textThree":"876543","goodAnswer":"pan"},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego.","text":" wd wad w w","textOne":";;;;;;;","textTwo":"xz","textThree":"876543lox","goodAnswer":"xz"}]'),_O=JSON.parse('[{"id":1,"name":"1"},{"id":2,"name":"2"},{"id":3,"name":"3"},{"id":4,"name":"123"},{"id":5,"name":"Kub321."},{"id":6,"name":"_____4211sz?"},{"id":7,"name":"Nie l1231 ________"},{"id":8,"name":"D12312_________"},{"id":9,"name":"D12312"},{"id":10,"name":"W421412."}]'),kO=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),wO=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),bO=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),xO=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),IO=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),SO=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),TO=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),EO=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),CO=JSON.parse('[{"id":1,"name":"aaaaaaa"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),NO=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),AO=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),PO=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),DO=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),RO=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]'),OO=JSON.parse('[{"id":1,"name":"Krak\xf3w to polskie __________________"},{"id":2,"name":"Ela ma __________________"},{"id":3,"name":"Andrzej jest z zawodu ____________________"},{"id":4,"name":"Idziemy na ________, p\xf3jdziesz z nami?"},{"id":5,"name":"Kuba to bardzo __________ ch\u0142opak."},{"id":6,"name":"_______ si\u0119 zajmujesz?"},{"id":7,"name":"Nie lubi\u0119 pi\u0142ki no\u017cnej, wol\u0119 gra\u0107 w ________"},{"id":8,"name":"Dzisiaj temperatura jest bardzo wysoka, jest ___________"},{"id":9,"name":"Dwa lata temu _________ szko\u0142\u0119."},{"id":10,"name":"W czwartek studenci b\u0119d\u0105 _________ egzamin z j\u0119zyka polskiego."}]');var LO=n.p+"static/media/Go.4343a377ccd01138ea872719176a7622.svg";var MO=n.p+"static/media/bag-1-star.9c3ec4cb14af5d5225e23fd95e651090.svg";var FO=n.p+"static/media/bag-2-stars.676ad479661644aeca9bcd6e66562e10.svg";var jO=n.p+"static/media/bag-3-stars.416ae4603859a27a57675ec72bb27605.svg";var zO=n.p+"static/media/key-1-star.e27cbac06427d6218b57403358007f7f.svg";var UO=n.p+"static/media/key-2-stars.0e2d3d9e44c71dc04b8f0209105941fe.svg";var VO=n.p+"static/media/key-3-stars.d413446b2b6e87426b677c9510f43f73.svg";var qO=n.p+"static/media/question-1-star.1bc5e74e47a96a44dcfa444dd6e15a0d.svg";var BO=n.p+"static/media/question-2-stars.c10ff5cda96c5c3ec48d095f1e9ec0bd.svg";var WO=n.p+"static/media/question-3-stars.a2afbcd0bba765b5bbfffec6acf2d1b6.svg",KO=n.p+"static/media/top-view-of-the-countryside.ca9e841118cb4d67ee0f.jpg",GO=function(){document.getElementsByTagName("body")[0].style.overflowX="hidden";var e=v((0,t.useState)(!1),2),n=e[0],r=e[1],i=v((0,t.useState)(!1),2),a=i[0],o=i[1],u=v((0,t.useState)(""),2),s=u[0],c=u[1];(0,t.useEffect)((function(){localStorage.setItem("numberPage","StepByStep")}),[]);var l=function(e){var t=e.target.id;console.log(t),r(!0)},h=function(e){c(e.currentTarget.id),o(!0)};return"1"===s?console.log("da"):console.log("net"),!0===n?(0,oO.jsx)(JO,{}):a?"1"===s?(0,oO.jsx)(yO,{dataId:s,data:gO,dataSvg:LO}):"2"===s?(0,oO.jsx)(yO,{dataId:s,data:_O}):"3"===s?(0,oO.jsx)(yO,{dataId:s,data:kO}):"4"===s?(0,oO.jsx)(yO,{dataId:s,data:wO}):"5"===s?(0,oO.jsx)(yO,{dataId:s,data:bO}):"6"===s?(0,oO.jsx)(yO,{dataId:s,data:xO}):"7"===s?(0,oO.jsx)(yO,{dataId:s,data:IO}):"8"===s?(0,oO.jsx)(yO,{dataId:s,data:SO}):"9"===s?(0,oO.jsx)(yO,{dataId:s,data:TO}):"10"===s?(0,oO.jsx)(yO,{dataId:s,data:EO}):"11"===s?(0,oO.jsx)(yO,{dataId:s,data:CO}):"12"===s?(0,oO.jsx)(yO,{dataId:s,data:NO}):"13"===s?(0,oO.jsx)(yO,{dataId:s,data:AO}):"14"===s?(0,oO.jsx)(yO,{dataId:s,data:PO}):"15"===s?(0,oO.jsx)(yO,{dataId:s,data:DO}):"16"===s?(0,oO.jsx)(yO,{dataId:s,data:RO}):"17"===s?(0,oO.jsx)(yO,{dataId:s,data:OO}):void 0:(0,oO.jsx)(oO.Fragment,{children:(0,oO.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",zIndex:"2",alignItems:"center",backgroundImage:"url(".concat(KO,")")},className:bE.wrapper,children:[(0,oO.jsx)("button",{className:bE.BackBtn,onClick:l,id:"back",children:"Back"}),(0,oO.jsxs)("ul",{className:bE.container,children:[(0,oO.jsxs)("li",{children:[(0,oO.jsx)("div",{style:{maxWidth:"100%"},id:1,onClick:h,children:(0,oO.jsx)(hO,{name:"Go",dataSvg:LO})}),(0,oO.jsx)("div",{style:{maxWidth:"100%"},id:2,onClick:h,children:(0,oO.jsx)(hO,{name:"2",dataSvg:MO})}),(0,oO.jsx)("div",{style:{maxWidth:"100%"},id:3,onClick:h,children:(0,oO.jsx)(hO,{name:"3",dataSvg:FO})}),(0,oO.jsx)("div",{style:{maxWidth:"100%"},id:4,onClick:h,children:(0,oO.jsx)(hO,{name:"4",dataSvg:zO})})]}),(0,oO.jsxs)("li",{children:[(0,oO.jsx)("div",{style:{marginTop:"85px",maxWidth:"100%"},id:5,onClick:h,children:(0,oO.jsx)(hO,{name:"5",dataSvg:jO})}),(0,oO.jsx)("div",{style:{marginBottom:"60px",maxWidth:"100%"},id:6,onClick:h,children:(0,oO.jsx)(hO,{name:"6",dataSvg:VO})}),(0,oO.jsx)("div",{style:{maxWidth:"100%"},id:7,onClick:h,children:(0,oO.jsx)(hO,{name:"7",dataSvg:qO})})]}),(0,oO.jsxs)("li",{children:[(0,oO.jsx)("div",{style:{maxWidth:"100%"},id:8,onClick:h,children:(0,oO.jsx)(hO,{name:"8",dataSvg:UO})}),(0,oO.jsx)("div",{style:{maxWidth:"100%"},id:9,onClick:h,children:(0,oO.jsx)(hO,{name:"9",dataSvg:MO})}),(0,oO.jsx)("div",{style:{maxWidth:"100%"},id:10,onClick:h,children:(0,oO.jsx)(hO,{name:"10",dataSvg:jO})})]}),(0,oO.jsxs)("li",{children:[(0,oO.jsx)("div",{style:{maxWidth:"100%"},id:11,onClick:h,children:(0,oO.jsx)(hO,{name:"11",dataSvg:WO})}),(0,oO.jsx)("div",{style:{maxWidth:"100%"},id:12,onClick:h,children:(0,oO.jsx)(hO,{name:"12",dataSvg:MO})}),(0,oO.jsx)("div",{style:{maxWidth:"100%"},id:13,onClick:h,children:(0,oO.jsx)(hO,{name:"13",dataSvg:BO})}),(0,oO.jsx)("div",{id:14,onClick:h,children:(0,oO.jsx)(hO,{name:"14",dataSvg:FO})})]}),(0,oO.jsxs)("li",{children:[(0,oO.jsx)("div",{style:{maxWidth:"100%"},id:15,onClick:h,children:(0,oO.jsx)(hO,{name:"15",dataSvg:zO})}),(0,oO.jsx)("div",{children:(0,oO.jsx)(hO,{name:"16",dataSvg:BO})}),(0,oO.jsx)("div",{style:{maxWidth:"100%"},id:16,onClick:h,children:(0,oO.jsx)(hO,{name:"17",dataSvg:VO})})]})]})]})})},HO=function(e){var n=e.textData,r=e.goodText,i=v((0,t.useState)(""),2),a=i[0],o=i[1],u=v((0,t.useState)([{id:1,order:0,text:n.wordsOne},{id:2,order:1,text:n.wordsTwo},{id:3,order:2,text:n.wordsThree},{id:4,order:3,text:n.wordsFour},{id:5,order:4,text:n.wordsFive?n.wordsFive:""},{id:6,order:5,text:n.wordSix?n.wordSix:""},{id:7,order:6,text:n.wordSeven?n.wordSeven:""},{id:8,order:7,text:""},{id:9,order:8,text:""},{id:10,order:9,text:""},{id:11,order:10,text:""}]),2),s=u[0],c=u[1],l=v((0,t.useState)(null),2),h=l[0],f=l[1],d=v((0,t.useState)({order:"",text:""}),2),p=d[0],m=d[1],y=v((0,t.useState)({order:"",text:""}),2),g=y[0],_=y[1],k=r;(0,t.useEffect)((function(){console.log("text 1",p,"text 2",g,"list",s)}),[p,g,s]);var w=function(e){var t=e.target.id;console.log(t),o(t)},b=function(e,t){return e.order>t.order?1:-1},x=function(){var e=s.sort((function(e,t){return e.order-t.order})).reduce((function(e,t){return e+t.text}),"");e===k.join("")?console.log("Good"):(console.log("Incorrect"),console.log(e),console.log(k.join("")))};return"back"===a?(0,oO.jsx)(QO,{}):(0,oO.jsxs)(oO.Fragment,{children:[(0,oO.jsx)("button",{className:bE.BackBtn,onClick:w,id:"back",children:"Back"}),(0,oO.jsxs)("div",{className:bE.containteCard,children:[s.sort(b).map((function(e){return""===e.text?(console.log(e),null):(0,oO.jsx)("div",{onDragStart:function(t){return function(e,t){m(Ue(Ue({},p),{},{text:t.text,order:t.order})),console.log("card",t),f(t)}(0,e)},onDragLeave:function(e){return function(e){e.target.style.background="white"}(e)},onDragEnd:function(e){},onDragOver:function(e){return function(e){e.preventDefault(),e.target.style.background="#808080"}(e)},onDrop:function(t){return function(e,t){e.preventDefault(),console.log("card",t);var n=s.map((function(e){return e.id===t.id?Ue(Ue({},e),{},{order:h.order}):e.id===h.id?Ue(Ue({},e),{},{order:t.order}):e}));n.sort((function(e,t){return e.order-t.order})).map((function(e){return e.text})),c(n),_(Ue(Ue({},g),{},{text:t.text,order:t.order})),e.target.style.background="white"}(t,e)},draggable:!0,className:bE.card,children:e.text})})),(0,oO.jsx)("div",{className:bE.startBtnContainer,children:(0,oO.jsx)("button",{onClick:x,className:bE.startBtn,children:"Gooooo"})})]})]})},QO=function(){var e=v((0,t.useState)(""),2),n=e[0],r=e[1],i=v((0,t.useState)(""),2),a=i[0],o=i[1];(0,t.useEffect)((function(){localStorage.setItem("numberPage","DragAndDropLevels")}),[]);var u=function(e){var t=e.target.id;console.log(t),r(t)},s={wordsOne:"a",wordsTwo:"d",wordsThree:"m",wordsFour:"n"},c=["d","a","m","n"],l={wordsOne:"k",wordsTwo:"p",wordsThree:"i",wordsFour:"n"},h=["p","i","n","k"],f={wordsOne:"m",wordsTwo:"e",wordsThree:"h",wordsFour:"o"},d=["h","o","m","e"],p={wordsOne:"m",wordsTwo:"e",wordsThree:"h",wordsFour:"o",wordsFive:"i",wordSix:"s"},m=["h","o","m","i","e","s"];return"back"===n?(0,oO.jsx)(YO,{}):"1"===a?(0,oO.jsx)(HO,{textData:s,goodText:c}):"2"===a?(0,oO.jsx)(HO,{textData:l,goodText:h}):"3"===a?(0,oO.jsx)(HO,{textData:f,goodText:d}):"4"===a?(0,oO.jsx)(HO,{textData:p,goodText:m}):(0,oO.jsxs)(oO.Fragment,{children:[(0,oO.jsx)("button",{className:bE.BackBtn,onClick:u,id:"back",children:"Back"}),(0,oO.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100vw",height:"100vh",gap:"20px"},children:[(0,oO.jsx)("button",{id:"1",onClick:function(e){return o(e.target.id)},children:"Game number 1"}),(0,oO.jsx)("button",{id:"2",onClick:function(e){return o(e.target.id)},children:"Game number 2"}),(0,oO.jsx)("button",{id:"3",onClick:function(e){return o(e.target.id)},children:"Game number 3"}),(0,oO.jsx)("button",{id:"4",onClick:function(e){return o(e.target.id)},children:"Game number 4"}),(0,oO.jsx)("button",{id:"5",onClick:function(e){return o(e.target.id)},children:"Game number 5"}),(0,oO.jsx)("button",{id:"6",onClick:function(e){return o(e.target.id)},children:"Game number 6"})]})]})},YO=function(){var e=v((0,t.useState)(""),2),n=e[0],r=e[1];(0,t.useEffect)((function(){localStorage.setItem("numberPage","DragAndDrop")}),[]);var i=function(e){var t=e.target.id;console.log(t),r(t)};return"back"===n?(0,oO.jsx)(JO,{}):"1"===n?(0,oO.jsx)(QO,{}):(0,oO.jsxs)(oO.Fragment,{children:[(0,oO.jsx)("button",{className:bE.BackBtn,onClick:i,id:"back",children:"Back"}),(0,oO.jsxs)("div",{className:bE.containerForLevelButton,children:[(0,oO.jsx)("button",{id:"1",onClick:function(e){return r(e.target.id)},children:"Low Lavel"}),(0,oO.jsx)("button",{id:"2",onClick:function(e){return r(e.target.id)},children:"Medium Level"}),(0,oO.jsx)("button",{id:"3",onClick:function(e){return r(e.target.id)},children:"High Level"})]})]})},JO=function(){document.getElementsByTagName("body")[0].style.overflow="auto";var e=v((0,t.useState)(""),2),n=e[0],r=e[1],i=v((0,t.useState)(!1),2),a=i[0],o=i[1];(0,t.useEffect)((function(){localStorage.setItem("numberPage","pageOne")}),[]);var u=function(e){var t=e.target.id;console.log(t),r(t)},s=function(e){e.preventDefault(),o(e.target.alt),console.log(e.target.alt)};return(0,oO.jsx)(oO.Fragment,{children:"back"===n?(0,oO.jsx)(oL,{}):"Logo"===a?(0,oO.jsx)(GO,{}):"DragAndDrop"===a?(0,oO.jsx)(YO,{}):(0,oO.jsxs)("div",{children:[(0,oO.jsx)("div",{style:{display:"flex",textAlign:"center"}}),(0,oO.jsxs)("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap",justifyContent:"center",padding:"20px",verticalAlign:"middle",maxWidth:"100%"},children:[(0,oO.jsx)("button",{className:bE.BackBtn,onClick:u,id:"back",children:"Back"}),(0,oO.jsxs)("div",{style:{textAlign:"center",height:"100%"},children:[(0,oO.jsx)("p",{className:bE.name,children:"1 StepByStep"}),(0,oO.jsx)("div",{onClick:s,children:(0,oO.jsx)(cO,{alt:"Logo"})}),(0,oO.jsx)("p",{className:bE.blockCard,children:"lala"})]}),(0,oO.jsxs)("div",{style:{textAlign:"center",height:"100%"},children:[(0,oO.jsx)("p",{className:bE.name,children:"2 Drag and Drop"}),(0,oO.jsx)("div",{onClick:s,children:(0,oO.jsx)(cO,{alt:"DragAndDrop"})}),(0,oO.jsx)("p",{className:bE.blockCard,children:"Drag and Drop"})]}),lO.map((function(e,t){return(0,oO.jsx)("div",{style:{textAlign:"center",height:"100%"},children:(0,oO.jsx)("div",{style:{display:"flex",gap:"5px"},children:(0,oO.jsxs)("div",{children:[(0,oO.jsxs)("p",{className:bE.name,children:[t+3+" ",e.name]}),(0,oO.jsx)(cO,{url:e.url,onClick:s}),(0,oO.jsx)("p",{className:bE.blockCard,children:e.description})]})})},e.id)}))]})]})})},XO=function(e){var t=e.id,n=e.image,r=e.name,i=e.color;return(0,oO.jsx)("button",{className:bE.NavigationBtn,style:{backgroundImage:"url(".concat(n,")"),backgroundColor:i},id:t,children:r})};var $O=n.p+"static/media/bgButtonStars.b61c87c3fa0e483df0e1aa1298ea07ce.svg";var ZO=n.p+"static/media/bgButtonIdk.c7551e2ede4d0a6d5f65806514776fcd.svg";var eL=n.p+"static/media/bgButtonPurple.027a3b4331a04c68b2c98979d0f802d6.svg",tL=function(){return(0,oO.jsxs)(oO.Fragment,{children:[(0,oO.jsx)(XO,{id:"1",name:"Game",color:"red",image:$O}),(0,oO.jsx)(XO,{id:"2",name:"lecture",color:"blue",image:ZO}),(0,oO.jsx)(XO,{id:"3",name:"materials",color:"yellow",image:eL}),(0,oO.jsx)(XO,{id:"4",name:"Homework",color:"purple",image:$O}),(0,oO.jsx)(XO,{id:"5",name:"Setting",color:"tomato",image:ZO})]})},nL=function(e){var t=e.name;return(0,oO.jsx)("ul",{className:bE.burgerUl,children:(0,oO.jsx)("li",{className:bE.burgerLi,children:(0,oO.jsxs)("div",{className:bE.burgwrLink,children:[(0,oO.jsx)("span",{}),(0,oO.jsx)("span",{}),(0,oO.jsx)("span",{}),(0,oO.jsx)("span",{}),(0,oO.jsxs)("span",{style:{textAlign:"center"},children:[" lecture ",t]})]})})})},rL=function(){var e=v((0,t.useState)(""),2),n=e[0],r=e[1];(0,t.useEffect)((function(){localStorage.setItem("numberPage","Lecture")}),[]);var i=function(e){var t=e.target.id;console.log(t),r(t)};return"back"===n?(0,oO.jsx)(oL,{}):(0,oO.jsxs)(oO.Fragment,{children:[(0,oO.jsx)("button",{className:bE.BackBtn,onClick:i,id:"back",children:"Back"}),(0,oO.jsxs)("div",{className:bE.burgerContainer,children:[(0,oO.jsx)(nL,{name:"one"}),(0,oO.jsx)(nL,{name:"two"}),(0,oO.jsx)(nL,{name:"three"}),(0,oO.jsx)(nL,{name:"four"}),(0,oO.jsx)(nL,{name:"five"})]})]})},iL=function(e){var t=e.id,n=function(){localStorage.setItem("numberPage",""),window.location.reload()};return(0,oO.jsxs)(oO.Fragment,{children:[(0,oO.jsx)("div",{}),(0,oO.jsx)("div",{onClick:n,id:t,children:"Sign out"})]})},aL=function(){var e=v((0,t.useState)(""),2),n=(e[0],e[1]),r=v((0,t.useState)(!1),2),i=r[0],a=r[1];(0,t.useEffect)((function(){localStorage.setItem("numberPage","Setting")}),[]);var o=function(e){var t=e.target.id;console.log(t),a(!0)};return!0===i?(0,oO.jsx)(oL,{}):(0,oO.jsx)("div",{className:bE.settingContainer,children:(0,oO.jsxs)("div",{children:[(0,oO.jsx)("button",{className:bE.BackBtn,onClick:o,id:"back",children:"Back"}),(0,oO.jsx)("div",{className:bE.signOut,onClick:function(e){return n(e.target.id)},children:(0,oO.jsx)(iL,{id:"signOut"})})]})})},oL=function(){var e=v((0,t.useState)(""),2),n=e[0],r=e[1];(0,t.useEffect)((function(){localStorage.setItem("numberPage","NavigationBtn")}),[]);var i=function(e){var t=e.target.id;console.log(t),r(t)};return"1"===n?(0,oO.jsx)(JO,{}):"2"===n?(0,oO.jsx)(rL,{}):"5"===n?(0,oO.jsx)(aL,{}):(0,oO.jsx)(oO.Fragment,{children:(0,oO.jsx)("div",{onClick:i,style:{display:"flex",flexWrap:"wrap",width:"100vw",height:"100vh",alignItems:"center",justifyContent:"space-evenly"},children:(0,oO.jsx)(tL,{})})})},uL=Vy(It(iO));(function(e,t){return we(e).setPersistence(t)})(vT(),Gx).then((function(e){})).catch((function(e){console.log("sessionTime fun: ".concat(e," "))}));var sL=function(e){var n=v((0,t.useState)(!1),2),r=n[0],i=n[1],a=v((0,t.useState)(""),2),o=a[0],u=a[1],s=v((0,t.useState)(""),2),c=s[0],l=s[1],h=v((0,t.useState)(!1),2),f=h[0],d=h[1],p=(0,t.useRef)(""),m=(0,t.useContext)(hL).auth;(0,t.useEffect)((function(){var e=m.onAuthStateChanged((function(e){e?(d(!0),console.log(e)):d(!1)}));return function(){e()}}),[m]);var y=function(){var e=Te(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new tn.auth.GoogleAuthProvider,e.prev=2,e.next=5,m.signInWithRedirect(n);case 5:r=e.sent,i=r.user,console.log(i),d(!0),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("Error adding document or signInWithPopup is closed: ",e.t0),alert("Nooo");case 15:return e.prev=15,e.finish(15);case 17:case"end":return e.stop()}}),e,null,[[2,11,15,17]])})));return function(t){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){var e=m.onAuthStateChanged((function(e){e?(d(!0),console.log(e)):d(!1)})),t=function(){var e=Te(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.getRedirectResult();case 3:if(t=e.sent,!(n=t.user)){e.next=9;break}return e.next=8,c_(Ry(uL,"users"),{name:n.displayName,login:o||n.displayName,password:c||n.multiFactor.user.stsTokenManager.accessToken,email:n.email,phoneNumber:n.phoneNumber,accessToken:n.multiFactor.user.stsTokenManager.accessToken,photoURL:n.photoURL});case 8:console.log(n);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error getting redirect result: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return t(),function(){e()}}),[m,o,c]);var g=function(){var e=Te(be().mark((function e(t){var n,r,i,a,u,s,l;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.current,t.preventDefault(),""!==o&&""!==c||(n.style.display="inherit",setTimeout((function(){n.style.display="none"}),5e3)),e.prev=3,e.next=6,a_(Ry(uL,"users"));case 6:r=e.sent,i=r.docs,a=0;case 9:if(!(a<i.length)){e.next=25;break}if(u=i[a].data(),s=u.login,l=u.password,o!==s||c!==l){e.next=19;break}return d(!0),console.log("Success"),e.abrupt("break",25);case 19:n.style.display="inherit",setTimeout((function(){n.style.display="none"}),5e3),console.log("nee");case 22:a++,e.next=9;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(3),console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0447\u0442\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445:",e.t0);case 30:case"end":return e.stop()}}),e,null,[[3,27]])})));return function(t){return e.apply(this,arguments)}}();return(0,oO.jsx)(oO.Fragment,{children:r?(0,oO.jsx)(uO,{}):f||"NavigationBtn"===localStorage.getItem("numberPage")?(0,oO.jsx)(oL,{}):"pageOne"===localStorage.getItem("numberPage")?(0,oO.jsx)(JO,{}):"StepByStep"===localStorage.getItem("numberPage")||"StepByStepGame"===localStorage.getItem("numberPage")?(0,oO.jsx)(GO,{}):"Lecture"===localStorage.getItem("numberPage")?(0,oO.jsx)(rL,{}):"Setting"===localStorage.getItem("numberPage")?(0,oO.jsx)(aL,{}):"DragAndDrop"===localStorage.getItem("numberPage")?(0,oO.jsx)(YO,{}):"DragAndDropLevels"===localStorage.getItem("numberPage")?(0,oO.jsx)(QO,{}):(0,oO.jsxs)(oO.Fragment,{children:[(0,oO.jsx)("div",{className:bE.bgContainer,style:{backgroundImage:"url(".concat(aO,")")}}),(0,oO.jsx)("div",{className:bE.authContainer,children:(0,oO.jsxs)("div",{className:bE.auth,children:[(0,oO.jsx)("p",{className:bE.namePage,children:"Login in"}),(0,oO.jsx)("p",{ref:p,className:bE.errorRegister,children:"incorrect username or password"}),(0,oO.jsx)("input",{type:"email",name:"email",id:"email",placeholder:"Login",className:bE.login,value:o.trim(),onChange:function(e){return u(e.target.value)}}),(0,oO.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Password",className:bE.password,value:c.trim(),onChange:function(e){return l(e.target.value)}}),(0,oO.jsx)("button",{onClick:g,className:bE.loginInBtn,children:"Login in"}),(0,oO.jsx)("p",{style:{color:"#000",textAlign:"center"},children:"or"}),(0,oO.jsx)("button",{onClick:function(){return i(!0)},className:bE.createBtn,children:"Create account"}),(0,oO.jsx)("button",{onClick:y,className:bE.gmailBtn,disabled:!0,children:"Gmail"})]})})]})})};tn.initializeApp({apiKey:"AIzaSyB1mWqevmipidxWW264EnXV__YFdSkx93M",authDomain:"umka-77a72.firebaseapp.com",databaseURL:"https://umka-77a72-default-rtdb.firebaseio.com",projectId:"umka-77a72",storageBucket:"umka-77a72.appspot.com",messagingSenderId:"270019919476",appId:"1:270019919476:web:28ff114af689a2143bdb21"});var cL=tn.auth(),lL=tn.firestore(),hL=(0,t.createContext)(null);var fL=function(){return(0,oO.jsx)("div",{className:"App",children:(0,oO.jsx)(hL.Provider,{value:{firebase:tn,auth:cL,firestore:lL},children:(0,oO.jsx)(sL,{})})})};r.createRoot(document.getElementById("root")).render((0,oO.jsx)(fL,{}))}()}();
//# sourceMappingURL=main.6c498ed3.js.map